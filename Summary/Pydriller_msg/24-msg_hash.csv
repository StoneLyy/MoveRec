commit_id,msg
045efdd5ecc8773b3bf3dccbda6338f6d5076a93,"New repository initialized by cvs2svn.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315085 13f79535-47bb-0310-9956-ffa450edef68"
162649b707d5b28e7b7a4659fd2fdcd80c9c1ae8,"Initial revision


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315086 13f79535-47bb-0310-9956-ffa450edef68"
1fadce6daf07f633278d17ef766cf44c8a858507,"Initial revision


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315087 13f79535-47bb-0310-9956-ffa450edef68"
fccebd978a0ff4c06edc1598450a1dfdbf2682c5,"Fixed problem with characters callback for character entity refs. Was
only calling characters(char[],int,int) instead of obeying the
""sendCharDataAsCharArray"" property in callCharacters(int) method.
PR:
Obtained from:
Submitted by:
Reviewed by:	twl@apache.org


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315091 13f79535-47bb-0310-9956-ffa450edef68"
758185fa9cd36f751309793fb519de52d61019d7,"Status as of 11/15/1999
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315092 13f79535-47bb-0310-9956-ffa450edef68"
918201b86c11c883fb75fd859d52d4e9eddb8332,"Make encoding UTF-8
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315093 13f79535-47bb-0310-9956-ffa450edef68"
77a50a0c6acf464ac76543611b24d93807108b72,"Move call to setSendCharDataAsCharArray to fix null document handler handling
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315094 13f79535-47bb-0310-9956-ffa450edef68"
807cfa1ca58b75cd86d5c980cc676ae3f777c328,"Memory consumption and parsing performance improvements for DOM parsers.
The following changes were made:

  1) The free lists in the CharDataChunk and UTF8DataChunk were limited
     to a single chunk. Change made in order to allow garbage collection
     to reclaim memory in worst case scenario for deferred DOM impl.
     REVISIT: Should the size of the free list be fixed or dynamic?
  2) The Vector used to store the data in the NamedNodeMapImpl is only
     created when needed.
  3) The StringPool.toString() method was simplied. The try/catch block
     was removed and the StringPool.slowToString() method was inlined.

These changes give the following improvements:

  Xerces Deferred DOM implementation now compared to before:

     15% less memory used
    140% faster (explicit bounds checking is better than exceptions)

  Xerces Deferred DOM implementation compared to non-deferred impl:

     40% more memory required in deferred (the only downside)
     47% faster than the non-deferred DOM

Results may vary based on source file but is an all around improvement.
The Xerces DOM implementation is now faster than all measured DOM parsers.

PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315095 13f79535-47bb-0310-9956-ffa450edef68"
5bdea58497a19459520df150104232b2228eefbc,"First checkin.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315096 13f79535-47bb-0310-9956-ffa450edef68"
edcbc1a7a82710543abc9081fa0a05868f18370f,"Added package org.apache.xml.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315097 13f79535-47bb-0310-9956-ffa450edef68"
dc80376ea67a9e2f5680ea7ef14af33e5b95f0fc,"Added package org.apache.xml.serialize
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315098 13f79535-47bb-0310-9956-ffa450edef68"
973be346ddd98febeb3944f27fd875d7e14faa76,"Went ahead and created singleton empty node list instead of lazy
evaluating it. No big deal, really.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315099 13f79535-47bb-0310-9956-ffa450edef68"
4c937f6e046027010ead1c7d176ab28144815b06,"Improved memory consumption in Deferred DOM implementation.

The DOM parser can now parse and fully traverse the resulting
Deferred DOM document (the default) using less memory. The
benefit is that 20-25% less heap is needed for parsing and
traversing documents.

The extra time required for reference counting the nodes adds
a very small percentage to the overall time required for
parsing and traversing the document.

PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315100 13f79535-47bb-0310-9956-ffa450edef68"
09e04d548c50cfea85360ab7d0fa14ba87f3eabc,"Oops! Left a debugging boolean set to true. It only affected
the code compiled for output of some debugging tables by the
print() method, though.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315101 13f79535-47bb-0310-9956-ffa450edef68"
7c9a8facf0d666ad3780585a2ad1cce13df128e5,"First try of Ant makefile. It currently builds the xerces.jar file from all the source code.

Since Ant is not included here (to avoid duplication efforts), you should CVS-checkout the ""jakarta-tools"" module under taz.apache.org and install the required jar files in your classpath (see inside the file for more comments on how to use Ant for building).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315102 13f79535-47bb-0310-9956-ffa450edef68"
26a9bd7e96fca69437756c5183ccb4653ab88d91,"Added synchronized access to static fields.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315103 13f79535-47bb-0310-9956-ffa450edef68"
dc4982533e68aef01dfa5b464265a05e634098ef,"BaseSerializer should be public (I bet)...


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315104 13f79535-47bb-0310-9956-ffa450edef68"
b555ba2860a69e501390953bdfd0848d31603cc5,"Added isURI() check and added FRAME to list of empty elements.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315105 13f79535-47bb-0310-9956-ffa450edef68"
4d178339e79cd761e1ac5479a17c54f65f1bdd4a,"Accessing tagName through variable in serializeElement().
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315106 13f79535-47bb-0310-9956-ffa450edef68"
9c2607c5291776c23fc70d6b648c96cbcc9a0137,"No longer buffers the writer or output stream.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315107 13f79535-47bb-0310-9956-ffa450edef68"
ab57a4bcd3d731a1c64aceabab5fe0a5d245785f,"Added special case for SCRIPT/STYLE printing.
Added different escaping for URI attributes.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315108 13f79535-47bb-0310-9956-ffa450edef68"
4c7101b4a306e15aa51618b283bd870b0387f263,"Changed ""UTF8"" with standard ""UTF-8""


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315109 13f79535-47bb-0310-9956-ffa450edef68"
25f3d4e9990e7f5619931c8d142f19a0a927b59d,"Commented out reference to FOPSerializer.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315110 13f79535-47bb-0310-9956-ffa450edef68"
e67fbaf0265dcfbc11e3813a5b217fe971c634c5,"Fix threading bug exposed by Xalan. Proxy checkin for gmarcy@us.ibm.com
UTF8DataChunk: make fTempBuffer non-static, null fNextChunk in removeRef()
CharDataChunk: null fNextChunk in removeRef()
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315111 13f79535-47bb-0310-9956-ffa450edef68"
a29b2884be2c7086325fb285cea448e45e4f6028,"Turn off DOM error checking during construction of DOM tree
in FULL mode. This speeds up parsing/construction of the
tree by about 7 percent. Error checking is turned back on
before the document is queried by the user.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315112 13f79535-47bb-0310-9956-ffa450edef68"
7410c313ea7b166089c5fa264f6537995e4cfe98,"Allow parser to deal with data arriving on slow or bursty streams

Add architecture to allow readers to be created by a factory and
add plumbing to XMLParser to allow factories to be plugged in.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315113 13f79535-47bb-0310-9956-ffa450edef68"
67e9a387057f273051f86e974dd203dcf895bc4e,"Update status file
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315114 13f79535-47bb-0310-9956-ffa450edef68"
b37578d0e3d0fd37f6ebc918942a77d7cba2fbe8,"one more item
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315115 13f79535-47bb-0310-9956-ffa450edef68"
b78c63496feba4a2b537181cb05ad168bbcc698f,"Removed bogus getValue()


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315116 13f79535-47bb-0310-9956-ffa450edef68"
0a1c7e7ced74bd4170bb04b6f74aff0f5098a157,"First checkin.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315117 13f79535-47bb-0310-9956-ffa450edef68"
c0385b631b9aa483bfe36cf5d34fa2e5f03e630f,"Added org.w3c.dom.html to make


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315118 13f79535-47bb-0310-9956-ffa450edef68"
cf27bd5f69bc0de0d7a731cbe5d81827b0595f89,"First checkin


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315119 13f79535-47bb-0310-9956-ffa450edef68"
bf5a63287f388f854231d8eaa92cee734e80e33d,"Added html package


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315120 13f79535-47bb-0310-9956-ffa450edef68"
d8fc5728f5c97ec75fbcf370b1eec650e8beadbd,"Added org.apache.html.dom package


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315121 13f79535-47bb-0310-9956-ffa450edef68"
0f2a25bbf442af43e1e70763db6f8c3ea7f90564,"Added org.w3c.dom.html and org.apache.html.dom


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315122 13f79535-47bb-0310-9956-ffa450edef68"
626982cbbd308eff0beb0a740671282ac880293c,"moved the Xdocs here instead of the xml-site (that should not contain the original documents)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315123 13f79535-47bb-0310-9956-ffa450edef68"
40aab4db721783256e34f4af2a5a6f91776e4fbb,"Here it is, a full working build file for Xerces that does

- xerces.jar
- samples compilation
- docs creation thru stylebook
- javadocs creation
- distribution creation
- site regeneration

Enjoy!!!


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315124 13f79535-47bb-0310-9956-ffa450edef68"
a7fb40302658baae36aba19f0adf2d49c8c83f68,"Update documentation a little.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315125 13f79535-47bb-0310-9956-ffa450edef68"
535027ad44e842c527b8a188d0dbae11feafcabe,"Change version numbers for binary drop
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315126 13f79535-47bb-0310-9956-ffa450edef68"
7125cb60e941342cce18df71e73bb884cce1ba0b,"Minor datatype updates for new Working Draft
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315127 13f79535-47bb-0310-9956-ffa450edef68"
1ce78b909fbbac6d32f9ec33561f70ce45c66bec,"Sync up documentation.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315128 13f79535-47bb-0310-9956-ffa450edef68"
6bda924149a946affdf11f8aa9c2550586774a55,"Fix null pointer exception in XSchemaValidator when parsing textEntity
declarations.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315129 13f79535-47bb-0310-9956-ffa450edef68"
ea0024e451d14fd40f4cc744e6e86398fa510e69,"remove emacs backups from repository
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315130 13f79535-47bb-0310-9956-ffa450edef68"
d22ff585688344f9e286b8af675c4c7df5771197,"Update docs for 1.0.1
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315131 13f79535-47bb-0310-9956-ffa450edef68"
6a74bf56bcdd7d75a0097cb874f2bf1b41022748,"build changes for 1.0.1
packaging moves to .jar files, build docs in repository
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315132 13f79535-47bb-0310-9956-ffa450edef68"
730f2429fc4ab95230b403746c2de18d1ebb1b60,"add redirecting Readme.html
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315133 13f79535-47bb-0310-9956-ffa450edef68"
acc765fd25664563c7aadb41d9138712b3b0f40a,"Update docs for streaming character functionality
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315134 13f79535-47bb-0310-9956-ffa450edef68"
b655c36a7c6acc066438c888ca04b747ad2b2981,"New serializer API (Serializer, DOMSerializer, SerializerFactory).
Method and LineSeparator constants are separate classes, outside of OutputFormat.
Added TextSerializer.
Fixed bug in closing HTML elements in HTMLSerializer.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315135 13f79535-47bb-0310-9956-ffa450edef68"
9183c39ba73869d27940aa3d14f9ab0b1cd08519,"*** empty log message ***


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315136 13f79535-47bb-0310-9956-ffa450edef68"
655d0b0ee37b8d1beb1c3fa44e4854e9351d3e65,"Update the Namespaces impl and added support for other DOM Level 2 core
We should now match the match the W3C CR from 991210.
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315137 13f79535-47bb-0310-9956-ffa450edef68"
067216da8fc0e2a98ee01174b2e83d255b32c6d3,"Update the Namespaces impl and added support for all DOM Level 2 core
We should now match the match the W3C CR from 991210.
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315138 13f79535-47bb-0310-9956-ffa450edef68"
d852bbbda1449eccb02818b895e29c5d302aa566,"Update the Namespaces impl and added support for all DOM Level 2 core
We should now match the match the W3C CR from 991210.
Specifically for the FooParsers, we have added another callback
for the internal Subset as a string DOM2 addition: internalSubset(int);
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315139 13f79535-47bb-0310-9956-ffa450edef68"
e4758552b283996f74dfdddbf2af904b70999b8e,"Update the Namespaces impl and added support for all DOM Level 2 core
We should now match the match the W3C CR from 991210.
Specifically  we have added another callback
for the internal Subset as a string DOM2 addition: internalSubset(int);
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315140 13f79535-47bb-0310-9956-ffa450edef68"
d91c9203905f112298f2319c7552992df713519b,"Match the match the W3C CR from 991210.
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315141 13f79535-47bb-0310-9956-ffa450edef68"
ec89cb013f528e02871f100b252601f3d2528649,"Match the Dom Level 2 W3C CR from 991210.
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315142 13f79535-47bb-0310-9956-ffa450edef68"
1c21a1b517f17e8c7496b26d3af8c41897f36e81,"Bug:
previousNode (would only go down to the
last child of the previous sibling).

Fix:
Now it properly iterates downward through the l
ast children.

Thanks to:
Michel Benhamou <bmj01@club-internet.fr>

for finding the bug and giving the fix.

-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315143 13f79535-47bb-0310-9956-ffa450edef68"
9589dc6e2c783123e6f30a7eb271094d6c306e15,"Fix last minute boo boos'
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315144 13f79535-47bb-0310-9956-ffa450edef68"
b43d3f1f3d6533f5216aab2d1edd7f4af3bcdc41,"More datatype support
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315146 13f79535-47bb-0310-9956-ffa450edef68"
fadb685004639616cce4e576d964694f748c7f22,"Added missing include


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315147 13f79535-47bb-0310-9956-ffa450edef68"
07fc4f0f687d348babe22a518139509a9e6f6406,"can anyone tell me how something like this can find its way into the CVS?


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315148 13f79535-47bb-0310-9956-ffa450edef68"
c7f0a2907164b59a49fc28b50701086923d2da3e,"DOM Level 2 - small fixes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315149 13f79535-47bb-0310-9956-ffa450edef68"
36cce1738991b563acc8a6ac548d26583f8b17d9,"DOM Level 2 - upgraded org.w3c.dom Interfaces to:
W3C Candidate Recommendation 10 December, 1999
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315150 13f79535-47bb-0310-9956-ffa450edef68"
3ae1f927c28a42d730e6cda4df06c22fe2ddacad,"Remove JDK 1.2 dependency
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315151 13f79535-47bb-0310-9956-ffa450edef68"
cd6a4fd27d7e4070ba294adc95547545ce4c28ee,"DOM Level 2 - upgraded org.w3c.dom Interfaces to:
W3C Candidate Recommendation 10 December, 1999

Placed them in their proper place, and changed referring
imports.
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315152 13f79535-47bb-0310-9956-ffa450edef68"
b2784ea29bed4c6b9919ad2c6d26c20da34d7da6,"We do not support UI Events.
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315153 13f79535-47bb-0310-9956-ffa450edef68"
4a762891f5b4cbca5b11eb41b3a852b337043ab2,"Moving to org.w3c.dom
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315154 13f79535-47bb-0310-9956-ffa450edef68"
1fdf4a073381c44e8d11b6684426c187f6d8f2cc,"Slight mods related to Moving to org.w3c.dom
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315155 13f79535-47bb-0310-9956-ffa450edef68"
2b7431f146c701b652e3d40ac1680f0765a5beb1,"Off by one error caused an index out of bounds exception to
be thrown when the number of identifiers reached 64. The
code throwing the exception was checking to make sure that
the current element didn't have more identifiers but its
bound check was off by one.

This defect only affected the deferred dom mode of the
parser.

Thanks to John Flight <jflight@impresse.com> for the catch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315156 13f79535-47bb-0310-9956-ffa450edef68"
b16be280711fd9a6100fb3fac5615ec1870415e1,"Minor fixes
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315157 13f79535-47bb-0310-9956-ffa450edef68"
499d5cf640d64ce8e355561abb4cddbebe5dccec,"Ted is having a bad day.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315158 13f79535-47bb-0310-9956-ffa450edef68"
376dde3b1afc3cec7317ff1b3edef3c3bb872e4c,"changed to use w3c interfaces rather than domx ones.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315159 13f79535-47bb-0310-9956-ffa450edef68"
64d84920179eddd581aa4eb18e0a78931b9e78c3,"removed obsolete domx stuff


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315160 13f79535-47bb-0310-9956-ffa450edef68"
344faf25e4ff10cbd7d2a9c700a947877d1105ae,"Added feature so that user can decide whether or not ignorable
whitespace text nodes appear in the DOM tree. By default, the
text nodes are there and, thus, there appears to be no change
from current behavior.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315161 13f79535-47bb-0310-9956-ffa450edef68"
a74bbf918b02e57f09098b240c688a08b62392dc,"This file changed to reflect  org.w3c.dom.events and
org.w3c.dom.traversal


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315162 13f79535-47bb-0310-9956-ffa450edef68"
467e64b42bc16375c43e6506587ae9aca8f8294d,"fixed Makefiles regarding domx change, patch from Timm Sean, STimm@mailgo.com


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315163 13f79535-47bb-0310-9956-ffa450edef68"
9bd567d357f93e4e4f6246bf5a5d0359e79353eb,"Earlier, a bug related to multi-threading was fixed in the
UTF8DataChunk. A temp buffer was inadvertantly made static
with no associated synchronized access to the variable which
created the possibility of multiple thread each writing to
the temp buffer at the same time causing data corruption.

The solution to this previous problem was to remove the
static (which wasn't meant to be there in the first place).
However, this meant that each data chunk contained its own
16K temp buffer which added a lot of extra memory used
during parsing of files.

Upon further investigation, it was discovered that the temp
buffer was only used within one method so the variable was
returned to static and access to the method was synchronized
to provide multi-thread safety.

No noticeable performance penalties arise from the use of
synchronized so, for now, this seems like a good solution
to the memory problem.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315164 13f79535-47bb-0310-9956-ffa450edef68"
16ac91d55383f66d50245a30de72497ef14840fa,"Bugfixes from gtj@peakin.com:
1. Comment out calls to System.exit(1)
2. Fix reportSchemaError to keep it from swallowing exceptions
3. Correct bugs with integer subtype registration
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315165 13f79535-47bb-0310-9956-ffa450edef68"
4890cb25d16b06c7df32533c6c743d6e6e6c6085,"Misapplied patch - omitted a throws clause
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315166 13f79535-47bb-0310-9956-ffa450edef68"
c8fd6888838a00c647519ddc4d6907dc19ff253c,"Allow StringValidator to validate maxLength and enumeration
facet contraints.

This patch from gtj@peakin.com, slightly re-arranged.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315167 13f79535-47bb-0310-9956-ffa450edef68"
4789a83bcc58aff9e391fa3582cf264b176e2f7f,"Added changes to allow caching of node children length and
quicker access to individual items in the children NodeList.
For example, the following loop will see a huge performance
boost:

  for (int i = 0; i < children.getLength(); i++) {
    Node child = children.item(i);
  }


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315168 13f79535-47bb-0310-9956-ffa450edef68"
19e9d9a847966d9dc48192b9d2c6ce5019ebc50d,"Changed NodeImpl to not accept any children,
added a new class, NodeContainer, which inherits from NodeImpl to add the
capability of having children.
This makes leaf nodes, such as Text nodes, smaller, leading to a smaller
foot print.
Changed AttrImpl, DocumentFragmentImpl, DocumentImpl, DocumentTypeImpl,
ElementImpl, ElementDefinitionImpl, EntityImpl, EntityReferenceImple,
to inherit from NodeContainer.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315169 13f79535-47bb-0310-9956-ffa450edef68"
ee90fae41e49b6e0260a5d68a61f1186e1367baf,"Prevents indentation when preserving white spaces; fixes null pointer exception in printing URL


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315170 13f79535-47bb-0310-9956-ffa450edef68"
2a1668a30fcef91dc0ba7e5e3b8885b36f5cc187,"Empty cell no longer created when adding a row


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315171 13f79535-47bb-0310-9956-ffa450edef68"
7e4d2411210ed19c0058bd314bece6785b36b62e,"changed AttrImpl and ElementImpl not to support namespaces,
added AttrNSImpl and ElementNSImpl which inherit from them and add support
for namespaces.
changed DocumentImpl to instantiate the appropriate class of Element and
Attr, depending on whether namespace support is needed.

changed DeferredAttrImpl and DeferredElementImpl not to do anything with
namespaces.
added DeferredAttrNSImpl and DeferredElementNSImpl, which inherit from
AttrNSImpl and ElementNSImpl and deal with namespaces.
changed DeferredDocumentImpl to instantiate the appropriate class of
DeferredAttr and DeferredElement depending on whether namespace support is
needed.

This way, one only pays the price in memory, for supporting namespaces,
when needed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315172 13f79535-47bb-0310-9956-ffa450edef68"
f4cb21d45e88907e63ac565fc722a4c7b00bfc5f,"Multiple CDATA sections now print as one.
Serializer now complains about not setting the writer.
Fixed indentation in whitespace preserving elements.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315173 13f79535-47bb-0310-9956-ffa450edef68"
f05c07c27dd5a17ee38120938c421bb6a6f3d42f,"This patch courtesy of gtj@peakin.com:

Allow lookup of schema to be overridden by an installed EntityResolver.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315174 13f79535-47bb-0310-9956-ffa450edef68"
da9694407fb1dbbafdad05e9fd782058aa85dc7c,"Prints public/system identifier based on document type.
No longer prints DOM entities as internal subset.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315175 13f79535-47bb-0310-9956-ffa450edef68"
5cce10feddbc2b172a85111a53b1ddabd8dbfacd,"Fixed problem with CData section not closing when recycling element state.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315176 13f79535-47bb-0310-9956-ffa450edef68"
606e0c1a810dc5bfd2d388e5335cc687d2e8c7ed,"post 1.0.1 version
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315177 13f79535-47bb-0310-9956-ffa450edef68"
690490c8058450b7fa645de7ca7b6023cc3fea73,"fixed hasFeature():
if version is null supporting any version returns true,
we support MutationEvents


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315178 13f79535-47bb-0310-9956-ffa450edef68"
f783bfa26102086eb8d6bd583fd2f6e8e4b8a534,"fixed localName setting in case there is no prefix


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315179 13f79535-47bb-0310-9956-ffa450edef68"
4a62a89e68628a9baeab9deb2cc25ee672d608a5,"first drop


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315180 13f79535-47bb-0310-9956-ffa450edef68"
eefeee08dfaf389ffb15e374fdbff4b5690f84b6,"taken from xerces/c and converted to Java


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315181 13f79535-47bb-0310-9956-ffa450edef68"
880e8d7a13383ae051219b09d31ce685ce93cbad,"quick hack (but nice ;-) to have basic assertion support


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315182 13f79535-47bb-0310-9956-ffa450edef68"
46b8f2c0b1c1699fd0405e71fba591d3e8ada407,"added new tests from DOMMemTest.cpp


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315183 13f79535-47bb-0310-9956-ffa450edef68"
9b961f262bda57169736b7ee41f9abba6aa8399d,"made methods static,
allowed calling stack to have more than 1 level


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315184 13f79535-47bb-0310-9956-ffa450edef68"
096175aaa1480a3104c0f10911636381c07e8cb1,"change constructor to treat an empty string as a null for namespaceURI


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315185 13f79535-47bb-0310-9956-ffa450edef68"
881d54bed0bb3f40767ce7d2714bb67144c65827,"fixed namespace support


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315186 13f79535-47bb-0310-9956-ffa450edef68"
8d67e3f258c14ceeb4db0fa88a6b4f1273bfdfd0,"empty strings for namespaceURIs are treated as nulls


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315187 13f79535-47bb-0310-9956-ffa450edef68"
26898a600ead0772d87ecba5f3fbf2fec9e93400,"fixed getLocalName


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315188 13f79535-47bb-0310-9956-ffa450edef68"
1145847279b4361c8e968c2daca33aafff87c909,"got rid of namespace related methods that are actually
 inherited from NodeImpl


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315189 13f79535-47bb-0310-9956-ffa450edef68"
0808cadb9c21dd9a5935c31cc6dc432bc3fc2190,"Fix typos and refer to ""sample applications"" not ""sample parsers""
Thanks to keshlam@us.ibm.com
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315190 13f79535-47bb-0310-9956-ffa450edef68"
05663574537e200b73fa9050aba89a0ca2692d24,"implemented latest change from DOM Level 2 spec


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315191 13f79535-47bb-0310-9956-ffa450edef68"
8d23c9f7939f538dc62c6b0d5021d8c6b65275b7,"implemented latest change from DOM Level 2 spec


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315192 13f79535-47bb-0310-9956-ffa450edef68"
9d463cb66050e3b0db8a66e190304d21487e3649,"implemented latest change from DOM Level 2 spec


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315193 13f79535-47bb-0310-9956-ffa450edef68"
6900fc05b01b18b7e01f937374d481768b2a2552,"another change related to the latest changes in the DOM spec


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315194 13f79535-47bb-0310-9956-ffa450edef68"
b267c927b75466b110182d448e02ad9c94410d83,"Correct case sensitive filename for README file
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315195 13f79535-47bb-0310-9956-ffa450edef68"
e53af195cbfb43ae3c1b1f9cbfc00b153a3e84e0,"Changes to build.xml to produce the same output that the makefiles do.

We are not quite ready to switch to ANT due to a bug running javadoc2.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315196 13f79535-47bb-0310-9956-ffa450edef68"
35999cc5328682be80b60f5417d87725a7c4c72b,"sorted list of class files


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315197 13f79535-47bb-0310-9956-ffa450edef68"
4650458557962ae93b637b813d399835ba96b712,"Get version number ready for 1.0.2
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315198 13f79535-47bb-0310-9956-ffa450edef68"
2c78fec25777a22f65f0a93bf6fe7114a57c4fb4,"Update docs for 1.0.2
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315199 13f79535-47bb-0310-9956-ffa450edef68"
5a722d6d9abbf920d43c5638c2caa234ea8c9ea7,"add migration faq
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315200 13f79535-47bb-0310-9956-ffa450edef68"
1d6398917c82b62caf044dcdc9bae183fb96c7f0,"committed George T. Joseph contribution


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315201 13f79535-47bb-0310-9956-ffa450edef68"
14b906702713116591b1be03ec800eb7f6fa814f,"Added time datatypes for George T. Joseph changes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315202 13f79535-47bb-0310-9956-ffa450edef68"
463d3fd0c658516a68a05b5e45fe3615b36d9ce0,"Added Time datatypes to makefile


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315203 13f79535-47bb-0310-9956-ffa450edef68"
9514f496d354ab6ed13e2e53ab8ace833e08e6bf,"update README to include License info
update FAQs on creating a parser to match current architecture
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315204 13f79535-47bb-0310-9956-ffa450edef68"
63dbdb51482de7d3755745958ae326365e9d7e26,"Fixed bug in ChunkyByteArray that was being manifested by
parsing large UTF-16 files. The ChunkyByteArray holds
character data for the readers. This data is stored in an
array of chunks. No checks were in the code to resize the
array of chunks when needed. Therefore, large files would
expose this bug -- files larger than 64 * 16K.

REVISIT: So this brings up the question about whether we
need to hold onto *all* of the chunks in the byte array.
It may be possible to reuse only one chunk. This should
be looked at again after the upcoming release.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315205 13f79535-47bb-0310-9956-ffa450edef68"
d392d73ec9e28cc6d26a16d6246d27274e54d398,"The NodeIteratorImpl.java and the TreeWalkerImpl.java are
being moved from the dom.traversal package/dir up to the dom
package/dir.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315206 13f79535-47bb-0310-9956-ffa450edef68"
09367c73fff6140cebb2b88c62d51446f09aaceb,"The NodeIteratorImpl.java and the TreeWalkerImpl.java are
being moved from the dom.traversal package/dir up to the dom
package/dir.

The Makefiles and samples need to reflect this also.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315207 13f79535-47bb-0310-9956-ffa450edef68"
8f5b293ab8c0ece33fd3e78dd25366c8511fb053,"The NodeIteratorImpl.java and the TreeWalkerImpl.java are
being moved from the dom.traversal package/dir up to the dom
package/dir.

The Makefiles and samples need to reflect this also.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315208 13f79535-47bb-0310-9956-ffa450edef68"
654b596c9bc7094b0cff28e66e4f4f859c2b03cf,"moved one level up


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315209 13f79535-47bb-0310-9956-ffa450edef68"
815cb42d5e3420044b7c10bf3f78edd8224cad07,"traversal Impl classes moved one level up


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315210 13f79535-47bb-0310-9956-ffa450edef68"
95efd1f84995cd835b10675ed63099197ae2372e,"The only way to deregister a NodeIterator is now through
proper DOM2 API, NodeIterator.detach().


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315211 13f79535-47bb-0310-9956-ffa450edef68"
ce48bfc4d2c6cb247b8e31c5a9ee1775376ef411,"changelog for 1.0.2
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315212 13f79535-47bb-0310-9956-ffa450edef68"
26349fb773618ce65dfdb74b8141ebef7a8f3ea0,"Fixed invalid DTD.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315213 13f79535-47bb-0310-9956-ffa450edef68"
07a98f21698227748760a18e5318b6bc60318d21,"An enumeration of allowed version numbers is better than CDATA.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315214 13f79535-47bb-0310-9956-ffa450edef68"
813bb4c35ae53a1c7bd39906dae953cc41943ad3,"Javadoc update from @see BaseSerializer to @see BaseMarkupSerializer.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315215 13f79535-47bb-0310-9956-ffa450edef68"
20b9d6d6fef78e1114e0943ad542c0dd78f32f85,"Adding new docs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315216 13f79535-47bb-0310-9956-ffa450edef68"
3aa52198b23696d8b08fb1e4bdc4290f82769e1d,"Add the DOM Level 2 org.w3c.dom.range Range Interfaces


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315217 13f79535-47bb-0310-9956-ffa450edef68"
925f503d2ae04e84298a9831f5632c173481096f,"Checkin the initial  DOM Level 2 Range Implementation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315218 13f79535-47bb-0310-9956-ffa450edef68"
b090e3cf2e610a487f023e343fb9a4f78dbf8f92,"Updating docs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315219 13f79535-47bb-0310-9956-ffa450edef68"
0f7cda2eee2cbb7d7b5cd1d0af246957acf613c7,"Checkin the initial  DOM Level 2 Range Interfaces and
Implementation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315220 13f79535-47bb-0310-9956-ffa450edef68"
da4af79d036f1b8e764285ba0b90996ff633c227,"all namespace declaration attributes are now bound to the predefined
namespaceURI http://www.w3.org/2000/xmlns/
prefixes are normalized to null when they are an empty string


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315221 13f79535-47bb-0310-9956-ffa450edef68"
364bd900f724d46ba7628291448c891a9b8a5de2,"Checkin the initial RangeText


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315222 13f79535-47bb-0310-9956-ffa450edef68"
b2e48f2c71be4267fc3875f078c647daf83d955f,"Docs update.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315223 13f79535-47bb-0310-9956-ffa450edef68"
e1f4962d7cc3c13fb5b6184ab60c9231121f5c47,"Docs update.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315224 13f79535-47bb-0310-9956-ffa450edef68"
b54e775294ca0344b00458a82cfa775c6699196c,"Checkin the initial RangeText


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315225 13f79535-47bb-0310-9956-ffa450edef68"
8a302474cb76475afc0393c3c1e7f7591c65aae8,"Update Schema & Datatypes syntax to 12/17 Working Draft
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315226 13f79535-47bb-0310-9956-ffa450edef68"
255bdeaf57f794e94b2647886e1d60a13c9991e0,"all namespace declaration attributes are now bound to the predefined
namespaceURI http://www.w3.org/2000/xmlns/


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315227 13f79535-47bb-0310-9956-ffa450edef68"
e208b5880537723b40eb6661602aadb176e96aab,"Fix line break in cp command
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315228 13f79535-47bb-0310-9956-ffa450edef68"
7e5ced29e0b01a2b22f7325d850b70ef16824a06,"Added gtj@peakin.com's patches for annotation handling
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315229 13f79535-47bb-0310-9956-ffa450edef68"
d8287125754c516a5e903cc564d0d223f2b2906f,"1) JAR files contained META-INF directory. Removed.
2) JAR files missing license information. Added.
3) docs/ directory contains CVS directory. Removed.
4) XML docs in binary distribution. Moved to source distribution.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315230 13f79535-47bb-0310-9956-ffa450edef68"
8d4ab8d0f7c729e77602d00e3ce53cb4ef8e3e24,"A copy of the LICENSE file must be in the java directory for
the build process. Updated Makefile to copy this LICENSE file
into the jars.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315231 13f79535-47bb-0310-9956-ffa450edef68"
d84834ba8fd0e22d872630936987224651676646,"ANT build file included in packaging. Removed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315232 13f79535-47bb-0310-9956-ffa450edef68"
b0def53e1787e994046619470fe9af0508716dc8,"XML Schema validator added an entity file that must be copied
during build process.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315233 13f79535-47bb-0310-9956-ffa450edef68"
09af85675d0f8e45ee003cbcf579af05a9627c3a,"License link broken. Fixed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315234 13f79535-47bb-0310-9956-ffa450edef68"
07e21a57ddfbdcf9eaa2077807387657a4108cfe,"1) Creating DOM and SAX parser FAQ item was wrong. Fixed.
2) Modified entity, javaparserdirectory, to match.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315235 13f79535-47bb-0310-9956-ffa450edef68"
05632b8c819f8c808367c08822d8eeb4b3819115,"CDATA no longer printed in HTML.
Fixed indentation for TD/A elements, which caused Netscape to misbehave.
Fixed bug in handling closing tag in HTML.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315236 13f79535-47bb-0310-9956-ffa450edef68"
8fc61db9fc7f26258fa18b54a2da209151c83637,"Added support for boolean attributes in certain HTML elements.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315237 13f79535-47bb-0310-9956-ffa450edef68"
3c5923c8501410f169ee4415ab6b9689c69dfcd7,"Added TH as a cell element.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315238 13f79535-47bb-0310-9956-ffa450edef68"
8e71564a8690482b3aae1c5d5d05587cf959ff8e,"Off by 1 error in the DeferredDocumentImpl caused an
ArrayIndexOutOfBoundsException to occur if the number
of identifiers was equal to the size of the identifier
index array.

This problem was reported by Karen Schuchardt
<kl_schuchardt@pnl.gov> and resolved with the help
(and persistence) of George Joseph <gtj@peakin.com>.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315239 13f79535-47bb-0310-9956-ffa450edef68"
e8c62d4dcab1a5165d33a43542882767827be0ab,"List Bundle message for localized exception errors and warning


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315240 13f79535-47bb-0310-9956-ffa450edef68"
5138cffe9d05788f7a70a6a2b7132950608dfa73,"added ExceptionMessages to makefile - localize error message from Exceptions


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315241 13f79535-47bb-0310-9956-ffa450edef68"
66a341790c45307fc8d092e056c3a02d62acd3db,"changed exception messages for NLS


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315242 13f79535-47bb-0310-9956-ffa450edef68"
0f36ff006d0a504ade673f267cbc809643f7ee22,"added messages for:
 org.apache.html, org.apache.xml.serialize, and org.apache.xerces.dom


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315243 13f79535-47bb-0310-9956-ffa450edef68"
6f0f10c2d6891b4bb25770754803cc3035e4d3e6,"reader exception messages


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315244 13f79535-47bb-0310-9956-ffa450edef68"
63664fa4a8d233a30594cc25c96ee5d9c4bbef7d,"fixed minor typo


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315245 13f79535-47bb-0310-9956-ffa450edef68"
d9329264c8e262a6e6c2d43a1f3e9627673e1a3c,"printStackTrace Only when debugging
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315246 13f79535-47bb-0310-9956-ffa450edef68"
9178b5af3ca6ec0ed1fcf00f845bc5a9f9905dc0,"Localized exception message


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315247 13f79535-47bb-0310-9956-ffa450edef68"
e039e0fa7b989d37a291871d0b8b00026e4cbd77,"Localize ExceptionMessages for org.apache.xerces.utils


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315248 13f79535-47bb-0310-9956-ffa450edef68"
62c30cd8194a89949fb5812f28d030193068ba03,"Exception messages for org.apache.xerces.validators


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315249 13f79535-47bb-0310-9956-ffa450edef68"
cf159d9edeaccd401240937af3a9ec87c663afff,"New files required by SAX2beta.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315250 13f79535-47bb-0310-9956-ffa450edef68"
72a61d946bfe8cda575ac74bb6755ead6cbbc04b,"Modifications for SAX2beta.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315251 13f79535-47bb-0310-9956-ffa450edef68"
461c1be845fb45ad21a6e62e0e3d7e278d8b3782,"Makefile updates for SAX2beta.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315252 13f79535-47bb-0310-9956-ffa450edef68"
d7ee1cf2156fd0b688aebee3a199e9c7227b9c27,"Updates for SAX2beta.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315253 13f79535-47bb-0310-9956-ffa450edef68"
27d636ba4f7115e3cdf4d536e593fb731345fa2d,"Removing old files for SAX2beta.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315254 13f79535-47bb-0310-9956-ffa450edef68"
cdcf01af55694b7820a2f393967f37d62b7fac93,"Added SAX2 interfaces, no support yet


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315255 13f79535-47bb-0310-9956-ffa450edef68"
4a7198cbd7944dfa0981422c3712ba99e4610391,"Comments


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315256 13f79535-47bb-0310-9956-ffa450edef68"
ec360b1fad8f86485f74424307415f3a49a9ba59,"Updated to include localized Messages for FWK, and PAR.
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315257 13f79535-47bb-0310-9956-ffa450edef68"
4459934406675707957bf463ef2531c12fe5e99b,"Fixes name lookup to be case insensitive


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315258 13f79535-47bb-0310-9956-ffa450edef68"
a81f7245bac63f2c950a0ebc53835f8b5c223ab2,"Updated to include localized ExceptionMessages.
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315259 13f79535-47bb-0310-9956-ffa450edef68"
698495a36503a2295ba1e53671e923e1664f43b6,"Updated to include localized ExceptionMessages.
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315260 13f79535-47bb-0310-9956-ffa450edef68"
66677cb04fecfe1c26e8ea404ae98ce8582857e1,"Bug in SAX2beta helper class, NamespaceSupport, that made
it depend on Java 2.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315261 13f79535-47bb-0310-9956-ffa450edef68"
795f72f7b7d29ebbd88fd969c7aa70cb6ec9b858,"Oops! Neglected to remove import statement for old SAX2
Configurable interface.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315262 13f79535-47bb-0310-9956-ffa450edef68"
ea001b8ed33cc5705e37cb171dfecaddcf4395f7,"get rid of duplicate string messages


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315263 13f79535-47bb-0310-9956-ffa450edef68"
36e7266ce60cb6d29dc052e22397d43cc2bf6134,"Get rid of extra messages info


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315264 13f79535-47bb-0310-9956-ffa450edef68"
0f2d77f0466b2edbf95fb0d7b590c9d0aebe5569,"Updated to include localized ExceptionMessages.
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315265 13f79535-47bb-0310-9956-ffa450edef68"
025bcce7709217c25f4631227395934c99a74be6,"A utility class to  localize ExceptionMessages.
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315266 13f79535-47bb-0310-9956-ffa450edef68"
5aaa985b0014d3bc51e04d9c8e64b835f5e842f8,"Add utility class to  localize ExceptionMessages.
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315267 13f79535-47bb-0310-9956-ffa450edef68"
0c12a3e46f10503f2e43a5b77a6a5b5df4c5e3b4,"Stray import from old SAX2 remained even though it was never
used.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315268 13f79535-47bb-0310-9956-ffa450edef68"
b16da0e7b1e9d654d5fb93f2d079f910b7d5daa2,"Spaces instead of tab characters. Also, don't want the
ExceptionMessageLocalizer in the build until approved.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315269 13f79535-47bb-0310-9956-ffa450edef68"
5eabc791deb331f331fc1c9c0893c2b888a26805,"Some SAX2beta features are read-only during parser.
Added code to check this and throw SAXNotSupportedException
as appropriate.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315270 13f79535-47bb-0310-9956-ffa450edef68"
17d89c71736a040cb6b1abd271c894f36906b47f,"Update change log.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315271 13f79535-47bb-0310-9956-ffa450edef68"
c6ee26aa590557e0f67408b1fbb8cb4696550986,"Added support for Ranges fix-up when Text Nodes are split
(currently can happen from  insertNode)
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315272 13f79535-47bb-0310-9956-ffa450edef68"
b5012676a8af216de6c7b77cce91c0e3dfa10ff3,"Configurable still in the Makefile. Removed.
Thanks to Sven Reimers <reimers@tu-harburg.de> for the catch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315273 13f79535-47bb-0310-9956-ffa450edef68"
baca3f109d202306d7e68de554dde97808a940bf,"Change required by SAX2beta.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315274 13f79535-47bb-0310-9956-ffa450edef68"
61964428cc7e13b7f94ea9d69681c3a1f526b070,"Make changes to revert to creating ZIP files for distribution.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315275 13f79535-47bb-0310-9956-ffa450edef68"
dfa51b32a49ce96b79de126d41fce1cc36c5e186,"Missing close LI element.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315276 13f79535-47bb-0310-9956-ffa450edef68"
5f511f461ca4a5db2ddc271951cde9045ea46af5,"null is a valid value of doctype parameter in createDocument


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315277 13f79535-47bb-0310-9956-ffa450edef68"
f4443381e5cf861f072ddc35320115933a75c1a4,"changed (again) to get in line with new spec to come


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315278 13f79535-47bb-0310-9956-ffa450edef68"
0ac03e2a81132af5d9461b827a65ae9f0d9b6641,"spec to come says getAttributeNS returns null when attribute
is not set. Unlike getAttribute!


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315279 13f79535-47bb-0310-9956-ffa450edef68"
75897d7a2cd6f262aaa9c4668e929e6b050c3281,"fixed previous change


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315280 13f79535-47bb-0310-9956-ffa450edef68"
318ccdb1a4ead617c0d81e75ccbaa127419b10cc,"added Apache software license to this package


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315281 13f79535-47bb-0310-9956-ffa450edef68"
d25e6ac8b250f8038dbaffe1ffea3a5758fd6afb,"changed to avoid NullPointerException on xmlns attributes (oops!)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315282 13f79535-47bb-0310-9956-ffa450edef68"
92b7b3d837e64d02444e70b8a03d9640c901df07,"fixed constructor and store given namespaceURI


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315283 13f79535-47bb-0310-9956-ffa450edef68"
1ff6bb68e6e84f86fd56095b4abb62f376bb8d26,"modified handling of namespace declaration attributes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315284 13f79535-47bb-0310-9956-ffa450edef68"
73d6b6337277dfe7d391bd5e9d7abd88469c1feb,"added special handling of namespace declaration attributes,
in the deferred case this is handled by DeferredAttrNSImpl


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315285 13f79535-47bb-0310-9956-ffa450edef68"
8ff3ea0cd96c841f07adbba43ff96ccfefc92479,"These samples no longer refer to any *Impl classes, just generic
org.w3c.dom Interfaces.
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315286 13f79535-47bb-0310-9956-ffa450edef68"
f4056ab0c110f1e87604746e228ee5f7c006c7cd,"made various improvements


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315287 13f79535-47bb-0310-9956-ffa450edef68"
48c11882241d6f751167ede1823db71cf858f7d7,"changed to use Assertion class so that problems are easier to spot


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315288 13f79535-47bb-0310-9956-ffa450edef68"
d97ea7cd35063403f088467ab70b9145386dbb33,"Improve reporting of IDREF VC violations
Patch due to gtj@peakin.com
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315289 13f79535-47bb-0310-9956-ffa450edef68"
fd893070f1eeb4b710c1c97cedbd5558567648ca,"snapshot jar files to make xerces build independent of other modules


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315290 13f79535-47bb-0310-9956-ffa450edef68"
f658aa9cbf4e6089dd2ca6f82f3554ed476bf657,"revamped all makefiles so that build can be done by simply
typing make, without having to set any variables


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315291 13f79535-47bb-0310-9956-ffa450edef68"
a871c37d63e130a7a08855aa1ee02ee66f3e78b3,"no longer needed


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315292 13f79535-47bb-0310-9956-ffa450edef68"
7887c91cbffe62368e15f15623a4824bc0c332d8,"Added parallel samples to show use of SAX2 ContentHandler.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315293 13f79535-47bb-0310-9956-ffa450edef68"
5af7b3e06b36bad2baf5b40c6cafbca6fe6bb8b7,"fixed typo


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315294 13f79535-47bb-0310-9956-ffa450edef68"
6c99c71906822efe15f183008e17481d167770d0,"Needed by SAX2Count/Writer.java


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315295 13f79535-47bb-0310-9956-ffa450edef68"
469d3e4d72d409ab4a838a7016036b611ee7a1ce,"Meow.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315296 13f79535-47bb-0310-9956-ffa450edef68"
a44fb264544ef2fb70e5a3289ac83c1b54b8b11f,"use user's CLASSPATH if there is one


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315297 13f79535-47bb-0310-9956-ffa450edef68"
56d769a4eee00be88bcbdcc870d977ecbdbff5b1,"BuildAll BuildAll.bat have been removed


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315298 13f79535-47bb-0310-9956-ffa450edef68"
f0042bcf98a94721d8471110c88605d77b42a008,"another small fix regarding Makefiles


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315299 13f79535-47bb-0310-9956-ffa450edef68"
2b5899839fc237971769dc73aecd992246be62f3,"one more change (last one?) to make xerces self-contained


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315300 13f79535-47bb-0310-9956-ffa450edef68"
20d347510b85c601a6c867b01e5dd53b01c9fada,"Fixed recursion problem that lead to getRows() finding rows inside nested tables.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315301 13f79535-47bb-0310-9956-ffa450edef68"
57ee656d401e6a0e541b79a7b35655cf2168f267,"Added SAX2 support (ContentHandler) and namespace handling.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315302 13f79535-47bb-0310-9956-ffa450edef68"
3ca0778748f27f6784b9ac470eaa495cd7675bcf,"Update grammar access in order to read a DTD grammar and
represent it as XML Schema syntax (Dec WD). These changes
do not imply that the parser can correctly process that
Schema grammar, though.

The XML Schema support in the parser is experimental --
as is the grammar access. Expect bugs. Please help in
locating and fixing them.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315303 13f79535-47bb-0310-9956-ffa450edef68"
5fbb4eefefb4485a64aef79611cdd33261be7a34,"yet another attempt at making xerces self-contained:
until stylebook is upgraded to be SAX2 aware it requires xerces-1.0.1


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315304 13f79535-47bb-0310-9956-ffa450edef68"
7f7d3e5fe50a9d3208d0c96d857d7bb9b0310a4d,"fixed a bug:
for JAR var to be shareable flags must only be specified when instanciated


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315305 13f79535-47bb-0310-9956-ffa450edef68"
253abfe059c2370e2e22912329d02d6f85b9e292,"Update properties and features for SAX2beta.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315306 13f79535-47bb-0310-9956-ffa450edef68"
12d0234f47c7c2947a03e34cac63682c048fabdf,"changed to work with various versions of cygwin


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315307 13f79535-47bb-0310-9956-ffa450edef68"
daa5023574b591d87d2aa25913e1bd6d2f702fc1,"Sync'd the DTD and Schema grammars.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315308 13f79535-47bb-0310-9956-ffa450edef68"
7d0fc9e0b42d9aa1cfffc52353095da9acc4e071,"Som changes for SAX2
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315309 13f79535-47bb-0310-9956-ffa450edef68"
ca60fc98d3e2db15fe101a8d22c0d8c43082c789,"Som changes for SAX2
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315310 13f79535-47bb-0310-9956-ffa450edef68"
8c925bb13ed6b601721e8302f9e44f5154c3ef94,"Finally fixed the problem correctly.
Confirmed by NS spec, and all IBM devs...
An Attr w/o a prefix should not inherit
the Element's default namespace.

-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315311 13f79535-47bb-0310-9956-ffa450edef68"
7feddfa5d97310f8fe3daf79bd78db7c2271a370,"No code change. Just a little reformatting :)
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315312 13f79535-47bb-0310-9956-ffa450edef68"
300364a5b741163f448dca29d08e958ce21f9bcd,"Minor update.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315313 13f79535-47bb-0310-9956-ffa450edef68"
5e0bfca452f04c728e643d61ad5ee7ec7bcbdeea,"make sure make runs in unix mode on DOS


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315314 13f79535-47bb-0310-9956-ffa450edef68"
89d190b118e375a9e1dba0e802fa6f744ccbc8af,"added information on how to build on Windows with the DOS shell


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315315 13f79535-47bb-0310-9956-ffa450edef68"
492c19281da1d03eddada761b0390b9d928936c6,"Docs change to remove reference to SAX2 Configurable interface.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315316 13f79535-47bb-0310-9956-ffa450edef68"
630b95a0e38bb8cef472fc086bbcb1b5f9f9e707,"Feature http://apache.org/xml/features/domx/grammar-access
did not specify the default value in the documentation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315317 13f79535-47bb-0310-9956-ffa450edef68"
66d61d2ab16eb4401b188324f68b57d3d4eec310,"updated to get to par with the C++ version


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315318 13f79535-47bb-0310-9956-ffa450edef68"
35bc5883a4b40c2489241b9072b00d44d464a8cc,"Updates to match build output.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315319 13f79535-47bb-0310-9956-ffa450edef68"
3e70054e9651128ce312f1bd3ff0141acc90e6e8,"SAX2beta bug fixes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315320 13f79535-47bb-0310-9956-ffa450edef68"
cfddffb0b5ed202fbbaa0186c892fda662017724,"SAX2beta bug fixes. (should have been with last commit)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315321 13f79535-47bb-0310-9956-ffa450edef68"
7c533f3dbce8aad5a348fe72ce58f479a4e23e05,"fixed several problems in previous changes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315322 13f79535-47bb-0310-9956-ffa450edef68"
c91c3c17bd7f59de5aa5a9f18d9af553385ad72f,"Bug#36 Fix: setPrefix must update the nodeName as well as the prefix


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315323 13f79535-47bb-0310-9956-ffa450edef68"
80b226a04c99f6d1332a7dbe4393114efeea132e,"changed to cope with the fact that ownerDocument is null for
a Document node


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315324 13f79535-47bb-0310-9956-ffa450edef68"
07ede8293486b731b6fbff44f370aaaf55d03f98,"Document nodes don't have an ownerDocument


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315325 13f79535-47bb-0310-9956-ffa450edef68"
133843503bf94f77d3e6ecf81f746e601bddd864,"the internalSubset parameter of createDocumentType has been
dropped during DOM Level 2 CR,
updated the code accordingly.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315326 13f79535-47bb-0310-9956-ffa450edef68"
2b8ed75e0f38e3a84d457f72339f381b4ef66e2d,"put back setInternalSubset which is used by DOMParser


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315327 13f79535-47bb-0310-9956-ffa450edef68"
a0a81a563e5a2465e09632033fa4e1181caaeb31,"the internalSubset parameter of createDocumentType has been
dropped during DOM Level 2 CR,
updated the code accordingly.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315328 13f79535-47bb-0310-9956-ffa450edef68"
a339161f208d72c0f57b08ac92f431513e0b87d6,"the internalSubset parameter of createDocumentType has been
dropped during DOM Level 2 CR,
updated the code accordingly


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315329 13f79535-47bb-0310-9956-ffa450edef68"
3b011b33a9dbab063c40e74a6bc1c3cff74ea88f,"updated according to latest W3C spec


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315330 13f79535-47bb-0310-9956-ffa450edef68"
cba21b845d262896bf0471443f9161fb55c63f98,"Instead of commenting out the setURIForQName, and
relying on the default being -1,
actually set the default.
-rip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315331 13f79535-47bb-0310-9956-ffa450edef68"
8cf208ed4505309b6c8f63c2c78f6716650f0d9a,"Updated Makefile to fix build problems. Also updated build
instructions to match. Now you can build the release packages
by just having the source distribution package. Yay!


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315332 13f79535-47bb-0310-9956-ffa450edef68"
daf05ce7b407b7c0bbd7fb80fcbeb73475771705,"Also updated docs that detail the contents of the various
distribution packages.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315333 13f79535-47bb-0310-9956-ffa450edef68"
cd53b656c8781337491709c662fe224c44d1ef7d,"Fixes to document type handling and support for DOM Level 2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315334 13f79535-47bb-0310-9956-ffa450edef68"
5b064fc1f2b24ab6d6051b9be0255f1f65b97f8e,"Bug#35 Fix: fixed the cache handling of getLength()


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315335 13f79535-47bb-0310-9956-ffa450edef68"
55a9356ee3230e67f063321995f2180808fede84,"Fixed HTMLElement creation problem due to getOwnerDocument() returning null.
(Contributed by Bill Sofko <bsofko@contrariwise.com>)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315336 13f79535-47bb-0310-9956-ffa450edef68"
8592a023bcd30bc92a7dfa6e0633dc2a6048ec83,"The javax.xml.parsers package as specified by the ""Java API for XML Parsers"".
This is not (C) Apache, because, since it's a javax package implementation,
if something arises, I don't want the ASF to be blamed for it.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315337 13f79535-47bb-0310-9956-ffa450edef68"
08aed918a89f69ce66c9e0fa1656390869d69078,"The Xerces implementation of the classes specified by Java JSR 5 (Java Api for XML Parsing).
Compliant to today feb. 25, 2000 specification.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315338 13f79535-47bb-0310-9956-ffa450edef68"
6f45ba7f429fad2bd253e9590a5c26a3709d1366,"Removed class loading mechanism requiring JDK 1.2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315339 13f79535-47bb-0310-9956-ffa450edef68"
972d8a65ae4eb3e16d6bc785f0bf565cc0d012d9,"Remove dependency on special processing of ""init"" target


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315340 13f79535-47bb-0310-9956-ffa450edef68"
4ffb70622493a3731380f61cb2eca62659a58371,"revamped all makefiles so that build can be done by simply
typing make, without having to set any variables


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315341 13f79535-47bb-0310-9956-ffa450edef68"
4a3e18e27e5a3d977a8532fd20656460e851152c,"moved common rules into src/Makefile.incl and made all makefiles
much simpler


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315343 13f79535-47bb-0310-9956-ffa450edef68"
e4f51ccd3489b622e1ae7d8f53e324797357b029,"Relaxed restraint of xml:space attribute for XHTML DTDs. The
following is taken from the XML 1.0 Specification:

  [2.10] A special attribute named xml:space may be attached
  to an element to signal an intention that in that element,
  white space should be preserved by applications. In valid
  documents, this attribute, like any other, must be declared
  if it is used. When declared, it must be given as an
  enumerated type whose only possible values are ""default""
  and ""preserve"". For example:

    <!ATTLIST poem   xml:space (default|preserve) 'preserve'>

Depending on how you read this text, you could argue that
when xml:space is declared, it *must* have those two options.
Or, a less relaxed reading would state that the only allowed
values are ""default"" and ""preserve"" but not necessarally
both.

Since the XHTML 1.0 Specification uses the relaxed reading
when defining xml:space attributes on elements, the
XMLDTDScanner has been modified to allow for the less
strict reading of the specification.

Thanks to David Brownell <david-b@pacbell.net> for the bug
report.

PR: 33


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315344 13f79535-47bb-0310-9956-ffa450edef68"
fdac461630b528ee367f25e8d30932d81b334e39,"Bug#26 fix:
changed to not resolve default namespace URI when validation is off


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315345 13f79535-47bb-0310-9956-ffa450edef68"
0288f2ac9058e67f456c29c03fb435528571458a,"Bug#28 fix:
fixed end tag <pre> -> </pre>


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315346 13f79535-47bb-0310-9956-ffa450edef68"
f09fa5a40af4a1e5f3c205b0f00357373145b016,"Bug#27 fix:
changed default for namespace handling to true to match SAX2 spec


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315347 13f79535-47bb-0310-9956-ffa450edef68"
f1ef53b7ea7013a77b3819ddd7f36866d0a1c2c3,"PR:34
Obtained from:
Submitted by:rpfeiffe@apache.org
Reviewed by:
PR:
Obtained from:
Submitted by:
Reviewed by:
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315348 13f79535-47bb-0310-9956-ffa450edef68"
a907fe8a1571258d505792cde640a9af59afb19f,"fix for Bug23: Element Data not normalized...


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315349 13f79535-47bb-0310-9956-ffa450edef68"
b6709d168e0d35b9bc03cb753a0418c697258066,"fixed comments about NON-DOM methods


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315350 13f79535-47bb-0310-9956-ffa450edef68"
23e3b5b01b0f0c1986d3a96cc33775392752d1de,"reorganized files and subdirs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315351 13f79535-47bb-0310-9956-ffa450edef68"
6de59d1e57ee558c1c9628790da8a0b0353ca192,"removed unnecessary code (done in parent class: NodeContainer)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315352 13f79535-47bb-0310-9956-ffa450edef68"
2b9826946c5a0a4e38d7da629c3a9aa22a085fa3,"implemented proprietary method DocumentImpl.adoptNode


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315353 13f79535-47bb-0310-9956-ffa450edef68"
7ded70581323f934bb1e00c55498a9445ad1337f,"Xerces 1_0_3 release preparation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315354 13f79535-47bb-0310-9956-ffa450edef68"
6333d59d29d1e5c7ffe0e9be75ac21a3db6369cb,"Wasn't touching src/classfiles_updated which targets in the
top level Makefile depended on.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315355 13f79535-47bb-0310-9956-ffa450edef68"
eaaf91a3c4661da6328a27d5dbb2409e76f6b5a9,"Update version number.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315356 13f79535-47bb-0310-9956-ffa450edef68"
b097a462ee9b2fe45eb585566c5d29fbf15a4f2e,"Minor updates.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315357 13f79535-47bb-0310-9956-ffa450edef68"
b2e78b2e7255e87b896d6e26e115385e84d9f21f,"A little subtle thing like a ""./"" :-O


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315358 13f79535-47bb-0310-9956-ffa450edef68"
9d26189c6e6bb39b8b04998efbdf8de3cd575cb7,"AndyC's fault: he used backslashes instead of forward slashes
for the touch command in the Makefile.incl.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315359 13f79535-47bb-0310-9956-ffa450edef68"
08b70b36296f3fef5ab767d9b954b5dc15cd4ba0,"alpha -> beta


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315360 13f79535-47bb-0310-9956-ffa450edef68"
fd788f496dd24d0d34e5ecb1936da8999ed6c269,"Fixed Bug#43: importNode now uses createElementNS and
createAttributeNS when the source node is an element or attribute with a
namespace.
Cleaned up importNode to avoid several unnecessary casts, and allow
importing nodes from another DOM implementation (which is one of the
purposes of this method!)
Reindented importNode to fit within 80 characters...


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315362 13f79535-47bb-0310-9956-ffa450edef68"
8d03cd36e241743cfd4f6f00d4916245c2c9329a,"Fix defect 48 turns sax namespaces explicitly


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315363 13f79535-47bb-0310-9956-ffa450edef68"
f05bca1ff7cbfe0fb443cbad893f334153db20a4,"Per 12/17/1999 schema draft fix by Kito D. Mann


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315364 13f79535-47bb-0310-9956-ffa450edef68"
6679b5718a4abd377414efdbcaf5531d72d451c6,"fixed Bug #59:
once item(index) has been called with index > length our cache is no longer
worth anything, so ignore the cache in the next call


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315365 13f79535-47bb-0310-9956-ffa450edef68"
4529e1bdf5707ca36db13daa020881bc27e49408,"Fixed bugs. Refer to bug report for information.
PR: 60


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315366 13f79535-47bb-0310-9956-ffa450edef68"
98fbafea941bccf166323f23f3d4f3a9cfcce22d,"adoptNode must call setOwnerDocument to make it recursive


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315367 13f79535-47bb-0310-9956-ffa450edef68"
e82f5b3cbf5865bb7af2597f8a14c4576814b9e7,"fixed setOwnerDocument: sometimes nodes is null


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315368 13f79535-47bb-0310-9956-ffa450edef68"
a7b44bd34a6106f066795eb690b36f36f5b9c261,"cloneNode must call adoptNode so that every cloned node is
owned by the cloned Document


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315369 13f79535-47bb-0310-9956-ffa450edef68"
443cbf753f20b6a00bccd456e0ba39064fd0992d,"When an element is cloned, its attributes were cloned but the owner
element remained the reference to the original element. Made changes
so that the newly cloned attributes picked up the new owner element.
PR: 62


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315370 13f79535-47bb-0310-9956-ffa450edef68"
6a55b6a8cdc923a08c5aef3d468e1a17580bba22,"Related bug that was revealed by fixing the cloneMap in NamedNodeMapImpl.
When an attribute was being cloned, it was cloned with the owned attribute
set to true. Wrong! Until the cloned node is added to an element, it is
*not* owned. So this has been changed.
PR: 62


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315371 13f79535-47bb-0310-9956-ffa450edef68"
d7628afa39e9b91ff109e5790bf8df686015657c,"Attribute contributor for bug report.
PR: 62


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315372 13f79535-47bb-0310-9956-ffa450edef68"
05dcd65a3c63043b4658ff1a0740740559bf5a1d,"In applets System.getProperty throws a SecurityException.
Thanks to Aaron Buchanan <abuchanan@inovacorp.com> and to
James Duncan Davidson <james.davidson@eng.sun.com> for this


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315373 13f79535-47bb-0310-9956-ffa450edef68"
2b07c5c9709f0a5403ca393f6c6c5167d7bb6fa6,"Element Nodes can not have Attr nodes as Children as per DOM - defect 65


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315374 13f79535-47bb-0310-9956-ffa450edef68"
fb0d1385230b8f361c145dbb97a9c25189272f13,"Update the BaseMarkupSerializer in order to not be strictly dependent
on DOM Level 2. When the serializer queries the system and public IDs
on the DocumentType, I catch the NoSuchMethodError so that reflection
can be used if the DOM implementation is not DOM Level 2 compliant.

This is a better fix than calling DOMImplementation#hasFeature because
if the DOM implementation is written to DOM Level 2 but DOM Level 1
interfaces are present in the classpath before the DOM Level 2
interfaces, then the VM will load the older interfaces and throw a
NoSuchMethodError.
PR: 66


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315375 13f79535-47bb-0310-9956-ffa450edef68"
f609290105d0894717c5039c4da12f3a949de12a,"Fixed caption element creation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315376 13f79535-47bb-0310-9956-ffa450edef68"
c42b3686ab7310483214482b1620c499cfbd00c4,"Fixed element list, title and getElementsByName


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315377 13f79535-47bb-0310-9956-ffa450edef68"
6a53b8d2708d55e303675c93d223a5e523fc7104,"First checkin


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315378 13f79535-47bb-0310-9956-ffa450edef68"
1e1ce544975980cfc9bc8941ab7c8166d350c04d,"Minor bug fixes.
Performance improvement, using separate printes for indentation and no indentation.
Support for encodings.
Support for reusing the serializer.
Support for the upcoming Serializer API.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315379 13f79535-47bb-0310-9956-ffa450edef68"
7b5f09cb8fc0c8d8cc69dd20e512d8227778480c,"PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315380 13f79535-47bb-0310-9956-ffa450edef68"
6185c73e086504c81710ed8bd8d8ec83a6be3ef8,"setAttribute now checks whether the attribute node exists,
and uses it if it does. Changed after ElementImpl.cpp rev 1.11


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315381 13f79535-47bb-0310-9956-ffa450edef68"
ba43626d3fc5b1e433cb1e668b4a09057d3b9c8b,"added missing cast


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315382 13f79535-47bb-0310-9956-ffa450edef68"
0dfcd0e5784add2411ce2389606a6d5b3801a4d8,"same fixed has before but for setAttributeNS


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315383 13f79535-47bb-0310-9956-ffa450edef68"
5f3c739af826bf91d2ccbb97b0d309acf8a26b21,"fixed getSourceLocation which the change of package name broke


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315384 13f79535-47bb-0310-9956-ffa450edef68"
15cc0c3c4621870dae52ad54733b4372d44769ee,"added some tests wrt exceptions raised when manipulating attributes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315385 13f79535-47bb-0310-9956-ffa450edef68"
2c8f46c40cd5465efeaf26ddc40b970e0011d116,"got rid of the owned flag on AttrImpl, use parentNode instead


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315386 13f79535-47bb-0310-9956-ffa450edef68"
6ccc0d5676665da87bce25041af9b5c6f819b25e,"Added whiteboard. Wil checkin the sources sometime tonight.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315387 13f79535-47bb-0310-9956-ffa450edef68"
887ca5f63560445db9478dca73fbd0f8a1e4f397,"Just checking in the sources. No build structure in place as yet


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315388 13f79535-47bb-0310-9956-ffa450edef68"
c139791bb708fc52ad1b5c8e71e31c68a4056532,"SystemLiteral fix to account for relative URI-path submitted by Normam Walsh


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315389 13f79535-47bb-0310-9956-ffa450edef68"
c2a5874ec296483a64c5b9fe536302aacfdc45ad,"PHASE1: Creating new files for internal re-architecture.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315391 13f79535-47bb-0310-9956-ffa450edef68"
3b1758dbfb1ecd1457c5115478aa053376bac732,"XML Schema Datatype support utilities Makefile


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315392 13f79535-47bb-0310-9956-ffa450edef68"
0693793890012eaf1a59014500f566d4a1bedf83,"Validator refactoring added by Glenn Marcy to support Schema work Makefile


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315393 13f79535-47bb-0310-9956-ffa450edef68"
7f95fe347111065d45eb17cc203ce31473ed2304,"Regular Expression


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315394 13f79535-47bb-0310-9956-ffa450edef68"
747d3b6fe3ec83c9f241641835af4ffc2e1f708e,"XML Schema datatype support


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315395 13f79535-47bb-0310-9956-ffa450edef68"
774a48dd97d0115e6382ab4bc39a616d42495609,"XML Schema regex engine


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315396 13f79535-47bb-0310-9956-ffa450edef68"
828a377d4232c65882b547592d04bb7238513629,"Factoring Validators code by Glenn Marcy


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315397 13f79535-47bb-0310-9956-ffa450edef68"
eae5dffd1ee958156a958a3286273106dd74f044,"factoring DTD Makefile


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315398 13f79535-47bb-0310-9956-ffa450edef68"
6b68515f418693df21d321e057756d0961697ab7,"Validators Factoring for Schema


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315399 13f79535-47bb-0310-9956-ffa450edef68"
291628ca5e784610e42d83689447db79ed8cc88f,"Validators Factoring for Schema


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315400 13f79535-47bb-0310-9956-ffa450edef68"
07e7fc40f3523b21fb96c136cf793d876fc444ac,"Added Tom Changes to support Schema validation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315401 13f79535-47bb-0310-9956-ffa450edef68"
261a037eaabf05df919defcba7d45de711dd1beb,"PHASE1: Adding new files.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315402 13f79535-47bb-0310-9956-ffa450edef68"
5f56e6c2c612e6aca15660b208cfc0664121b37c,"Change to new style of Makefile


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315403 13f79535-47bb-0310-9956-ffa450edef68"
7c272792936029b3d0253de2d06593c98149c7bb,"PHASE2: Merge changes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315404 13f79535-47bb-0310-9956-ffa450edef68"
c52aca052d6c345688ba5d583bd04b2c397f358a,"Change fixed minor problem


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315405 13f79535-47bb-0310-9956-ffa450edef68"
660d36e27b0948f7296342dd36c487c9be2ef685,"PHASE2: Build implications of re-architecture.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315406 13f79535-47bb-0310-9956-ffa450edef68"
90dcbfa6a9f0acb26ea0ff6091ba456b6945e94d,"Change for DOM2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315407 13f79535-47bb-0310-9956-ffa450edef68"
78cb5f854e67fa83f5263b1b59317eb00cf638a5,"XGrammarWriter is officially unsupported at this time. It needs
to be updated to keep in sync with the latest XML Schema draft.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315408 13f79535-47bb-0310-9956-ffa450edef68"
63276c80f97acd8faade6d3bd193ee61d00e49f2,"PHASE3: Removing old files.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315409 13f79535-47bb-0310-9956-ffa450edef68"
04c6ea0beb90e83507b9ed79e3b9f18ccbacd9e7,"Added Schema and Factoring packages to Makefile


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315410 13f79535-47bb-0310-9956-ffa450edef68"
a3400d3993e36ee0cf654f9e258a9b4482ff382f,"Changed Debug flag to off


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315411 13f79535-47bb-0310-9956-ffa450edef68"
dca1f5ba08d4f905deb6540bee49d03c9aab5d52,"XML Schema Work
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315412 13f79535-47bb-0310-9956-ffa450edef68"
553ae78350d2248de8e4e4fdd42ddfc117068019,"Delete for Schema Work


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315413 13f79535-47bb-0310-9956-ffa450edef68"
ba7c749b750f17a17ca3c438bd39495da2684d51,"more XML Schema validator changes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315414 13f79535-47bb-0310-9956-ffa450edef68"
1313e7a878cbb37fe1d10f927595e27c292f07c4,"Forgot to update dtds


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315415 13f79535-47bb-0310-9956-ffa450edef68"
47d25f4efbd5de38c944e189fee662f67f44ec83,"forgot the proper ent file


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315416 13f79535-47bb-0310-9956-ffa450edef68"
ece9444fa129f8f67820669b28c746b56f7cca06,"Changes to build it with xerces


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315417 13f79535-47bb-0310-9956-ffa450edef68"
09e626fb774429ae857ec2b1d1599cc9fe7d175a,"Moved some of the classes from Crimson to the tree package as of now. Need to repackage them somewhere else. Maybe utils


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315418 13f79535-47bb-0310-9956-ffa450edef68"
35ae531ab9931c3f9238a42332da3c434e2d5c10,"Just using SAX2 events


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315419 13f79535-47bb-0310-9956-ffa450edef68"
89b433fc2e5dcf4ef5e595b5ba53ab87d72fd2fa,"Changed build.xml not to use deprecated APIs of ant


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315420 13f79535-47bb-0310-9956-ffa450edef68"
87ae37a7b7770571339bb20168db26e24242aeaf,"Put the Xalan/Xerces jar first in the style classpath


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315421 13f79535-47bb-0310-9956-ffa450edef68"
91740a69b60779cf75d578b692fa384830b55ceb,"got rid of element attribute from NamedNodeMapImpl,
and change ownerDocument to ownerNode which is used instead


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315422 13f79535-47bb-0310-9956-ffa450edef68"
e8291262b679f60db9f6c71268fed0f67e414d12,"renamed parentNode to ownerNode to make clear it's not always
 the parent


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315423 13f79535-47bb-0310-9956-ffa450edef68"
04e15dbdd559ac7d11173f38fa89bdd9278016a8,"moved name attribute from NodeImpl to every class that really
needs it, so that others (including TextImpl) are smaller


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315424 13f79535-47bb-0310-9956-ffa450edef68"
ebde7c6dd001ea2a66ebb7f49c7ca88ce348bdfc,"moved value and fInternalSetNodeValue attributes from NodeImpl
to CharacterDataImpl which is the only class that really needs them,
that way other classes (including AttrImpl and ElementImpl!) are smaller


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315425 13f79535-47bb-0310-9956-ffa450edef68"
3d5349a6027bbc6740da6719fa15af488df15798,"a mere reindent, but I just couldn't read that code


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315426 13f79535-47bb-0310-9956-ffa450edef68"
21c7fbf169033414f20fa11402a4b6baebeb26cd,"Truly no-op'd the DEBUG stuff. Wait a slowdown that was!


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315427 13f79535-47bb-0310-9956-ffa450edef68"
de0b4fb86d9922a84594319a75ad083c19192104,"Pretty major reorganisation of the classes:
NodeImpl is now only a base class that can neither be a parent nor a child. It
no longer keeps both a reference to its parent, or element in case of an Attr,
and a reference to its ownerDocument. Instead, only one or the other is
referenced. When the node has no owner (parent/element) it references its
ownerDocument and when it has one it only references its owner and relies on it
to have a reference to its ownerDocument. A flag is used to indicate which
state the node is in.

The new class ChildNode inherits from NodeImpl and adds the capability of being
a child, that is having siblings.

NodeContainer is renamed ParentNode and inherits from NodeImpl and adds the
capability of being a parent, that is having children. It now only has a
reference to its first child and stores the reference to its last child as the
previous sibling of the first child. First child nodes are marked as being
first so that their methods getPreviousSibling can hide that trick.

The new class ChildAndParentNode inherits from ChildNode and adds the
capability of being a parent. Ideally this would be done by inheriting both
from ChildNode and ParentNode but in this case it's simply a copy of ParentNode
that inherits from ChildNode instead of NodeImpl.

NamedNodeMap now simply keeps a dirty flag and no longer a change count since
it isn't really needed.

NodeImpl no longer keeps a change count, this is only done by parent
nodes. This is all what's necessary since only DeepNodeListImpl uses this
information and it's only when referring to a parent (a Document or an
Element).

All states (booleans) attributes have been changed into a bit flag.

All this together leads to saving over 11% of memory!
:-)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315428 13f79535-47bb-0310-9956-ffa450edef68"
28b0f1dfd0d7d571c48ca4f1499c3ad2392d2098,"When validating a document with an associated DTD *and* namespaces
are turned on, the validator sees the root element name specified
by the DOCTYPE line and the actual root element as different strings.
And since the check was just checking StringPool indexes, it signaled
an error.

To fix this bug, I changed the test to compare the strings and not
their StringPool identifiers. Since this check only happens once,
there is no performance consideration.
PR: 111


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315429 13f79535-47bb-0310-9956-ffa450edef68"
50c7673aaaa61eed084284b1675850772454f2d8,"fixed getValue and setValue:
for the deferred case synchronizeChildren must be called


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315430 13f79535-47bb-0310-9956-ffa450edef68"
af2dbf1579d6731eb3fe67c5a3e988faffc7476b,"reversed the child node list order:
when we only have a link to the first child appendChild is n^2 order,
so instead we now store the last child and nodes are linked to their
previous sibling. AppendChild is then back to constant time, and when
we fluff the nodes up into the DOM later we simply build the list in
reverse order.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315431 13f79535-47bb-0310-9956-ffa450edef68"
216420cae5992a1741e60b53babe591bf3e6eda6,"added missing methods used by DOMParser


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315432 13f79535-47bb-0310-9956-ffa450edef68"
938423aec66565852ecbec3944ca253624362eb4,"left over from previous change on order of node lists in deferred DOM


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315433 13f79535-47bb-0310-9956-ffa450edef68"
9906afac3a7e0ee59e0eca50c56026a3f1269c67,"reversed the way we walk child lists related to grammar for efficiency


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315434 13f79535-47bb-0310-9956-ffa450edef68"
119ce629615b3e862a0d578e02cadb81a95212cd,"got rid of some unused code


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315435 13f79535-47bb-0310-9956-ffa450edef68"
de546658b5516af72194d2a789993546761fb303,"most attributes only have their value stored into a single Text
node, so getValue() is now optimised to avoid building a StringBuffer in
this simple and very common case


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315436 13f79535-47bb-0310-9956-ffa450edef68"
0283f22883d148dfbe77a4e7d7e13289b511cc05,"Add WML DOM interface and implementation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315461 13f79535-47bb-0310-9956-ffa450edef68"
29c474ea49acee7df284f8b887f1fc1df1f7e791,"Include WML directory in the Makefiles


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315462 13f79535-47bb-0310-9956-ffa450edef68"
77c435db6f9430c92e7078c7daa7b90b4041fe05,"removed unused code


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315482 13f79535-47bb-0310-9956-ffa450edef68"
d5e18b4c62d6001175507ffb3b462b1d46d95683,"fixed getOwnerDocument which returned null for Document children


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315488 13f79535-47bb-0310-9956-ffa450edef68"
eb6de39cad4d420f94d941b09604299687abcb04,"fixed setOwnerDocument


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315492 13f79535-47bb-0310-9956-ffa450edef68"
a4ea92d074fd3d5b461c2e8fa2b045234e037bcf,"fixed cloneNode and importNode
importNode of an EntityRef still needs more work though


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315493 13f79535-47bb-0310-9956-ffa450edef68"
0f7433c75406c6fdf0b40e88b3c053807251ec99,"fixed setNamedItem and setNamedItemNS which failed to reset the
ownerNode of a replaced element


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315494 13f79535-47bb-0310-9956-ffa450edef68"
7a7f90c3aa9f2959d928904a2ce8edfd7219385f,"Changed nextMatchingElementAfter to protected to override in HTML DOM


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315497 13f79535-47bb-0310-9956-ffa450edef68"
33cd00384482c50103148eb7537ed7308023ee15,"*** empty log message ***


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315498 13f79535-47bb-0310-9956-ffa450edef68"
15b59c601dfb317ffdc276e4b56a50da997b799f,"made default setNodeValue really a no-op


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315503 13f79535-47bb-0310-9956-ffa450edef68"
304a418da934bdc7352e5d28f8cae5368e1efda5,"Entity and EntityReference nodes are now readonly as due,
EntityReference nodes also are populated when the parser hasn't done it


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315504 13f79535-47bb-0310-9956-ffa450edef68"
c9ddd11c6977501949bf02ebca102863d4928875,"fixed setNodeValue tests in cases where it's a no-op,
added cast to xerces classe to allow building an entity node with its subtree


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315505 13f79535-47bb-0310-9956-ffa450edef68"
0f189a64a2fe9489853d6e3d421c3d5c7810ce9d,"Made nextMatchingElementAfter protected


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315512 13f79535-47bb-0310-9956-ffa450edef68"
17002acfc9ecbcc08bc1a768a3796c5502d0b5e4,"implemented new methods: hasAttribute and hasAttributeNS


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315524 13f79535-47bb-0310-9956-ffa450edef68"
db684eda3bb6a4875f0b392280e235f34f08282b,"factorized some code to ease maintenance (a little)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315525 13f79535-47bb-0310-9956-ffa450edef68"
f931c875fc2091bbbe6d9d87acbb01cf753ba4d0,"moved user data storage from NodeImpl to DocumentImpl,
getting rid of one pointer on EVERY node\!\!\! \:\-\)
I can't believe I didn't see that one earlier...


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315539 13f79535-47bb-0310-9956-ffa450edef68"
e1b0db3867e65249a9cfb028152b5afac8944c71,"one test printout wasn't guarded


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315540 13f79535-47bb-0310-9956-ffa450edef68"
5fb6c7aee07f895e4beb71631e4058f2b0b4263a,"fixed typo


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315541 13f79535-47bb-0310-9956-ffa450edef68"
dfd8b011f34dc3325229f718ae8fc3a1ef560122,"added to the javadoc a warning about downside of new implementation
of userData


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315546 13f79535-47bb-0310-9956-ffa450edef68"
b1feb9bafcaea915bb5f1ca022415d5e96eacf87,"allows userData to be removed by setting it to null


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315547 13f79535-47bb-0310-9956-ffa450edef68"
e1e6a3a87538e5a372365c6eeef1457569c2139d,"added warning about removing userData refs as much as possible


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315548 13f79535-47bb-0310-9956-ffa450edef68"
a9323a6679ad36e0d274386f22a2712ffa0a673a,"we cannot free the parent information when fluffing up a node
since we need this information when processing elements with IDs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315564 13f79535-47bb-0310-9956-ffa450edef68"
8ca3d3591b1cd9900a600068ebf45312e86e443e,"added support for QNames


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315567 13f79535-47bb-0310-9956-ffa450edef68"
906cb41f33c0369c61e27e3698bf30688156c96d,"changed version numbers for new release


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315572 13f79535-47bb-0310-9956-ffa450edef68"
5924cdeb8042443dd14b6753a79ef455f52f94b8,"changed version numbers for new release


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315573 13f79535-47bb-0310-9956-ffa450edef68"
c0445799695a0fcf23f53965e092abeb52f77e1f,"added wml to jar and packages


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315582 13f79535-47bb-0310-9956-ffa450edef68"
0a754dff727705e318d8328e64ee3b7bca345c47,"updated to SAX2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315585 13f79535-47bb-0310-9956-ffa450edef68"
4c8a9d598d79e5e155fbe635b2549e96925fa769,"updated for new release


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315594 13f79535-47bb-0310-9956-ffa450edef68"
f9434dec8f103887c782471645788d3a6b0c27b5,"fixed the release date


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315597 13f79535-47bb-0310-9956-ffa450edef68"
4bd1e58ab4ae14a48974ed4307a3968f50396b24,"updated to SAX2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315600 13f79535-47bb-0310-9956-ffa450edef68"
6d8af2fc5f99f05c7efd891026ddcb0fe524d3d0,"updated to SAX2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315601 13f79535-47bb-0310-9956-ffa450edef68"
54266baaaaa3b88435f6e6074ce87e891722d04a,"Updated status, based on my latest understanding.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315615 13f79535-47bb-0310-9956-ffa450edef68"
039228b49ccf5c5755c1a24294786faaed494627,"Merge schemawork branch into trunk


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315647 13f79535-47bb-0310-9956-ffa450edef68"
2c35048d4188ae2acc41c8d37c020f8f972d7256,"Fixing getAttDef() throw Null PointerException,   --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315648 13f79535-47bb-0310-9956-ffa450edef68"
eb0d13229411d1ea2c51f9b0520147dbc0a7aac1,"moved endElement event handler call to after validation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315649 13f79535-47bb-0310-9956-ffa450edef68"
10e010a7720d892e9f2421c67ead0272da717b99,"XML documents with ""wide"" branches causes an array out of bounds
exception to be thrown. The validator, when resizing the array
of children QNames at a given level, was adding new QNames to
the original children array instead of the new, resized array.
Since the array size was initially sized to 256, this problem
appeared as soon as a branch was 256 elements wide. This bug is
now fixed.

Also, after tweaking the numbers a little bit, I see no
noticable difference in performance between an initial array
size of 128 and 256, so I changed the default size to be 128.
However, this really needs to be REVISITed because it is a
waste of memory.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315650 13f79535-47bb-0310-9956-ffa450edef68"
2111c4009fcc6af3a2c03e8946633e8d2a737db8,"Xerces 2.0 Preliminary Architecture Documentation

I'm committing the thoughts that are happening towards re-organizing
the internal components and re-defining the interfaces between them
for Xerces 2.0. These designs are not final and should only be
considered a work in progress.

The design points are functionality, performance, modularity, and
simplicity. The new design, when completed, will allow the parser
to communicate additional information through the internals;
enable the caching of grammars in a pool of parser objects; and
allow the user to construct new types of parsers by plugging the
modules together like puzzle pieces.

Additional design documents will be added later.

The following files are being committed:

  design.css  CSS for resulting HTML
  design.dtd  Design grammar
  design.xml  Design
  design.xsl  Stylesheet to convert to HTML


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315651 13f79535-47bb-0310-9956-ffa450edef68"
e2508ff361b9315ca0eb485df3d7cd33ba912974,"Bumped version number from 1.0.4 to 1.1.0 for upcoming build.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315652 13f79535-47bb-0310-9956-ffa450edef68"
39ef4eadbcfe58f1f93c0c84f38be7ae68201538,"Updated release information for upcoming build of 1.1.0


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315653 13f79535-47bb-0310-9956-ffa450edef68"
18cd6c6cca251ea257a5c1d13f0304457e71ccce,"Update Schema support information for upcoming build 1.1.0


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315654 13f79535-47bb-0310-9956-ffa450edef68"
afa1b49f160aa7bde94004f4521815886f33e8a5,"fix/restructure datatpe WIP


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315655 13f79535-47bb-0310-9956-ffa450edef68"
5b637a429b7de641f142418b92c08cb1f477262a,"Updated Schema datatype support info


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315656 13f79535-47bb-0310-9956-ffa450edef68"
2e1a4fe24d20265818eabeac209d265b8f2b6f8f,"bug fixes, --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315657 13f79535-47bb-0310-9956-ffa450edef68"
ad126e6d80816de404c96457ac124279d47a629b,"bug fixes, --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315658 13f79535-47bb-0310-9956-ffa450edef68"
cad915dcf52ec106f716bbc0f435d8ddc0927d4f,"changes to make it conforming to 04/07 schema spec, --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315659 13f79535-47bb-0310-9956-ffa450edef68"
6c50d70394b3e85ad864eadc01161aea76c1b106,"*** empty log message ***


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315660 13f79535-47bb-0310-9956-ffa450edef68"
180a21ab6be790743f1c2668b2accf759abc2e41,"1) Updated content models so that they didn't require new element
   children arrays each time -- the same array can be reused as
   needed. Changes already made in validator to do it this way.
2) Fixed the setting of the attribute type names that are exposed
   through the SAX interfaces.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315661 13f79535-47bb-0310-9956-ffa450edef68"
1d2db5e754cecfe83d69b9369ea0a6cacb1bb371,"bug fixes, --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315662 13f79535-47bb-0310-9956-ffa450edef68"
8e84c961a4b2f83ac2af86b67e8fb840069ed3e5,"attributes number now include default with value, --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315663 13f79535-47bb-0310-9956-ffa450edef68"
7549c6762daa628a2a164d4a6ba7475c948f01c7,"Exposed enumeration attribute values as string (SAX). Removed dead code.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315664 13f79535-47bb-0310-9956-ffa450edef68"
365d4c9f29798f99637c3a7d37e8ce41d2c8df88,"fXXXSymbols to constants, --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315665 13f79535-47bb-0310-9956-ffa450edef68"
09c8218df5e99def23a071a136e7c59105fe320a,"framework api docs was out, --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315666 13f79535-47bb-0310-9956-ffa450edef68"
8807c2a54c3b03bed11ffe10f514cfd5cc97ebb4,"Updated Xerces-J 2.0 Design


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315667 13f79535-47bb-0310-9956-ffa450edef68"
4200e38822f27110b7788195aeabbf66236aee0d,"fixed bug on source distribution


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315668 13f79535-47bb-0310-9956-ffa450edef68"
c3ddf981ef38bf29d8a85e5794fb02b430a2fdc2,"fixed WML makefile not included in source distribution


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315670 13f79535-47bb-0310-9956-ffa450edef68"
391d8084c142629b975775839a18dda8b5e50191,"Added new DTDs for removing references to sbk: in docs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315672 13f79535-47bb-0310-9956-ffa450edef68"
e281365d5bbac1a59fb680ac1ad3e647183fc9c0,"add attributeDecl from another schema and misc bug fixes, --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315673 13f79535-47bb-0310-9956-ffa450edef68"
4a943090aaab4c29016aa3df31f59815019ba75a,"fix reset didn't reset fXsiURI, --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315674 13f79535-47bb-0310-9956-ffa450edef68"
17c5bef36596418b6a4165ac0ea7c55113c91851,"requirement for FOP generation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315675 13f79535-47bb-0310-9956-ffa450edef68"
c8f943383e3c083cd997ed98035d8e926b55f707,"Put in a list of ignore files in the javac task for all the classes that don't compile. Would suggest that all the committers on xerces-j keep this file uptodate so that ant can also be used to build xerces-j


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315676 13f79535-47bb-0310-9956-ffa450edef68"
0aaa267e0d532e15ec14de0e592033337ad13324,"Changes for the latest SAX2 and DOM Level 2 stuff


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315677 13f79535-47bb-0310-9956-ffa450edef68"
d327c3b032a327addeef24bb4571b20e2fb1e31c,"InputStream derived class needing a close to release resources


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315678 13f79535-47bb-0310-9956-ffa450edef68"
9f75937e8a9e143113123d9fa7c779f1408db3c8,"Added javax to the jar task so people who want an alternate JAXP compliant parser can check out the sources and build using ant.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315679 13f79535-47bb-0310-9956-ffa450edef68"
ca9df4cd9900c610229db31344a752d7fa86fff4,"delay the creation of the attributes map as much as possible


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315680 13f79535-47bb-0310-9956-ffa450edef68"
3fe1e48db8bca3d70a033c3295a45d203739e0fc,"changed default implementation of sync methods to change their flag


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315681 13f79535-47bb-0310-9956-ffa450edef68"
62635f2f09a3b5b454dc84fd522029b930a9bdaf,"added method to isHex(String )


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315682 13f79535-47bb-0310-9956-ffa450edef68"
5451e285d33e92d78ca823e8b57219d4bcde962c,"include and import support, misc bug fixes--ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315683 13f79535-47bb-0310-9956-ffa450edef68"
f8f83a252307f337e52148e9d956a2ddd07d0de4,"misc bug fixes related with schemaLocation--ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315684 13f79535-47bb-0310-9956-ffa450edef68"
2c42b00cd546b63d59f4247ef2e965c03711725c,"delete all schema files


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315685 13f79535-47bb-0310-9956-ffa450edef68"
9daa3e755e5d9e97a317666eaff635771179b9e9,"delete old DTD files


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315686 13f79535-47bb-0310-9956-ffa450edef68"
970c587d10311f6055695f0076e43653c564ad27,"delete old common files


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315687 13f79535-47bb-0310-9956-ffa450edef68"
6c532d19c2c6be34c9404bd562c950763c321524,"fInputStream could be null


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315688 13f79535-47bb-0310-9956-ffa450edef68"
484fcc5697f96910ebbc9afbb41488c6d18365b7,"changed NamedNodeMapImpl to a vanilla implementation moving
specific code related to handling attributes into a new subclass AttributeMap.
got rid of the direct reference to the default attributes map so that to save
a pointer, instead we now have a flag that says whether there are any, and
if there are any we do a little more work to find the default attributes map
back. But this only happens on attribute removal so it's a good trade-off.
This version no longer supports dynamic editing of the default attributes
but we do not really support this operation anyway, and if we did that's not
the way we'd want to do it. Instead of doing it in a lazy way, which has
an overhead on every operation related to attributes we'd better do it on
user's demand.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315689 13f79535-47bb-0310-9956-ffa450edef68"
f33e487490b168dd0b29e7df099a1832fb79ee79,"Bug - fix is to assign the array reference


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315690 13f79535-47bb-0310-9956-ffa450edef68"
4d4a25a8e4157ea70cab364086e66bd2cd5d3f60,"Added simple sample that generates a DOM from scratch and uses serializer since we receive so many question about how to it


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315691 13f79535-47bb-0310-9956-ffa450edef68"
a4c790da3e73b23974d0dfd89e7e2a0c01c009df,"Added simple sample that generates a DOM from scratch and uses serializer since we receive so many question about how to it


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315692 13f79535-47bb-0310-9956-ffa450edef68"
761ededa1860cfacfefbf83cd490d809d4da48b6,"Added simple sample that generates a DOM from scratch and uses serializer since we receive so many question about how to it - lets try again


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315693 13f79535-47bb-0310-9956-ffa450edef68"
27fced95023fd326f5e61a6d6072c0a2dc9a78f8,"Fixed ANT makefile to build, package, test and distribute Xerces-J


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315694 13f79535-47bb-0310-9956-ffa450edef68"
3316cc034563104ea253afedced3c1e461426523,"Needed for ANT


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315695 13f79535-47bb-0310-9956-ffa450edef68"
96642efb7bae191f6550019c5713074be5757c21,"misc bug fixes on schema validation  --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315696 13f79535-47bb-0310-9956-ffa450edef68"
dfdff410c39ed8658a47d0ed2975901ae3a54f41,"misc bug fixes on schema validation  --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315697 13f79535-47bb-0310-9956-ffa450edef68"
885775bb3015913e9e3089291228dadf779575c1,"Added target 'all' and fixed a couple of bugs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315698 13f79535-47bb-0310-9956-ffa450edef68"
39bdddb5768aed9c4ca65c0687aa403016572c38,"minimize use of instanceof operator  --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315699 13f79535-47bb-0310-9956-ffa450edef68"
bafdc57239ac3b604dd075431e80c13652f62ad4,"changed to be suitable for Windows


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315700 13f79535-47bb-0310-9956-ffa450edef68"
5e75a9ce3710598f9c9c4daecfc3c2bab193a8f3,"performance tunning,  --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315701 13f79535-47bb-0310-9956-ffa450edef68"
3bbd83a7bcddbc34357f71fe08eace8d74b9bc8f,"Re-added grammar access to the DOMParser. In doing so, I fixed
the DTD scanner so that it calls the XMLDocumentHandler.DTDHandler
methods.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315702 13f79535-47bb-0310-9956-ffa450edef68"
90da27a2caa2e3e9c11798083213b44b6ee6455b,"Forgot one file on last commit


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315703 13f79535-47bb-0310-9956-ffa450edef68"
451fee32ad0de82304f464dc71f13db5e1f03825,"Will now prepare when one of the DOMSerializer methods are called


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315704 13f79535-47bb-0310-9956-ffa450edef68"
1e150d04852041a507fd7f65fbdfc89f526c044e,"Removed whichDocType methods


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315705 13f79535-47bb-0310-9956-ffa450edef68"
5010a408995effc983b58b116a4365e420fceae0,"fix a bug when <element ref= can cause infinite loop --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315706 13f79535-47bb-0310-9956-ffa450edef68"
771e2cfdfe3788aeda1078318da229115244bb76,"turn on Dynamic Validation, if with DTD


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315707 13f79535-47bb-0310-9956-ffa450edef68"
135ffa88701a7e11f9f5522e2274dbcd7796a3f2,"Fixed missing method bug


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315708 13f79535-47bb-0310-9956-ffa450edef68"
6cfb7baab844d5738c0109e98cc37f17b6453921,"default attributes weren't marked as unspecified when namespaces are on


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315709 13f79535-47bb-0310-9956-ffa450edef68"
4bb3fab007ebd3c1c597a13bb9c2f72e865fb92a,"Dynamic Validation --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315710 13f79535-47bb-0310-9956-ffa450edef68"
5da484623ff64da8a19e4668b67268cc47ec5def,"Comments in the DTD don't 'leak' into the document anymore.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315711 13f79535-47bb-0310-9956-ffa450edef68"
ba69da025f2dd088bb2e3692269b2c499ef533ac,"null the fInputStream so we don't ever attempt to close handle twice


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315712 13f79535-47bb-0310-9956-ffa450edef68"
1a8dafa94a8aa6e041725efe8d15fc07de47ac9e,"Fix a bug regarding recursing ComplexType usage pattern, e.g.:
<complexType name=""a"" ...>
    <element  name=""b"" type =""a"".... minOccurs=""0""....>
 --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315713 13f79535-47bb-0310-9956-ffa450edef68"
980fd90b23569ead512bce4db674a83a6ef61c5d,"Fix a bug regarding recursing ComplexType usage pattern, e.g.:
<complexType name=""a"" ...>
    <element  name=""b"" type =""a"".... minOccurs=""0""....>
 --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315714 13f79535-47bb-0310-9956-ffa450edef68"
33d27ab389f8461d011247a9ba24527dba82764d,"Fix a bug regarding recursing ComplexType usage pattern, e.g.:
<complexType name=""a"" ...>
    <element  name=""b"" type =""a"".... minOccurs=""0""....>
 --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315715 13f79535-47bb-0310-9956-ffa450edef68"
31291dfe364a6719b49597169d88ddaea7efed4c,"Introduced <container> tags for the hidden pages


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315716 13f79535-47bb-0310-9956-ffa450edef68"
0d4c5484e00b277fd1fa03bab0705d5583751f13,"fixed problem with cloning default attributes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315717 13f79535-47bb-0310-9956-ffa450edef68"
69e0dabca9f6023726d5fd111fa34df2fd1e6b97,"Added Version id


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315718 13f79535-47bb-0310-9956-ffa450edef68"
1d08a6160f3fbbb6adae94310c53b448a3b42552,"Changes for new datatype factory architecture


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315719 13f79535-47bb-0310-9956-ffa450edef68"
1e0484cef577da6b0b0170aefe4492643b588883,"Containers must have source


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315720 13f79535-47bb-0310-9956-ffa450edef68"
9e67b01172a77800c5d5ab1b814e2aee89cb2456,"Included a new target 'jars'


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315721 13f79535-47bb-0310-9956-ffa450edef68"
88df2c716aa3c028f1a2a08278a1dbcded4a5749,"Sync'd up with latest sources


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315722 13f79535-47bb-0310-9956-ffa450edef68"
9d50d245b8ca259243e2f02b18df77df1fba46b6,"Corrected Version number that was accidentally overwritten


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315723 13f79535-47bb-0310-9956-ffa450edef68"
591a7b90a6d594c50ccd636792360f8855874453,"Updated version number


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315724 13f79535-47bb-0310-9956-ffa450edef68"
d227102dd9fcf4d438ab842cb5cf51c14b47eda5,"Version Id fix


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315725 13f79535-47bb-0310-9956-ffa450edef68"
7918f876f79880dc14dd2cd2a1f367a5d8aa1ff1,"Kento patch


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315726 13f79535-47bb-0310-9956-ffa450edef68"
dd948484b263b86cdb338f54e5dc5dc2f91af666,"Fixed problem with CDATA remaining open in contained element


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315727 13f79535-47bb-0310-9956-ffa450edef68"
32a7e45e49ef0a0df40968c9dfe806eb9c7a5a4d,"changed copyright to Apache for incorporation to Xerces,
based on James Duncan authorization.
See http://xml-archive.webweaving.org/xml-archive-xerces-j-dev/0545.html

Applied patch from Timm Sean not to lose path info of file.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315728 13f79535-47bb-0310-9956-ffa450edef68"
dbe236a9caed71c0b62729578c6af68b7e7e9a02,"changed copyright to Apache for incorporation to Xerces,
based on James Duncan authorization.
See http://xml-archive.webweaving.org/xml-archive-xerces-j-dev/0545.html


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315729 13f79535-47bb-0310-9956-ffa450edef68"
cec129b98704ca725a414a32314f639be28ff7cd,"removed some unused code


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315730 13f79535-47bb-0310-9956-ffa450edef68"
5d007b79e910e9c635304494dfb68b7aa409a8d4,"integrated JAXP to Xerces based on James Duncan authorization.
See http://xml-archive.webweaving.org/xml-archive-xerces-j-dev/0545.html


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315731 13f79535-47bb-0310-9956-ffa450edef68"
0e954cac82b03d4b9b9b4737f9603602060eba92,"updated the README to allow building the doc with an older version of the tools


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315732 13f79535-47bb-0310-9956-ffa450edef68"
ae57cbeb1ad12a17811053209a4f98f529cf78c6,"a bunch of bug Fixes on schema validation  --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315733 13f79535-47bb-0310-9956-ffa450edef68"
c06d43427860a85219635fc6f67fc17afc3f3684,"turn on the namespace when DOMParser read the schema --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315734 13f79535-47bb-0310-9956-ffa450edef68"
6be374df7dc00af10e285bc94cbad60a2abc485f,"turn on the namespace when DOMParser read
the included or imported schema --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315735 13f79535-47bb-0310-9956-ffa450edef68"
7581c5c0729ca535d5f917c09f79e21ce79e7944,"changed supports() to use ownerDocument() which is never null


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315736 13f79535-47bb-0310-9956-ffa450edef68"
a6668250540a4c707cbe059d27c1d0df2f32cff3,"Release 1.1.1


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315737 13f79535-47bb-0310-9956-ffa450edef68"
17b74e35495143192c6cb109a6df6f98875dfa4b,"release 1.1.1


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315738 13f79535-47bb-0310-9956-ffa450edef68"
f1d9d6c0854b4029e25f744a3f1c1ab6bac5d09c,"Now also runs the tests


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315740 13f79535-47bb-0310-9956-ffa450edef68"
f2f7cda9af871bfdb5e93956e533f58be811e119,"Now also runs the samples


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315741 13f79535-47bb-0310-9956-ffa450edef68"
8ff2cff0c7a11dce91ec33660ae4902bef2d5138,"Added classes.zip in the classpath


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315742 13f79535-47bb-0310-9956-ffa450edef68"
bea551dc31eb565031b05647ff98a8ce3b6568de,"integrated second set of JAXP files that was left over


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315743 13f79535-47bb-0310-9956-ffa450edef68"
c3257a9e8eeb74acda5a70884f809d8405a71d4c,"Need to Revisit architecture - added hack from Kento's to use clone


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315744 13f79535-47bb-0310-9956-ffa450edef68"
a4abd8522a5a652e4c2580dd90fe9c2552f964fa,"Cloning object is not really needed in this architecture


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315745 13f79535-47bb-0310-9956-ffa450edef68"
02e19d0b8ba22a02ffade88aebb34fcd12a7197d,"a few bug fixes on complexType and element --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315746 13f79535-47bb-0310-9956-ffa450edef68"
ffeac47efe48c6c710d3b3cf129a20c34d984794,"fixed decimal type bug related to integer enumeration


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315747 13f79535-47bb-0310-9956-ffa450edef68"
49de42babffe53d67decd6d132d9221be72fe208,"bug fixes regarding maxLength, XMLException constructor --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315757 13f79535-47bb-0310-9956-ffa450edef68"
fade105fb2032cfa3f2d420d55712891eb061a65,"Updated design for Xerces-J 2.0. Use the 'design.xsl' stylesheet to
transform the 'design.xml' document into HTML.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315765 13f79535-47bb-0310-9956-ffa450edef68"
4470d810a3998853f7c98fb273824fbff413ac97,"fixed bug with max/min length


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315769 13f79535-47bb-0310-9956-ffa450edef68"
719ed15ef42f65e40f77796c989ff52e0a29dfaa,"1) Updated ""New Features"".
2) Fixed documentation bug that still referred to the SAX2 Configurable
   interface.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315772 13f79535-47bb-0310-9956-ffa450edef68"
501d3c62659a1867b2b6b3590456740787bf5fce,"Removed 1.2 call to File#toUrl() to compile under 1.1.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315774 13f79535-47bb-0310-9956-ffa450edef68"
f8ef5a40de09fcdd30dddfb515a0f70169f9641a,"Added constrain encoding required for binary type


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315775 13f79535-47bb-0310-9956-ffa450edef68"
67d115de4bd91c44c1f6d16ba9e6cd3ee67e7c5b,"updated copyright notice to the standard one


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315776 13f79535-47bb-0310-9956-ffa450edef68"
7769bca7a8519cedea8689d5c5cfa424b28f767c,"Fixed bug for grammar access when the instance document contains
a Schema grammar. This caused a NullPointerException.

The feature ""http://apache.org/xml/features/domx/grammar-access""
copies the grammar document into the DocumentType node (see notes
in the features docs) and the grammar document was never being set
on the schema grammar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315777 13f79535-47bb-0310-9956-ffa450edef68"
567a1f1ad68496c0774c7b73cf7bf1e6f6ea5975,"Refreshed the jar file


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315778 13f79535-47bb-0310-9956-ffa450edef68"
31b63263f0867ded39e34c0b21ffe21ad1d4ce1d,"fixed yet another bug in cloneMap and made it faster,
also reverse the way cloneContent works so that it changes this rather than
the map given in argument


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315779 13f79535-47bb-0310-9956-ffa450edef68"
caeb1077454aebb0712c706d60d7bd4e7cc2d074,"Need to discuss this bug with ericye - this is the reported enum bug at Xerces


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315780 13f79535-47bb-0310-9956-ffa450edef68"
dbe90b57c1554dcd6a6b8100ab85aab50cf910c0,"Checked DOMImplementation level because level 2.0 implementation do not support getLocalName() this should fix bug reported by Chris Halverson on June 13, 2000


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315781 13f79535-47bb-0310-9956-ffa450edef68"
748093190cc7780cd5509be13a53edb326966f22,"String index out of bounds exception when scanning QName fixed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315782 13f79535-47bb-0310-9956-ffa450edef68"
39b0275019104d8e045dbe302322fc277ddf9182,"When parsing a document with a Schema, the DocumentType node
was always returned as null. While this was not a big concern,
users asked that the document type node never be null. So now
this is fixed and the document type node is always created.

Having done this fix, I realized that we have a larger problem.
Default attribute values are stored in the DocumentTypeImpl
class in ElementDefinition objects. Schema documents are not
currently populating these values. Therefore, default attribute
values don't work in DOM documents that have an associated XML
Schema.

But this problem is compounded by the fact that XML Schema
allows element types to be defined locally. These locally
declared elements can have attributes with default values
so the entire default attribute value implementation in the
DOM would have to be rethought.

This is definitely a REVISIT!


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315783 13f79535-47bb-0310-9956-ffa450edef68"
d9c2cd62c2678b9dcbb65dff1a4dae65d08abdba,"Andy fix to Make sure namespace binding is defaulted


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315784 13f79535-47bb-0310-9956-ffa450edef68"
75cfac170fd6d506a41da4a3d467ba09aceeaa03,"Phase one of implementing the <any/> element in XML Schema.

The content spec node was updated to include special ANY types. Then
the TraverseSchema was modified to build these content spec types
into the grammar when ""compiling"" the Schema. Then the grammar was
modified to be able to recognize the ANY types in the content spec
tree. This would shortcut the model into using a DFAContentModel and
a new CMNode tree was built. This content model node tree contained
a new kind of node, CMAll. Finally, the DFAContentModel was modified
in order to perform validation with these new ANY types.

As I said, this is phase one. We still have the problem with the
validator not knowing that something was matched as an ANY and
therefore not trying to resolve the element and validate it. In
addition, the ""processContents"" attribute on the <any/> element
is not implemented. Both of these problems will cause changes
to be made in the XMLValidator code. Fun fun fun!


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315785 13f79535-47bb-0310-9956-ffa450edef68"
c761db8c37f9419b40adf33060fda43bfbed0d61,"Schema grammar wasn't being added to the GrammarResolver.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315786 13f79535-47bb-0310-9956-ffa450edef68"
55cbe0ffe3ea51388cbde3d3b7ef76939e30903c,"The CMAll class should have been called CMAny. Oops! Also, it needed
to be added to the Makefile.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315787 13f79535-47bb-0310-9956-ffa450edef68"
84146121d50fbe23687d73f5aa2373a6c80330c1,"Fixed logical error that caused DOM Serialization bug - please do not change - It may seem counterIntuitive but we really it makes sense - Any node which has not been fluff needs to be fluff up before we serialize


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315788 13f79535-47bb-0310-9956-ffa450edef68"
35344cc6c688ca3bcd14836794bf79bd8b786524,"1) Fixed minor bug in DFAContentModel for <any namespace='NS'/>.
   I was only handling <any/>.
2) Reported limitation of ""processContents"" attribute through
   error handler.
3) Added reminders in TraverseSchema to go back and localize the
   error message. TODO: Remove all output to System.out/err.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315789 13f79535-47bb-0310-9956-ffa450edef68"
1909cac85ca15cccbc80b4f0cfbd4334854d404c,"Cleaning up traverse functions, --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315790 13f79535-47bb-0310-9956-ffa450edef68"
9bebeb3131611120ca6f340920a898e2a56672f3,"1) Fixed minor bug in DFAContentModel for ANY.
2) Added support for ANY in mixed content models for Schema.
3) Updated XMLContentSpec#toString to produce ""meaningful"" output
   when a content model validation error occurs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315791 13f79535-47bb-0310-9956-ffa450edef68"
bb5a8cc17503a1172e3b9cd03400fe11755448bc,"fix a bug : getTypeInfoFromNS() , --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315792 13f79535-47bb-0310-9956-ffa450edef68"
0745946fa79dea127aaaad90c191bf2370ca1c94,"Namespace URI not being associated with attributes in deferred
mode. Fixed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315793 13f79535-47bb-0310-9956-ffa450edef68"
4b2262744f776c19d7e9241d378b6146ec03bf97,"fix a bug : when switching to another SchemaGrammar, didn't save the URI to the right variable , --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315794 13f79535-47bb-0310-9956-ffa450edef68"
6fd92792a82c37cb4ab50edab48f378cda997aa6,"fix 2 bugs :
 1. traverseIncludeDecl,  fSchemaRootElement should change accordingly
 2. fixes regarding no-targetnamespace schemas, such as personal-schema.xml.
 --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315795 13f79535-47bb-0310-9956-ffa450edef68"
37a693afb0e3083e2fe84fdc470f243cae9dda19,"Fixed problems with String Datatype Validator minLenth, maxLength, Length.


PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315796 13f79535-47bb-0310-9956-ffa450edef68"
b9748b5e944ddf8ae29f40e3a475fe5fc0d4222b,"fix a bug :
 traverseAttributeDecl, localpart was not set in all code branches, so throw NullPointerException somethimes.
 --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315797 13f79535-47bb-0310-9956-ffa450edef68"
0269980643081a370bdbfbad5ddd0afbe86e8d1b,"Added resetRegistry method


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315798 13f79535-47bb-0310-9956-ffa450edef68"
2db837eca242d578dfd5f6427a5dfa7b4668bf20,"change fRegistry back to non static member

 --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315799 13f79535-47bb-0310-9956-ffa450edef68"
082a391c39f3d047f90f9fc49ccd6a11960ef89b,"reset DatatypeValidatorFactoryImpl before parser a new entity

 --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315800 13f79535-47bb-0310-9956-ffa450edef68"
581ef983e63b7ea8bce34aa1f2a6286c0de098c3,"Default base type of simpleType definitions when not specified.
This was causing a NullPointerException.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315801 13f79535-47bb-0310-9956-ffa450edef68"
a96eb5c13372df968d0caa7dfa82f2158e1a2dc3,"RecurringDurationDatatypeValidator is a Work in Progress - deactivated trap


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315802 13f79535-47bb-0310-9956-ffa450edef68"
f166309c338f4bf34949e56c2b4e160159a69d47,"Added checks so type can not be null and cause a trap


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315803 13f79535-47bb-0310-9956-ffa450edef68"
01f2ab0f1d326fb8eba454b745914acf8efb5081,"The validator was incorrectly removing prefixes from elements in
the instance document that were declared locally in the Schema grammar.
I can understand the reasoning behind this decision: it revolves around
the elementForm attribute in Schema. But this does *not* change the way
that namespace binding works.

In addition, the validator was incorrectly binding namespace URIs to
elements without a prefix when the default namespace was bound.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315804 13f79535-47bb-0310-9956-ffa450edef68"
8f947bfdcc486860e01b2ff8fefcf30954cd02b0,"fix traverseAttributeDecl: using the wrong key to look up a datatypevalidator  --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315805 13f79535-47bb-0310-9956-ffa450edef68"
54e76491584004ee6e29172ccf9e8bef3d0816f5,"fixed length check bug


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315806 13f79535-47bb-0310-9956-ffa450edef68"
357e15eed654a1e1f4a65494adccc31017079284,"minLength > maxLength in both branches  --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315807 13f79535-47bb-0310-9956-ffa450edef68"
48425447271895a2269a86d6a8fe41b9982df5e8,"catch exception and report error when validate attribute value with datatypevalidator  --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315808 13f79535-47bb-0310-9956-ffa450edef68"
e7a8e95530e0a01b1a8fc9c64776a201bd5df2a4,"catch all exception and throw them up as InvalidDatatypexxxx Exceptions


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315809 13f79535-47bb-0310-9956-ffa450edef68"
171273097fdb587b7014bdf44d46513957d002f4,"fixed some messages in pattern validation and lexic. comp


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315810 13f79535-47bb-0310-9956-ffa450edef68"
bb46beeba7f4c3b418f67afb47fca9e30f072115,"fix 3 bugs:
 1. in expandContentModel in the case of {n, m} and n =0;  --ericye
 2. separate out attributeFormDefault from elementFromDefault.
 3. when not target NS, everything should be in the same default NS,
      no exception for localy defined element and attribute.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315811 13f79535-47bb-0310-9956-ffa450edef68"
e16a909d595992535781be68e3022268cb9167c1,"follow up today AndyC's fix, do the samething for the attribute. --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315812 13f79535-47bb-0310-9956-ffa450edef68"
a0bbc4dd8c8a7fc81862f96dec1f28070b5ed1ff,"It enables character class subtraction like [a-z-[c]] and fixes some bugs. Kento Tamura fix


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315813 13f79535-47bb-0310-9956-ffa450edef68"
2e780e7e73b3e5db293d2d1661368a4ab475fe7b,"It enables character class subtraction like [a-z-[c]] and fixes some bugs. Kento Tamura fix also messages


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315814 13f79535-47bb-0310-9956-ffa450edef68"
7f918f848bff11febff64a57b46bf7d714c0e8e8,"It enables character class subtraction like [a-z-[c]] and fixes some bugs. Kento Tamura fix


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315815 13f79535-47bb-0310-9956-ffa450edef68"
bcd9d8612ebaf2d37e5eb0ee71da37d1f1dbc88f,"It enables character class subtraction like [a-z-[c]] and fixes some bugs. Kento Tamura fix


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315816 13f79535-47bb-0310-9956-ffa450edef68"
b4092fa9b47f26d20d66f4db61568725854922e8,"added space to message


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315817 13f79535-47bb-0310-9956-ffa450edef68"
cf536b226659ba2bd3c5d8c3c013ce8bcde1b045,"fix isEqual() method, when  compare any leaf from a certain namespace, should only compare
their URIs.  -- ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315818 13f79535-47bb-0310-9956-ffa450edef68"
f81f607209b080bada3aeed32df78ad31cc95fc7,"Fixed bug in deferred DOM implementation that prevented adjacent
text nodes from being pre-normalized after parsing. This caused
parsed character data that contained references to the pre-defined
entities or character entities to appear in separate text nodes.

For example:

  <root>a&amp;b</root>

appeared as the following DOM tree:

  element: root
    text: 'a'
    text: '&'
    text: 'b'

when it should have appeared as the following DOM tree:

  element: root
    text: 'a&b'

This bug only affected the deferred implementation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315819 13f79535-47bb-0310-9956-ffa450edef68"
bb45d0a2c34af18b6e49c891308765c70c6e099a,"Change to Pattern facet - only need to instantiate RegularExpression once


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315820 13f79535-47bb-0310-9956-ffa450edef68"
476df008b9e4c66f522d6d437ad686bd12c7a25c,"Added URI class contribution made by Paul Eng and iClick.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315821 13f79535-47bb-0310-9956-ffa450edef68"
cfdf691fa3e2cb8e172ec1481c20774686b0941b,"1) Turned on namespace support for ALL parsers, by default.
2) Added feature to enable Schema support to be turned OFF.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315822 13f79535-47bb-0310-9956-ffa450edef68"
443da0c5db81708f6152a37a715271c6ae5b4cb2,"Updated documentation for next build and release.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315823 13f79535-47bb-0310-9956-ffa450edef68"
9a6741938cdb0738cd1f53a2a2f555fcac1e06d0,"Fixed Lexical comparison in String and QName types


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315824 13f79535-47bb-0310-9956-ffa450edef68"
0f6f037e0027bb9d84d54b7ba4f96638d938048a,"Performace- moved instantiation of RegularExpression to the facet so we don't create a RegularExpression object every time that we validate if pattern facet is present


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315825 13f79535-47bb-0310-9956-ffa450edef68"
512e072bf9a25827145df79496279fe5fd5f8588,"fixed lexicographical comparison logical bug in String and QName validators


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315826 13f79535-47bb-0310-9956-ffa450edef68"
0182426540769f81f047406c60c7c653536ac815,"Update release informatino.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315827 13f79535-47bb-0310-9956-ffa450edef68"
8c281e2ed8e980c9a1094c6860becf7b2de54814,"Change to allow parser that reads the Schema document to
use the entity resolver that is registered on the parser.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315828 13f79535-47bb-0310-9956-ffa450edef68"
64df460d1215f279649ed7f1249101938944b3cd,"Update version number in anticipation of next release.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315829 13f79535-47bb-0310-9956-ffa450edef68"
8eb165ddece429e73c53d7c14a1730d2472b6b63,"URIReferenceDatatypeValidator


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315830 13f79535-47bb-0310-9956-ffa450edef68"
c90b5c4b8edc62295ea8b8c79fd832e72c507f1f,"The attribute declaration syntax changed from using ""minOccurs"",
""maxOccurs"", and ""default"" to using ""use"" and ""value"". But the
DTD grammar access code was not updated to use these new terms.
This bug is fixed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315831 13f79535-47bb-0310-9956-ffa450edef68"
d585da026f2366a77d3ad3e4ab3a1a202334a978,"Performance update to XMLValidator to create less objects.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315832 13f79535-47bb-0310-9956-ffa450edef68"
93af9c8d8d8c049550449e10397eb27b52660825,"Performance update to XMLValidator to create less objects.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315833 13f79535-47bb-0310-9956-ffa450edef68"
4f77446d342825c10e4575943eeb8f6c78d7e83f,"Added argopt like class to be used with Samples


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315834 13f79535-47bb-0310-9956-ffa450edef68"
f2f4389f09b20498863b772dae2b649f74d3f4dc,"added argopt like class, added switch to turn on/off validation, namespace, schema support, etc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315835 13f79535-47bb-0310-9956-ffa450edef68"
30e80f608f4a3c7809119b9b64519793fc983db4,"added argopt like class, added switch to turn on/off validation, namespace, schema support, etc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315836 13f79535-47bb-0310-9956-ffa450edef68"
ed4ec02ec2750c09de59e28dfd44b1094cef1f61,"Fixed personal.xsd file to comply with 7 Apr 2000 Schema WD.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315837 13f79535-47bb-0310-9956-ffa450edef68"
d65649a82b169da903d70007d4a0eadcdb390df6,"Syntax error -- missing comma.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315838 13f79535-47bb-0310-9956-ffa450edef68"
e97800110fb8b135f1d5b65c2ee3e759606c1b50,"Removed NonValidatingDOMParser wrapper class because we are
adding a more consistent and easier way of setting parser
features into all of the samples.

This is phase 1. There is still some work left to re-organize
the features and standard argument processing utilities so
that they can better be used across DOM and SAX samples.
Then, the documentation needs to be updated.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315839 13f79535-47bb-0310-9956-ffa450edef68"
7f46497cd169279f6e999a77bae6569236b06174,"argopt like utility used by SAX and DOM samples


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315840 13f79535-47bb-0310-9956-ffa450edef68"
b430bbc0c92beeffc8b15390308712c3d2d5d12b,"remo argopt like utilities from dom package


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315841 13f79535-47bb-0310-9956-ffa450edef68"
78dd8d49ec3fca7cb13427ea266bfaa80a0dbc0c,"updated Makefile


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315842 13f79535-47bb-0310-9956-ffa450edef68"
27692cd2f768a303ae73d4c58377cd5d7a3c2dbc,"Typos in Makefile.incl.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315843 13f79535-47bb-0310-9956-ffa450edef68"
8380f9633ad931c870d0cb28f870002c614ada7a,"samples update


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315844 13f79535-47bb-0310-9956-ffa450edef68"
10b30522c5dc9b1605423476434f9c7e438055bc,"updated Makefile


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315845 13f79535-47bb-0310-9956-ffa450edef68"
8f418ea1e2f7216cfa63fff1912e5211a932b58f,"fixes to previously commited code


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315846 13f79535-47bb-0310-9956-ffa450edef68"
c7d129a9f2befd298936aad3d2dcde753321f71d,"fix a bug in traverseSimpleTypeDecl, since we only have one SimpleTypeRegistry, need to use
localpart as the look-up key.  -- ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315847 13f79535-47bb-0310-9956-ffa450edef68"
05ceb680baae7dc659e243701e5773f98c6cade2,"fixes to previously commited code


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315848 13f79535-47bb-0310-9956-ffa450edef68"
6f4567b18bc41375512b1fabf0ef91a5aca4a468,"fixes to previously commited code


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315849 13f79535-47bb-0310-9956-ffa450edef68"
f4f80be38c045b4c787c665b23195356e33cc1a7,"Added id doc


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315850 13f79535-47bb-0310-9956-ffa450edef68"
4143eab861f58c3dc38dd98109843fd7ce74c2e8,"So we can build source/samples/util dire


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315851 13f79535-47bb-0310-9956-ffa450edef68"
bcdc23018a81f5bb9aa61bd5b0c5e14d563c9d05,"fix a bug in resolving the element type in method validateElementAndAttributes.
  -- ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315852 13f79535-47bb-0310-9956-ffa450edef68"
e458ebd69fad83bfc826a85caf7d16e9ea580280,"stdopt changes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315853 13f79535-47bb-0310-9956-ffa450edef68"
652257ff552942dcc09aa9de902e80bb43f62862,"SAXWriter and SAX2Writer with stdopt


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315854 13f79535-47bb-0310-9956-ffa450edef68"
cd34ecbe9c3b7c3499650edabc8a3af23beda8d9,"fix a bug in validateElementAndAttributes, don't need to fall back to Top Level Scope anymore
because now we always bind the empty prefix element to empy prefix namespace first.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315855 13f79535-47bb-0310-9956-ffa450edef68"
5c19c465ce1b0d318ab534c180d3ee09a8ddfecd,"Fixed Derivation by list flag


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315856 13f79535-47bb-0310-9956-ffa450edef68"
178f7f257e9cd63cd53e94cb1e6f300f319ee7d6,"Updated documentation.

1) Missing samples pages updated and included (again).
2) Added download link on jumpbar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315857 13f79535-47bb-0310-9956-ffa450edef68"
f3040c525bd1c1feae9520cf100e79992322dbbd,"fixed another MinInclusive bug this one was in DecimalDatatype


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315858 13f79535-47bb-0310-9956-ffa450edef68"
551e70b139f304fbbc1e49ac77848609d963dfdc,"Improved help message.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315859 13f79535-47bb-0310-9956-ffa450edef68"
529463a89323cde0a58caffe6fae7cece7e72c53,"Typo.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315860 13f79535-47bb-0310-9956-ffa450edef68"
fb481ba4e2e15295696b6f108c4aa337f29c6260,"Fixed SAXParser so that it would call the registered DeclHandler
and LexicalHandlers for SAX2.

Thanks to Matt Jones <jones@nceas.ucsb.edu> for the bug report.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315861 13f79535-47bb-0310-9956-ffa450edef68"
832ad5f368a70318c10fe9a2ee2f96a097200217,"multiple run Arguments


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315862 13f79535-47bb-0310-9956-ffa450edef68"
200fb193c3e12fc414a3e18cdfe3cf20113d1b17,"support multiple files


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315863 13f79535-47bb-0310-9956-ffa450edef68"
b375a6f1211e2d2d0424a0ef0e5c7f87bd9a4113,"stdopt


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315864 13f79535-47bb-0310-9956-ffa450edef68"
0c32c8debe5adf5b635161713b0b1e219825c9fa,"Oops! Removed debugging output.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315865 13f79535-47bb-0310-9956-ffa450edef68"
969ee4d775e41d64f4d351991b67f022561aebd4,"Problem with the simple content model -- it would only signal
errors in simple sequences (e.g. 'a,b') when BOTH the localpart
and URI were different instead of when EITHER the localpart or
URI were different. This bug was introduced by me (oops!) when
I updated the content models to validate against namespace
information for XML Schema. Now it's fixed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315866 13f79535-47bb-0310-9956-ffa450edef68"
09d6587ccc6f945c1df6ea5ca3dd4e7bf0379f11,"Turns out that simple choices also had the same problem.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315867 13f79535-47bb-0310-9956-ffa450edef68"
754516a157413e42fd4e6f8ef04da6b319c2e081,"The whole damn thing was broken. It should be fixed now.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315868 13f79535-47bb-0310-9956-ffa450edef68"
4a72ed32abf46a88ce351641e70da35b950c5236,"scope binding should happen before switching to a different schema.
-- ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315869 13f79535-47bb-0310-9956-ffa450edef68"
b187f804f2d47093a075c39d3497102859ba5e69,"Fixed retarded way to keep argument - order was reversed


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315870 13f79535-47bb-0310-9956-ffa450edef68"
571c8a8de3e38746f1a4ceff984d1ed7520e451d,"Fixed it it runs in 1.1.x


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315871 13f79535-47bb-0310-9956-ffa450edef68"
51bb159db6429b72e715ff839e11b812390a06cd,"Fixed it it runs in 1.1.x


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315872 13f79535-47bb-0310-9956-ffa450edef68"
ffe9ff38ab60d9d6ef05bd9b62f2500a320ef818,"validation message should default to false


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315873 13f79535-47bb-0310-9956-ffa450edef68"
301098a08b4ba5a17f242a5c23cb6ccb1764e64b,"bug in resolving element.
-- ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315874 13f79535-47bb-0310-9956-ffa450edef68"
fae9d634b9f11020e02dc72f416aa9d644835d31,"when no targetnamespace is defined, only element will put into the default Namespace, attributes
still attach to its containing element.
-- ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315875 13f79535-47bb-0310-9956-ffa450edef68"
dbca7f8211f634331ce6a0fee7572eb99808d143,"added ability to do -v -c file and  -vc file


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315876 13f79535-47bb-0310-9956-ffa450edef68"
f32163a432845d150b71360977971ebcfa0b0cba,"Samples jar fix.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315877 13f79535-47bb-0310-9956-ffa450edef68"
04db6ae68d9eb92506783714f23c34bf37287fa3,"Update Stylebook to print UTF-8 HTML instead of UTF-16.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315878 13f79535-47bb-0310-9956-ffa450edef68"
6fe7eaf551b2dbaf4f8df5f2547840b2e1a5400e,"added ability to do -v -c file and  -vc file


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315879 13f79535-47bb-0310-9956-ffa450edef68"
e0bdcda5b8217fdd588235e0431fc4eeb1e738bf,"added ability to do -v -c file and  -vc file


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315880 13f79535-47bb-0310-9956-ffa450edef68"
4481b54ff871cf15420f5aa5105cb89b3e5f8eae,"When creating the document type node, the code wasn't checking
to make sure that the document impl wasn't null. Therefore,
when users set their DOM implementation by name, the DOM parser
would throw a null pointer exception. This is fixed now.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315882 13f79535-47bb-0310-9956-ffa450edef68"
d705163e0956390ef00691b5c4287ad680c34775,"1. set XMLDTDScanner's fNamespacesEnbled flag.
2. bind the prefix ""xml"" since it is the only known(predefined) NS .

-- ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315883 13f79535-47bb-0310-9956-ffa450edef68"
bb8e1d1d1a97717cb8a19a1092e0429bbdd6a306,"Change to allow subclasses of DocumentImpl and DeferredDocumentImpl
to take advantage of the extra features of our implementation --
setting IDs, grammar access, etc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315884 13f79535-47bb-0310-9956-ffa450edef68"
ac28aff2e50222e799ae9b9c6eddf601d6887d89,"Added this testcase to test for regression in future releases


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315885 13f79535-47bb-0310-9956-ffa450edef68"
6f1fe44987d563d73d6d6ea1aab56d75554d7e96,"I made a mistake in my previous comit.  There are Nodes which
don't have the SYNCCHILDREN set to off.

When we deserialize a DOM we should never encounter such a case.

I suspect that the synchronizeChildren method is not doing what is suppose
to do which is to turn SYNCCHILDREN off once the nodes have been fluff up. This
is a bug and we should do further investigation.

This fix prevents from  this situation ever happening by  turning the SYNCCHILDREN flag off
as we desearialize the nodes in the readObject method.

PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315886 13f79535-47bb-0310-9956-ffa450edef68"
0832e71ac65882fe47bdc750532cf80e67aadbdc,"Removed redundant synch code.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315887 13f79535-47bb-0310-9956-ffa450edef68"
f980de8d75a5106035ff1defed71e52effda3a33,"Improved document-class-name property code.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315888 13f79535-47bb-0310-9956-ffa450edef68"
94bdee269ad612001ae1a66ab15f91ad5898e95b,"misc. bug fixes.

-- ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315889 13f79535-47bb-0310-9956-ffa450edef68"
e54b69b2f2f1d244cc5cd2cf33dd31007997cf9e,"SAX2 declaration handler was not getting the correct
content model for elements of type ANY or EMPTY. This
is now fixed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315890 13f79535-47bb-0310-9956-ffa450edef68"
1a31734128769eb4911962af638be807c4d27b8c,"SchemaGrammar takes more information from a Schema, and bug fixes
related with Group and Attr group reference from another NS.

-- ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315891 13f79535-47bb-0310-9956-ffa450edef68"
3283014110d75ad4c7ff6595d6e2641b8138cfed,"fix a bug when <any namespace=""more that one uri""
-- ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315892 13f79535-47bb-0310-9956-ffa450edef68"
a84121f50d05c8ee0052e382f3eeb4972f9733af,"add wildcards element to model groups besides within complexType
-- ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315893 13f79535-47bb-0310-9956-ffa450edef68"
f62b3dd171643f8d212a32e4bc5915039d27bd26,"setNamedItemNS failed to set ownerNode


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315894 13f79535-47bb-0310-9956-ffa450edef68"
fdf0e4b290ac69d3c8dc3344c3222d2b762610a7,"This fixes a problem with parameterizes entities such as:
as the one found when we have in a dtd such thing as:

<!ENTITY % FOOBAR
           ""'foofoo'"" >
<!NOTATION test SYSTEM """">
<!ENTITY bar SYSTEM %FOOBAR; NDATA test >
<!ELEMENT FOO  (BAR?)>
<!ELEMENT BAR (MOCHA*)>
<!ELEMENT FOOFOO (#PCDATA)>

This bug also cause the parsing of a Schema containing a reference
to the structures or datatype dtd to fail with the following
message:
org.xml.sax.SAXException: Stopping after fatal error: The system identifier
must begin with either a single or double quote character.

A Caveat is that the XMLDTDScanner code is very obscure and we may have more
surprises.


PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315895 13f79535-47bb-0310-9956-ffa450edef68"
0ca675578a3832257bab70da47a5d5c38419ace0,"1. parse out block, final, abstract for both element and type, and nullable for element,
2. save these properties in the SchemaGrammar
--ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315896 13f79535-47bb-0310-9956-ffa450edef68"
e2e0440bbfc66639fae10425b2b8f1da2ad2ccc9,"add xsi:type support in the valid cases.
--ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315897 13f79535-47bb-0310-9956-ffa450edef68"
592ae3139866a2f2a692b9e0bd85e84e4884c97c,"create a message id for generic schema error


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315898 13f79535-47bb-0310-9956-ffa450edef68"
04901a5f508997a2fc4ad490f5cd68b79e0f4207,"Updated to go with latest ANT


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315899 13f79535-47bb-0310-9956-ffa450edef68"
f6828c61a3cff6dea40db9a77b4de7457d713979,"Now does not fork a new process for Stylebook docs, bug resolved


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315900 13f79535-47bb-0310-9956-ffa450edef68"
755b899c94b99a70392898f25799d877198c4704,"Does not use System.exit() call inside Main, enables running within same JVM in Ant


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315901 13f79535-47bb-0310-9956-ffa450edef68"
3cb968002faecf74fee4bf5e882a5769797f0aef,"Updated to use new xerces.jar and xalan.jar


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315902 13f79535-47bb-0310-9956-ffa450edef68"
72880700c09d5488085b84625e04dc6a3b695f42,"duplicate elementDecl is allowed as long as they have the same type definition.
--ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315903 13f79535-47bb-0310-9956-ffa450edef68"
4c1e4f80c4b8dec6f4d9e357d47441a9c5a7b5eb,"minor reorg to make the code more modular:
updates of Range and NodeIterator objects is now done via notification to
the document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315904 13f79535-47bb-0310-9956-ffa450edef68"
724c5904263e34696a38560774e273d8ba109a04,"global renaming of some internal methods,
I too wish I got them right in the first place...


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315905 13f79535-47bb-0310-9956-ffa450edef68"
a1fda09b4ce66888a15851230a2ac7a697cc1d12,"Yet another change to make the DOM smaller:
We used to have a change count on every (parent) node, so that we knew what
subtree changed. But since only DeepNodeList really use this today,
the gain appears to be really small compared to the cost of having
an int on every (parent) node plus having to walk up the tree all the
way to the root to mark the branch as changed everytime a node is
changed.
So we now have a single counter global to the document. It means that
some objects may flush their cache more often than necessary, but this
makes nodes smaller and only the document needs to be marked as changed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315906 13f79535-47bb-0310-9956-ffa450edef68"
97797d3153164ed1d6aa1de8c65426c0e06e0b70,"Change element form attribute behavior to be 100% consistent with Schema spec


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315907 13f79535-47bb-0310-9956-ffa450edef68"
dc3f1d2134e1a30f95511c4265121e02f125a9d8,"1. fix a bug in traverseSimpleTypeDecl. 2. add a convenience method to Grammar.java. 3. fix a bug in TraverseComplexTypeDecl: concatenating its own contentspec handle to its basetype's only when it has one, otherwise should copy its baseType's


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315908 13f79535-47bb-0310-9956-ffa450edef68"
fdd74b6ad85333f1d943e3ae0776a3cd05c6b470,"added code to update the cache (lost in previous change)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315909 13f79535-47bb-0310-9956-ffa450edef68"
42188be95585cd27cb21281ae3b2fd0eb6e81439,"fixed cache update code (again, I hope I have it right now!)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315910 13f79535-47bb-0310-9956-ffa450edef68"
37a44adce9ec72eef25b44b4fbb470dc67b43788,"Fixed: xercesSamples.jar did not have util/Arguments class


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315911 13f79535-47bb-0310-9956-ffa450edef68"
40f5f61592648c7315875363d8fde2f51b2037f5,"positiveInteger minInclusive = 1

--ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315912 13f79535-47bb-0310-9956-ffa450edef68"
e210cad9d52d84483790513d9d76f4c1dce4233f,"Added James Duncan fix suggestion to not compile RevalidatingDOMParser


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315913 13f79535-47bb-0310-9956-ffa450edef68"
78a35e3ee0992c09730db0ed2e63cbe92e1fdd83,"fix a bug in resolving element decl type definition.

--ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315914 13f79535-47bb-0310-9956-ffa450edef68"
f4afa9f6729969255f191026016bdbcdeb40cb11,"Patch to fix null format exception


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315915 13f79535-47bb-0310-9956-ffa450edef68"
f5bc32a5f8ed45f5d7391d97b252e9b3cd0ba7aa,"Commented out entity that does not display properly on NN 4.7


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315916 13f79535-47bb-0310-9956-ffa450edef68"
0ecfd35692d6febf08ed3e5a5aceecf7c3c00cb1,"Patch to fix null format exception


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315917 13f79535-47bb-0310-9956-ffa450edef68"
5453aaa1b3b312be38b47f18a2a5c6d9f874d3f0,"Changed methods to public modifier


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315918 13f79535-47bb-0310-9956-ffa450edef68"
8943ca49e2eb47b95edd57b01b501cc94a0d75c6,"Need to make sure that nodes are fluff up if we are calling clonenode()


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315919 13f79535-47bb-0310-9956-ffa450edef68"
d1ba429583338ca3fd85b226865da1c82e1e60b2,"Fixed Makefiles so whole dom.tests package can be compiled


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315920 13f79535-47bb-0310-9956-ffa450edef68"
cad324fed7290e0ba3fa15603af5d44e1695ae43,"add more description to feature "" create-entity-ref-nodes""
--ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315921 13f79535-47bb-0310-9956-ffa450edef68"
5224e1a31af7b92ecb0fb3ead4f2aea9e5432ac9,"1. clean up EquivClass processing.
2. add equivClass dimension to SchemaGrammar element decl pool
--ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315922 13f79535-47bb-0310-9956-ffa450edef68"
94649dba06120bea8875b15575229332aac1d812,"Now has exit() in Main


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315923 13f79535-47bb-0310-9956-ffa450edef68"
32e136f86542472168b4de1807965d5e6e459021,"Added full equivClass support in Content Models and validation
--ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315924 13f79535-47bb-0310-9956-ffa450edef68"
02d115bcc1300822bd4c2fc77bb07c17a641c612,"Added EquivClassComparator.class
--ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315925 13f79535-47bb-0310-9956-ffa450edef68"
7a1c7117d86588bf2b638a5c649c043d04ca9849,"bug found and fix suggested by David.Blankenship@kla-tencor.com:
should have used EntityResolver to resolve the schemaLocation,
--ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315926 13f79535-47bb-0310-9956-ffa450edef68"
2555c6b3c5f60c5cf88899fe883d8a429d1ce511,"change release number in prep for 1.1.3 release


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315927 13f79535-47bb-0310-9956-ffa450edef68"
89266c9eb7e05c23047e40b55182b44209b7efc6,"doc changes for 1.1.3
--ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315928 13f79535-47bb-0310-9956-ffa450edef68"
6e4c463c503a9141ef0254aab53d81672c5468f8,"change release number in prep for 1.1.3 release


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315929 13f79535-47bb-0310-9956-ffa450edef68"
1d6fb52f53c4a483940b04815c93262b4fb5cf99,"put back in code that was inadvertently lost in 1.6
and which allows xml:space to be declared as only having one of the two
possible values


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315930 13f79535-47bb-0310-9956-ffa450edef68"
fe4f5574785fc8373f0cc61372b98b4e5f6c1d5c,"Fix for BUG:SAXParser endElement reports incorrect local name reported by Wiggen


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315931 13f79535-47bb-0310-9956-ffa450edef68"
ab622a7e8f42acd8f2fe9dd96a3225bd66f4a06d,"Eliminated dtds


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315932 13f79535-47bb-0310-9956-ffa450edef68"
285c935b8f1671026d6df09bcf82766c4de2a5b0,"Made Stylebook as a separate forked process


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315933 13f79535-47bb-0310-9956-ffa450edef68"
18ab37d319fd5b2c32f4704c86a95a0e9180b800,"clean up XMLValidator


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315934 13f79535-47bb-0310-9956-ffa450edef68"
591cb97c7cc427d1fbc7062534a175db79109a3b,"Fixed bug reported by Philippe MOUAWAD, on XMLContentSpec toString method where we
generated incorrect content models.
e.g
From: ""Philippe MOUAWAD"" <philippe.mouawad@effix.fr>
Reply-To: xerces-j-dev@xml.apache.org
To: xerces-j-dev@xml.apache.org
Subject: Bug in DeclHandler
Date: Mon, 10 Jul 2000 11:23:32 +0200



Hello all,
I implement org.xml.sax.ext.DeclHandler to get
DTD ELEMENT and ATTLIST declarations.
For this declaration :
     <!ELEMENT E_ONE_OR_ZEROS ((E_ONE_OR_ZERO)?)*>
I get :
      <!ELEMENT E_ONE_OR_ZEROS E_ONE_OR_ZERO?*>
Can you fix it ?
Thanks.


I tried the following ones:

<!ELEMENT f (a,b,c?)>
<!ELEMENT a ((b)?)* >
<!ELEMENT a1 (b)? >
<!ELEMENT d (b)* >
<!ELEMENT k ((b,c) | (b,d))>
<!ELEMENT h (a, (d, f,(a)*), b) >
<!ELEMENT h (a, (d, f,(a,b)*), b) >
<!ELEMENT g (b*) >
<!ELEMENT e ((b)*)? >
<!ELEMENT c (b)? >
<!ELEMENT m (((b)))*>
<!ELEMENT n ((a)?)?>
<!ELEMENT p ((a,b)*)*>
<!ELEMENT E_ONE_OR_ZEROS ((E_ONE_OR_ZERO)?)*>


Philippe reported also a bug with ANY content but I will deal with that report
on a separate bug if necessary.

Jeff Rodriguez



PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315935 13f79535-47bb-0310-9956-ffa450edef68"
e583b25b7b585aa3bf2b0fabf9b5b7ada0e68696,"add a item, --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315936 13f79535-47bb-0310-9956-ffa450edef68"
d7e4702af1452bddec126de4209ab9ad133ca811,"rewrote code updating the linked list on node addition and
removal. I believe it is now easier to read and it uses fewer tests so it
is also a little faster


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315937 13f79535-47bb-0310-9956-ffa450edef68"
a87da6f210a4427ffb703049210368dad654d194,"Fixed bug reported by Michael Brundage,
This bug occurred when you xml document loaded following DTD
 http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd


The following ATTLIST caused the DTDScanner to die:

<!ATTLIST bdo
  %coreattrs;
  %events;
  lang        %LanguageCode; #IMPLIED
  xml:lang    %LanguageCode; #IMPLIED
  dir         (ltr|rtl)      #REQUIRED
  >


D:\saxbug>java sax.SAXCount -n testhtml.xml
n
Length of fData = 97
fData = >>lang        NMTOKEN #IMPLIED
  xml:lang    NMTOKEN #IMPLIED
  dir         (ltr|rtl)      #IMPLIED<<index = 34 fCurrentOffset = 4
java.lang.StringIndexOutOfBoundsException: String index out of range: -30
	at java.lang.String.substring(String.java:1503)
	at org.apache.xerces.readers.StringReader.scanQName(StringReader.java:686)
	at org.apache.xerces.framework.XMLDTDScanner.checkForAttributeNameWithPEReference(XMLDTDScanner.java:3120)
	at org.apache.xerces.framework.XMLDTDScanner.scanAttlistDecl(XMLDTDScanner.java:2046)
	at org.apache.xerces.framework.XMLDTDScanner.scanDecls(XMLDTDScanner.java:1433)
	at org.apache.xerces.framework.XMLDocumentScanner.scanDoctypeDecl(XMLDocumentScanner.java:2179)
	at org.apache.xerces.framework.XMLDocumentScanner.access$0(XMLDocumentScanner.java:2133)
	at org.apache.xerces.framework.XMLDocumentScanner$XMLDeclDispatcher.dispatch(XMLDocumentScanner.java:775)
	at org.apache.xerces.framework.XMLDocumentScanner.parseSome(XMLDocumentScanner.java:380)
	at org.apache.xerces.framework.XMLParser.parse(XMLParser.java:861)
	at org.apache.xerces.framework.XMLParser.parse(XMLParser.java:900)
	at sax.SAXCount.print(SAXCount.java:152)
	at sax.SAXCount.main(SAXCount.java:380)


Where we were trying the following:

 int index = fData.indexOf(':', nameOffset);
        if (index != -1) {
            qname.prefix = fStringPool.addSymbol(fData.substring(nameOffset, index));
            qname.localpart = fStringPool.addSymbol(fData.substring(index, fCurrentOffset));
        }
        else {
            qname.localpart = qname.rawname;
        }

Where index > fCurrentOffset

If we want the local name we need:

  qname.localpart = fStringPool.addSymbol(fData.substring(index, index + fCurrentOffset));


We should check the rest of this module for possible bugtraps like this ( check the other
readers + have more unit testcase to test code branches less frequently used).

Jeffrey Rodriguez



PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315938 13f79535-47bb-0310-9956-ffa450edef68"
dfdfef552b8b55dfc18ed9811d8e75923a77c8b5,"added new Element.hasAttributes method that just got approved
by W3C DOM WG


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315939 13f79535-47bb-0310-9956-ffa450edef68"
86bfad78f16d17c02b70ba875b5ae0e9cd5f6cf8,"validate ID, IDREFs with Schema, --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315940 13f79535-47bb-0310-9956-ffa450edef68"
acf07a0e14978018854ab0d199cd130c275d5945,"forgot to remove debugg printout, --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315941 13f79535-47bb-0310-9956-ffa450edef68"
397581c1c307efa727d4c0b24e33bf7f8ef37d1c,"set the list for addAttDef, --ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315942 13f79535-47bb-0310-9956-ffa450edef68"
35420ccf7d194daa593a52c285edbc63b6e963a3,"fixed minor problem with the any #PCDATA part of the toString


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315943 13f79535-47bb-0310-9956-ffa450edef68"
dbec7395612cebb7a35e4eee8f15c5519c72af5a,"added call to synchronizeData to new method hasAttributes()


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315944 13f79535-47bb-0310-9956-ffa450edef68"
1c43df43bbc8742210dc45d10ad526a3e001214b,"hasAttributes() got moved from Element to Node


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315945 13f79535-47bb-0310-9956-ffa450edef68"
5c1e2bebb49fff6ce92964b7e475c72fd32438cb,"turned MutationEvents support back on (checked in by mistake)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315946 13f79535-47bb-0310-9956-ffa450edef68"
892ac6926f4dcf59124d9bad5378d06df6d5311d,"added anyAttribute Support


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315947 13f79535-47bb-0310-9956-ffa450edef68"
f0cbfd1ad139f7ce67eeb934562480c9b70d8f39,"fix a error message when element has EMPTY content type.
--ericye


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315948 13f79535-47bb-0310-9956-ffa450edef68"
70ab2180e294cbb9255e244dea80b4b507371573,"Fixed problem where you couldn't validate using DTDs with
namespaces turned on. Now this is fixed (hopefully).

Changes had to be made in the grammar class in order to
store the rawname of the element declarations. Then,
changes had to be made in the various content models in
order to ""know"" the difference between DTDs and Schema
so that they would perform standard DTD comparison of
element names.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315949 13f79535-47bb-0310-9956-ffa450edef68"
07e152ba7bbcb7d77c47d9c6af0425fb7e090edf,"fixes regarding a bug with MixedContentModel that caused a ibm conformance test case failing.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315950 13f79535-47bb-0310-9956-ffa450edef68"
d14907ba9ddb7688cdb852b5e43c253fbaf2ed01,"This commit fixes DTD validation when used with namespaces. The
previous fix worked on standard XML files with DTDs that didn't
use namespaces at all. This allows all three combinations to
work: XML Document using DTDs when

  1) document doesn't contain namespace information
  2) document contains namespace information (w/o prefixes)
  3) document contains namespace information (w/ prefixes)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315951 13f79535-47bb-0310-9956-ffa450edef68"
679e5518d801c1ac99b32b925b13e7079023c59c,"fix a bug when DTD validation, with namespace on and there are prefixed-attributes in DTD:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315952 13f79535-47bb-0310-9956-ffa450edef68"
84a2b0138df9fdf85c6299371aa7009b00b7a7f9,"Another one in addDefaultattributes,  when DTD validation, with namespace on and there are prefixed-attributes in DTD:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315953 13f79535-47bb-0310-9956-ffa450edef68"
aaf9fa91b2cbf7c74f985b6aad1538a4f683d32d,"release notes update for  1.1.3


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315954 13f79535-47bb-0310-9956-ffa450edef68"
b4767c7ada04e74def3590d5c87aa4058afdf296,"initial version
PR:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315956 13f79535-47bb-0310-9956-ffa450edef68"
6f4e11a3f4b61ebeef661ac416933e627a167611,"Changes:
Moved some ""features"" into a ""supported standards"" section.
Rename from Xerces2 to XRI.
Add a ""conflicts with <other-requirement>"" tag on some items.
Added a numerical index.

Req 2 status changed to ""approved""; conflict with 24 noted.
Reqs 5,6 status changed to ""approved"".
Req 10 status changed to ""approved""; strength changed from ""hard"" to
""soft"".
Reqs 12,14,15,16,18,19 status changed to ""approved"".
Req 22 strength changed from soft to hard.

References to mail prior to 7/18 added.

PR:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315957 13f79535-47bb-0310-9956-ffa450edef68"
a965d977d27b84bfab51237ad20027f0c7776611,"My previous fix only took care of fixing complex PEDecl in ATTLIST one case while breaking the other
which is PEDecl in ELEMENT Declaration:

I provided a better fixed that should work for the following case which covers the two cases
mentioned above:

--- DTD -
!ENTITY % one  ""ns:one"" >
<!ENTITY % nspac ""xmlns:ns"" >
<!ENTITY % spac ""%nspac; CDATA #IMPLIED""  >
<!ENTITY % inf  ""%one; info CDATA #IMPLIED"" >
<!ELEMENT %one; ANY >
<!ATTLIST    %inf;
             %spac;  >
--- XML----------------
<!DOCTYPE ns:one SYSTEM ""foo.dtd"">
<ns:one info=""bar"" xmlns:ns=""http://foo.com"">
</ns:one>
---------------------
When running sax.SAXCount with namespace on:

fastchar = >> <<
element  = prefix: 37, localpart: 38, rawname: 36, uri: -1
localn=>>one<<
fData = >>ns:one<<
index = 2
current off = 6
fastchar = >> <<
element  = prefix: 37, localpart: 38, rawname: 36, uri: -1
localn=>>one<<
fData = >>ns:one info CDATA #IMPLIED<<
index = 2
current off = 6
fastchar = >> <<
attribute = prefix: -1, localpart: -1, rawname: -1, uri: -1
fastchar = >> <<
attribute = prefix: -1, localpart: 47, rawname: 47, uri: -1
localn=>>ns<<
fData = >>xmlns:ns CDATA #IMPLIED<<
index = 5
current off = 8
foo.xml: 1382 ms (1 elems, 2 attrs, 0 spaces, 1 chars)

Whe running sax.SAXCount with namespace off:

D:\bugnew>java sax.SAXCount -v -N foo.xml
foo.xml: 1342 ms (1 elems, 2 attrs, 0 spaces, 1 chars)

We get the correct namespace local names for ElEMENT and ATTLIST.








PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315958 13f79535-47bb-0310-9956-ffa450edef68"
c59e6b2997c09b572c6ad7c99866f3d319e2ddca,"fkup in line 691
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315959 13f79535-47bb-0310-9956-ffa450edef68"
45633e166d378cedf431451c6537c2433a4e2d44,"Finish Enumeration by list for String and also added fBase type check
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315960 13f79535-47bb-0310-9956-ffa450edef68"
dfbc7e4364b42c0317ca9c29b56d3ff28658767f,"Fixed some addition problem with related to String List derivation.

for:

----------xsd - ----------------------------
<xsd:schema xmlns:xsd=""http://www.w3.org/1999/XMLSchema"">

<xsd:simpleType name=""EnumType"" base=""xsd:string"">
<xsd:enumeration value=""v1""/>
<xsd:enumeration value=""v2""/>
<xsd:enumeration value=""v3""/>
</xsd:simpleType>

<xsd:simpleType name=""EnumList"" base=""EnumType"" derivedBy=""list""/>

<xsd:element name=""IEnum"" type=""EnumList""/>

</xsd:schema>

=========xml===============================================
<?xml version=""1.0"" encoding=""UTF-8""?>
<IEnum xmlns:xsi=""http://www.w3.org/1999/XMLSchema-instance""
xsi:noNamespaceSchemaLocation=""enum.xsd"">
v1 v2 v3 v4
</IEnum>
===================================================

then running it.

D:\bugnew>java sax.SAXCount -v enum.xml
[Error] enum.xml:5:10: Datatype error: Value 'v4' must be one of [v1, v2, v3].
enum.xml: 1532 ms (1 elems, 2 attrs, 0 spaces, 15 chars)




PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315961 13f79535-47bb-0310-9956-ffa450edef68"
c990923070b84d0fbdc2141c93a88fb84c531f9a,"Added Max,Min,Inclusive,Exclusive boundary validatio in Decimal and added Basetype validation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315962 13f79535-47bb-0310-9956-ffa450edef68"
c3b309a3bbcdfa0e9fcfb1833852322d3e8ac3fb,"Add the UTF8 BOM check: skip it if find a beginning sequence of {0xEF, 0xBB, 0xBF}.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315963 13f79535-47bb-0310-9956-ffa450edef68"
fedc8338c621f8291ece8d786c4bf1aec93282a8,"Put back name as Xerces2 / XRI pending vote results.
Split up 13 into individual requirements
   kill subrequirement a), subsumed by 12
Change wording on 28 to make JDOM one among many equals
Make 33 reference XML Fragment
Kill 27 & reword 4.
Add new requirements
    38 Relax
    39 Gzip/compresssion/encryption


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315964 13f79535-47bb-0310-9956-ffa450edef68"
e36ebdbb0d3fdd1db387ef504e1afbc888179109,"fixed BigDecimal '+' bug, this shows in versions earlier than 1.2 causing a numErrorException to be thrown if value is like '+2.33'


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315965 13f79535-47bb-0310-9956-ffa450edef68"
a299972ec2aded678db303a81e3038f5354a30cc,"Message for boundary condition check


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315966 13f79535-47bb-0310-9956-ffa450edef68"
cdd5b1bc6dccdb2e45c8e599f42963a67ca005be,"Added Facet consistency and boundary check


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315967 13f79535-47bb-0310-9956-ffa450edef68"
ea0a11dbef5523d9423213050430014b129cfba8,"1. Modified the data type registry to be keyed by uri,localpart pair. 2. added xsi:type support for simple types.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315968 13f79535-47bb-0310-9956-ffa450edef68"
4f02aebe1d80105a993bcbe4ed9adbae78c8a03e,"UTF8Reader.java


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315969 13f79535-47bb-0310-9956-ffa450edef68"
302448e04913349c50b0e45503a922faf32ff19b,"We should check UTF-8 bit distribution in copyMultibyteCharData. If use data
is erroneous e.g. outside the range 0x80 first byte we will eat the four characters,
this will cause the right end bracket to be eaten and the erroneous message and a trace dump like:
<!DOCTYPE doc [
<!ELEMENT doc (#PCDATA)>
]>
<doc></doc>

I get the following error:


[Fatal Error] test.xml:5:1: The element type ""doc"" must be terminated by the
matching end-tag ""</doc>"".
org.xml.sax.SAXException: Stopping after fatal error: The element type ""doc""
must be terminated by the matching end-tag ""</doc>"".
        at java.lang.Throwable.fillInStackTrace(Native Method)
        at java.lang.Throwable.fillInStackTrace(Compiled Code)
        at java.lang.Throwable.<init>(Compiled Code)
        at java.lang.Exception.<init>(Exception.java:42)
        at org.xml.sax.SAXException.<init>(SAXException.java:45)
        at
org.apache.xerces.framework.XMLParser.reportError(XMLParser.java:1001)
        at
org.apache.xerces.framework.XMLDocumentScanner.reportFatalXMLError(XMLDocumentSc
anner.java:634)
        at
org.apache.xerces.framework.XMLDocumentScanner$ContentDispatcher.endOfInput(XMLD
ocumentScanner.java:1457)
        at
org.apache.xerces.framework.XMLDocumentScanner.endOfInput(XMLDocumentScanner.jav
a:417)
        at
org.apache.xerces.validators.common.XMLValidator.sendEndOfInputNotifications(XML
Validator.java:448)
        at
org.apache.xerces.readers.DefaultEntityHandler.changeReaders(DefaultEntityHandle
r.java:1006)
        at
org.apache.xerces.readers.XMLEntityReader.changeReaders(XMLEntityReader.java:168
)
        at
org.apache.xerces.readers.UTF8Reader.changeReaders(UTF8Reader.java:182)
        at org.apache.xerces.readers.UTF8Reader.scanContent(Compiled Code)
        at
org.apache.xerces.framework.XMLDocumentScanner$ContentDispatcher.dispatch(Compil
ed Code)
        at org.apache.xerces.framework.XMLDocumentScanner.parseSome(Compiled
Code)
        at org.apache.xerces.framework.XMLParser.parse(XMLParser.java:861)
        at org.apache.xerces.framework.XMLParser.parse(XMLParser.java:900)
        at sax.SAXCount.print(SAXCount.java:152)
        at sax.SAXCount.main(Compiled Code)

This should not be the case and we should return the real error:

[Fatal Error] bugp.xml:4:7: An invalid XML character (Unicode: 0xa3) was found i
n the element content of the document.
org.xml.sax.SAXException: Stopping after fatal error: An invalid XML character (
Unicode: 0xa3) was found in the element content of the document.
        at java.lang.Throwable.<init>(Throwable.java:96)
        at java.lang.Exception.<init>(Exception.java:44)
        at org.xml.sax.SAXException.<init>(SAXException.java:45)
        at org.apache.xerces.framework.XMLParser.reportError(XMLParser.java:1001
)
        at org.apache.xerces.framework.XMLDocumentScanner.reportFatalXMLError(XM
LDocumentScanner.java:643)
        at org.apache.xerces.framework.XMLDocumentScanner$ContentDispatcher.disp
atch(XMLDocumentScanner.java:1390)
        at org.apache.xerces.framework.XMLDocumentScanner.parseSome(XMLDocumentS
canner.java:380)
        at org.apache.xerces.framework.XMLParser.parse(XMLParser.java:861)
        at org.apache.xerces.framework.XMLParser.parse(XMLParser.java:900)
        at sax.SAXCount.print(SAXCount.java:152)
        at sax.SAXCount.main(SAXCount.java:372)





PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315970 13f79535-47bb-0310-9956-ffa450edef68"
fd7fd43c0b5d07dd37325ebdea53103ba11552ea,"DecimaDatatypeValidator.java


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315971 13f79535-47bb-0310-9956-ffa450edef68"
09b104458d4684d1d1999ed744f99c7efd9e22c5,"Fixed, problem shown by testcase:
sax.SAXCount -v ibmd3_2_8v01.xml
[Error] ibmd3_2_8v01.xml:12:27: Datatype error: Constrain encoding required for
binary datatype.
ibmd3_2_8v01.xml: 3415 ms (1 elems, 10 attrs, 0 spaces, 36 chars)



PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315972 13f79535-47bb-0310-9956-ffa450edef68"
dbe4f1711bb49589f5e2315d6dee9e823f4a68c5,"previous version only supported '7bit' encoding, so I added '8bit' encoding and
fixed problem reported on Xerces-j mailiing list about out of boundaries array
access.
Also give code and decode static access.



PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315973 13f79535-47bb-0310-9956-ffa450edef68"
848989b285eaaf6e5ffb3127d85b27d5dd293276,"This fix tested the case where we have an incorrect UTF-8 mutibyte such any of
the following sequences:
f0 90 80 5f
f4 8f bf 5f
f2 8f bf 20

This came about as the parser did not detect errors with testcase ibm02v01.xml
( without revisions ).

The same tescase produces and error message with Microsoft XML parser.

I check that the  multibyte followed Table A-3 from Unicode UTF-8 bit distribution.

This causes the line and problem to be reported, but we still have a bug because
in this case we then call scanInvalidChar and convert the invalid UTF-8 into a Unicode
value which we report in the message.

element  = prefix: -1, localpart: 37, rawname: 37, uri: -1
[Fatal Error] ibm02v01.xml:7:50: An invalid XML character (Unicode: 0x1001f) was
 found in the processing instruction.
org.xml.sax.SAXException: Stopping after fatal error: An invalid XML character (
Unicode: 0x1001f) was found in the processing instruction.

Here value f0 90 80 5f (incorrect UTF-8) was mapped incorrectly into 0x1001F !! This is bad





PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315974 13f79535-47bb-0310-9956-ffa450edef68"
67cbf0cac077b75a26cd342eeb69408eded5f083,"scanInvalidTest reported incorrect value for 3-byte multibyte valid UTF-8
representation in Unicode.
Old code just did this incorrectly.


PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315975 13f79535-47bb-0310-9956-ffa450edef68"
1296cab5e0f1f8fd04e7cc245027f9e8c2ba2743,"endDTD never gets called when there is only internal subset.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315976 13f79535-47bb-0310-9956-ffa450edef68"
e4f960b9e552a25111aa8d1e68aa39f25bec5ff8,"if a complexType has a base type whose content is empty,
and this type has not ""content"" value, no content model
defined, then it is natural it should have empty content.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315977 13f79535-47bb-0310-9956-ffa450edef68"
f9beaba595a73d2652de83e411b828e031b343cf,"This is newer build of stylebook jar file that solve the problem of generating
Documents in Unix systems.
The problem mentioned above also break our automated build.

PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315978 13f79535-47bb-0310-9956-ffa450edef68"
f0fb37aeb0057d22d818b2849ecd770833b6cff8,"Name changed back to Xerces2

Item 2: restated more conservatively:

The parser should have a competitive memory footprint (competitive
against the other Java based parsers out there).

Item 24: added  ""Such performance shall not come at the expense of 5.""

Item 28: call the internal API the ""API Xerces Native API""

Conflicts removed:

2 vs. 10
2 vs. 24

Items removed:

36 The parser should support compilation of a high-speed customized parser
based on a W3C schema.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315979 13f79535-47bb-0310-9956-ffa450edef68"
b424bb2801e3af748fee87a16d8f3048ff355145,"recover the behavior to be in line with Xerces1.0.3:
- when validation is off, XMLValidator still provide attribute type and default data to the pipeline.
- a feature will be added later on to turn this off, by default will be on.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315980 13f79535-47bb-0310-9956-ffa450edef68"
bd201aab550e9c81383572a2ae77a2f37768960f,"DocumentImpl already implements createRange but it does not declare that it implements
interface DocumentRange.
This is the first fix among for a series of bugs related to DOM2 Range implementation.

PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315981 13f79535-47bb-0310-9956-ffa450edef68"
68dd1a0b60b8c2ca3562fd5733a9f0b6e8f0f7bf,"The current copy of stylebook-1.0-b2.jar has current dependencies on Java 1.2 and
can not be run on 1.1.x systems.
This caused a bug on the automation build.
I am pulling the fix that I commit yesterday until I can fix this problem.


PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315982 13f79535-47bb-0310-9956-ffa450edef68"
29b7d02f68b049a199eb8e49efa19922e802c521,"in xerces 1.1.3 DocumentImpl.importNode drops attribute values;

an xml sample:

<tag attr=""value""> from an external dom
becomes <tag attr=""""> if imported.



PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315983 13f79535-47bb-0310-9956-ffa450edef68"
105b61ec6b4a7e0e06a1583a46626728504ae3c9,"added an attribute to the import test


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315984 13f79535-47bb-0310-9956-ffa450edef68"
3d5e0761be6099956a06651ff6dc5b0ecf7e9853,"undo previous change to importNode,
Attr nodes carry their value as their child nodes, the value is imported
through imported its kids, which is obtained by enforcing a deep import,
dom.mem.Test works fine so it is unclear whether the reported pb is real


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315985 13f79535-47bb-0310-9956-ffa450edef68"
6f3d542438b028b33a126df31c8d92dbb79fd304,"fix a bug:
- element children in Simple type content was not checked


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315986 13f79535-47bb-0310-9956-ffa450edef68"
6d84f80de0ff09c83008c4d27b3a1deb3751aed6,"This fixes the problem where file are not found if directory name has spaces.

Like D:\the test\here white\t#\-\personal.xml



PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315987 13f79535-47bb-0310-9956-ffa450edef68"
c9b7cd65128a71bc17ef1e5e7ffbc8ba0363c727,"This is a fix  for a problem reported in the Cacoon list where we drop the
URI from the endOfElement event.

The testcase is:

<?xml version=""1.0""?>

 <html xmlns:sql=""http://xml.apache.org/cocoon/SQL"">
 <head>
 </head>
 <body>

         <sql:execute-query>
                 <sql:query>
                         select * from user
                 </sql:query>
         </sql:execute-query>
 </body>
</html>


With the fix we report:

beg  namesapceURI = http://xml.apache.org/cocoon/SQL
beg localName    = execute-query
beg qName        = sql:execute-query




PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315988 13f79535-47bb-0310-9956-ffa450edef68"
25b9a052b82f8e54c3b8a3aa193d7db8648c3b18,"add feature load-DTDGrammar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315989 13f79535-47bb-0310-9956-ffa450edef68"
f9372a4148caefa9f671583f19b3710292667cc1,"fix a bug:
should not have switched grammar when validating is off


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315990 13f79535-47bb-0310-9956-ffa450edef68"
6043b5f997ec96ed058fe11abe4fe91ed694606d,"The system Id of an external entities must be based on the
system Id of the entity where it is declared and not where it is used.
This is based on a patch from Philippe Le Hegaret of W3C.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315991 13f79535-47bb-0310-9956-ffa450edef68"
50da85698e386a8d59a0f4bf928c94457c363f04,"removed debug trace left over in previous commit


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315992 13f79535-47bb-0310-9956-ffa450edef68"
9a089ea9927e8580bf1dd611f61e0d2495faf29b,"when a resolver is used, the systemId and publicId must
reflect what the resolver has returned.
Based on a patch from Norman Walsh of Sun


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315993 13f79535-47bb-0310-9956-ffa450edef68"
7f06aca27ce3248ed813bb5e20fd4aa186d2cba5,"add new feature: element wildcard any with processContents ='skip' and 'lax'. also fix a bug in traverseComplexType.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315994 13f79535-47bb-0310-9956-ffa450edef68"
278dd37836c63a4d1869151a5f22d6334c557347,"WIP- Migrating ATTValidators from XMLValidator to Schema to unify all validator.


PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315995 13f79535-47bb-0310-9956-ffa450edef68"
d290a80c443caa915f75c988654c9b61269a5dc4,"WIP- Migrating ATTValidators from XMLValidator to Schema to unify all validator.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315996 13f79535-47bb-0310-9956-ffa450edef68"
3a9ecacb3e3a1b7496ec8d299183568d381a9973,"add new feature: element wildcard any with
processContents ='skip' and 'lax'
fix a bug regarding switchGrammar


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315997 13f79535-47bb-0310-9956-ffa450edef68"
c799ba6d94715a3f787355a072795ef0bf1804e1,"Fix a bug:
Ahrrr!!!, another corner case in ComplexType.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315998 13f79535-47bb-0310-9956-ffa450edef68"
21c0ec4eba5ac499fe52c868e66b2555448a2a66,"Added more ID, IDREF functionality to merge DTD validators and XML Schema validators.
Also added Message communication mechanism.

PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@315999 13f79535-47bb-0310-9956-ffa450edef68"
b168d1678cdf4f2126a10b8f5965925a991cce38,"Arnaud: addDTDDefaultAttributes should occur before the namespace binding.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316000 13f79535-47bb-0310-9956-ffa450edef68"
15bbd530f36047ea7827e515ac74ebced424d162,"chang Feature ID: ""load-DTDGrammar"" to ""nonvalidating/load-DTDGrammar""


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316001 13f79535-47bb-0310-9956-ffa450edef68"
290759cb2acefd9a84ded786ea282dced75085b1,"Fixed minor, major code passed when encountering invalid IDREF
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316002 13f79535-47bb-0310-9956-ffa450edef68"
d6db54fefedfc9e18fd8c4db3346041b0acda186,"Migrated ID,IDREF,IDREFS code to validators.
Still working IDREF and IDREFS but most changes should be now at the validator level.
I will continue moving the rest of the ATTValidators....

PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316003 13f79535-47bb-0310-9956-ffa450edef68"
17e8515d035f5d90b704d4c2c7c86ff5d8bf0c14,"More changes dealing with ID, IDREF, IDREFS. Specifically about reseting the ID pools

PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316004 13f79535-47bb-0310-9956-ffa450edef68"
19dc4a318796c9015a2787b3ab5c45a6854ce272,"IDREFS are IDREFType derived by list.
Needed to implement the list part to deal with IDREFS

PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316005 13f79535-47bb-0310-9956-ffa450edef68"
3fe7fd2b5fcd06d2e60ba5dfa6bff2cc3b7e10a1,"change feature load-DTDGrammar to load-dtd-grammar, add this new feature's description to features.xml


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316006 13f79535-47bb-0310-9956-ffa450edef68"
dd904730a149b72e74f48a79e40e567695513446,"Added the call for attributeDec.list -- IDREFS
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316007 13f79535-47bb-0310-9956-ffa450edef68"
09bfaa471d72f8ad51734795e33095e017f6b367,"Connected ID and IDREFS table of IDs.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316008 13f79535-47bb-0310-9956-ffa450edef68"
1695e2600dd89f1035765d6eaa59a5e0a600d77e,"ID, IDs connection
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316009 13f79535-47bb-0310-9956-ffa450edef68"
e3a3ed46a73de6b189c5576362d83aea88b06231,"fix a bug in resetCommon(StringPool)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316010 13f79535-47bb-0310-9956-ffa450edef68"
e99ebe6b2efcd032134d7dd5fb586e372bed1fea,"Added strip comments feature


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316011 13f79535-47bb-0310-9956-ffa450edef68"
da1a539f033504cf294ddafa67342c13d3750513,"ID, IDREF, IDREFS validator work. Fixed Schema reference to validator.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316012 13f79535-47bb-0310-9956-ffa450edef68"
f1604fba1ca58efbf4d0711b1ebdb497edee2b59,"ID,IDREF,IDREFS unique validator
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316013 13f79535-47bb-0310-9956-ffa450edef68"
8a18098c0a8362c14b634392b85a71080cd22d58,"Fixed bug where invalidStandaloneAttDef changes value of fTempAttributeDecl
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316014 13f79535-47bb-0310-9956-ffa450edef68"
aec418030d6b5d142068a3d5e5610c329a32df57,"fix a bug in getAttDef()


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316015 13f79535-47bb-0310-9956-ffa450edef68"
40a82e2b000a1d2c135744b2d8a992d669eaed36,"Fixed error message
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316016 13f79535-47bb-0310-9956-ffa450edef68"
1390896964f7f08e66059e8aa874494ab6cd89cd,"WIP- Entities replace to unify validators and added IDREF Schema message
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316017 13f79535-47bb-0310-9956-ffa450edef68"
cabfc4580a8a841b42ae084cf4dc828b32950bff,"changed synchronizeChildren to not affect the current state of
the readonly flag. This effectly prevents a NO_MODIFICATION_ALLOWED exception
to be raised when this is called recursively (because there is a ref in a ref


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316018 13f79535-47bb-0310-9956-ffa450edef68"
134e3b071e3941d390efa00fd42cabebffafda86,"cleanup validateElementAttributes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316019 13f79535-47bb-0310-9956-ffa450edef68"
41d6c0996a4957dabfbb5b62c1a54f230b692640,"cleanup validateElementAttributes:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316020 13f79535-47bb-0310-9956-ffa450edef68"
4fe3dc2a410a91d53a27357502f2baceb584ced8,"added a replaceChild method that is consistent with insertBefore
and removeChild. This however needs to be revisited, since all of this code
allows to change the document element and the document type which, according
to the spec, is not allowed in any way.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316021 13f79535-47bb-0310-9956-ffa450edef68"
2d5122457ad6a2cb14d28c2b037c07fbe0672260,"added a flag on the document to store whether mutation events
need to be fired. This is off by default and turned on when an event
handler is registered. It is also turned off during synchronization
in the Deferred case.
Tests show a performance gain of up to 20% in the non deferred case!


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316022 13f79535-47bb-0310-9956-ffa450edef68"
8e376e7273c7f34324c167edce428de9821caf31,"Datatype consolidation, fixed bug with error message in ID,IDREF, IDREFS
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316023 13f79535-47bb-0310-9956-ffa450edef68"
81b267a8af42d04f4416e8964478ad97e244362d,"Validator consolidation, moved ATTValidator ENTITY, ENTITIES to common datatype validators
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316024 13f79535-47bb-0310-9956-ffa450edef68"
bfda9ffb4036abb5717db7c13021c6df5cd9cdc4,"There is another place need to apply mask 0x0f.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316025 13f79535-47bb-0310-9956-ffa450edef68"
696564b834115ad0b3bbb615af7737fd2327ebc4,"Validator consolidation work, NMTOKEN, NMTOKENS
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316026 13f79535-47bb-0310-9956-ffa450edef68"
d939ba9d62c9685e468e851b55be7e0626262fc0,"Entities consolidation - Fixed Entities
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316027 13f79535-47bb-0310-9956-ffa450edef68"
4a4c7b28f424c9e9a004a19a37697350bf72e3a8,"Remove debug statement in SAX2Count.

PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316028 13f79535-47bb-0310-9956-ffa450edef68"
0bf90bb27c2332512d80af8dd43e7a315e9a951d,"fix bug #7 in bluefeet Bugzilla


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316029 13f79535-47bb-0310-9956-ffa450edef68"
d393696143a6109e0b8037f70e3f1257989967cf,"setOwnerDocument must changed the child nodes before the parent
otherwise ownerDocument() returns the new document instead of the old one
for leaf nodes and synchronizeData() fails.
- bug report from Matt Hastie


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316030 13f79535-47bb-0310-9956-ffa450edef68"
8ab98e0531f3501085abe67bafcc3fc2fa1b6124,"changes for 1.1.4


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316031 13f79535-47bb-0310-9956-ffa450edef68"
c03d909550302c7c827898ee1f36ffd1a3097699,"startElement creates and adds to the document a doctype
when there is none, so that the grammar can be made available through it.
This is now only done if grammar access is requested and if there is anything
to copy


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316032 13f79535-47bb-0310-9956-ffa450edef68"
a737c17cf2fa10165723d3c6c70d9fa3a9f1cf4a,"added mutation events test program


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316033 13f79535-47bb-0310-9956-ffa450edef68"
c7ac7b071423a3e241bb4304c94846aae04163f8,"added mutation events test program - from Joe Kesselman, IBM


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316034 13f79535-47bb-0310-9956-ffa450edef68"
7e28f35c9dd0326f69ba7ec691b394bf30940fe9,"fixed the signature of dispatchEventToSubtree which can be
called with more than just a ChildNode in argument (AttrImpl for instance)!
This has been broken for a long while, I guess nobody is using this code...


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316035 13f79535-47bb-0310-9956-ffa450edef68"
64c7cf2d30e6d76f03a6af6383161cbe168e5aed,"1) Added sample source code to binary release per Mikael Stldal's
   <mikael@staldal.nu> suggestion.
2) Fixed spelling mistake. (unser -> under)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316036 13f79535-47bb-0310-9956-ffa450edef68"
e08d8ed709fc146ab9b192c3e8512dc57e833efe,"Fixed bug, when normalizing entity and standalone is ""yes"" should issue an error
Failed testcase not-sa13.xml and no-sa12.xml
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316037 13f79535-47bb-0310-9956-ffa450edef68"
11ec16d7138e3a227031dfa1b23c04b471b7a41f,"Escape less-than in character content.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316038 13f79535-47bb-0310-9956-ffa450edef68"
9d2a8bfc5873523004dfb30bd89d92e49e3ac6b8,"Moved storage of event listeners from NodeImpl to DocumentImpl.
They are now stored in a hashtable where the node they are registered on is
the key. That way we save one pointer on *every* node.
Tests show a gain of 3 to 5% in memory and around 12% in performance!
Of course this is in the case where there isn't any listener. In case the
mutation events mechanism is actually used this is going to be slower,
since event listeners need to be looked for in the hashtable on the document.
But the code was broken for months without anybody noticing, so only a few
if any will see a difference. While everybody will gain from the
improvement in memory and speed.
One more drawback is that, just like with userData, a node with listeners
won't be GC'ed until the document is. Weak references would solve that.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316039 13f79535-47bb-0310-9956-ffa450edef68"
6d2024b4b18836acf6dd2f2427dd30aa6d373130,"BaseMarkupSerializer.java


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316040 13f79535-47bb-0310-9956-ffa450edef68"
61ce6f94d380093b7fdf6b4ad4e737d7c0865a9f,"fix a bug :
when a element is declared as of a type from another Schema,
need to change the fCurrentElementIndex to be the template
elementIndex of that type cause the grammar will be switched.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316041 13f79535-47bb-0310-9956-ffa450edef68"
2a9e3738fff6791fc7ad2ec652f81c5fedfe6b90,"Added ID Hashtable reset message like in IDREF, IDREFS
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316042 13f79535-47bb-0310-9956-ffa450edef68"
450d28aba58cb6766257b3cac89dc0ca48a8e45a,"Fixed problems where we were not resetting ID,IDREF,IDREFS buffers in bett. calls
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316043 13f79535-47bb-0310-9956-ffa450edef68"
033c0d3fc7f6a245cb510731719cfcf3f0145167,"*** empty log message ***


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316044 13f79535-47bb-0310-9956-ffa450edef68"
98996599a0e1fbcfdd8108ac8044b19806bb4e2f,"Fixed case for INF, -INF, NaN
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316045 13f79535-47bb-0310-9956-ffa450edef68"
fec0fe4120a7ffec4dd62d271a37b92984f5ba4c,"Fixed bug with message when float not valid
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316046 13f79535-47bb-0310-9956-ffa450edef68"
4770410eefd22dd99ac8c2ae2c858d8eadb060c8,"Fixed message when checking float content. Should said float not double.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316047 13f79535-47bb-0310-9956-ffa450edef68"
8701175ba7d9eea7134aab0173d0fae3eb369e48,"bump version number to 1.2.0
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316048 13f79535-47bb-0310-9956-ffa450edef68"
67cbeceb9750d09a3d53427043b254e00f504ad7,"Prepare Makefile for 1.2.0 Xerces
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316049 13f79535-47bb-0310-9956-ffa450edef68"
7b3b142600576e212687bd8578cd5e42c02ed6a6,"Preparing for Xerces 1.2.0
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316050 13f79535-47bb-0310-9956-ffa450edef68"
7ad9bf5778278072dbf9deb453fb5ff44d4d19c8,"Prepare for Xerces 1.2.0
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316051 13f79535-47bb-0310-9956-ffa450edef68"
585b74be09cdf6f311612fccf0981dad554775fa,"changes for 1.2.0


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316052 13f79535-47bb-0310-9956-ffa450edef68"
0a2f995174954c46a0dcdfae482efde44fbeac23,"changes for 1.2.0


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316053 13f79535-47bb-0310-9956-ffa450edef68"
2f3bd5b64f5ef6a1e6bcbbea1ce17b468109b5e1,"Ommitted / in end tag so it broke build- Fixed
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316054 13f79535-47bb-0310-9956-ffa450edef68"
8a9483f298a741b4cf70d7bc8c08a8dbdf10735e,"the deferred DOM uses the string pool, so it cannot be reused
in subsequent parses. To avoid this a flag was added so that when we reset
the parser we create a new string pool if the current one is being used by
the DOM


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316055 13f79535-47bb-0310-9956-ffa450edef68"
f6ce6072dd96a2722a7a20411e6645ec4ff6fb1c,"Design documentation for Xerces 2 concept implementation moved to
java/design/ under xerces_j_2 branch. Check the following URL for
web access to pages:

  http://www.apache.org/~andyc/xerces2/


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316060 13f79535-47bb-0310-9956-ffa450edef68"
addc0b96937ebc2bb29d4ab63ace29b385653906,"fixed tests dependency


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316062 13f79535-47bb-0310-9956-ffa450edef68"
4008388723444410091f7aed6ea70f1b66302327,"Fixed defect reported by   Dave Finkbeiner about Double datatype not checking
boundary correctly.

PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316063 13f79535-47bb-0310-9956-ffa450edef68"
906575a3a8724e6719a8ef02a40b8aa015227c98,"Fixed bug reported by David Finkbeiner where datatype boundaries are incorrect for
float. See DoubleDatatypeValidator since we put similar fix.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316064 13f79535-47bb-0310-9956-ffa450edef68"
1e27432127a620cb3d4e4f7eb0e26f625f8246f6,"typos fixed


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316066 13f79535-47bb-0310-9956-ffa450edef68"
c7002ec6334a7e8b2f2c7b871872415b7b668c86,"Thanks to Kevin Kress <Kevin.Kress@oracle.com>.
The directory in the File was never considered as a part of the file name.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316067 13f79535-47bb-0310-9956-ffa450edef68"
59ff53261fbc7b3a5998ff4ff81da76ecc45be2c,"*** empty log message ***


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316068 13f79535-47bb-0310-9956-ffa450edef68"
0c079a8bea4d5217536d6f074dd62e36eb8be445,"update to reflect votes on requirements 1-7
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316069 13f79535-47bb-0310-9956-ffa450edef68"
c4a351bbfb54cdef9fee63a0030519a773bbb438,"setNodeValue was sending the new value instead of the old value
in MutationEvent - bug report from Paul Matchen


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316070 13f79535-47bb-0310-9956-ffa450edef68"
3536ed0fb5adbeb0bf5fc86a599fc856f6c19f10,"because in many cases we may have to deal with both nodes with
a namespace and nodes without any, NS methods through findNamePoint must
handle both types of nodes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316071 13f79535-47bb-0310-9956-ffa450edef68"
3f3ccf2811f7ad0ea3d67843d38b160264e1cc8c,"fix a bug when maxOccurs = 0, minOccurs =0


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316072 13f79535-47bb-0310-9956-ffa450edef68"
b891282dee83564f648155d84333fa404374be5e,"change package
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316073 13f79535-47bb-0310-9956-ffa450edef68"
6a625a6135e76eb330702b7db81293b5c75246e5,"changed again findNamePoint to avoid a null pointer exception
and to only consider the nodeName when namespaceURI is null


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316074 13f79535-47bb-0310-9956-ffa450edef68"
f4c4a0ea3d3d80e297ea8c77006c7f9ff81ea3f8,"fix a bug in method ContentSpecTree().


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316076 13f79535-47bb-0310-9956-ffa450edef68"
e2eabdcf3dd5c10e917e0e668bd4dd5442a1bad5,"Changed help screen - error was that it said that validation was on by default. Validation
is off by default
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316081 13f79535-47bb-0310-9956-ffa450edef68"
d1fbe4a8d0b2f007f0e61c3d95b14bb000001cf7,"Fixed bug in datatypes. According to URI spec you could
have a standalone fragment such as:


     URI-reference = [ absoluteURI | relativeURI ] [ ""#"" fragment ]



PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316084 13f79535-47bb-0310-9956-ffa450edef68"
0ed5bceed9c7e019b9e351ba9589a32201ee7033,"Bug reported by Mikael Staldal.
Failed to validated the following:

<?xml version=""1.0""?>

<!DOCTYPE root [
<!ELEMENT root (idEl|idrefEl)*>
<!ELEMENT idEl EMPTY>
<!ATTLIST idEl
	id ID #REQUIRED>
<!ELEMENT idrefEl EMPTY>
<!ATTLIST idrefEl
	ref IDREF #REQUIRED>
]>

<root>
<idrefEl ref=""abc""/>
<idEl id=""abc""/>
</root>


PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316085 13f79535-47bb-0310-9956-ffa450edef68"
095812c3fe8548d01c108e6f15919ff4c46b8a3a,"Bug reported by Mikael Staldal.
Failed to validated the following:

<?xml version=""1.0""?>

<!DOCTYPE root [
<!ELEMENT root (idEl|idrefEl)*>
<!ELEMENT idEl EMPTY>
<!ATTLIST idEl
	id ID #REQUIRED>
<!ELEMENT idrefEl EMPTY>
<!ATTLIST idrefEl
	ref IDREF #REQUIRED>
]>

<root>
<idrefEl ref=""abc""/>
<idEl id=""abc""/>
</root>
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316086 13f79535-47bb-0310-9956-ffa450edef68"
900e5fac0f9469b12afc542bf0baf9a7c59e3da3,"Bug reported by Mikael Staldal.
Failed to validate the following:

<?xml version=""1.0""?>

<!DOCTYPE root [
<!ELEMENT root (idEl|idrefEl)*>
<!ELEMENT idEl EMPTY>
<!ATTLIST idEl
	id ID #REQUIRED>
<!ELEMENT idrefEl EMPTY>
<!ATTLIST idrefEl
	ref IDREF #REQUIRED>
]>

<root>
<idrefEl ref=""abc""/>
<idEl id=""abc""/>
</root>

PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316087 13f79535-47bb-0310-9956-ffa450edef68"
133c9ecfaca3112f102066b2d4ba7a2ac0a9e56a,"Needed to retract Notation Changes.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316088 13f79535-47bb-0310-9956-ffa450edef68"
0e374e549a5155529f80a7019391d2828d9a9b37,"fix a bug when element is declared as of a simple type or complex simple type from another Schema.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316091 13f79535-47bb-0310-9956-ffa450edef68"
32b7ee33bc9e1a89173d8252f30d4e7d6aed8408,"fix a bug in traverseComplexTypeDec when adding attributes from the base type.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316092 13f79535-47bb-0310-9956-ffa450edef68"
17a5414f690f9b74c18597764e9224411680ff4f,"This defect fixes bug reported by Alfred Fuchs on 09/14.
fCalledCharPropInit not set correctly in line 855 cause null exception.




PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316093 13f79535-47bb-0310-9956-ffa450edef68"
45918f3e0731be52453554f2b16b1a89f077e920,"Sc. this I added an extra f and broke the build. sorry....
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316094 13f79535-47bb-0310-9956-ffa450edef68"
d62aebeb8095bc35a49d4d42adc148d2ecc6cc96,"Changed help screen - error was that it said that validation was on by default.
Validation
is off by default
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316095 13f79535-47bb-0310-9956-ffa450edef68"
c32a78fd9864f465fce74dd4d1dc765650f755cc,"patch from Lars Heete:
Correct the generation of DOMAttrModified and DOMCharacterDataModified
mutation events.
   - DOMAttrModified and DOMCharacterDataModified events get dispatched to
     the parent chain.
   - removing an attribute now generates a DOMAttrModified event with
      newval=null
   - adding an attribute now generates only one DOMAttrModified event
      with oldval=null


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316096 13f79535-47bb-0310-9956-ffa450edef68"
c0fe66502ba6c1599d3203c3eb0473b208def71c,"Fixed message problem reported by Doug Smith 09/14/2000
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316101 13f79535-47bb-0310-9956-ffa450edef68"
20034e37908bd120e07108c1d0591e86d8df741a,"Oops put wrong fix, here again.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316102 13f79535-47bb-0310-9956-ffa450edef68"
24be16111d2e471ba46a067582e6c8b816b88bff,"record votes on reqs 1-29
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316107 13f79535-47bb-0310-9956-ffa450edef68"
86534e936dac77d3f287f0349c2f299bf61a478b,"fix the error message for validating simple content.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316108 13f79535-47bb-0310-9956-ffa450edef68"
1e63d1ac8768b3343623ac50317d095137ddcb8b,"fix fDatatypeBuffer appending in the case of character references.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316109 13f79535-47bb-0310-9956-ffa450edef68"
d0a26c02103f59ba659c7b13a38e7a0f9efec914,"Applied patch from Kent Tamura.

PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316111 13f79535-47bb-0310-9956-ffa450edef68"
7b91d52436909c5274ee9d683e37e15b4d73c03b,"Fix submitted by Ed Stub. Fixes problem reported by Stephane.RAULT@r2isa... where we
are no reporting PI's


PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316112 13f79535-47bb-0310-9956-ffa450edef68"
64a8d8bf9b179cdd24e16e316976e42062f1879b,"allows version to be an empty string in hasFeature.
The spec only says 'if not specified' so it could be interpreted both as
null or as an empty string.
NIST JavaDOM Tests http://xw2k.sdct.itl.nist.gov/brady/javadom/index.html
use an empty string.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316113 13f79535-47bb-0310-9956-ffa450edef68"
7ac924ef2b3da5e647ae2ebd61bf4ad8b9a62029,"Had wrong value for absolute  minimum/maximum facet values
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316128 13f79535-47bb-0310-9956-ffa450edef68"
319ffcc2d994be88681a99433b15dca8cbc816a7,"This version works only in jdk 1.2.x ....... It is not my choice but the maintainers of this module to
have that dependency.
Xerces will run fine under 1.1.x but it will not build in 1.1.x systems. That is life!
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316132 13f79535-47bb-0310-9956-ffa450edef68"
9266b548ef0c2f419adedc66bcc0f1535de24129,"I just build it and committed the jar but the new jar file
fails to build the documentation even in NT now.

PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316136 13f79535-47bb-0310-9956-ffa450edef68"
a132f6ead4ef31c95e7e056fdfd9ca42d6e0f0df,"returning char for peekChar and scanChar
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316141 13f79535-47bb-0310-9956-ffa450edef68"
de7cd5722abeaacc8f633a9676ac0f30125f252e,"Fix error - Inadvertenly change this file while working on a different branch
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316173 13f79535-47bb-0310-9956-ffa450edef68"
e7a0dccc03eba4ce197cf8807f0e166092b6b355,"updated to DOM Level 2 PR.
changed code to use DOMException instead of DOMExceptionImpl,
which is no longer needed


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316195 13f79535-47bb-0310-9956-ffa450edef68"
a5b421c9dc6f257a0110d0c21edee4a9bb155d17,"updated to DOM Level 2 PR.
supports() changed to isSupported() and getCurrentNode() changed
to getCurrentTarget()


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316196 13f79535-47bb-0310-9956-ffa450edef68"
fc344985abb34090f4229b05c118231da4ad7347,"Fixed bug that broke build. Arnaud Le Hors change DOMExceptionImpl
date: 2000/10/02 21:58:17;  author: lehors;  state: dead;  lines: +0 -0
updated to DOM Level 2 PR.
changed code to use DOMException instead of DOMExceptionImpl,
which is no longer needed


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316203 13f79535-47bb-0310-9956-ffa450edef68"
c5c56b56160a0dc49e0200ad0a3e9acd063ba95e,"This also was broken because of remove of domExceptionImpl
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316205 13f79535-47bb-0310-9956-ffa450edef68"
e7477a2fdf565de1c604b89f38ee5e774c02bf28,"Due to lack of interest and contributors RevalidatingDOMParser is being removed.
It usually causes more frustration among users who have to remove it from their IDE file list.
If somebody is willing to supported I will resurrect it but from now RIP.

PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316208 13f79535-47bb-0310-9956-ffa450edef68"
795eacda20e35c541ae877d48fff99a033813f5c,"PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316238 13f79535-47bb-0310-9956-ffa450edef68"
8fb078dea6854a1676f977a3113577e4a0c78c33,"Added patch send by Neil de Hoog on 10/09/2000 - I reviewed this fix


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316239 13f79535-47bb-0310-9956-ffa450edef68"
a4bf234c5f949e29110ace40e5f6e478ed2ac7a3,"fix a bug in TraverseSchema, should have import the base type content spec tree instead of concatenate it directly


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316247 13f79535-47bb-0310-9956-ffa450edef68"
cbb78e8330bcf60aefe182e899cb1362762d8adb,"fix a bug in TraverseSchema, should have import the base type content spec tree instead of concatenate it directly


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316248 13f79535-47bb-0310-9956-ffa450edef68"
1f9aac55ac6707f4e9ea11ae347e16dce541f239,"Null URI are value according to URI ref


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316250 13f79535-47bb-0310-9956-ffa450edef68"
b797482c528a11ddad48e4203df040415134fa3a,"fix a bug in toString()


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316283 13f79535-47bb-0310-9956-ffa450edef68"
f2b9ad84920b2015a53c9a67b4dfb5460fa0465e,"solved weird bug reported where the datatype registry is not initialize between resets


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316307 13f79535-47bb-0310-9956-ffa450edef68"
61d31f186d589c58d8d497b454e8dc8cb06c2b20,"prep for next release


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316311 13f79535-47bb-0310-9956-ffa450edef68"
a51ef5ba6a720d92501adcf9fd77ce69200123dc,"Bug fix: top-level attribute decl from included schema file should have been searched.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316312 13f79535-47bb-0310-9956-ffa450edef68"
bd881242f1e95f746e856e111fa603a6eceff441,"Added List datatype refactoring


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316317 13f79535-47bb-0310-9956-ffa450edef68"
2a5976063a8abb54cffc310279064f317ad50d0d,"Fixed problem with state validators and list


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316326 13f79535-47bb-0310-9956-ffa450edef68"
b3d72b99a749c2d8e41d0865e337daefbea80947,"fixed bug introduced by list Validator


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316327 13f79535-47bb-0310-9956-ffa450edef68"
431f298e23d283174f9a7b995d6dd5668b1339b0,"need this logic also in the Double type to deal with INF, -INF and NaN


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316329 13f79535-47bb-0310-9956-ffa450edef68"
2bafef3efcf9d7c2404303c2d18b15173b99f1e8,"clean up


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316338 13f79535-47bb-0310-9956-ffa450edef68"
351e684d225511a9290153baf3b6d61e1efe6a9b,"applied patch from Lynn Moson:
Performance problems

In some cases, compareBoundaryPoints() requires a partial walk of the DOM
tree.  The existing Xerces code did this very inefficiently.  For large
trees, or when large numbers of ranges are compared, this can be a
bottleneck.  It was for us.  Our new implementation maintains the same
semantics, but with a far more efficient implementation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316350 13f79535-47bb-0310-9956-ffa450edef68"
1897c6b14cf82af5e3426b666429f73def1eb99c,"Release 1.2.1 bug fix release


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316355 13f79535-47bb-0310-9956-ffa450edef68"
5384a7c98192ff2c64d26116290948c33b104aff,"Fixed a bug in scanAttlistDecl. It failed to parse correctly the
following:

<!ENTITY % defaultAtVal ""'yo!'"">
<!ATTLIST test foo CDATA #FIXED%defaultAtVal;>

It failed to support a PE ref there and reported not to find a
whitespace after #FIXED.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316356 13f79535-47bb-0310-9956-ffa450edef68"
5ea6c649667fd555212c21eac946b87c5ad4ef92,"added debug flag by mistake


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316357 13f79535-47bb-0310-9956-ffa450edef68"
e1aa66c869856062da5b12144b9e3704a1471ab6,"to version 1.2.1 so it build correctly


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316359 13f79535-47bb-0310-9956-ffa450edef68"
b217fb58f879424f340826da6e818f779d83ae13,"Applied patch from Lynn Monson:

I have found a significant bug in DOM Range creation.
The bug lies in RangeImpl.java in the checkIndex(..) method, which was doing
an improper test.  The bug makes it impossible to create a range with a
boundary point that lies within a text node. The problem can be seen with the
following code sample:

  DocumentImpl doc=new org.apache.xerces.dom.DocumentImpl();

  Element body = doc.createElement(""body"");
  doc.appendChild(body);
  Text text = doc.createTextNode(""abcdef"");
  body.appendChild( text );

  Range range = doc.createRange();


Patch reviewed by Elena Litani.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316387 13f79535-47bb-0310-9956-ffa450edef68"
dc31ef6c63e363fed6961cc8c70d3da20f50f2a3,"applied optimization patch submitted by Lynn Monson that was
left over by mistake in version 1.8


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316388 13f79535-47bb-0310-9956-ffa450edef68"
0296fc80beead2480f2a82fe0e894bf006422757,"fix a bug in xsi:ytpe handling


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316409 13f79535-47bb-0310-9956-ffa450edef68"
c64589a4f562655bf66213a5efcc107c0c167747,"Fix a bug in scanQName(), should check the upper bound for colon position in a attribute name.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316421 13f79535-47bb-0310-9956-ffa450edef68"
0952f8332c68ca8201e42a17b0b772ed77a685fb,"new dumpTree method by Lisa Martin, lmartin@ca.ibm.com


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316425 13f79535-47bb-0310-9956-ffa450edef68"
ce89b528e6c9916822f8157785c549cca2c3b5c3,"fix a array bound check by Luke Blanshard, luke@quiq.com


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316438 13f79535-47bb-0310-9956-ffa450edef68"
343456ddaf4f2e71904809c322186f112a330338,"patch by Tamura Kent - fixes normalization attribute values- this add the normalization feature


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316467 13f79535-47bb-0310-9956-ffa450edef68"
30e20c084dea8268783105f1a6ab803a3aa07514,"use user defined EntityResolver for TraverseSchema, by Jerry Lawson, jerry.lawson@virtualsummit.com


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316482 13f79535-47bb-0310-9956-ffa450edef68"
f1980aa75ff87d72c7ad5bde06c38d737d9ea0c6,"patch review submitted by Kent Tamura


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316485 13f79535-47bb-0310-9956-ffa450edef68"
d9bbac48ba9f29c1e7d1811230213161e96a1f69,"Patch from Lynn Monson and Elena Litani:

----------
Lynn wrote:

While using Range.insertNode(), I came across what I think are two small,
but significant bugs.  The existing Xerces code for Range.insertNode()
assumes that the end point of the range is unrelated to the starting point.
However, if the ending container is the same as the start container, or if
the end container is the parent of the start container, the range is left in
an incorrect state.

For example:

Assume my document is the following:
<root>abc</root>

If my range is:

start container: abc
start offset: 1
end container: abc
end offset: 3

Then after inserting the node <foo/>, I am left with the document:

<root>a<foo/>bc</root>

But my range was not updated correctly.  It reads:

start container: a
start offset: 1
end container: a
end offset: 3

The end container is incorrect, and the end offset is illegal.  I believe
the range should be:

end container: bc
end offset: 2

A similar situation exists if the original range had used <root> as the end
container with an offset of 1.  Included below is a suggested fix for this
problem.  As always, thanks in advance for considering it.

----------
Elena wrote:

Lynn, thanks for reporting the bug and producing a patch.
While looking at it, I discovered some other problems with insertNode().
So I compared the implementation against specs and here are the changes
I came up with:

1. Proper exception handling (which was not done)
2. Include handling DocumentFragment. Actually, it is handled
automatically by insertBefore(), or appendChild(). So the only thing I
needed to do is not to throw ""DOM012 Invalid node type"" exception.
3. Update ranges for insertion
 a) Lynns patch for text nodes; I have changed it a little bit to
incorporate DocumentFragment insertions
 b) Updating ranges for all other nodes also need to be done.
ex.
DOM tree:<body><p/></body>.
Range(start;end): body,0; body,1

After insertion of insert <h1>:
DOM tree: <body></h1><p/></body>.
Range(start;end): body,0; body,2

4. Deleted normalization of text nodes. According to specs (2.9)
normalization should be handled by application. That is if 2 adjacent
Text nodes are created -> we don't merge 'em.
There is a special case which is handled the same:
fStartContainer=text node and fStartOffset=0. We still split text node
although one of the resulting text nodes will be empty.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316486 13f79535-47bb-0310-9956-ffa450edef68"
b820285fe8db6c3fd0de5fa32b4f586deaea0cf3,"Patch from Elena Litani and Lynn Monson:

------------
Lynn wrote:

I believe I've found an error in the toString() method of RangeImpl.java.
For certain types of ranges, not all of the correct text is returned.  For
example, if I have the following XML document:

<root><foo>abc</foo><bar>def</bar></root>

And I have a range that extends from:

start container: abc
start offset: 0

to

end container: bar
end offset: 1

Then invoking the .toString() method will return ""abc"" instead of ""abcdef"".
This is due to a premature loop exit condition.  I've included a proposed
patch below.  Thanks in advance for taking a look.

------------
Elena wrote:

I've reviewed it and found one case missing.

Ex.
<body>text1<p1/>text2</body>

Start container: body
start offset: 1

end container: body
end offset:3

If start container is not text node we must find a first kid in Range..
In current implementation the output is: text1text2
But it supposed to be: text2

Everything else in your patch looks good :).

The modified patch is attached.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316487 13f79535-47bb-0310-9956-ffa450edef68"
e4dd50b29b5a8650cfb8e4da3c17e81f822eb977,"documentation patch to FAQ by Tony Montgomery Smith + I stylebook and review it


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316497 13f79535-47bb-0310-9956-ffa450edef68"
02e46e88cf443e44ae768914f0fbcf2150fc4dcf,"bug in getTopLevelComponentByName: should have checked the 3 hashtable first.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316501 13f79535-47bb-0310-9956-ffa450edef68"
b5de6ae8be75edec935e9c97793637b151010b68,"tabs to spaces


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316506 13f79535-47bb-0310-9956-ffa450edef68"
37b47484136418a88b3d66ff7354f170cd1378ab,"Change from a singleton to a regular class - this arch. change is needed to avoid problems when resetting datatype tables and on the server side


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316510 13f79535-47bb-0310-9956-ffa450edef68"
e193f4b65ae9f5b3e7cb8220b60a75fb41295e0a,"now every GrammarResolver has its own copy of DataTypeFactory.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316513 13f79535-47bb-0310-9956-ffa450edef68"
6adc86a3afbc34b9d0643413bce343f4aed67122,"comments


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316517 13f79535-47bb-0310-9956-ffa450edef68"
995582e2d51d0efa3a23828c330fd7702742fd06,"1. fix bug in validateContent() when there is (#any, a, b) and child sequence [d,a,b], by lmartin@ca.ibm.com
2. do the same for validateContentSpecial
3. fix the conditional logic when DTD validation, should not check the type of leaf in case of DTD.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316526 13f79535-47bb-0310-9956-ffa450edef68"
bbbfe430eb6cce5b0b6f64a0789eb6cef20a7d5f,"fix a bug when hash the toplevel att, attgroup, and group decls


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316528 13f79535-47bb-0310-9956-ffa450edef68"
108e7ee51ef30563dedeba19e7ee987791237421,"bug fix in binding namespace for attributes when there is no targetNamespace


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316542 13f79535-47bb-0310-9956-ffa450edef68"
b87ce4ac25adb7051d8d7ba80d4a11dc4d80e58c,"removed erroneous tests - patch from Elena Litani


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316549 13f79535-47bb-0310-9956-ffa450edef68"
4e415dde0478ed762400f64ccd6c658278e61758,"fixed node type checking throughout the class
 - patch from Lynn Monson


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316550 13f79535-47bb-0310-9956-ffa450edef68"
6a7169c67cda8817db6090263c42818c3038b1e6,"fixed handling of default attributes with a namespace
-patch from Elena Litani


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316551 13f79535-47bb-0310-9956-ffa450edef68"
4bab5b50d9f1461bebd3a19ba653f133ca299fc1,"Fixed hang if we have the case where we find a multibyte UTF8 character outside the [#x10000-#x10FFFF]
valid range. Even tough we check to see if the value was a valid UTF8 we failed to check if the
value was within the allowed range.
The loop was on the XMLDocumentScanner dispatch method, in the SCANNER_STATE_CONTENT case, after
calling the scanContent method from the from the entity Reader we got a CONTENT_RESULT_INVALID_CHAR
state because we did a preliminary check to se if the value was outside the [#x10000-#x10FFFF]
later on the case of CONTENT_RESULT_INVALID_CHAR  we call the Entity Reader lookingAtValidChar. This
check will return a valid (true) and then it will restore the scanner state an go into an infinite
loop within the dispatch method.
The solution was check at the lookingAtValidChar the same range test [#x10000-#x10FFFF] so we
return a value of false and bailout of the loop.

The first check at scanContent should have been to check for UTF8 character validation and then
the lookingAtValidChar check should be just for XML UTF8 character allowed range.

So we may want to revisit UTF8Reader.

The testcase used to verify this problem is:

xmltest/not-wf/sa/170.xml:

<doc>abcd</doc>
where a=0xf7
      b=0x80
      c=0x80
      d=0x80


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316556 13f79535-47bb-0310-9956-ffa450edef68"
65c7f3ccaa72b3f6b98e71cd885a9103a26acebe,"Allow splitting at the end of the node (offset = length)
- patch from Lynn Monson


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316564 13f79535-47bb-0310-9956-ffa450edef68"
4cea55cd86fc021225a6de91938f2143d148d56a,"getAttributeNS must return an empty string when the attribute is
not set.
 -- patch from Julian Reschke


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316570 13f79535-47bb-0310-9956-ffa450edef68"
9ac327767858ff304a183f08d83f8dd2c762b59b,"update to DOM Level 2 *Recommendation*!!


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316571 13f79535-47bb-0310-9956-ffa450edef68"
18dca0f01f60e74d41bca2f1c69966a3106849dc,"fix switch grammar in endElement


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316572 13f79535-47bb-0310-9956-ffa450edef68"
d08653bcc99d41c0e715360dc45fab21d34edd84,"updated info about DOM Level 2 support


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316577 13f79535-47bb-0310-9956-ffa450edef68"
a1b6c3afcd406b8197811c5ba748d140c5223072,"Update code to latest JAXP 1.1 draft (for Xalan)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316582 13f79535-47bb-0310-9956-ffa450edef68"
e663c9a46f413b717bc2ae6db644bcdb2b1fd7f4,"bug fixes :  issue a error for empty attr value of IDREFS and NMTOKENS type,
because empty string won't match the ""Names"" and ""Nmtokens"" production.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316584 13f79535-47bb-0310-9956-ffa450edef68"
c09882759f63f04c2c85f8da0a5b7852328d8096,"scripts needed by ant on Unix platforms


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316585 13f79535-47bb-0310-9956-ffa450edef68"
85b4a44a7a132e200eb484f22f1092951602c43c,"range package got renamed ranges in DOM-Level-2 Rec


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316590 13f79535-47bb-0310-9956-ffa450edef68"
47067a361e4fcbd6828d1c8f9fc025b206c71b4f,"bug fix : NullPointerException when schema file can not be located.
by Neil Graham, neilg@jtcsv.com


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316594 13f79535-47bb-0310-9956-ffa450edef68"
2a68ed12e8183de413d455ad30cbbc4ef0139a97,"added 'Core' to the list of supported features


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316596 13f79535-47bb-0310-9956-ffa450edef68"
492c8e165724aa5bcaca0cfbd1fc3b48a1f1c7c1,"range package was renamed ranges in DOM Level 2 Rec


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316598 13f79535-47bb-0310-9956-ffa450edef68"
05cd6411317ae4e3551bb217179ae115a7873bc9,"removed hack about pe refs in attribute value, the second edition
of the XML 1.0 specification is very clear on the fact that pe refs are
simply not recognized in attribute values


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316602 13f79535-47bb-0310-9956-ffa450edef68"
01e6c33b543ec8e241e32ce5b217997a9e5f5479,"next release Xerces-J_1_2_2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316605 13f79535-47bb-0310-9956-ffa450edef68"
0380ac304a4c9bee233703e3d6dbc5173e82d4ad,"release Xerces 1.2.2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316608 13f79535-47bb-0310-9956-ffa450edef68"
07bec96c2dd4c30b42b83a887852d930568da1e0,"added DTDReader samples using DeclHandler interface


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316609 13f79535-47bb-0310-9956-ffa450edef68"
9fc3406ed15d402a4bd935497e06692638fcc0eb,"range package was renamed ranges in DOM Level 2 Rec


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316612 13f79535-47bb-0310-9956-ffa450edef68"
7c7654829959077fa97746b099b911b4b51865e2,"applied patch from Lynn Monson:
As I was poking around Xerces, I came across a pair of bugs in the
implementation of Node.normalize().  The problems are:

1) Normalizing an element does not normalize the attributes of the element.

2) Normalize does not remove isolated, empty text nodes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316614 13f79535-47bb-0310-9956-ffa450edef68"
bfb9cd05ab1127149265575ed91c755cf949c36e,"Xerces 1.2.2 DOM 2 Recommendation supportand bug release


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316615 13f79535-47bb-0310-9956-ffa450edef68"
955ef6b2ca713901bd702935c131a09390af1389,"applied patch from Lynn Monson:
fixed a bug in indexOf which was off by 1


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316616 13f79535-47bb-0310-9956-ffa450edef68"
6a2428598e9b34177b758af0a2edbe3af3aa0a96,"applied patch from Elena Litani:
This patch fixes several bugs in Range.cloneContents() &
Range.extractContents() reported by Lynn Monson (see 1-4).
In addition it fixes the following bugs:
a) if startContainer == endContainer; fEndOffset was not properly
updated in case of extractContents()
b) middle children of common root were not properly added in case where
one of the nodes was fully selected (and thus was moved to DocumentFrag)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316617 13f79535-47bb-0310-9956-ffa450edef68"
7662608236343a7c7ddc3d171edbaa2c83c7be82,"Applied patch from Lynn Monson:

This brings the Xerces code into conformance
with the specification.  I've also included below, an example from previous
e-mail that demonstrates the bug that exists in the current code base.

take a very simple example:

Text node: abc
Let aRange span the character ""a""
let sourceRange span the character ""c""

If I invoke aRange.compareBoundaryPoints( START_TO_START, sourceRange ):

Xerces code says:

 if (how == START_TO_START) {
      endPointA = sourceRange.getStartContainer();
       endPointB = fStartContainer;
       offsetA = sourceRange.getStartOffset();
        offsetB = fStartOffset;
 } else

So far, so good.  ""A"" is sourceRange and ""B"" is aRange.  They have the same
container, and offsetA==2 and offsetB==0.  The next lines executed are:

   // case 1: same container
   if (endPointA == endPointB) {
       if (offsetA < offsetB) return -1;
       if (offsetA == offsetB) return 0;
       return 1;
   }

Since offsetA > offsetB, a +1 is returned.  But this contradicts the (new)
spec wording which says the result is:

  -1, 0 or 1 depending on whether the corresponding boundary-point of the
  Range is, respectively, before, equal to, or after the corresponding
  boundary-point of sourceRange

In the example, offsetB is the ""corresponding boundary-point of the Range""
and offsetA is the ""corresponding boundary-point of sourceRange.""  Since
offsetB is before A, shouldn't the answer be -1 instead of +1?


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316618 13f79535-47bb-0310-9956-ffa450edef68"
6cc769e7be539f64df68cc4af01999d5d4322f6b,"applied patch from Elena Litani:
This is a patch to RangeImpl.removeNode(). The indexOf() is fixed to be
'0' based, however some references in removeNode() assume that index is
'1' based.
Small fix to traverseContents() -- add collapse() range for Text Nodes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316619 13f79535-47bb-0310-9956-ffa450edef68"
02f101e6585f694df1ee24747c8df53996e53e0e,"minor fix to release notes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316621 13f79535-47bb-0310-9956-ffa450edef68"
3597e04ce98de764ed4f783ecec1f567b25e070f,"some twip forgot to add the Main Makefile r....


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316623 13f79535-47bb-0310-9956-ffa450edef68"
70c66a1cae6bd6f9c43b2212f2cd619930cdad81,"Test program to make sure that the custom UTF-8 reader
implementation in Xerces can read all valid Unicode
characters. This program also tests the decoder supplied
with the JDK as a reference but don't expect it to be
correct (up to Java 1.3).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316624 13f79535-47bb-0310-9956-ffa450edef68"
2d25089f4236ff02201cc1b37e2fd8827de89832,"stpd decs by bld team


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316627 13f79535-47bb-0310-9956-ffa450edef68"
38021c7af1b3edfb1c78052396d6ddb5a07fc166,"local name was given instead of the qualified name when calling
createElementNS - bug report from Tom Bradford


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316628 13f79535-47bb-0310-9956-ffa450edef68"
d13b4e8cf502afcd5abf784b663b61c3a7e8d11d,"fixed the s... $&##&% beep build.xml file to produce consistant build distribution files


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316629 13f79535-47bb-0310-9956-ffa450edef68"
d89e3d4def7edf5e4d8ccb60f5e6e088fc67e4b5,"overwrote SAXCount from Makefile


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316630 13f79535-47bb-0310-9956-ffa450edef68"
15e83ee33fee4109e478d47e383cf72401140b49,"finally got right


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316632 13f79535-47bb-0310-9956-ffa450edef68"
4b93e9ff746a0ff680887a083230b31736740f5c,"added samples to bin dist. and remove classes from distr


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316633 13f79535-47bb-0310-9956-ffa450edef68"
6454527357c4242a2e8bd1f12eb6e357bb915147,"get rid of class files in zip


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316635 13f79535-47bb-0310-9956-ffa450edef68"
8b084cae3935fd4a112669bacb07edf980d3f2a5,"applied patch from Lynn Monson:
I thought it would be worth the effort to rewrite the traversal code in
ranges.  The (old) code has several bugs, has duplicated code, and can be
hard to read.  I've rewritten the code to address these problems and my
patch is attached.  FWIW... I also have a set of several hundred traversal
test cases that I've run the new patch through.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316636 13f79535-47bb-0310-9956-ffa450edef68"
25faec08810903d5215242daa886b82f6693e42d,"applied patch from Elena Litani:
nextNode failed to stop at the boundary of the subtree being iterated over,
it would go to the next sibling of the root node.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316638 13f79535-47bb-0310-9956-ffa450edef68"
76d76ce92c8f19db055d0175a94d5d126909e582,"avoid using ANT_HOME which can be used with a different value
than what we need. - patch from Lynn Monson


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316639 13f79535-47bb-0310-9956-ffa450edef68"
3fb601cbbc9874e972100ff73d2c25696a621039,"I fixed this bug on Xerces2 so I need to fix this in Xerces1


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316643 13f79535-47bb-0310-9956-ffa450edef68"
eeec1ec2f7683f593517cbff54262ab404cdc898,"New all-model implementation from Neil Graham, neilg@ca.ibm.com
Now, we can have 8 children elements in a all group.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316644 13f79535-47bb-0310-9956-ffa450edef68"
2c2706c5757796c2777c61e23fa3a2821354cae3,"Update for SAX2 Extensions 1.0 (final).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316646 13f79535-47bb-0310-9956-ffa450edef68"
cd508fe55f11b49101914bf200ccf11cf489c0a5,"fix a problem for ignorable white spaces.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316661 13f79535-47bb-0310-9956-ffa450edef68"
08d024cab37ebd3ffdf844e57c15ec84badd37ce,"Applied patch from Elena Litani and other optimization related to problem reported by Andy Wai about Rampant object creation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316662 13f79535-47bb-0310-9956-ffa450edef68"
3fbea0cae156f07618635860e1ae2449fe203d34,"changes to DatatypeValidatorFactoryImpl which are related to optimation bug patch by Elena Litani


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316665 13f79535-47bb-0310-9956-ffa450edef68"
3642ac45d1eee21563314c0481b7c4946e3ca88c,"oops sorry did not meant to do this


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316666 13f79535-47bb-0310-9956-ffa450edef68"
64b514065e56956f8d7e6e4c15b030c37ce889b0,"Oops left the debug flag on sorry


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316668 13f79535-47bb-0310-9956-ffa450edef68"
fc29433231b6da7dd4a130ef0fc4e59fa6f0864e,"getNodeName() -> getLocalName(),  because of  the latest DOM Level 2 updates


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316669 13f79535-47bb-0310-9956-ffa450edef68"
104521482db8d3955b39f64fcc882205e89bdc64,"addString() -> addSymbol(),  addSting() caused a out of memory error in certain cases.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316679 13f79535-47bb-0310-9956-ffa450edef68"
d776c2f137d67cf3afea00e73cb5a7b6093f6f3c,"by moving invocation of getLocatorImpl() can save some time in certain cases.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316680 13f79535-47bb-0310-9956-ffa450edef68"
cf1fc3b887c8fd8e0420b252f6a27168cb9b6902,"remove a print out


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316685 13f79535-47bb-0310-9956-ffa450edef68"
add56baa81621bb2df1bf608b95f6fce4b7ab45e,"remove a print out


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316686 13f79535-47bb-0310-9956-ffa450edef68"
ab84c463cc47cd25f3ca63da0dab7b7b3c2ea1f7,"Fixed a bug in SerializerFactory.java that prevents overriding the default
factories via -D
-- patch from Chris Lee


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316687 13f79535-47bb-0310-9956-ffa450edef68"
5408afb1cdb9d29e0a298445adb56d43348bb98c,"Added list bug fix patch submitted by Elena Litani


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316688 13f79535-47bb-0310-9956-ffa450edef68"
7ba5db96e0ce09bb8517905d7c27b8301ee23d6d,"Prepare files for Xerces 1.2.3


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316689 13f79535-47bb-0310-9956-ffa450edef68"
a93c807428e016508166fb78ed69d9236e3d4202,"backed out commit sub. by Elena L. until we clarify right datat. behavior


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316694 13f79535-47bb-0310-9956-ffa450edef68"
a4c44731204f8b733092242c833166cc588bdffd,"implemented new feature load-external-dtd so that when non
validating the application can ask the parser not to fetch the external DTD
at all.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316696 13f79535-47bb-0310-9956-ffa450edef68"
9a5a9f748366d5572f0406d460e27c73fa30918b,"xmlns default attributes must be given the URI the DOM expect


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316698 13f79535-47bb-0310-9956-ffa450edef68"
3265f623d8032726be0fb997812e539862a0ac9a,"Elena's updates on CR schema support


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316708 13f79535-47bb-0310-9956-ffa450edef68"
210f2cc28cdaf72bd544187504155fe22cfa3e8d,"CDATA sections are not valid in element content, even when
they only contain whitespaces. This fix catches this error.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316710 13f79535-47bb-0310-9956-ffa450edef68"
91db44fa12372613471d19366837e296053bbced,"fixed typo


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316711 13f79535-47bb-0310-9956-ffa450edef68"
bf1ff8b6a64bb8e3c4742142e931c8c94f3e361a,"range package got renamed ranges in REC DOM Level 2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316712 13f79535-47bb-0310-9956-ffa450edef68"
29b5768d71d9c6dbaeea12d6405d0facba835f9a,"initializeDTDregistry should be called only once during the life cycle of a parser instance


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316714 13f79535-47bb-0310-9956-ffa450edef68"
846e83dfe2646466875e11ecc4848628473a2d90,"wincvs removed this method, don't know why.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316715 13f79535-47bb-0310-9956-ffa450edef68"
5c7ef47a12d431fc77c7c5098e56508179e08f6e,"Fix for NullPointerException caused by deferred DOM impl
when in non-validating mode AND there are multiple IDs
declared on the same element.

Submitted by:	Elena Litani (hlitani@ca.ibm.com)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316716 13f79535-47bb-0310-9956-ffa450edef68"
018ae0a8231c389bddce53a31e0c91e08de8b952,"Added bug fix notice.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316717 13f79535-47bb-0310-9956-ffa450edef68"
9ce923300319e603b3c0841b19a9d15ed1550439,"cloneContent failed to set the ownerNode


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316721 13f79535-47bb-0310-9956-ffa450edef68"
09ea7bff3b6d8ce7eb95f59b55db909d992f3d49,"upgrade to ant 1.2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316723 13f79535-47bb-0310-9956-ffa450edef68"
e6ec881e399578cf9e59f8571fb5750cede4134e,"When the document is truncated before the end of the start tag of
the root element, no error is reported. This fixes that.
Admitedly we could use a new error message to precisely describe the
error, for now we just report that the root element is required.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316724 13f79535-47bb-0310-9956-ffa450edef68"
b7eeb3bf3d621407410203dec218c7104c5e9d3c,"sample program tracing all the events received from the parser.
This is derived from the program xni.Document tracer which is part of
xerces2. Minimal effort has been made to clean it up so there
are most likely methods that are never called in a SAX environment.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316725 13f79535-47bb-0310-9956-ffa450edef68"
75d9620d864c5721dfb895b28e6b0449cce2f10d,"added DocumentTracer


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316726 13f79535-47bb-0310-9956-ffa450edef68"
a44a6e8aa583495aa74568a208ebb5d655c1f6d2,"Schema attribute validation patch from Neil Graham, neilg@ca.ibm.com


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316727 13f79535-47bb-0310-9956-ffa450edef68"
9a62e6d3d3070d68137144634c17d9a640cd429f,"implemented scanQName - patch from Elena Litani


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316728 13f79535-47bb-0310-9956-ffa450edef68"
9d0ad85c5d377c5cabaef090a1a582065d7f52d9,"Applied patch from TAMURA Kent:

> I know Japanese developers are complaining about the current
> behavior that all Japanese characters are serialized in
> character references.  I'm changing the serializer to check
> whether each character can be encoded or not and it prints
> character references only for unencodable characters.

The following patch and two new files provide:
 o a solution of the problem described above
 o Surrogate pair support
 o ""Windows-31J"" encoding support for parsing (MIME2Java.java)

and remove invalid encoding name ""UNICODE"" in Encodings.java.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316729 13f79535-47bb-0310-9956-ffa450edef68"
8dc6ecdf9ed0a39974c0e61b2f889a673549da64,"Fixes problem reported by David Parker:

If an ""empty"" InputSource (one created from a 0-length file, say) is passed
in, the parser goes into an infinite loop.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316730 13f79535-47bb-0310-9956-ffa450edef68"
2e3117102eb14a065d4cde2b07f7ed78a68187c1,"upgraded to Ant 1.2 - patch from Lynn Monson


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316731 13f79535-47bb-0310-9956-ffa450edef68"
12698dc5dfddb0772e370323e626c8eb3e22c67a,"fixed error - patch from Neil Graham


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316732 13f79535-47bb-0310-9956-ffa450edef68"
680fda9db6662464431b06b19d8bd5c443eac438,"changed Vector.get to Vector.elementAt to be JDK 1.1 compatible


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316734 13f79535-47bb-0310-9956-ffa450edef68"
64b66b29061ebf1b5c7ef348613fe4a5124b3c19,"Applied patch from Sebastian Sahuc and Neil Graham:

With this change the EntityResolver is correctly transmitted in the case when
'A.xsd' imports 'B.xsd' which in turn imports 'C.xsd', otherwise we end up
with an error message stating that the file 'C.xsd' couldn't be found in
the JVM working directory (din't build the C.xsd URL from the B.xsd URL)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316736 13f79535-47bb-0310-9956-ffa450edef68"
8db3b5273c380dd4e0efe83693fe21206eaa95a9,"junit 3.4


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316737 13f79535-47bb-0310-9956-ffa450edef68"
064afb0b6527db09f246dd7bb7f75c6511e748ff,"added junit test from Lynn Monson


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316738 13f79535-47bb-0310-9956-ffa450edef68"
76830fca92617503f65f573973e69a307aa4c634,"added junit.jar to classpath


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316741 13f79535-47bb-0310-9956-ffa450edef68"
40d1371ea7d0067d4b5dde469ea8af0cc5995bb2,"Applied patch from Mark Diekhans:

This fixes a bug were we fail to parse URI's containing DOS &#$! drive
letters correctly.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316742 13f79535-47bb-0310-9956-ffa450edef68"
e94388f65811577878ddc57cf825a83de0ab7dc6,"updated to the better version (1.1.2.1) Andy put on the xerces2 branch


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316745 13f79535-47bb-0310-9956-ffa450edef68"
1592c2719b3e4ae8ed2b7bec1a4876f499d86726,"undo previous change which prevents the EndOfInputDispatcher to be called,
the infinite loop will need to be addressed some other way


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316746 13f79535-47bb-0310-9956-ffa450edef68"
e014ae010dbe37cc580c8c58397bb589dc3ea044,"removed bogus ^M characters


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316747 13f79535-47bb-0310-9956-ffa450edef68"
d3407946e11aa84fd5da461187e8d1f24d3f2611,"The attribute type was not reported correctly when the type
was NOTATION. The string ""NOTATION"" was being passed to the
org.xml.sax.ext.DeclHandler#attributeDecl method. It should
have been passed ""NOTATION (foo|bar)"" where ""foo|bar"" are
the list of notations actually declared in the DTD for that
attribute.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316755 13f79535-47bb-0310-9956-ffa450edef68"
9e05281cb470c259ae0496d003de7d5af42a51b3,"Another SAX2 problem -- were passing empty string """" instead
of null value for valueDefault parameter of the attributeDecl
method. Fixed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316757 13f79535-47bb-0310-9956-ffa450edef68"
bf4ad8d342f7a0be681cc3f526605c6aba3292ae,"fixed infinite recursion - patch from Mark Diekhans


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316766 13f79535-47bb-0310-9956-ffa450edef68"
5f23cad518b16201221536551f4b23477c650f6d,"DOMException HIERARCHY_REQUEST_ERR was missing from
setNamedItem/setNamedItemNS.
HIERARCHY_REQUEST_ERR is raised if an attempt is made to add a
node doesn't belong in this NamedNodeMap.
Example: insertion of something other than an Attr node into an Element's
map of attributes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316771 13f79535-47bb-0310-9956-ffa450edef68"
b726e8e492614fa60e520223f74c806f55c79834,"Updates to DFAContentModel to improve DFA build-time performance.
Submitted by:	Akihiko TOZAWA <ATOZAWA@jp.ibm.com>


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316773 13f79535-47bb-0310-9956-ffa450edef68"
6c417e05704990f1023ed40c0ad2422ec2b956bd,"Release message for latest patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316774 13f79535-47bb-0310-9956-ffa450edef68"
1130527a86137ec0fa5201483136b96ac2b25135,"This commit brinds yet another optimization to this DOM implementation.
The whole idea is to try and avoid to always creating a Text node to hold
the value of an attribute. The DOM spec requires it, so we still have
to do it in case getFirstChild() is called for instance. The reason
attribute values are stored as a list of nodes is so that they can carry
more than a simple string. They can also contain EntityReference nodes.
However, most of the times people only have a single string that they
only set and get through Element.set/getAttribute or Attr.set/getValue.
In this new version, the Attr node has a value pointer which can either
be the String directly or a pointer to the first ChildNode. A flag tells
which one it currently is.
Note that while we try to stick with the direct String as much as possible
once we've switched to a node there is no going back. This is because we
have no way to know whether the application keeps referring to the node
we once returned.

The gain in memory varies on the density of attributes in the document.
But in the tests I've run I've seen up to 12% of memory gain. And the good
thing is that it also leads to a slight gain in speed because we allocate
fewer objects! I mean, that's until we have to actually create the node...

To avoid too much duplicated code, I got rid of ParentNode and renamed
ChildAndParentNode, which I never really liked, to ParentNode for
simplicity, this doesn't make much of a difference in memory usage because
there are only very objects that are only a Parent. This is only true now
because AttrImpl now inherits directly from NodeImpl and has its own
implementation of the ParentNode's node behavior. So there is still some
duplicated code there.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316776 13f79535-47bb-0310-9956-ffa450edef68"
4f3126f2f0eb84974b3ba9b214f8ee5ffffffcfc,"Add CR Schema comments related to simpleTypes
Implement J.8:  default values for minOccurs and maxOccurs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316777 13f79535-47bb-0310-9956-ffa450edef68"
a1f0dfc38b499b7d9c6bed19a0872888201cd9fc,"complexType changes to support CR.  protected under CR_IMPL flag


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316778 13f79535-47bb-0310-9956-ffa450edef68"
d38e0833fe8948e05ec42126a12ed62d87eecac8,"New symbols to support CR version of complexType


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316779 13f79535-47bb-0310-9956-ffa450edef68"
9d37d1cf5c3450b1c250ba736f6e680c0f8e6a53,"applied patch from Jay Cain:
Preserve element identifiers when a deep clone is performed.
Also, a minor change was made for DOM conformity. importNode now throws
NOT_SUPPORTED_ERR instead of HIERARCHY_REQUEST_ERR when an import of a
document node is attempted, which is according the DOM specifications. This
shouldn't cause any problems, especially if the DOM Java bindings were used
as the reference. If it will cause problems, it's only one line of code to
change.

The tests passed and the documentation has been updated.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316785 13f79535-47bb-0310-9956-ffa450edef68"
eb31500e2d3243007e8a6499afaf7533407fd285,"The changes allow enumeration facet to be checked against value space of a content.
Previously, we would only do string comparison which would give
incorrect results.

Similar changes should be done for RecurringDuration (as well as any other
datatypes for which two or more literal denote the same value).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316786 13f79535-47bb-0310-9956-ffa450edef68"
cd300ecce0415b559cc721c8f40c06b465e71ba9,"Cleanup of complexType code and some bug fixes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316787 13f79535-47bb-0310-9956-ffa450edef68"
520ffaf064aa0211aa79bcb8d15f385ab293ebad,"Fix for simpleTypes (CR Schema implementation): use getLocalName
instead of getNodeName..


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316788 13f79535-47bb-0310-9956-ffa450edef68"
d3c8784334fe59a5243786b3562a9bac32364142,"Adding support for Schema identity constraints.

1) Ported the limited XPath code from Xerces2 to Xerces 1.x.
2) Added identity constraint info to grammar and element decl.
3) Updated TraverseSchema to populate the grammar with the
   identity constraint information.

NEXT: Modifying the validator to use this information. Yay!


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316789 13f79535-47bb-0310-9956-ffa450edef68"
bba74642cf431d63b46b553f255cce3f1c7889ac,"Added some sample identity constraints to the grammar. These
identity constraints are basically duplicates of the ID/IDREF
types already and are included merely for testing purposes.

NOTE: Let's not forget to update this grammar to the latest
      Schema spec once we flip the switch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316790 13f79535-47bb-0310-9956-ffa450edef68"
7f3890433f1233e8154a3cc83e11aca0752049cb,"fixed a couple of bugs in insertBefore:
raise an exception if a node is being inserted as its own child, or before
itself.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316791 13f79535-47bb-0310-9956-ffa450edef68"
52c743b2c11412db44496e36b71278243d372a27,"fixed compilations pb with regard to static references to inner
classes. Instead of accessing the static field through the inner class itself
we neeed to go through the instance variable.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316792 13f79535-47bb-0310-9956-ffa450edef68"
91ba02d3359aa2c2e956d4bdb38563113fe3fff0,"Support anyType as a base for complexTypes.  Other cleanup


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316793 13f79535-47bb-0310-9956-ffa450edef68"
a7ebc3a6a2bd21e9f6831623b74bbcda6e9b90ab,"Updates to allow compilation by javac due to JDK 1.1.8 bug.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316794 13f79535-47bb-0310-9956-ffa450edef68"
c354107fbc17a21701c6f9c1e8ac840a3997642c,"This commit relates to ""flipping the switch"" the change to schema CR:

1.  Many new constraints relating both to validation of attribute declarations
and to attribute validation in instance documents are implemented.

2.  The change from the equivClass to the substitutionGroup terminology
is effected.

3.  The change to the schema CR namespace is made.

4.  The CR_IMPL flag s set to true by default.

It should be noted that setting the CR_IMPL flag to false
will not revert to the old behaviour after this change because
several string constants have been modified.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316796 13f79535-47bb-0310-9956-ffa450edef68"
ca311f832d9dd39faeecccd10d108cb927e98a16,"renamed equivClassComparator to accomodate schema CR changes; see last commit


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316797 13f79535-47bb-0310-9956-ffa450edef68"
97549547e425b05bcba252d03727cdafdf235081,"Added error recovery for complexType diagostics


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316798 13f79535-47bb-0310-9956-ffa450edef68"
0388d9ce66cff6ca287484d97fb6da272f80fc4f,"HTML DOM test program - contributed by Mark Diekhans


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316799 13f79535-47bb-0310-9956-ffa450edef68"
94da68a1f4f8ce15a34fddd798109ff17f5cb5c1,"added authorship


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316800 13f79535-47bb-0310-9956-ffa450edef68"
b989468b79ac5840580be7f9c08ac954f1d8ccac,"Applied patch from Mark Diekhans:

This patch provides for hiding the NodeList DOM methods when necessary.
The approach adds a method getChildNodesUnoptimized() to ParentNode
that return an anonymous class implementing NodeList.  If a subclass
has a conflicting method getLength() or item(int); it must implement
getChildNodes() and then call this method to get a NodeList.
This was done for a couple of reasons:
   (1) Avoided duplicate code (in different files).
   (2) Avoided needing to make various private fields in ParentNode
       protected.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316801 13f79535-47bb-0310-9956-ffa450edef68"
ef50edd50b01e440364c5ba2c0290918145dd171,"small fix to allow for compilation under Sun's JDK1.3


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316803 13f79535-47bb-0310-9956-ffa450edef68"
4917951838890a28b1b5988d1cc92554fd3aa71d,"This change is an optimized version of the patch from Jay Cain:

This patch modifies AttributeMap.java, AttrImpl.java, ElementImpl.java, and
ParentNode.java to optimize normalization. This is done by performing a
check when the set of a parent node's children have changed (inserted,
removed). If the change causes the parent to be unnormalized, it is flagged
as so, and its ancestors are inherently flagged as unnormalized.
Effectively, a call to the normalize method normalizes only the nodes that
need it, rather than walking through the entire subtree doing a brute-force
check.

This optimization is most effective on documents that are several levels
deep or for applications that blindly and frequently call normalize (such as
Cocoon). I did some tests using Cocoon and achieved an average performance
increase of 10% with a best-case scenario yielding close to 20%.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316804 13f79535-47bb-0310-9956-ffa450edef68"
f2cd813c9e160f7b6e864562588aa860c859ce3d,"updated


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316805 13f79535-47bb-0310-9956-ffa450edef68"
de38799dff9d8b5e511a15ae0bd044f288d4453f,"changed dependency of samples target which was annoying to me


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316806 13f79535-47bb-0310-9956-ffa450edef68"
ceddbc0c0df0ef4001ac8c9960156cc9726470e9,"added a new option to allow turning off the new feature load-external-dtd


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316807 13f79535-47bb-0310-9956-ffa450edef68"
6804a86ef9bfec4ef0514a7d681cf3fc7539ba19,"Bug fix.
For an element decl that has complexType or group as an ancestor, the following is correct:
{target namespace} If form is present and its normalized value is qualified, or if
form is absent and the normalized value of elementFormDefault on the schema
ancestor is qualified, then the normalized value of the targetNamespace
[attribute] of the parent schema element information item, or absent if there is none, otherwise absent.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316808 13f79535-47bb-0310-9956-ffa450edef68"
e357704e9bb4f0cd2d420f57ed925aa465665d51,"added a link to the CVS Repository


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316809 13f79535-47bb-0310-9956-ffa450edef68"
ce7c78f422def7e570294f5f71e68284d18f2748,"These patches implement several validation constraints for schema Element Information Items.  Among other things, they allow for unique annotation elements, and flag several invalid attribute combinations.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316810 13f79535-47bb-0310-9956-ffa450edef68"
dce039457c3e3642c4234928cec35bc4153db5bc,"more miscelaneous fixes for element declaration validation.  Of more significance, this change enables traversal of global group declarations, which had formerly been disabled for some reason.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316811 13f79535-47bb-0310-9956-ffa450edef68"
fb749b4b57b52d6c07bf9fbff82489aa700df3ba,"fixed isNormalized which failed to propagate dirty flag


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316812 13f79535-47bb-0310-9956-ffa450edef68"
737145c64445a17286ae07f468e0647db63ebafb,"fixed insertBefore and replaceChild to handle gracefully the
cases where a node is inserted before itself or is replaced by itself.
It was confirmed by the W3C DOM WG that the DOM spec allows these operations.
I also cleaned up a little internalInsertBefore and renamed the fields
related to the cache of the NodeList to more meaningful names.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316813 13f79535-47bb-0310-9956-ffa450edef68"
469f10db0e0c2b04962b59cc8ba8f02541cdb362,"fixed insertBefore and replaceChild to handle gracefully the
cases where a node is inserted before itself or is replaced by itself.
It was confirmed by the W3C DOM WG that the DOM spec allows these operations.
I also cleaned up a little internalInsertBefore.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316814 13f79535-47bb-0310-9956-ffa450edef68"
d6eb5b418ba7a76617c7b21e5a1b29995dfe3048,"moved a test outside a loop to avoid a possible empty loop


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316815 13f79535-47bb-0310-9956-ffa450edef68"
8c19b800d6857db5ffcdefd62bb4f9ab8ce9f409,"ChildAndParentNode no longer exists. Removed from Makefile.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316816 13f79535-47bb-0310-9956-ffa450edef68"
4494233c2f6d57afb35aca841fcec1348762d6fb,"Checking in basic support for XML Schema identity constraints.
The support currently includes unique, key, and keyref but
there are the following limitations:

  1) There isn't enough error checking done. So don't be
     surprised if the parser barfs and dies if you specify
     invalid identity constraints syntax in your grammar!
  2) The XPath support is very basic. It only includes
     support for the self, child, and attribute axes.
     Support for simple predicates and unions will be
     added later but even the simple syntax allows you to
     do quite a lot.
  3) Comparison of field values are done in the lexical
     space of the field value, not the value space as it
     should be. To support this, code has to be written to
     take the selector and field XPaths and ""walk"" through
     the necessary grammars in order to discover the
     datatype validator for each field.

There may be other limitations but these are the major ones.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316817 13f79535-47bb-0310-9956-ffa450edef68"
3a762003713b68fe3eb1053837edc68978fa037f,"Update releases to reflect new code for identity constraints.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316818 13f79535-47bb-0310-9956-ffa450edef68"
7dff603a6549de2bc78d5770ba1f0d86c354e9db,"Update build script for packaging new code.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316819 13f79535-47bb-0310-9956-ffa450edef68"
a3f945ea0cbcc1b52d1aea49e8290a9187cb3767,"Detect errors for invalid all content according to CR


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316820 13f79535-47bb-0310-9956-ffa450edef68"
cbcd352016bf744f6ea3ff6057bcc32dfef8e319,"Permit simpleType and attributes in the restriction element of simpleContent


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316821 13f79535-47bb-0310-9956-ffa450edef68"
97c4030b4d7b802c422a96f99cd1362176976ce6,"fixed a couple of NS related tests


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316822 13f79535-47bb-0310-9956-ffa450edef68"
0f6e5e2a84fd642d01b8c984268fdcc64243c014,"cleaned up error checking code


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316826 13f79535-47bb-0310-9956-ffa450edef68"
09f6ecca1bcb757590d86f569bfe4b855df9d0dd,"removed NS test not covered by the DOM spec


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316827 13f79535-47bb-0310-9956-ffa450edef68"
aec7cdc476069ba0ebf6a2177121ef6c7d772539,"moved around the code setting the DOM error checking back on


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316828 13f79535-47bb-0310-9956-ffa450edef68"
e974ad70070dfe7ae008bc33ba2856fb8ea292df,"Clean up for CR schema updates


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316829 13f79535-47bb-0310-9956-ffa450edef68"
ef2d9994d8b4a71752464518c3746e6bbb016993,"Uncommenting code related to DOM Level 2 -- getSystemId()/ getPublicId()


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316830 13f79535-47bb-0310-9956-ffa450edef68"
72e970c12225d57a1d40dc50ec654e2e04308ae7,"Upgraded sample to CR syntax. Identity constraints temporarily commented out


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316831 13f79535-47bb-0310-9956-ffa450edef68"
c194aaaf3ce47b48f636433c619059020a19e104,"Upgraded sample to CR syntax.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316832 13f79535-47bb-0310-9956-ffa450edef68"
164bffcf79f3203c54bcb3558d00818ea4431137,"fixed a rather serious and insidious bug that caused the deferred DOM implementation to throw nullPointerExceptions in certain cases when dealing with attributes.  This is a partial pullback of andyc's change of R1.107 so has the potential to affect the schema identity constraint implementation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316833 13f79535-47bb-0310-9956-ffa450edef68"
59e44876e7dd73678348797d88fb25f2bb93c0eb,"Fix for deferred DOM breaking when identity constraints was
added. The last patch solved the NullPointerException but
broke the identity constraint support. This patch reactivates
that support and fixes the deferred DOM problem.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316834 13f79535-47bb-0310-9956-ffa450edef68"
453abccd07a7ab9cac60ebd8f3b6fcea78ba0cf9,"1) Remove debugging output
2) Missed file on last checkin
3) Pass namespace scope information so that identity constraint
   selectors and fields can match paths with namespace info.
   NEED TO TEST.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316835 13f79535-47bb-0310-9956-ffa450edef68"
5044c3416269bf4e37f3aea21988617f98c25bdf,"Workaround for bug in constructing DFA content models.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316836 13f79535-47bb-0310-9956-ffa450edef68"
e3e6530039b5098706712f954eebf2aeee98513e,"Added check to keep validator from throwing exception.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316837 13f79535-47bb-0310-9956-ffa450edef68"
33c07ad0a79d38cd39a84604575ad3e42c4b5173,"Reverting to previous state until better fix can be found.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316838 13f79535-47bb-0310-9956-ffa450edef68"
8bfaeadeaae412030792f291699c367462439745,"(CR Impl) SimpleType structure bug fix.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316839 13f79535-47bb-0310-9956-ffa450edef68"
f0f18672780d39c01e356414b7ceafbd96c32d27,"Better error recovery for invalid all group


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316840 13f79535-47bb-0310-9956-ffa450edef68"
1dbe2c75c709611a4f81dc735ced6383d9ae8116,"Code cleanup


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316843 13f79535-47bb-0310-9956-ffa450edef68"
16da8c1bb2080005d44c2174e4d6eb66da029ad2,"take into account a base type without elements for complexContent


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316844 13f79535-47bb-0310-9956-ffa450edef68"
4eba9d329d97f68a6177f9da59e3f17eb328819f,"Better handling of <annotation> inside <restriction>


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316845 13f79535-47bb-0310-9956-ffa450edef68"
66e800c7af01e15c7912ef5a001ff11802d0bf7e,"preparations for Xerces 1.3.0 release.  Also simplify creation of tar.gz packages.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316846 13f79535-47bb-0310-9956-ffa450edef68"
4af604cee1035121764ecba1f5e1f40a52966229,"made all these classes non final to allow overriding


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316847 13f79535-47bb-0310-9956-ffa450edef68"
32a505ec5b21c97760c633d12057f4b59f23ca08,"Improved complexType error messages


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316848 13f79535-47bb-0310-9956-ffa450edef68"
788bb165ef9b3b852386f1366e27edbae74dd13d,"documentation changes for Xerces 1.3.0


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316849 13f79535-47bb-0310-9956-ffa450edef68"
65656cde886bb2dd2ca1b92a353540705e081fde,"fix for bad documentation file from last commit


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316850 13f79535-47bb-0310-9956-ffa450edef68"
1f8f76d5e237e732d351582742ba7a1ba30c7278,"Some massive bug fixes. All subtle but very important.

1) Fixed (hopefully all) inconsistencies with dealing with
   unbound QName URIs. Parts of the code used the identifier
   0 while other parts of the code use -1 and always mapped
   it to 0 before using it. As expected, this is a very
   fragile situation so I blitzed the code and changed all
   occurrences to 0 so that we're now consistent. This
   change touched a *lot* of files.
2) Did some additional work on the identity constraint
   support. I'm working on a) enabling namespaces to work
   in identity constraints, and b) comparing field values
   in the values space instead of the lexical space which
   is the current implementation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316852 13f79535-47bb-0310-9956-ffa450edef68"
62bcad2f518152ee0b4c35e493b732053bc8c80b,"Implemented some DOM Level 3 features.
Note: This implementation is experimental. DOM Level 3 is is in working
draft stage: it is still possible that changes in the specification occur.

Added features are:

EntityImpl

*encoding of type DOMString
An attribute specifying, as part of the text declaration, the encoding of
 this entity, when it is an external parsed entity. This is null otherwise.

*version of type DOMString
An attribute specifying, as part of the text declaration, the version number
 of this entity, when it is an external parsed entity. This is null otherwise.

- getEncoding(), getVersion(), setEncoding(), setVersion()

DocumentImpl:

*encoding of type DOMString
An attribute specifying, as part of the XML declaration, the encoding of
 this document. This is null when unspecified.

*standalone of type boolean
An attribute specifying, as part of the XML declaration, whether this
document is standalone.

*version of type DOMString
An attribute specifying, as part of the XML declaration, the version
 number of this document. This is null when unspecified.

- getEncoding(), getVersion(), setEncoding(), setVersion(), getStandalone(), setStandalone()


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316853 13f79535-47bb-0310-9956-ffa450edef68"
dc4d95f84cc08d05849fcee642e0eaf9d546f222,"Changes to DOM parser to *activate* DOM Level 3 (partial) support


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316854 13f79535-47bb-0310-9956-ffa450edef68"
49c1175659d46e6f49e37dd33dcaef9e7dcf19af,"Forgot to take care for non-xerces implementation of DOM. (DOM L3)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316855 13f79535-47bb-0310-9956-ffa450edef68"
30a19c6335e149b5fe445cf3427221174da396b0,"Actually we don't need to synchronize anything at this point...


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316856 13f79535-47bb-0310-9956-ffa450edef68"
e37605f2f48c7c84e9adcf7ac3559958c4f3a1bc,"Since checking for readonly nodes is off when errorchecking is
off, we don't need to make entityref and entity nodes readwrite to build
them, on the other hand we must set them as readonly once built.
Also cleaned up some code by relying on fDocumentImpl and
fDeferredDocumentImpl to figure out what DOM implementation we're dealing with.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316857 13f79535-47bb-0310-9956-ffa450edef68"
95d6871f79c9991c1a8fdfda1cd436503aa94420,"Fixing accidental overwrite of changes for 1.3.0


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316858 13f79535-47bb-0310-9956-ffa450edef68"
6781c0113227a0d4c62f2c22a0a0cbefc132e10d,"changed implementation of isXMLName, which was bogus, to use
the XMLCharacterProperties utility class


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316859 13f79535-47bb-0310-9956-ffa450edef68"
b4c513e70559dceba8c53b8155b1a29f213d47d9,"fixed a number of bugs caused by the move away from -1 to indicate URI's not corresponding to a schema targetNamespace


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316860 13f79535-47bb-0310-9956-ffa450edef68"
b3083cf20ff026064b4ffe700054f2f563aeb741,"Merged in from Xerces 2: implementation of parsing component
(javax.xml.parsers) of JAXP 1.1


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316862 13f79535-47bb-0310-9956-ffa450edef68"
b3b49109a1df82f14b70493311be50e3d9c92e37,"Typo.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316863 13f79535-47bb-0310-9956-ffa450edef68"
1b90d216ba00c9dff7728599174411c701b4a820,"Backing up the change.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316864 13f79535-47bb-0310-9956-ffa450edef68"
93638ec1eaa7b178d9ab37459594cfb4ed6c5cc8,"fixed startElement which created a doctype even when there is
no need for it, and which added the doctype after the root element instead of
before!


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316865 13f79535-47bb-0310-9956-ffa450edef68"
00f66281f51109dfc9b880bfbef3bda3ad173e2c,"fixed importNode of attributes with optimized value storage


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316866 13f79535-47bb-0310-9956-ffa450edef68"
dc2b69a6253ed1b31b1301fa6578c87560058f83,"cloneNode failed to call synchronizeChildren


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316867 13f79535-47bb-0310-9956-ffa450edef68"
5af088f57267dc75790c35d77dc9d9f35bf5b97c,"A sereies of bugfixes and clean-ups.  Among other things, this makes sure we actually traverse global or included attributeGroup declarations; also fixes a bug where the parser would die if one extended a complexType contianing only attributes from another schema.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316868 13f79535-47bb-0310-9956-ffa450edef68"
0f5251f0e0309f9aa4d619cd999e915cfe0293b6,"removed useless call to synchronizeData already performed
in parent class


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316869 13f79535-47bb-0310-9956-ffa450edef68"
0811e3a8e0094e43a11840b100baef26f0701042,"fixed cloneNode so that children are synchronized before the node
is cloned!


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316870 13f79535-47bb-0310-9956-ffa450edef68"
37446b69b8908ce45e2e8f6347761215b8454d6b,"Commented out debug code that adds a dependency on the serializer
preventing the parser to be packaged without the serializer.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316871 13f79535-47bb-0310-9956-ffa450edef68"
8d7672fb7dbc1326bff7c230b6cc760fd6c66a1a,"Initial support for schema attibute & elements normalization (J5) (SAX only)
Currently is *turned_off* using flag.
More work to be done in datatypes (whiteSpace facet)/ attribute/element normalization
for DOM...


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316872 13f79535-47bb-0310-9956-ffa450edef68"
cdd5704d0c53fe6de1e81cb02fa4410220e4219f,"Make db.setErrorHandler(null) ignore errors and warnings.
Minor update to sync up with crimson version.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316874 13f79535-47bb-0310-9956-ffa450edef68"
0bfe69b3def649206853f960e190877a61342f92,"Clean up


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316875 13f79535-47bb-0310-9956-ffa450edef68"
404ce844771a0a6622d94a2fbf4c8956e0526b1a,"bug fix in schema doc


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316876 13f79535-47bb-0310-9956-ffa450edef68"
0aaed03b9dec653c2de8a3f794ffd449b70cdbf0,"More support for schema attibute & elements normalization (J5) - (DOM)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316877 13f79535-47bb-0310-9956-ffa450edef68"
4c6f5354669a96f13320c35cc1b1a90239847ac1,"make sure to turn off mutation events when synchronizing


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316878 13f79535-47bb-0310-9956-ffa450edef68"
7f8fde16b737dcc449a7049bada5ce2b2b068591,"added a test to check that no mutation events are fired
when performing synchronization in the Deferred DOM


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316879 13f79535-47bb-0310-9956-ffa450edef68"
6e5080cae180a714a0910cc9297b873cfc6cc801,"Template for release plan
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316880 13f79535-47bb-0310-9956-ffa450edef68"
f818b5c5b4db56fd8453a96ba5267810e9b8ed4b,"fixed casing in class name


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316881 13f79535-47bb-0310-9956-ffa450edef68"
6b87b67515840c4f852e58f8653b6647e67c203f,"<any> and <anyAttribute> bug fixes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316882 13f79535-47bb-0310-9956-ffa450edef68"
e1a02c16ad27e42735d207b63ae0cb804bb8320b,"message.txt


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316883 13f79535-47bb-0310-9956-ffa450edef68"
81f54262b641a1027e8c051b1a4a8ba98ec188c7,"Forgot several things from the last commit (including the log message...)

1.  Fixed group decl traversal implementation so that we neither ignore globally-declared
groups nor process them multiple times if they're referenced.  Similar
fix for attribute group declarations.

2.  Considerable cleanup of traverseGroupDecl, traverseGroupDeclFromAnotherSchema,
traverseAttributeGroupDecl, traverseAllDecl.
3.  Fixed a bug in traverseAllDecl which caused an infinite loop if elements with maxOccurs=0 were present in an <all> decl.
4.  Fixed a bug which caused nested elements in instance documents referring to a schema without a targetNamespace to be given a scope which precluded them from matching their declarations in the schema.  This bug appears to relate to the schema identity constraint implementation and there's a possibility this fix could break it.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316884 13f79535-47bb-0310-9956-ffa450edef68"
37cf0d23eb1f120ef161fc30fb4a05ced9519582,"Modified patch submitted by Gregoire Pau for a problem to do with recursive types


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316885 13f79535-47bb-0310-9956-ffa450edef68"
2b345765ec63aca08bba7ffe9f1aff469a1ae049,"fixed setOwnerDocument


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316886 13f79535-47bb-0310-9956-ffa450edef68"
dd50e1bd4e9238f37c986188a8693920708d83e4,"fixed setOwnerDocument


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316887 13f79535-47bb-0310-9956-ffa450edef68"
f0ee72c19b708d6751f6d2218f0f26d86ae24546,"fixed setOwnerDocument


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316888 13f79535-47bb-0310-9956-ffa450edef68"
5d845c831abf440e729a08796d6628f986b7f38d,"updated adoptNode wrt current DOM Level 3 draft


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316889 13f79535-47bb-0310-9956-ffa450edef68"
7d1084324b26bccb78c71f27b4ac9ed455dd9a94,"more work into updating adoptNode wrt current DOM Level 3 draft


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316890 13f79535-47bb-0310-9956-ffa450edef68"
50a719859c1f95ab5b8d2fd5c9b7dc9e77340734,"Fix ""namespaceAware"" attribute


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316891 13f79535-47bb-0310-9956-ffa450edef68"
116aec3d49468d0126ceb8c66ae293b51f760e36,"Fix ""namespaceAware"" attribute


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316894 13f79535-47bb-0310-9956-ffa450edef68"
98756d9b2189f80d0f3a85ea4bd11a964d321956,"added support for Cp1252.  This is based on a patch to XML4J2.0.15 submitted by Paul Cooper <pcooper@uk.ibm.com>.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316895 13f79535-47bb-0310-9956-ffa450edef68"
e4a28e781ebfa5d36a036013eaa179f28df239bb,"removed extra test


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316896 13f79535-47bb-0310-9956-ffa450edef68"
756824a660a0788558e542b2880b318480d223dc,"basic stab at a 1.3.1 release plan
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316904 13f79535-47bb-0310-9956-ffa450edef68"
7b8765954c63da7401e933edc37ea8c79c618cf1,"Added whiteSpace facet support + normalization changes
to reflect this change.
It is still protected under flag..


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316908 13f79535-47bb-0310-9956-ffa450edef68"
182ae06fe6a8af8ea1db8202852141889c8f3b11,"updated plan


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316909 13f79535-47bb-0310-9956-ffa450edef68"
00d8c3d267165ea6a48c457d8c205acf61bebb2d,"Removed unsupported facets:
maxInclusive
maxExclusive
minInclusive
minExclusive


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316910 13f79535-47bb-0310-9956-ffa450edef68"
a85e63789df016b72f9a626a6a3f991a0b2f73dc,"fixed DOM Level 2 DOMImplementation.createDocument() implementation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316911 13f79535-47bb-0310-9956-ffa450edef68"
9fa609da4f7a1f3c5be415ce99d3f4a450890805,"changed internal API back to avoid breaking dependencies such
as with WML DOM


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316913 13f79535-47bb-0310-9956-ffa450edef68"
3a2a8b4618d6bff6445fb9a73acc576dc4b1495c,"Initial support for <redefine>.  Several things should be noted:

1.  This is guaranteed not to work if a schema with no namespace is redefined.  (It should be noted that our processing of <include> is similarly limited).

2.  Due to a small number of test cases, it is almost guaranteed not to work in many other situations as well.

3.  It is highly unlikely that this will impact any schemas that do not contain <redefine> elements.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316914 13f79535-47bb-0310-9956-ffa450edef68"
bfaa99a2d87c0adaf6d14c716e4b7378d5df1a40,"Turned normalization on (J5)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316915 13f79535-47bb-0310-9956-ffa450edef68"
21dfd492ccfaf11b646bbbc65c226d1dd7bcb955,"Update


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316916 13f79535-47bb-0310-9956-ffa450edef68"
091b3e2b31d11d534e9cad5319e5c0d6b98fbba7,".. removing debuging statements..


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316917 13f79535-47bb-0310-9956-ffa450edef68"
08d83682542ca90cd496714124c17f7dbb94aacc,"Change to compile under 1.1.x


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316919 13f79535-47bb-0310-9956-ffa450edef68"
7b57234b4dc3b79eb7ffd1f4c6ed1fc51268f259,"Fix for multiple <pattern> that appear as  [children] of a simpleType


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316920 13f79535-47bb-0310-9956-ffa450edef68"
e89a9e0cce9f87433bc35a22ba37ca71c145a6f6,"Fixed some problems with the identity constraint support.
There is still a lot of work to do and I'm waiting for
some clarifications from Schema working group.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316921 13f79535-47bb-0310-9956-ffa450edef68"
fef3879c5a5186d0dc98eceb9a31dfac89ab3891,"Updated XPath used for identity constraint selectors and
fields to not use targetNamespace for unqualified names
in xpath expressions. The code was originally written
that way due to a faulty example in the Schema CR primer
document.

Clarification from Martin Gudgin <marting@develop.com>


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316922 13f79535-47bb-0310-9956-ffa450edef68"
b17c1ca99d0e86a4cf1b84c0a15def12ce2d2532,"Updated identity constraint code to actually perform the
comparison of field values correctly in the value space
of the field. Then I realized that the compare method in
all of the datatype validators WAS NEVER IMPLEMENTED!
Argh. So for now, the comparison is still done in the
lexical space but at least I added the machinery so that
the correct comparison code can be turned on once it's
implemented in the datatype validators.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316923 13f79535-47bb-0310-9956-ffa450edef68"
52132bedb63438a4ae211e8099d1cf6af861a412,"Some slight fixes for identity constraints.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316924 13f79535-47bb-0310-9956-ffa450edef68"
deac52037d94ab987f790cbed198b7f72e87f7d2,"Merged Xerces2 fix


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316925 13f79535-47bb-0310-9956-ffa450edef68"
0523bae0b4dd3ba2f1a3da6a8f40176f712132a1,"throw a Runtime exception instead of silently failing when the
application specified class cannot be instantiated


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316926 13f79535-47bb-0310-9956-ffa450edef68"
59350101fb15b62a077f4138d8b4dbcac4e107fb,"NullPointerException thrown when a grammar was queried
because the namespace URI was set to -1 instead of 0
(StringPool.EMPTY_STRING). This may not be the last
inconsistency but it should solve this problem at least.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316927 13f79535-47bb-0310-9956-ffa450edef68"
5bb94744fc7c31ffcb1deb964d21dfbf296f5008,"More fixes to identity constraint support:
1) Fixed bug that was activating fields at multiple element
   levels instead of just at the level where the selector
   was matched.
2) Fixed bug that was only allowing one complete set of
   field matches per identity constraint scope.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316928 13f79535-47bb-0310-9956-ffa450edef68"
7843f8f21cd227f9b90c8a8705e3abd8990c2936,"We were trying to validate IDREF/IDREFs when validation is OFF.
Fixed that.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316929 13f79535-47bb-0310-9956-ffa450edef68"
6f72d08f133a0fe94c339c7d4fee9fce0e722d0b,"Apply patch for arkin & Davanum Srinivas to correctly handle .res file
for serializers
PR:
Obtained from:
Submitted by:Arkin, Davanum Srinivas
Reviewed by:twl


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316930 13f79535-47bb-0310-9956-ffa450edef68"
8b5e7f2748253fc5d846e6d9a85e35309a3babeb,"Implemented compare() methods on *main* datatypes.
More work needs to be done..


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316931 13f79535-47bb-0310-9956-ffa450edef68"
7db0011028d297cc642ee2d8b87e67b60c296fe2,"miscelaneous bugfixes relating to schemas with no targetNamespace or containing types with more than one <any> element.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316932 13f79535-47bb-0310-9956-ffa450edef68"
d772f02416b73a987f82e1ca9f4d7a9dcd36c509,"fix comments in build file; based on patch submitted by Chavdar Botev


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316933 13f79535-47bb-0310-9956-ffa450edef68"
891fb1ec7d784bf8a231844b9472e3ef693d6de0,"removed some debugging code that had some nasty side-effects; general clean-up.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316934 13f79535-47bb-0310-9956-ffa450edef68"
37185739f1687b4f586def526cb17a261a796af5,"minor bugfixes to <redefine> processing and for <attribute> validity constraint checking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316935 13f79535-47bb-0310-9956-ffa450edef68"
c1627e38961c178446b8480c562ad05f71ddb61a,"fix for PE in DTD


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316936 13f79535-47bb-0310-9956-ffa450edef68"
a7b769dac8943d6d9ff41f2f4b511ad6a5fd155b,"Datatype fixes
It appears that NOTATION datatype was completely bogus.
We did not do anything..


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316937 13f79535-47bb-0310-9956-ffa450edef68"
b7524666a929ed9e28714f32b06c60c42da425c1,"Fix for parsing an empty document if continue-after-fatal-error is set.
PR:
Obtained from:
Submitted by:	Lynn Monson
Reviewed by: Arnaud


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316938 13f79535-47bb-0310-9956-ffa450edef68"
d6378b958bcd50eab693d397e6e788b3b9b44e6d,"fixes for <redefine> support plus some general clean-up


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316939 13f79535-47bb-0310-9956-ffa450edef68"
aca32b57285a3466e4500439100600fdc5f1711e,"Removed final from XMLSerializer so that it can be subclassed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316943 13f79535-47bb-0310-9956-ffa450edef68"
cf31cf93a7f5b3b44314f337a8f9e4e4779ba534,"Updated release information.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316944 13f79535-47bb-0310-9956-ffa450edef68"
5578a982ea93cf05458e8dc39d3ce42c5c529120,"fixes for <redefine> and <import>.  Also revisited and changed my ""fix"" for our <any> exceptions from last week; this appears to work much better.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316945 13f79535-47bb-0310-9956-ffa450edef68"
007798d46583669f99eb0125c4f5c2df1863bcb6,"implemented validation of <annotation> information items.  Also, implemented many constraints on element ordering as well as some miscelaneous validity checks.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316946 13f79535-47bb-0310-9956-ffa450edef68"
c48b8bce2610a0be6b31c6297bb58a45019ec7dc,"1) Added finally clause to parse method to reset the fParseInProgress
   flag even on failure.
   Submitted by: Peter Jodeleit <jodelait@e-Spirit.de>
2) Changed code in XMLParser#parse(String) to attempt to close the
   automatically opened stream even after parsing failure. Previously,
   stream would not be closed if exception was thrown out of the
   parse method.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316947 13f79535-47bb-0310-9956-ffa450edef68"
cdf398e9cf72927a75da3e1fc41a4b0094bdfd0a,"Record of commit change.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316948 13f79535-47bb-0310-9956-ffa450edef68"
41d962cd4e00dcf96f192a16fcc7cb8ce34b870f,"Partial <notation> traversal/validation implementation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316949 13f79535-47bb-0310-9956-ffa450edef68"
c67e49f55f1fe0538c531fdd78c864153d6f624f,"Bug fix 772 - http://nagoya.apache.org/bugzilla/show_bug.cgi?id=772


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316950 13f79535-47bb-0310-9956-ffa450edef68"
b6a2a0d46f0b2c1d1e3f353657c145d12d01e838,"Allowing <annotation> as a first kid of <union>


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316951 13f79535-47bb-0310-9956-ffa450edef68"
5194d87a2d8b766a28291b9caf1d2a813f80a549,"More changes to <notation> decl traversal and validation.
Namespaces have to be resolved in 2 cases:
1) when <enumeration> of notation is provided
2) just before validating content (in XMLValidator)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316953 13f79535-47bb-0310-9956-ffa450edef68"
8186758f7b5c2d7a6de3462301955eeeb8acf531,"treat empty namespaceURI as null when it is a namespace declaration


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316954 13f79535-47bb-0310-9956-ffa450edef68"
7767afef56adc125469337a048d68e1d52b4eeff,"fixed removeAttribute (known bug that should be fixed in the
next release of SAX


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316955 13f79535-47bb-0310-9956-ffa450edef68"
63227e25f32677d60252ea7619a82848532765b2,"fairly complete reimplementation of the schema <redefine> element to take into account ""late assembly"" and nested redefinitions.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316956 13f79535-47bb-0310-9956-ffa450edef68"
9e4136b253fbeea8c59b59a033115e70116ae414,"Fix for http://nagoya.apache.org/bugzilla/show_bug.cgi?id=669.
Applied patch from Martin Frydl.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316957 13f79535-47bb-0310-9956-ffa450edef68"
8182e236520683c65a3238ecd797b88879c16ab8,"Added validation against facets


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316958 13f79535-47bb-0310-9956-ffa450edef68"
5f1ee75de3be70d653a7b5758dd85b2c85641315,"fixed a silly bug that my <redefine> changes produced which broke a large portion of our schema tests.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316959 13f79535-47bb-0310-9956-ffa450edef68"
b110df8eb5cf0cbd7b29ef85913bd5c0f2e2d1cb,"Bug fix for http://nagoya.apache.org/bugzilla/show_bug.cgi?id=572.
Must update build process to include message_*.properties [neilg]


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316960 13f79535-47bb-0310-9956-ffa450edef68"
3e3daf4b02595f9921e16ffe1a12a653a2face6a,"changes in support of Elena\\'s fix for bug #572; these make sure the necessary files are included in the package.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316961 13f79535-47bb-0310-9956-ffa450edef68"
be7c4ba36a0d89daa605e1ae60769c9d09c49559,"Fix DocumentBuilder.newDocument(), needed for backard compatibility.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316962 13f79535-47bb-0310-9956-ffa450edef68"
4beba87291b4b53694ed452786778fb7b7c8b918,"Added comments to steer users to use DOMImplementation methods to create a
new DOM Document object instead of newDocument() to sync up with DOM Level
2 spec.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316965 13f79535-47bb-0310-9956-ffa450edef68"
5d8bfa511a0923571aa8f7214e88d22d6080b40c,"validation error checking for abstract


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316967 13f79535-47bb-0310-9956-ffa450edef68"
eab76180f4d508a516f7eb7492229ae4a650e9ab,"fixed bracketing in my last patch


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316969 13f79535-47bb-0310-9956-ffa450edef68"
4b9591a6824b0221afb40bbd115afb55e61ca836,"patches to enable production of our HTML docs under Unix.  Not pretty but no other way to do it unless StyleBook is updated so it can handle looking inside jars.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316970 13f79535-47bb-0310-9956-ffa450edef68"
3eb20815b723f1a4ee15b13e6241e7a062c760af,"documentation changes for Xerces 1.3.1


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316972 13f79535-47bb-0310-9956-ffa450edef68"
aa1d967caa7553386a417c85313a644d497df710,"missed a change from 1.3.0


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316973 13f79535-47bb-0310-9956-ffa450edef68"
b27f451a785863f44fd732297b8ba55043966a0f,"fixed a type


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316974 13f79535-47bb-0310-9956-ffa450edef68"
55a95721a29646a7a3657666da5346b262576132,"Update javadoc for newDocument() method to point to DOM Level 2 way of
creating a Document


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316975 13f79535-47bb-0310-9956-ffa450edef68"
818373372540820c6b06f6d9900b36b5eab6bd8d,"additions to the FAQ from Elena and myself, + some typo corrections.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316978 13f79535-47bb-0310-9956-ffa450edef68"
c9c88d19a071a1f375f6345c1fd6b6aad952a00b,"Removed redundant method invocations to .length() from if condition
and for loop termination condition - patch from Brad O'Hearne


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316979 13f79535-47bb-0310-9956-ffa450edef68"
90b6b7d25f457573849030f002b58fd5c94d18d6,"Applied patch from Sandy Gao (fix for facets)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316980 13f79535-47bb-0310-9956-ffa450edef68"
fe69fb7d5bdba99804fa991737fdad078e20d301,"Applied patch from Sandy Gao: implement the function ""flushLine()"". Bug fix:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=966


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316981 13f79535-47bb-0310-9956-ffa450edef68"
e52cbae835ad6bbc1d923b668de5fcc12282d7a7,"Patch from Sandy Gao.
Bug fix http://nagoya.apache.org/bugzilla/show_bug.cgi?id=816


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316982 13f79535-47bb-0310-9956-ffa450edef68"
8cc456bb134a7c93fe6183a213ecd6569de454e8,"More features/ more people..


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316983 13f79535-47bb-0310-9956-ffa450edef68"
a5f34bc0c1e0cf88ac6611a5af547760d01bb09e,"people have names, let's use them!!


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316984 13f79535-47bb-0310-9956-ffa450edef68"
e82928bbfea44f6f8598182e9e8a48055c486c80,"changes for Xerces-j 1.3.1 release


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316985 13f79535-47bb-0310-9956-ffa450edef68"
dc7cc8194861cd03c2ad7df969ed7ae3c348a72e,"fixes for the feedback section of our docs to take Bugzilla and the bifurcation of our mailing lists into account.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316986 13f79535-47bb-0310-9956-ffa450edef68"
9f4f00a6186e307cc5eae7da424b6c1c113c46ed,"one more addition to the faq.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316990 13f79535-47bb-0310-9956-ffa450edef68"
a6d26df7903a32c7c9f90eda6b15711b09367ec5,"added support for two Thai encodings--Cp874 and TIS620.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316992 13f79535-47bb-0310-9956-ffa450edef68"
42f1a93ae933fda5668ca695630d93ffccbc4ca9,"fix for bug #548 by Henry Zongaro


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316993 13f79535-47bb-0310-9956-ffa450edef68"
83ed54ed50ae6ae2ff2797e620c614dfd00de3ef,"""any given constraining facet can only be specifed once within a single derivation step"".
[Datatypes 5.2 Constraining facets]
Patch submitted by Sandy Gao.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316994 13f79535-47bb-0310-9956-ffa450edef68"
14c098ee2233c4397d14eeb1f9a20d0c5c4fb0fe,"fixed wrong logic && instead of ||


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@316995 13f79535-47bb-0310-9956-ffa450edef68"
76e19a20fa7a3e7f8c9cd3fd6987c4d9cdfcf1c2,"applied patch from Sebastien Ponce to allow comments to be placed on their own lines and indented correctly.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317000 13f79535-47bb-0310-9956-ffa450edef68"
35c8e457a831eab91e745bb105e860e6566267c4,"apply fix for bug #845 from Henry Zongaro.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317001 13f79535-47bb-0310-9956-ffa450edef68"
489474e3a19cee463c30529431fc0a3d9e3622e2,"allow namespaceURI of namespace declaration attributes to be
an empty string instead of null...


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317005 13f79535-47bb-0310-9956-ffa450edef68"
217f9bf27e65c5e99a8593b841165aad98f26e3b,"Implement support for the schema ""final"" attribute.
Along the way, the DatatypeValidator interface has been slightly changed so
that the baseDatatypeValidator of any datatypeValidator can be located.

As per advice from Elena, I have not touched
RecurringDurationDatatypeValidator or TimeDurationDatatypeValidator;
for all other validators I have eliminated their private fBaseDatatypeValidator
field and replaced it with a protected field by the same
name in the AbstractDatatypeValidator.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317006 13f79535-47bb-0310-9956-ffa450edef68"
0f604a738ccb5f7bab2dba629f6a9e841cc599ff,"added a couple of missing aspects of ""final"".  Thanks to Khaled Noaman for pointing out one of the things I had missed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317007 13f79535-47bb-0310-9956-ffa450edef68"
395656645035ebc7ddc8c1cdb91ee999c49eb812,"incorporate French resource bundle for our regex package.  Contributed by Jean-Claude Dufourd.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317008 13f79535-47bb-0310-9956-ffa450edef68"
b899a799f058383717d59da7b760a45f8e681b5c,"an even better French resource bundle; thanks to Jean-Claude Dufourd and Laurent Foret.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317009 13f79535-47bb-0310-9956-ffa450edef68"
0415f58a04ea7ce29cadc15dc50d3f715cda27a9,"bugfixes in support of final and block


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317010 13f79535-47bb-0310-9956-ffa450edef68"
cacc2ba4e8bcf9fcb8ddce1e165f4e2096af8d55,"initial 1.4 release plan


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317011 13f79535-47bb-0310-9956-ffa450edef68"
37fe6c9538c2a6053f2721020dd79c4f09a1bceb,"remove a debugging message


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317012 13f79535-47bb-0310-9956-ffa450edef68"
da9907b9eeb1c441faef2c0bcf01359d44f5a39c,"fixed typo reported by Roy Tate:  org.apache.xerces.validators.schema.SchemaGrammar#getAttiruteDeclRegistry should clearly be getAttributeDeclRegistry.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317013 13f79535-47bb-0310-9956-ffa450edef68"
3260ba200fec37c5d074e5bb96ebd856e494ebe9,"Fix setFeature() bug provided by Kohsuke Kawaguchi


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317014 13f79535-47bb-0310-9956-ffa450edef68"
2b5b8e087e5e59f6158463c27daf6b56a5db97ce,"cleanup


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317015 13f79535-47bb-0310-9956-ffa450edef68"
aa83b8f2ba0e8c5cd3455fba1c6653086fe6249c,"Initial shot at date/time implementation (W3C PR Schema).
More coding needs to be done:
- enumeration is not handled, comparison for duration, etc.
- more thinking needed on sharing common code/ performance.
- general clean-up (comments..)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317018 13f79535-47bb-0310-9956-ffa450edef68"
ab4232b80897c981dce4bcf5d8e345f20837714c,"updated volunteer info


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317019 13f79535-47bb-0310-9956-ffa450edef68"
63e78df176dc79a85331a07263947150fbeaa975,"Added some getter methods for msg objects.   Helps if an implementation wants to override reportError


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317021 13f79535-47bb-0310-9956-ffa450edef68"
75e1dd64168f3edeaecb0a63be1593073e503521,"Added support for enumeration, addDuration(), implemented compareDates() for couple datatypes, some partial clean up as well.
Things to do/to consider:
-- is it worth to overwrite compareDates() for some datatypes (to optimize compare algorithm)?
-- is structure for representing date/times can be made smaller in memory for some datatypes (like gYear, gMonth, gDay)
-- wait for clarification on some date/time issues (comparison of facets, comparison alg., Appendix E addition alg., etc.
-- finalize error checking (should we throw exceptions in constructors?..), more error checking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317022 13f79535-47bb-0310-9956-ffa450edef68"
868ebb56ecec6ecaacfd9979e11c55ddc9baeccf,"[see previous commit message ;) ]


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317023 13f79535-47bb-0310-9956-ffa450edef68"
ce89e2c767c72a2f31587ead967172777a92aa15,"Minor fixes for date/time


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317024 13f79535-47bb-0310-9956-ffa450edef68"
555ddddb7158ce81b8ba75bb39aa829249b5d6fc,"fixed compare () methods


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317025 13f79535-47bb-0310-9956-ffa450edef68"
38ed5d50bd4dc1974dd1d1bf70d1154b9831aa3f,"Implements support for the schema ""block"" attribute.
This commit also fixes a bug in the implementation of final,
and improves error checking for occurrences of xsi:type in instance
documents.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317026 13f79535-47bb-0310-9956-ffa450edef68"
f857bee0eeefa371542a7c354a61458bec936153,"removed a debugging statement


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317027 13f79535-47bb-0310-9956-ffa450edef68"
7c47f7129b641e1b7bff9d36dcda6e43f2357d87,"Started implementation of simpleType constraints checking (+ some clean-up)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317028 13f79535-47bb-0310-9956-ffa450edef68"
85a6558c8d60adea154dad87b9e9373d2e66bccc,"Changes in schema grammar construction needed to support ""fixed"" and ""default"" attributes of elements.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317029 13f79535-47bb-0310-9956-ffa450edef68"
c47ecccebad0c8da78b5f34d6569a92a6dd74688,"""For compatibility (see Terminology (1.4)) NOTATION should be used only on attributes.""
We were checking on element as well...


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317032 13f79535-47bb-0310-9956-ffa450edef68"
57918175b6665c412f205b3f68488bdf06a73620,"Update plan with new volunteer info


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317040 13f79535-47bb-0310-9956-ffa450edef68"
f2de597cf688aa8d82e3fc57769bd93d8f9e0c94,"added support for default and fixed values of elements with simple content.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317041 13f79535-47bb-0310-9956-ffa450edef68"
dc38ef3f474431c6ee975d071441496ac221a110,"Schema datatype changes from CR to PR. Applied patches from Sandy Gao.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317042 13f79535-47bb-0310-9956-ffa450edef68"
883e3640a5fdfbff1ae8c32eabc60743dc590d6c,"Applied patches from Sandy Gao (Schema PR changes)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317043 13f79535-47bb-0310-9956-ffa450edef68"
43217a1d12e7dc1ad530cd63cb8b3d3ae5d1c554,"Patch from Sandy Gao (Schema PR changes)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317044 13f79535-47bb-0310-9956-ffa450edef68"
a07c7a6d311bb07a3462b08c70656f44185a7cdf,"Removing timeDuration and recurringDuration


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317047 13f79535-47bb-0310-9956-ffa450edef68"
41703b9bdea3ac66bc52ebe620c82e1a1281aef7,"Patches from Sandy Gao


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317049 13f79535-47bb-0310-9956-ffa450edef68"
c8d9c87b08068c59a8b5975b7b5bbb27d7d8da20,"Bug fix (from Sandy Gao)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317052 13f79535-47bb-0310-9956-ffa450edef68"
a374abecb8a8bd0ab43ebdefa2997c5f12492f62,"allow value to be set to null


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317053 13f79535-47bb-0310-9956-ffa450edef68"
02a88e324f2314542ae5f28eb7b972634018fa2e,"Fix for identity constraints not being able to recognized if
Schema elements weren't in the default namespace for Schemas.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317054 13f79535-47bb-0310-9956-ffa450edef68"
dd33849567c025271905d390d1e8dea3d88da5c6,"Code clean up


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317055 13f79535-47bb-0310-9956-ffa450edef68"
f515eacdd7ba17e3601eb920f65eec089bf3b251,"Error checking and _duration_ bug fixes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317056 13f79535-47bb-0310-9956-ffa450edef68"
62cf39275e4f9b85b46339f4f4a043fd761509cf,"Date/time clean up (more work needs to be done).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317057 13f79535-47bb-0310-9956-ffa450edef68"
c65654b595bd7160723a8b5a3e77372119c57de9,"Re-organization of some datatypes code to be able to share validation code against facets.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317059 13f79535-47bb-0310-9956-ffa450edef68"
95384713fe38fd21af9615442ad861a139e3738c,"Aggregated bug fixes from intalio (Assaf Arkin and Arnaud Blandin)
PR:
Obtained from:
Submitted by:
Reviewed by:twl


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317060 13f79535-47bb-0310-9956-ffa450edef68"
85ddd08ef8aee7002c72a2a2ae5338c193ff2aea,"fixed some regressions from last update, fixed decode method, and added synchronized to public methods


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317061 13f79535-47bb-0310-9956-ffa450edef68"
fcee74fcb8fc14fc39be83ef66c73940f239f96b,"Patch from Sandy Gao


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317062 13f79535-47bb-0310-9956-ffa450edef68"
c9163a55bc12102ac2a34b2da184b892082dae0c,"set entities and notations read_only (DOM L2)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317063 13f79535-47bb-0310-9956-ffa450edef68"
1c05ba717f223f602caa8d3531f4317b1049371d,"more on simpleTpe constraints


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317064 13f79535-47bb-0310-9956-ffa450edef68"
c9ec664fcd207c95448a8f1b2bc3d6aa60148498,"make sure we do not pull in classes from the xerces.jar in our tools directory when doing an Ant build; this way the build is certain to fail if a required class is not present.  Note that this required an upgrade to ant 1.3 (dated 03/2001).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317065 13f79535-47bb-0310-9956-ffa450edef68"
8938465a33aacae78be40c1c146017ea7bd6525f,"implemented changes to Schema PR syntax of <attribute> declarations.  Patch by Ted Han (than@ghx.com>.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317066 13f79535-47bb-0310-9956-ffa450edef68"
a634afd4d4ecec871fd4e3704a8363584e9601ec,"put back patches, that got removed by sync w/ Intalio
PR:
Obtained from:
Submitted by:
Reviewed by:twl


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317067 13f79535-47bb-0310-9956-ffa450edef68"
0561c4be90e07e6ba8d6b8f42edef5dc8d6d453c,"bug fix from Ted Han.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317068 13f79535-47bb-0310-9956-ffa450edef68"
15b7a8bd35fd6f6fc37afc4d42031f38e542bec9,"undoing whitespace changes from last commit that should not have been applied and which would clobber people...


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317069 13f79535-47bb-0310-9956-ffa450edef68"
d8c95d670b7b17d79301ee23924ea85eb7569006,"Added support for nillable and implemented *some* constraints related to it .


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317070 13f79535-47bb-0310-9956-ffa450edef68"
5f68bf7cd38d2833fee48a1d91423603ffe6b295,"typo fix


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317071 13f79535-47bb-0310-9956-ffa450edef68"
fe33ed7ac038dd168496667c83f31a52bc8192c9,"bug fix courtesy Ted Han.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317072 13f79535-47bb-0310-9956-ffa450edef68"
1f538f2abc028fd2c3c1b85fdd68ed769609a967,"updates to XPath support for Schema identity constraints to bring it closer to Schema PR.  More work needs to be done.  Patch from Achille Fokoue Nkoutche.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317073 13f79535-47bb-0310-9956-ffa450edef68"
38d73cf7c0d35586a71e68d0fe233c425d82b6bd,"-- Implemented additional facet constraints checking for date/time datatypes
-- Split AbstractNumbericFacetValidator into 2 classes so that
date/time can inherit the common code for evaluation of facets
(minInclusive, maxInclusive, minExclusive, maxExclusive)
-- reorganize a little bit more code to avoid duplicates
-- bug fixes

and of course.. more needs to be done..


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317074 13f79535-47bb-0310-9956-ffa450edef68"
78a54c967ad6087d5a8b9612bffec6a44bba18ef,"new exception for date/time schema datatypes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317075 13f79535-47bb-0310-9956-ffa450edef68"
25d1ef7c0f9a1c88967bfbdfa8a15cd5fd47d4fb,"bug fix from Sandy Gao


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317076 13f79535-47bb-0310-9956-ffa450edef68"
a4de7295300bb06f9b6e8e45f431c00838041ec2,"Patch for schema mixed content model support


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317077 13f79535-47bb-0310-9956-ffa450edef68"
e5ce346049d812965ee5de0ab06172b303ad8865,"Patch for schema mixed content model support


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317078 13f79535-47bb-0310-9956-ffa450edef68"
a835034026f2dbadcd51c01d6063d91f6cb73bed,"fixed dispatch of ATTR_MODIFIED event which failed to set the
related node


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317079 13f79535-47bb-0310-9956-ffa450edef68"
f7de7a45c9d879f58744aa461569be19fe218b44,"fixed removeAttribute bug #1522 - patch from kot_p@hotbox.ru


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317080 13f79535-47bb-0310-9956-ffa450edef68"
d193f24a367ea37291fecfd902a4b0da65c27110,"More fixes for identity constraint support.
Since we cannot statically determine the datatype validator corresponding
to a certain field (because of wildcards, both in content models
and in ID constraints), these need to be tied to the value the
identity constraint matches to.  This fix implements this support.
This involved a bit of a rework of AndyC's careful XPathMatcher
interface.

Still to come:

- full support for descendant and union operator in selectors;
- making sure we can survive grammar switches;
- lots more error checking.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317081 13f79535-47bb-0310-9956-ffa450edef68"
3d3616b56cc3d808c5258467272dd618f4870903,"patch from Sandy Gao to implement validation of attributes of schema information items.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317082 13f79535-47bb-0310-9956-ffa450edef68"
7f55b6eadb47e10aa5eb35eea59aeb8325bc33c2,"fixes to build files to accomodate class additions; plus a minor bugfix.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317083 13f79535-47bb-0310-9956-ffa450edef68"
2a273f75cded9db7b1c88d596994a2ed6c52cdc3,"bugfixes from Sandy Gao; xpath attributes now validate properly and <restriction> attributes are permitted to have no base attribute if they have a <simpleType> child.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317084 13f79535-47bb-0310-9956-ffa450edef68"
aa99989e376e02ed6ccd94324e53925c6dc3094b,"bugfix from Glenn Marcy to enable the XPath parser to handle names composed of characters outside the range of 7-bit ASCII.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317085 13f79535-47bb-0310-9956-ffa450edef68"
5dc4a559d4408ea44506328959c502f1311938b5,"Datatype constraints checking  (Sandy Gao) & date/time updates


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317086 13f79535-47bb-0310-9956-ffa450edef68"
4152c16da192ab4e319d2093ec3e0f3232c408b2,"complexType def properties correct constraint checking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317087 13f79535-47bb-0310-9956-ffa450edef68"
150d51ca43376262747de641f92c80b30922057e,"ct-cos-extends (complexType derivation extends) constraint checking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317089 13f79535-47bb-0310-9956-ffa450edef68"
14e0acb7e7daaaaeb53b21774a1b5155be0cde92,"Added support for \p{Pf} and \p{Pi} (Schema Datatypes: Regular Expressions)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317091 13f79535-47bb-0310-9956-ffa450edef68"
968a0c7c6bc43cbe1b440fb9b85868a94cd64cfd,"Circularity constraint checking for model groups


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317092 13f79535-47bb-0310-9956-ffa450edef68"
e2cd6aa2df47f35e87d81ad75b23c4d135aae89e,"Constraint checking for p-props-correct


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317093 13f79535-47bb-0310-9956-ffa450edef68"
78a928d87b8f24cfd384fee701ed3142ae5f690b,"Extra constraint checking for final


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317094 13f79535-47bb-0310-9956-ffa450edef68"
225732d3d60c5a04e6d44b3bccda56205c129ac7,"more fixes for ID constraint support.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317095 13f79535-47bb-0310-9956-ffa450edef68"
0908841198897ae4e5952b6ddb15955da03f4180,"Disallow minOccurs, maxOccurs on global groups


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317096 13f79535-47bb-0310-9956-ffa450edef68"
0fcc30351fe1873fabee78391377f5fb8a64c0bd,"Schema namespace URI changes - conform to Rec


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317097 13f79535-47bb-0310-9956-ffa450edef68"
321c98280cd7ceec6d53a7c5d50445e46814013b,"Schema namespace URI changes - conform to Rec


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317098 13f79535-47bb-0310-9956-ffa450edef68"
c90baed049bbf341d8a3feb13ba2074fdd9c0ca0,"upgraded samples to Rec


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317099 13f79535-47bb-0310-9956-ffa450edef68"
16ae95ac161ef4fd63f24182410664a1dee5775d,"fix JDK1.2.2 compilation problem.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317100 13f79535-47bb-0310-9956-ffa450edef68"
0fef2fedd0492a3ff7772278d55a950c7b8e87f1,"re-enable (and fix) identity constraint portion of our sample schema.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317102 13f79535-47bb-0310-9956-ffa450edef68"
2bf455bb7be99b6fc741aa8926aa185235ee7fc2,"Partial constraint checking for derivation by restriction and attributes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317103 13f79535-47bb-0310-9956-ffa450edef68"
24014e0b0f7195643bdc3c34cb273cae6fbd16c5,"added support for descendant axis in schema identity constraints.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317104 13f79535-47bb-0310-9956-ffa450edef68"
db50512047bd38712dbc3a9d35ed787e6f2582f4,"patches in support of element and attribute constraint checking; from Sandy Gao.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317105 13f79535-47bb-0310-9956-ffa450edef68"
dc960568a2b05c8b317baf3a197b6e8f0928a2bf,"Implementation of _fixed_ attribute on facets (including related constraint checking),
plus, reorganization of the code: anyURI, string, hexBinary, base64Binary, QName and Notation now
inherit from AbstractStringValidator.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317106 13f79535-47bb-0310-9956-ffa450edef68"
0a6230dfad9b44db418832d487e92d70d108bc0c,"set release date for next Friday


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317107 13f79535-47bb-0310-9956-ffa450edef68"
cd1a1fb313714ed569d53bc32d33d5e4c846ae90,"Complete constraint checking for attributes, derivation by restriction


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317108 13f79535-47bb-0310-9956-ffa450edef68"
e901acff453bf74322a6c68ec55ab341c7ad918b,"added a new utility method to find attributes in a list


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317110 13f79535-47bb-0310-9956-ffa450edef68"
73745b200d46507fa4bf868fc257aed95e3bc34d,"treat subclasses of DocumentImpl as a class of our own - see bug #1010


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317111 13f79535-47bb-0310-9956-ffa450edef68"
ed304b3ba714859f9d93cc6b368b566b7cf3066b,"forgot to turn off error checking for subclasses of DocumentImpl


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317112 13f79535-47bb-0310-9956-ffa450edef68"
221becb903804eab60bfef4d1fdc00f089286797,"a class cast was not protected - see bug #832


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317113 13f79535-47bb-0310-9956-ffa450edef68"
65293d3d2cb9260c2886589d962d96b2123bda94,"fixed a bug in serializeNode - bug #1695


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317114 13f79535-47bb-0310-9956-ffa450edef68"
a2bbb880b7c2ffaee577ae68d7d37e691983f4ec,"fixed bug in handling of PE decls - bug #881


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317115 13f79535-47bb-0310-9956-ffa450edef68"
34ab0e6ce3b1310d61c8bc90a573d3e7361a14c8,"added support for the schema Identity constraints union operator.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317116 13f79535-47bb-0310-9956-ffa450edef68"
8ed84735ce696ca51b73ef8646c41f7d0fe2f40b,"more derivation by restriction constraint checking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317117 13f79535-47bb-0310-9956-ffa450edef68"
033e2aa61eb86330fd78c686c129a12fc79284b4,"our parser now uses accross the board an empty string on elements
and attributes with no namepace, the DOM still needs to return null though,
this fixes this. - bug #1164


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317118 13f79535-47bb-0310-9956-ffa450edef68"
d83e5da309dc0a3544b8b52bef6204a2e35df47d,"Redesigned datatype registry for the parser, to avoid dropping and recreating obj with each parse() call on the same parser instance. Now there are 3 datatype registries:
[1] dtd datatype registry - initialized if XML document contains a dtd
[2] schema datatype registry - initialized XML document contains a schema
[3] user-defined registry - includes user-defined schema datatypes

Note: dtd and schema registry will be initialized only once per parser instance (previously we would drop all the datatypes on the floor before each new parse())
user-defined registry will be reset between parse().

Another change include - creating only one DOMParser for parsing schema file. Yes.. we were creating new parser instance to parse each schema grammar.

After initial testing  (running same instance of parser 100 times, validating 2 XML documents with schema grammar), the results were:
Xerces Build CVS (05.09.2001): 767K objects were created
With the above changes results were: 497K Objects were created. [~25% less]

Things to do:
-- test :)
-- look at GrammarResolver (clearGrammarResolver() - should we try to have some grammar cashing? )


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317119 13f79535-47bb-0310-9956-ffa450edef68"
39ac9d107732f00027d45b840491d6fd14654afe,"bugfixes for Schema Identity Constraints.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317120 13f79535-47bb-0310-9956-ffa450edef68"
e96e2002854cf2f138d8ca8f159477f0df409c92,"exclude io test that only works for Xerces2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317121 13f79535-47bb-0310-9956-ffa450edef68"
5283a802581d80b61d7c4d847a253cfd78102277,"patches for element and attribute constraint checking from Sandy Gao.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317122 13f79535-47bb-0310-9956-ffa450edef68"
0e4cb798ce5c136002e17888cd006d7cb9244d64,"Thread test program, ported from Xerces-C


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317123 13f79535-47bb-0310-9956-ffa450edef68"
3d7f1c8c1cbeff4b0d64695f629551dfc12cd062,"XML Schema REC: Validation Rule: Element Locally Valid (Element)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317124 13f79535-47bb-0310-9956-ffa450edef68"
70c512ab5ec5e1aed7c5f83da085a12030c96612,"replaced a few jdk1.2 method calls by their jdk1.1 counter-part


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317125 13f79535-47bb-0310-9956-ffa450edef68"
0c5f5c384017f9a62970bb388965aee12f87634a,"framework for particle derivation checking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317126 13f79535-47bb-0310-9956-ffa450edef68"
8c0695cdcb2eaab37619faa0bcedd8cbb3aa50eb,"framework for particle derivation checking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317127 13f79535-47bb-0310-9956-ffa450edef68"
5ae672e5ccb33d637c1238fcd81e0b3d853b10ec,"forgot to removing debugging stuff


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317128 13f79535-47bb-0310-9956-ffa450edef68"
f01e010183235359c53059d0e3d3d35284f94d13,"constraint checking for <attributeGroup>s which <redefine> other attributeGroups by restriction.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317129 13f79535-47bb-0310-9956-ffa450edef68"
cab09558973a6d21aa201a6685a4d99edc167558,"check for any elements in convertContentSpecTree


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317130 13f79535-47bb-0310-9956-ffa450edef68"
33d1f4dec7295fb9115c3e4c6603b8777c384dd4,"implementation of cos-list-of-atomic and cos-no-circular-unions


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317131 13f79535-47bb-0310-9956-ffa450edef68"
5426a23f706f5fa58009a7e5f9807fa0196e971b,"enumeration-required-notation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317132 13f79535-47bb-0310-9956-ffa450edef68"
ea6a0ffa5fdfbc57e0b2a057b9a6814eb64633a2,"generate different error message


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317133 13f79535-47bb-0310-9956-ffa450edef68"
6f03da7dc865ce2ebe76c3c322ea26e6a05f43a4,"validator can pass empty string for comparison..


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317134 13f79535-47bb-0310-9956-ffa450edef68"
26849625876bec53f0f872d15536d2560323f4d4,"cvc-identity-constraint.4.2.3:  keys that match elements declared to have nillable true.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317135 13f79535-47bb-0310-9956-ffa450edef68"
b495d33e249a66d7f1abfc19cfcc104370709dce,"completed src-redefine.7.2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317136 13f79535-47bb-0310-9956-ffa450edef68"
823925d47ddb3ed4a67326ac92e3dfce5bbee7fc,"more bugfixes for schema ID constraints.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317137 13f79535-47bb-0310-9956-ffa450edef68"
4eb9a59a905da475da18a10ed0f4ab83cb70b4f9,"commented out debugging code


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317138 13f79535-47bb-0310-9956-ffa450edef68"
2cbc8e29aec0a18ef4413107cf30275131133911,"documentation updates; schema.xml still needs a thorough rework.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317139 13f79535-47bb-0310-9956-ffa450edef68"
612e6ca13df1b2dd6833b646ec0816961c8fb265,"Fix to support xsi:schemaLocation on any element in XML schema


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317140 13f79535-47bb-0310-9956-ffa450edef68"
0a666bed31978df35776811e1b289e0455e90d1a,"New contentspec node type of all.  Checkin for Henry Zongaro


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317141 13f79535-47bb-0310-9956-ffa450edef68"
b0b23c422bdc76f55d07811780595f76d7e45b1d,"added a new feature to ensure full schema constraint checking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317142 13f79535-47bb-0310-9956-ffa450edef68"
e905a23db9987bd2997132877b534482a5eefd27,"added a new feature to turn on full schema constraint checking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317143 13f79535-47bb-0310-9956-ffa450edef68"
4da7a1813fe19485ae7d7c44a6923be8329845f3,"added a new feature to turn on full schema constraint checking.   Also, partial implementation of the hairy Particle Derivation constraints.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317144 13f79535-47bb-0310-9956-ffa450edef68"
9f8979a3d73af2b8a2cda7b1b8913adecc065295,"updates to schema documentation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317145 13f79535-47bb-0310-9956-ffa450edef68"
649576dee6d10cb06b893ba8a3184f9a0324b36a,"src-redefine.6.2 initial implementation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317146 13f79535-47bb-0310-9956-ffa450edef68"
c54b68add9b5f2eaf16816be257f2f98ab7a93a0,"patches in support of element constraint validation from Sandy Gao


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317147 13f79535-47bb-0310-9956-ffa450edef68"
20df147b65b572fd1eeb3d28292d338de3e36dcb,"more constraint checking for particles.  Added a ParticleRecoverableError class


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317148 13f79535-47bb-0310-9956-ffa450edef68"
e79934d2794bbbc8b1e345c8cff2a2ce2be86f99,"changed build scripts to allow our javaDoc-generated API documentation to live under docs/html instead of directly under docs; this should make the website more maintainable.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317149 13f79535-47bb-0310-9956-ffa450edef68"
0bf05947fd69c9161e21e627bba463f841a4cf1b,"Commenting out the code that does not match XML Schema defn. for regular expressions


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317150 13f79535-47bb-0310-9956-ffa450edef68"
4fd7148d90e0273357ed3b016741a4e2a2008ce2,"rcase-nameAndTypeOK.5 support


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317151 13f79535-47bb-0310-9956-ffa450edef68"
ed89a9f2c2b04329c760bde1f835314efe6843c9,"updates to DOM samples to account for the new schema-full-checking feature.  Thanks to Mike Pawlowski.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317152 13f79535-47bb-0310-9956-ffa450edef68"
3fa97abae6513a4a4d2ab38820d91d92a9cb5686,"updates to SAX samples to account for the new schema-full-checking feature.  Thanks to Mike Pawlowski.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317153 13f79535-47bb-0310-9956-ffa450edef68"
177148a8de9796305b59fca379ccf605953e066e,"Remainder of particle derivation checking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317154 13f79535-47bb-0310-9956-ffa450edef68"
3d65605307f5975dbd887b6ab6e2c4dcb82d97de,"Fixed a bug in checkRecurse where some errors were being suppressed.  Other cleanup


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317156 13f79535-47bb-0310-9956-ffa450edef68"
afa081b70a812fcb23e135f564f42ded864daba9,"missed an attribute constraint check that was added to the Rec (not in PR)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317157 13f79535-47bb-0310-9956-ffa450edef68"
de5576c6f77253f01bddbf30d60ba109ae01e534,"updates to permit building of 1.4.0 release.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317158 13f79535-47bb-0310-9956-ffa450edef68"
8291e67fd611b054709529592f7d8a5dcf042f16,"In checkRecurseAsIf, we were nulling out a pointer before use


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317159 13f79535-47bb-0310-9956-ffa450edef68"
65d6fb44c3f946201c34dab78854eb2236dafcba,"Need to check for an invalid index for handleOccurrences


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317160 13f79535-47bb-0310-9956-ffa450edef68"
f4ee81b3433113a186d9bacc3cbdfe643fc4d741,"release updates


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317162 13f79535-47bb-0310-9956-ffa450edef68"
48035f83963c9bd96c19cb2408833401d7bb33eb,"fix for a bug in <redefine> validation with groups


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317163 13f79535-47bb-0310-9956-ffa450edef68"
ea8fe190c380f1f24782d8659b2b831b791e97c0,"updated release notes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317164 13f79535-47bb-0310-9956-ffa450edef68"
939cc6716f149b89f1b5a6fba140f1738e0b9e2f,"updated it with a few more restrictions


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317165 13f79535-47bb-0310-9956-ffa450edef68"
461f5d8ce6f92b6004976723961e5540bdbfa625,"Henry Zongaro's all model group reimplementation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317166 13f79535-47bb-0310-9956-ffa450edef68"
dc68c56f34ce5d808cb5c573035d4de76972a88a,"added info about the new schema checking feature


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317167 13f79535-47bb-0310-9956-ffa450edef68"
fbb52e45261c3aec1590c21066828b62f596aa50,"xsi:schemaLocation update


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317168 13f79535-47bb-0310-9956-ffa450edef68"
46a231bdf4d1dc3d89045e39463a268d2ce4189a,"a bug with ID constraints has arisen which makes itself evident in the keyref in this schema.  Commenting it out as an interim measure.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317169 13f79535-47bb-0310-9956-ffa450edef68"
749f73e75e5fe196536a2a82cece02486f5d3773,"Unique particule attribution constraint checking by Sandy Gao


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317170 13f79535-47bb-0310-9956-ffa450edef68"
0eda65bf0dbb1e5c314a73361d6044fd675a4d01,"File for unique element attribution from Sandy Gao


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317171 13f79535-47bb-0310-9956-ffa450edef68"
95071034c69e2b1fa46a1bcb3c48cb26d9427b17,"added missing end li tag


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317174 13f79535-47bb-0310-9956-ffa450edef68"
14c4f4675671634063fbf6c2f75bb6e09fa62077,"updated release date


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317175 13f79535-47bb-0310-9956-ffa450edef68"
aa70384cc4dc403bcae104e0b4dcccf1dc669d37,"minor documentation wording change


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317177 13f79535-47bb-0310-9956-ffa450edef68"
1bc2e9ea8b78e551da6de4b81ea0440b8ecc0149,"the UPA flags were turned on by default - they should be off by default


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317178 13f79535-47bb-0310-9956-ffa450edef68"
d358c187d0eb4c2bb0f1392f1f19dc36766c37e7,"Fixed typo in particleEmptiable.   Added code to checkRecurse to detect the case when there are extra elements in the base which are not declared in the restriction


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317180 13f79535-47bb-0310-9956-ffa450edef68"
9cf583ca9014a03cccdcc99a6298a2f3254dfb6b,"a patch from Sandy Gao to work around a JIT problem


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317181 13f79535-47bb-0310-9956-ffa450edef68"
4a3a684e1a7e3b5dc0c84787ce2ba9c6b5e5750a,"a patch from Sandy Gao to work around a JIT problem


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317182 13f79535-47bb-0310-9956-ffa450edef68"
a2f8e619ab45f37eebf23515a6b45fe0d06d59bb,"update documentation to remove reference to nonexistent limits on <all> constructs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317183 13f79535-47bb-0310-9956-ffa450edef68"
5378a7ece3bb1d6cf4305b9a771bb63310fd6d34,"report error for undeclared namespace prefix


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317184 13f79535-47bb-0310-9956-ffa450edef68"
513f08679190b41d9fc05125c9c665bb80606c12,"check for duplicate complexType definitions


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317185 13f79535-47bb-0310-9956-ffa450edef68"
5566294d1a181f47bd6811233548a7c4b4b15039,"check for duplicate simpletype, complextype name


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317186 13f79535-47bb-0310-9956-ffa450edef68"
e9405c2a6a161e712a9d68f0b7f1e396546c74db,"bugfixes relating to undeclared namespaces and ID constraints from imported schemas


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317187 13f79535-47bb-0310-9956-ffa450edef68"
71b21a7d6d48b7df97f237c01a0063d00848eec1,"re-enabled <keyref> in personal-schema example; was broken because of a bug in IDREFDatatypeValidator


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317188 13f79535-47bb-0310-9956-ffa450edef68"
bbda56f6810bc68cd55eaf02dae7108e21de1684,"Extra missing constraint checking for model groups


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317189 13f79535-47bb-0310-9956-ffa450edef68"
66a9225c5e8391ce169b05e9ab0121104478dd16,"fix for infinite recursion when a schema tries to redefine itself.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317190 13f79535-47bb-0310-9956-ffa450edef68"
4e6e9eca74c75e7570f7fe31bc67913d523bff0f,"prevent namespaces declared in included or redefined schemas from being recognized in the parent schema.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317191 13f79535-47bb-0310-9956-ffa450edef68"
91e3103d33c10b5bf4acff7dc7ff4cfe8ae84a57,"When traversing a top level group decl, make sure the currentScope is set correctly


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317192 13f79535-47bb-0310-9956-ffa450edef68"
149e07e14f146c4481ddf14d3477ade18abbe9cd,"various bugfixes from Sandy Gao.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317193 13f79535-47bb-0310-9956-ffa450edef68"
37ca2187aff21de4b83af2a7ae32514c15e3b4d5,"bugfixes from Elena Litani (whose CVS is malfunctioning)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317194 13f79535-47bb-0310-9956-ffa450edef68"
85d898edd4be481a2074614c51b76a554385e325,"[fix] date/time comparison may result in _indeterminate_ value.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317195 13f79535-47bb-0310-9956-ffa450edef68"
7a963f61abf7ff7252082da3e1c7589cfb857e6d,"prohibit targetNamespace="""" and allow substitutionGroups affiliations from different namespaces


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317196 13f79535-47bb-0310-9956-ffa450edef68"
324a378263df724c6237910dc043c39b4adb901f,"more bugfixes from Sandy Gao


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317197 13f79535-47bb-0310-9956-ffa450edef68"
220ead313bc08f98ec3448b05b9e73e4b123c1d2,"constraint checking relating to redefine, include and import.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317198 13f79535-47bb-0310-9956-ffa450edef68"
ac492a6c8cebd717d2ea30e57891beeb9018c540,"datatype bugfixes from Sandy Gao


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317199 13f79535-47bb-0310-9956-ffa450edef68"
96e7894667936238ac21bb7a88a74b1bdb3669f1,"date/time bug fixes (some due clarification in the XML Schema specs)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317200 13f79535-47bb-0310-9956-ffa450edef68"
b587353a3c4f4c5c16d0e414b72b844de32907bf,"identity constraint bugfixes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317201 13f79535-47bb-0310-9956-ffa450edef68"
e99a8b407304123bddd277c683577654a6deeded,"fix for union of patterns


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317202 13f79535-47bb-0310-9956-ffa450edef68"
218f09c22aede3cd9af33123a8b93334cf01b37d,"bug in serialization (normalize) fixed thanks to Ka-Ying Lam


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317203 13f79535-47bb-0310-9956-ffa450edef68"
7549b8e17721a7a69e4eb40dc5b12e6aadd248ef,"more (hopefully the last...) bugfixes for <import> as well as a tiny bit of cleanup in XMLValidator


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317204 13f79535-47bb-0310-9956-ffa450edef68"
146686db1386fd59ccf8b154526e1fd9a9085fec,"Looks like we *forgot* to implement pattern on <list> datatype


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317205 13f79535-47bb-0310-9956-ffa450edef68"
1bcca69438bbc7f7f5225a80e47c4d89d587342b,"no message


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317206 13f79535-47bb-0310-9956-ffa450edef68"
29689df23fd1faf19a05d515b889f7a6f04e4137,"Fixed relative URI handling for anyURI datatype


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317207 13f79535-47bb-0310-9956-ffa450edef68"
06d4f5296aaec58f8711338d163ecb3457110c29,"date/time fixes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317208 13f79535-47bb-0310-9956-ffa450edef68"
d17adebb7f432132cbd062b8abd45510b0294ea4,"Cleanup (in last checkin got rid of patterns to validate date/time expressions)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317209 13f79535-47bb-0310-9956-ffa450edef68"
5e2cb0cd97210d67f12d6d94cd8af338499a6945,"fix for namespace handling in context of <redefine>


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317210 13f79535-47bb-0310-9956-ffa450edef68"
298eb52cfb4e8856761f3e2b9ba16b3b10e24d71,"Added support to block names defined in Unicode 3.1 (XML Schema REC requires to support those)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317211 13f79535-47bb-0310-9956-ffa450edef68"
52a88bbb8f034fbf9e13f5f613d0efbf1012e4fd,"small cleanup


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317212 13f79535-47bb-0310-9956-ffa450edef68"
2b015072ddf9a96c014eb53e82967b2933226f07,"require a <field> be present in an identity constraint declaration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317213 13f79535-47bb-0310-9956-ffa450edef68"
2ca4b19aa7e4b225b684acfe0a833f072e4a8cfb,"no message


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317214 13f79535-47bb-0310-9956-ffa450edef68"
485435c616b25f984d2276d31b3c508f688cd535,"Deal with checked exception in static initializer blocks


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317216 13f79535-47bb-0310-9956-ffa450edef68"
fb8318d0587bfb00213c453d8920c8cb653d6d70,"fix for bug #1888


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317217 13f79535-47bb-0310-9956-ffa450edef68"
6b7680ec6a97adbf73a143b1f7315617654e36fd,"expose the DOM Level 3 methods that we support at an *experimental*
level. This is based on the DOM Level 3 Core Working Draft of 5 June 2001.
Available at http://www.w3.org/TR/2001/WD-DOM-Level-3-Core-20010605


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317218 13f79535-47bb-0310-9956-ffa450edef68"
59506847f02c628b3b54068a4574cafea4a9d532,"no message


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317219 13f79535-47bb-0310-9956-ffa450edef68"
3cd74950c8e50a7460a3785c46fb911ac86176d7,"fix for bugzilla defect 1584.  Change the way we store info in fRecurseComplex


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317220 13f79535-47bb-0310-9956-ffa450edef68"
58425b733ad6f21aaa657f596452c0bf6acf5b40,"make our importNode more robust and be able to deal with non
compliant implementations that fail to expose attributes values as child
nodes as required by the spec. See bug #1915


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317221 13f79535-47bb-0310-9956-ffa450edef68"
b17e519e60ab79a90e2be9a0f737a1a066ec8417,"fixes for <redefine> bugs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317222 13f79535-47bb-0310-9956-ffa450edef68"
4ce1adc72f586de5d47835c1db7d2f39c11e85a4,"no message


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317223 13f79535-47bb-0310-9956-ffa450edef68"
1d1d2ba843156c16d1a361a46b90a618cdf22fb8,"fix for Etienne Roys problem (and hopefully for bug #1978 as well)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317224 13f79535-47bb-0310-9956-ffa450edef68"
6d30c5d517d6582d43d8baef85e0c798bfb19cf6,"fix for Bugzilla bug #2035


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317225 13f79535-47bb-0310-9956-ffa450edef68"
1329d5fde861a37be432b0bd95cd3a4f0b994207,"fix for bug #2010


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317226 13f79535-47bb-0310-9956-ffa450edef68"
4400e2c7163d06c13ac70d7769bc96a8fe406761,"no message


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317227 13f79535-47bb-0310-9956-ffa450edef68"
8770d8a9f71bb450d24e34320cd42ab375cac546,"fix for bug #2025 and a bit of reorganization of traverseElementDecl


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317228 13f79535-47bb-0310-9956-ffa450edef68"
b8dc99df1145440d1a2fad26c369e3c498bae71e,"fix for JDK1.1.8 compilation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317229 13f79535-47bb-0310-9956-ffa450edef68"
37d79576879a5bd7d2c8330d78ec529ff946cd83,"one more JDK1.1.8 fix.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317230 13f79535-47bb-0310-9956-ffa450edef68"
8bbd29315fc18ab4dff13cb3676acee9cdd29d06,"fix for bug #2129.  We need to be careful to use targetNamespace as an indexer when creating names for anonymous schema components!


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317231 13f79535-47bb-0310-9956-ffa450edef68"
740a8bf01b16aaa8bd6823d7c7e75aaf1c6b7084,"fix for bug 2115 - detect multiple decls. with different types when one decl is a ref to a top-level element


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317232 13f79535-47bb-0310-9956-ffa450edef68"
cbfde45fbf8649de771e7aeceb0b10cb029a9b65,"Fixing ""[Bug 2104] - URI may enter infinite loop""


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317233 13f79535-47bb-0310-9956-ffa450edef68"
7d1855217b0d90bcbf1c3bc536f735ab293f3d6e,"Fixing ""[Bug 623] - Infinite Loop in org/apache/xerces/utils/URI.java V1.3.0""


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317234 13f79535-47bb-0310-9956-ffa450edef68"
1be0b462bb9b817977b14147da8ab856419de73b,"patch from Udo Grabowski (bug #2151)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317236 13f79535-47bb-0310-9956-ffa450edef68"
009c6ec3efa24404167a31e251758c4f10b778f2,"Infrastructure for new group scoping code.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317237 13f79535-47bb-0310-9956-ffa450edef68"
d0806790dfe287190760329fd8a6008ffffa0f01,"fix for a bug which caused errors to be emitted when the parser encountered included schemas containing local elements in diffreent types but with the same name.  Also a partial fix for bug #2131.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317238 13f79535-47bb-0310-9956-ffa450edef68"
41547cfb28f9e45a9501ba8e6545167b35672666,"validate on-the-way-in for content model containing wildcard
this fixes [bug 2028] in bugzilla


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317239 13f79535-47bb-0310-9956-ffa450edef68"
4a5a28699e32bb7e8a4868a32e532d59f9ea6efa,"validate on-the-way-in for content model containing wildcard
this fixes [bug 2028] in bugzilla


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317240 13f79535-47bb-0310-9956-ffa450edef68"
edc7075fe0cfd9c95d46bf41a690b82409d6b64b,"Enable new group scoping code.   fixes bug 2048 and 2131


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317241 13f79535-47bb-0310-9956-ffa450edef68"
8a4f88ecb2b61d724bb9d10fc3e58d6314146101,"only invoke schema identity constraint validation when validating against schema grammars.  An attempt to increase efficiency of DTD grammar validation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317242 13f79535-47bb-0310-9956-ffa450edef68"
dded6e20bac6cc9df13e1872b030c11a48d96261,"UPA checking: substitutionGroup against wildcards
this fixes [bug 2047] in bugzilla


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317243 13f79535-47bb-0310-9956-ffa450edef68"
850c2016b48699941998093968e79a03f272d47d,"UPA checking: substitutionGroup against wildcards
this fixes [bug 2047] in bugzilla


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317244 13f79535-47bb-0310-9956-ffa450edef68"
84cb9d7aa6e81dd04c413f1e6a10c496dc27d191,"a small documentation update


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317245 13f79535-47bb-0310-9956-ffa450edef68"
1664a02c3fe7c8e52fb2e4c9a47e62ebc7a1dbc0,"fix for bug #2154.  Also cleaned up some code.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317246 13f79535-47bb-0310-9956-ffa450edef68"
f7ea7d61821e5308bc452939d82a5e66524abea3,"fix for bug #2185


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317249 13f79535-47bb-0310-9956-ffa450edef68"
96d2007ead55eb8270f2a677b48adbe1f0ec8485,"Change MapAndSum code to conform to Schema spec.   Commented out error on mixed complexType without a particle, until I raise with Schema WG


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317250 13f79535-47bb-0310-9956-ffa450edef68"
65bd9de4c0143a64b57beec0573a030aab1346d1,"Bug fix: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=2187


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317251 13f79535-47bb-0310-9956-ffa450edef68"
94821240a0d5154086d52fb3db39f164bc454867,"get rid of some useless code


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317252 13f79535-47bb-0310-9956-ffa450edef68"
62d5766e63fa48f62e4ef5d6f05d8f2d363f7cd4,"check the prefix of schema elements
this fixes [bug 2189] in bugzilla


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317253 13f79535-47bb-0310-9956-ffa450edef68"
9df6e0a9ea06cd02225da29df9e3e85d4448508f,"applying a patch from K.Kiehne@deutschepost.de about empty content type.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317259 13f79535-47bb-0310-9956-ffa450edef68"
2ec3c55f194d244eef7a18ecd8d57ed783a92d84,"Added checking for cos-element-consistent to handle substitution group elements as well.   Fixes bug 2037


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317260 13f79535-47bb-0310-9956-ffa450edef68"
b5a8f795844977106d7a2dbe39a5027adc1271a8,"applying patch for [bug 709] in bugzilla: xml file with size exactly 16KB.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317261 13f79535-47bb-0310-9956-ffa450edef68"
cd6d98c8c06f080c9f2667896b3d50f6be4d7460,"fixing [bug 2054] in bugzilla: typo.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317262 13f79535-47bb-0310-9956-ffa450edef68"
195aa53582212b2fca5ee69f489bf2c7bc126564,"Bug fix: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=2029


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317263 13f79535-47bb-0310-9956-ffa450edef68"
35cb2eccc317fadf0722a508c7b2125ab8dd61ab,"Changed the way we detect circular groups, and how anonymous type names are composed.   Fixes a circular group problem posted on xerces-j-user


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317264 13f79535-47bb-0310-9956-ffa450edef68"
079cb15134a802f2a8d736487e83c340a9e97178,"Quick fix for http://nagoya.apache.org/bugzilla/show_bug.cgi?id=1541
(TreeWalker works in exponential time)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317265 13f79535-47bb-0310-9956-ffa450edef68"
8052e8e936d1b2e3823d368d9ea38fd0a8536931,"Support feature names for Event creation:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=1814


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317266 13f79535-47bb-0310-9956-ffa450edef68"
70d965b82c7214ab3b5e9b6eb4e81b369f5b864b,"couldn't compile: missed a bracket.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317267 13f79535-47bb-0310-9956-ffa450edef68"
cf39ef9bb6fca003b0e890b47265e4de2a6ea931,"fix personal.xsd so that it is a valid schema.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317268 13f79535-47bb-0310-9956-ffa450edef68"
6c9d214bcbfd448cb1eae21fc1046e69ff731820,"fixed a bug in which a reference to an attributeGroup from another schema could blow up further schema validation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317269 13f79535-47bb-0310-9956-ffa450edef68"
d654805479a9f2d3c5d490fbb069a33bec3a8cbf,"Implemented DocumentBuilderFactory#[gs]Attribute methods.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317270 13f79535-47bb-0310-9956-ffa450edef68"
6d99e9459dd9bf8c2c7aeb4c79c1e1db68af3c21,"1. new parser for name/ncname/nmtoken to improve performance (replacing the old regex)
2. remove static member from ElementWildcard;
3. add support for attributes from non-schema namespace.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317271 13f79535-47bb-0310-9956-ffa450edef68"
4e41fb9b4de2b16259d1e5b137452d29a79f68f3,"support IANA aliases for encodings that the Java supports


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317272 13f79535-47bb-0310-9956-ffa450edef68"
5c036d5dbda909a580f7bcf7042da50b51ba9c11,"make sure that the ANT build scripts are included in source packages produced by Make


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317273 13f79535-47bb-0310-9956-ffa450edef68"
41e96458d8daf077dfa8d54dcf45920d14a42637,"bug fix for substitutionGroup: used wrong variable


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317274 13f79535-47bb-0310-9956-ffa450edef68"
94a03b71cec04aad7ad1dc8b30531ab1c4761136,"fixing [bug 2250] in bugzilla: duplicate attributes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317275 13f79535-47bb-0310-9956-ffa450edef68"
b43e4ce45875e704e897ed244ba706cedf96feb8,"removed some unnecessary try/catch blocks.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317276 13f79535-47bb-0310-9956-ffa450edef68"
b8a5eedbc9ab2a94c79817595c8b45196fd603ab,"error reporting bug.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317277 13f79535-47bb-0310-9956-ffa450edef68"
ab4ef23bd2f9c16562d961e87a5d4049e837c818,"Henry Zongaro's fix for bug 2038


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317278 13f79535-47bb-0310-9956-ffa450edef68"
179139e6b6e58ed09c0a26a9d00f6fc7b9455201,"Henry Zongaro's fix for bug 2038


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317279 13f79535-47bb-0310-9956-ffa450edef68"
12b1ee5aaa0e587f81d5a1ae5f9c748231d29456,"Added 2 new properties to Xerces parser to allow to specify schemas externaly.
""http://apache.org/xml/properties/external-schemaLocation""
""http://apache.org/xml/properties/external-noNamespaceSchemaLocation""
See http://www.w3.org/TR/xmlschema-1/#schema-loc


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317280 13f79535-47bb-0310-9956-ffa450edef68"
109018ebd70b7a6496cf3be514444f491fc0c2d6,"Don't process top-level element declaration references at the time of referral.    This causes problems with tricky circular definitions.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317281 13f79535-47bb-0310-9956-ffa450edef68"
b56c1a02abca0b440b5e5968ccc0acbd24422c36,"remove unnecessary catch blocks.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317282 13f79535-47bb-0310-9956-ffa450edef68"
c6add457b34834ef3e1a4ac6f86c89dd5cb87303,"Moved particle derivation checking for complexTypes to the end of TraverseSchema.   This is required to propertly handle references to toplevel elements and substitution groups


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317283 13f79535-47bb-0310-9956-ffa450edef68"
42a687de320eabad5dcc06662b392e959500ae59,"added some info for the 1.4.1 release


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317284 13f79535-47bb-0310-9956-ffa450edef68"
cbaa5b149f35e0d17b67ce43d2f92e0ac6e84fb2,"removed restrictions that are now ok


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317285 13f79535-47bb-0310-9956-ffa450edef68"
7182a2ac3f952d4db51c857621a0a1ac2da33cd6,"bug fixes: nullPointerException


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317286 13f79535-47bb-0310-9956-ffa450edef68"
eaec17c3a1431a56a5cd67e0eb199e47c1d3e770,"pull back the change i made yesterday. it fixed one bug, but resulted in another one. I'll look into it later.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317287 13f79535-47bb-0310-9956-ffa450edef68"
4ede8e2427e3f1081e290cb918238fbc22e682d8,"fix for NullPointerException


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317288 13f79535-47bb-0310-9956-ffa450edef68"
3770e9fc155fe95358c271698a2265b9d1e4c02d,"Fix for #2049.  Xerces should actually be using the newer versions of the
javax.xml.* classes that have been checked into xml-commons.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317289 13f79535-47bb-0310-9956-ffa450edef68"
98f96892b8f8b224fd23b54652a9b5a5d6cdceff,"changed names of the new schema properties


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317290 13f79535-47bb-0310-9956-ffa450edef68"
39d06823648b6b0f3ce7d000dade1f71fb2e9f4e,"documentation updates


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317291 13f79535-47bb-0310-9956-ffa450edef68"
ef55c35618e8ea8dcacb0b7628d689a9c4911f4d,"Documenting new schema properties


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317292 13f79535-47bb-0310-9956-ffa450edef68"
a4ef15bace56c61cc94aebfc8af8dbf5f1161806,"to be consistent with policy of obliging users to use the allow-java-encodings feature if they want to use Java encoding names instead of IANA names, remove three encoding aliases from our internal mapping.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317293 13f79535-47bb-0310-9956-ffa450edef68"
0371c4c76c806e24e4695f988559bae071535c0b,"changes for 1.4.1


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317294 13f79535-47bb-0310-9956-ffa450edef68"
05188bc3e00dd5c0e4aa29b80f044c89e78aa2e1,"conformance test patch that Glenn Marcy gave me a long time ago


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317295 13f79535-47bb-0310-9956-ffa450edef68"
a056cc4836e5926e6e01f0113589720c54d4e38c,"release update


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317296 13f79535-47bb-0310-9956-ffa450edef68"
bcd4d218dc9e21c289f130f80158a252ae4ce406,"small doc clarification


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317297 13f79535-47bb-0310-9956-ffa450edef68"
d6dfa54de2532a8237db3b087b429948be1e4258,"make package names consistent with those produced by Make


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317298 13f79535-47bb-0310-9956-ffa450edef68"
019102c6cdbe34ca5bda1646a62eeea03ad21d38,"Update error reporting in date/time


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317299 13f79535-47bb-0310-9956-ffa450edef68"
b2102873e7de7a256b6ae0a502a3699e54a4fe48,"yet more doc updates


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317300 13f79535-47bb-0310-9956-ffa450edef68"
9db324fe7084d3a531f236f90a6b63afbb80b6d0,"resize() methods were left unimplemented, which would cause trouble for big schemas.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317301 13f79535-47bb-0310-9956-ffa450edef68"
740582783d3aa6b5b4606b259188ce772c9af9a9,"Fixed recursive base type detection bug, and commented out code which checks that an extension must have a particle (based on clarification from HT)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317302 13f79535-47bb-0310-9956-ffa450edef68"
aadc9f5a7e90803c9e2d61ede6e4ceedb0a20dca,"used a jdk 1.2 method.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317303 13f79535-47bb-0310-9956-ffa450edef68"
d61e3dd32d1616051399387bd189c638e7265c27,"UPA bug: not handling ? + * properly.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317305 13f79535-47bb-0310-9956-ffa450edef68"
b529618596cc8f458081e3881794ae75d730d3bd,"generate a better msg for bad attribute in derivation by extension


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317306 13f79535-47bb-0310-9956-ffa450edef68"
dd7ae15c3faaea8512fe51625faf5458265a80ba,"when cloning elements into a complexType scope from a group, make sure the tree walk handles occurrence range nodes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317307 13f79535-47bb-0310-9956-ffa450edef68"
45a3cf4a768f5d877cab18b8c148410433b59990,"Improved some schema error messages: UPA, General Attribute Checking.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317309 13f79535-47bb-0310-9956-ffa450edef68"
17871352124d41f144f82c26aaa2ce1f80cd3407,"fix for getProperty and ""http://apache.org/xml/properties/schema/external-noNamespaceSchemaLocation"" property


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317310 13f79535-47bb-0310-9956-ffa450edef68"
904469745efa247c002caac264e0143abda23342,"Patch from Dean Brettle. We need to revisit the code later (it gives StackOverflowError
with very large documents)
Refer to bug: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=1541


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317312 13f79535-47bb-0310-9956-ffa450edef68"
ac9fbc2b63f937af48726a4cefd201864b65045d,"US-ASCII has many IANA alises; add them.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317313 13f79535-47bb-0310-9956-ffa450edef68"
97338cdc75b8c7e57c2276335c783f4fef85a21a,"update <import> support to take advantage of external-schemalocation and external-nonamespace-schemalocation properties.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317314 13f79535-47bb-0310-9956-ffa450edef68"
06aaeb97871123abd8084693e886057424d98b9a,"fixing [bug 2347] in bugzilla: substitutionGroup type derivation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317316 13f79535-47bb-0310-9956-ffa450edef68"
376a43643cb3bf01ba53bd576aac92780e33d86c,"1. fixing [bug 2357] in bugzilla: stop the checking if we can't find the substitutionGroup element;
2. fixing a recently reported bug from the mailing list: mixed type with empty content


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317317 13f79535-47bb-0310-9956-ffa450edef68"
23bc37847e0e3642384699c8b863860647f11658,"1. fixing [bug 2292] in bugzilla: there was problem finding certain elements;
2. performance improvement on UPA checking.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317318 13f79535-47bb-0310-9956-ffa450edef68"
78fba78ef8ec762820cc000b1847d6733881dcba,"when cloning elements from group scope to complexType scope, make sure the scopeDefined field is set correctly


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317319 13f79535-47bb-0310-9956-ffa450edef68"
c81f5623e20f07f47bf3c8fed339b3f9fde73e90,"1. fixing a bug with ""mixed"" complexType with empty content
2. support ""0"" and ""1"" as valid values in Schema


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317321 13f79535-47bb-0310-9956-ffa450edef68"
c5a9e764f0dd4d0b7042a43c6c6def433a9804b5,"fixing bug [2318]: corrected the error message


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317322 13f79535-47bb-0310-9956-ffa450edef68"
64f5c36eaf7742972ce6577aef741cb5838127b3,"fixing bug [2250]: check duplicate attributes with namespace names


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317323 13f79535-47bb-0310-9956-ffa450edef68"
c2388c8b2fee84b1ca23e0b7a716edacc0943108,"fixing bug [2378].


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317324 13f79535-47bb-0310-9956-ffa450edef68"
86242d689f3eae978f0f14370d91f2167960fd63,"accidentally modified an error message. now changing it back.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317325 13f79535-47bb-0310-9956-ffa450edef68"
0ca6a9c5a22be9cab35eb49d9c0b70aa041f1fbf,"Bug fix: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=2467
We should not raize an exception, cause we already do much better checking
for cos-list-of-atomic constraint


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317326 13f79535-47bb-0310-9956-ffa450edef68"
a1b0cd5294f8baebb5bcfb1f068690248b002281,"When validation is turned off, the parser did not normalize attribute values in DTDs.
Separated validation code from normalization code, fixed normalization algorithm.
Plus, SubstitutionGroupComparator is no longer instantiated for DTD traversal.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317327 13f79535-47bb-0310-9956-ffa450edef68"
ff4bf91cf88a40e86227fdee0e7fcb3e5a398707,"fix a bug with attribute defaults reported by Etienne Roy


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317328 13f79535-47bb-0310-9956-ffa450edef68"
d7b94af157028c66a5a95705a900707782c5e3e6,"disable compression of jar files in ant builds to bring them into sync with our make-based builds.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317329 13f79535-47bb-0310-9956-ffa450edef68"
335c5f003b47e1a822921894ea9dae7a9de7c35f,"fix some error messages in the validator to make problem diagnosis easier for users.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317334 13f79535-47bb-0310-9956-ffa450edef68"
e053e714661606bdf0d163660a381ff9f0b4c04e,"fixing bug [2485]: when defer-node-expansion is set to false, fDocumentHandle.characters() should be the last method to call when processing characters and whitespaces.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317335 13f79535-47bb-0310-9956-ffa450edef68"
dfc96f97362a7e9d96cc5da589249b1c4f571d45,"this might be some old code that was left accidentally.
""xer"" is never used later, and the casting might cause exception, because ""erNode"" might not be of type ""EntityReferenceImpl"".


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317336 13f79535-47bb-0310-9956-ffa450edef68"
0281fda09525815998bd7d9a7ca24e49558fb238,"fixing bug [2483]: children of the element were removed accidentally.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317337 13f79535-47bb-0310-9956-ffa450edef68"
e4a6b2acb7fc8cdb1d77455863412bcc741f1d14,"if an element being cloned is inside a recursive declaration, we should
also put the cloned element in fElementRecurseComplex, so that its
associated information would be filled after the traversal.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317338 13f79535-47bb-0310-9956-ffa450edef68"
a45ba8883c32ff0d93a1f3dc083bb9e71a8a18f4,"wrong loop ranges in whatCanGoHere.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317339 13f79535-47bb-0310-9956-ffa450edef68"
dafea22fd10e33eb51f038e31087f7fffbae16e6,"small typo in javadoc: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=2557


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317340 13f79535-47bb-0310-9956-ffa450edef68"
c556741597228fe86521a3a0a46f84f8e2fff5fb,"another problem handling recursive complexType + group: the scopeDefined is not set properly for cloned elements.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317341 13f79535-47bb-0310-9956-ffa450edef68"
abbdee5036410a5a0ce6a9feb83b470008830821,"Behavior was changed, implementations that overwrite those functions should get notification.
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=2530


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317342 13f79535-47bb-0310-9956-ffa450edef68"
f03ee73b8a3eeac218fd937b004db8d1a9125dd9,"removing some useless and confusing files; see bug #2510 for why they are confusing


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317343 13f79535-47bb-0310-9956-ffa450edef68"
00524f9db92188c26f04c3c6b4ecd2f3e94ffbba,"fix to internal change of APIs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317344 13f79535-47bb-0310-9956-ffa450edef68"
235f25d1f42e401ada75c753c4644748b2bf1a79,"Fixing ClassCastException for the case both DTD and Schema used in an XML Document


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317345 13f79535-47bb-0310-9956-ffa450edef68"
59f6287e4030f9012f3751a388295a2569b9cf21,"pass EntityResolver to DOMParser created in import/include processing, as requested in bug #2510


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317346 13f79535-47bb-0310-9956-ffa450edef68"
c9ff0ee9edae28b85961a61ab317ececbd66024a,"small fix to MIME2Java.  No one currently uses this hashtable, but we should keep it usable just in case.  Thanks to Martin Krumpolec for pointing this out.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317347 13f79535-47bb-0310-9956-ffa450edef68"
b249dba2dcb0a10efab0dd69f9469ea2d07cfff0,"fix for bad <unique> element in personal.xsd


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317348 13f79535-47bb-0310-9956-ffa450edef68"
18a9ca1a226088ffb7d59dd27a9e0ab8da206129,"1. fixing bug [623]: didn't handle ""/../"" and ""/.."" correctly in URI;
2. fixing bug [2451]: now we support both ""anyType"" and ""anySimpleType"";
3. fixing an error message: provide more information.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317352 13f79535-47bb-0310-9956-ffa450edef68"
a404ea4da50e988d99d03ccb6d79f3c323d53b6e,"correction to the front page so that the schema link is actually usable.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317355 13f79535-47bb-0310-9956-ffa450edef68"
e30a8e26c39b7f115a76c7aa5dd9242b725c3235,"update to reflect change in Apache's cvs server.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317356 13f79535-47bb-0310-9956-ffa450edef68"
47861e49aa4d3d9dc27d88f5d2896e7a7b72ab01,"removed redundant code for wildcards.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317357 13f79535-47bb-0310-9956-ffa450edef68"
ff64554837f5e3ab7a1f47a74acbb0a6aebea8eb,"fixing a bug for xsi:type.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317365 13f79535-47bb-0310-9956-ffa450edef68"
cfb409074551008fcbe92a1035045cebfe57b4ec,"include javax.xml.parsers configuration info in source and binary distributions


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317366 13f79535-47bb-0310-9956-ffa450edef68"
a18e42fea9eda2c8c70148b41dfabf6ba1d4bc84,"start a KEYS file a la Xalan-J2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317370 13f79535-47bb-0310-9956-ffa450edef68"
6d7f7eeb3184b9b40cccdafeaa826d3d3b414e8a,"make XHTMLSerializer extendable as per request by Thor Gunnlaugur


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317376 13f79535-47bb-0310-9956-ffa450edef68"
189692d805179cbf48ca56f5f4ce38dd5e5a6806,"Adding support for anySimpleType.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317377 13f79535-47bb-0310-9956-ffa450edef68"
8426e76c1efaf189a0a808a432c7029bbddbca04,"Performance patches related to array resizing - submitted by Henry Zongaro


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317378 13f79535-47bb-0310-9956-ffa450edef68"
699abaf4b06fccdeb22eb190bbcdbb6982eab0d9,"Adding derivation cheching for anyType/anySimpleType.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317379 13f79535-47bb-0310-9956-ffa450edef68"
4369d9c54fd4fa7ccc425127512a834b10b9ec96,"compare method should catch exception that might be thrown during parsing


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317380 13f79535-47bb-0310-9956-ffa450edef68"
0b0c7c81052336d5564703f257cc0b0cba2c5453,"changed the way we look up elements in particle derivation checking to take into account namespaces for formQualified


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317381 13f79535-47bb-0310-9956-ffa450edef68"
8732efcd3d7ee0d5bf320ad4b8b46eb0d0c98312,"prepare for release 1.4.2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317382 13f79535-47bb-0310-9956-ffa450edef68"
b8acecdbe10ffe814b6764fdf595583cf007267d,"Patch from  Gunnlaugur Thor Briem (gthb@dimon.is)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317383 13f79535-47bb-0310-9956-ffa450edef68"
4d351aa0fc5da185cf156a2ba7f6672fe2d22a6c,"documentation updates for 1.4.2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317384 13f79535-47bb-0310-9956-ffa450edef68"
2d42721e6d04c3643ef885bc62c046f440942820,"fixing the bug reported from the message ""Validation Problems with extension"".


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317385 13f79535-47bb-0310-9956-ffa450edef68"
03d6f7838cdaf853eef5b0ca34ec83fe695c6139,"Test for TreeWalkerImpl class. Contributed by Christian Geuer-Pollmann.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317388 13f79535-47bb-0310-9956-ffa450edef68"
24af90b4f6fa76a81c0bc9f74c9aa4e2c87153eb,"Left some debugging code. Now removing it.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317389 13f79535-47bb-0310-9956-ffa450edef68"
1cba16fabcdd1a347edff6880016b72b17a0729a,"checking in cleanup of import statements that has been sitting
on my disk for a while...


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317391 13f79535-47bb-0310-9956-ffa450edef68"
66fd54103cd08544373f713327bf7bf06fa8f469,"Bug fix http://nagoya.apache.org/bugzilla/show_bug.cgi?id=2761 - normalization


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317396 13f79535-47bb-0310-9956-ffa450edef68"
55039afdfdf206ca48db000c06772b4ee36fb28d,"patch from Stephen Dulin to fix bug on machines that use EBCDIC as their native encoding.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317407 13f79535-47bb-0310-9956-ffa450edef68"
5ea2e7c4b8579b63ea33864a14ab1d3e5be59b67,"Applied a change from Henry Zongaro fixing a typo which was causing unnecessary growing of a table


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317408 13f79535-47bb-0310-9956-ffa450edef68"
596fdf812ac322e1a52297362f2330e6fd86a361,"fixing bug [2800]: DatatypeValidatorFactoryImpl will not compile.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317412 13f79535-47bb-0310-9956-ffa450edef68"
8ce05f8397464f722cf9670678f1d7a842eb10f9,"fixing a bug reported by Slein, Judith: checkTypesOK didn't work correctly in the following cases:
1. the two types are the same global complexType;
2. the derived type is restricting anyType.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317432 13f79535-47bb-0310-9956-ffa450edef68"
46f430830dbc1abf92adf7b51554b11a74a19240,"fixing a bug in checkTypesOK: any simple type is validly deried from anyType.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317433 13f79535-47bb-0310-9956-ffa450edef68"
07f2f72ab21fa75ac07cdb06add100d423fc1bdf,"1. fixing a bug reported by David A. Riggs: ""use"" and ""fixed"" were ignored if an attribute declarations refers to an attribute from another namespace.
2. provide more specific error messages for GeneralAttrCheck


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317434 13f79535-47bb-0310-9956-ffa450edef68"
c0c1122be9941fe3ce55c4988551201178ca4440,"fix from Jeremy Carroll for a memory leak in the StringPool.  Here, objects in the StringReader which are waiting to be cleared maintain their references and hence those objects cannot be garbage collected.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317440 13f79535-47bb-0310-9956-ffa450edef68"
2ff7cee2d632200346fd8a2ad5d575d393f17e35,"implementation by Jeremy Carroll of the fix for bug 2793 proposed by Glenn Marcy


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317441 13f79535-47bb-0310-9956-ffa450edef68"
4e9b6dff3cb398f0fe4d67b5785df8b9bc8c4a55,"fixing a bug reported by Slein, Judith: checkTypesOK didn't work correctly when the base type is not derived by restriction.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317442 13f79535-47bb-0310-9956-ffa450edef68"
31052e8c6da4182be9897f87d0e704b3076cc9e9,"Applied a patch submitted by Henry Zongaro to reduce the number of temporary ElementDecl objects created.   Fixes a regression introduced by a bug fix in 1.4.2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317446 13f79535-47bb-0310-9956-ffa450edef68"
bbdf1d2944fdf691fe581376a22c7ca39bdfb196,"This new implementation supports two different DOMImplementation classes.
CoreDOMImplementationImpl, along with CoreDocumentImpl, only supports DOM
Core. DOMImplementationImpl, along with DocumentImpl, inherits from the
Core classes and adds support for optional modules (MutationEvents, Ranges,
Traversal) as well as the Deferred DOM.

Not much code has actually changed, but quite a lot of code has been moved
around. In particular, all the event code has been moved to DocumentImpl.
Instead of firing events directly, other classes now simply notify the
document of mutations. This allows us to have a core document class which
does nothing in response to these notifications, and a more complete class
which fires mutation events as well as update ranges and iterators if there
are any.

The net result is that one can make a jar which only contains the core DOM,
that is half the size of the complete DOM. The code is also cleaner
although fully backward compatible. Existing applications using the
DOMImplemenationImpl and DocumentImpl classes will keep working just fine.

In addition, although the gain can't be huge (because I already optimized
the code quite a bit ;-), the Core DOM can only be smaller in memory and
faster. At the same time memory consumption and performance remain the same
for the complete DOM. I actually noticed some small difference in
performance (~2%) but it turns out to be either a loss or a gain depending
on the jvm, so...

When we implement the DOM Level 3 Registry mechanism one will be able to
dynamically select one implementation or the other, depending on the
features it needs.

As an extra bonus the deferred DOM is a clean layer on top of the other
classes again, and can therefore be left out if desired.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317447 13f79535-47bb-0310-9956-ffa450edef68"
de7828adf963cc24bbf5a1221bf146e4abc16c88,"fixing a bug:
sometimes, fElementDeclFirstAttributeDeclIndex is set for some element,
but fElementDeclLastAttributeDeclIndex is not set (it's still -1).
Any further attempt to add a new attribute for this element would result
in an ArrayOutOfBound exception.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317453 13f79535-47bb-0310-9956-ffa450edef68"
314ab3e02739e89b14e6554146b999d45ff5febf,"fixing a bug:
should return at this point, otherwise the same particles would be count twice.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317454 13f79535-47bb-0310-9956-ffa450edef68"
661213091fd5aea05d5b495177ff70dc3224b6db,"fixed bug introduced in previous commit


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317455 13f79535-47bb-0310-9956-ffa450edef68"
38eb7d43f4cfa928d19c5a7c7ad318870cba9431,"prepare for 1.4.3


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317469 13f79535-47bb-0310-9956-ffa450edef68"
e83222633fbdbba482079f9d4f2f655449685ef1,"release notes for 1.4.3


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317470 13f79535-47bb-0310-9956-ffa450edef68"
a6d25b04e44b8148c751eb44a9b1bac1a8509a7c,"updated log related to DOM


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317471 13f79535-47bb-0310-9956-ffa450edef68"
fd2110e7c8eb75f47e4fe27f2de6e9849c44965c,"fixing a bug reported from the mailing list: circular attribute group reference


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317472 13f79535-47bb-0310-9956-ffa450edef68"
9a64e58ef825fae3bb9b46ec305199bb5308fc9e,"fixed dispatchEvent: while additions of listeners only affect
future dispatches, removals take effect immediately


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317476 13f79535-47bb-0310-9956-ffa450edef68"
6fec9ee0c874aba003c6652a39c4de16036f6e4f,"Merge/move of Xerces 2 to the trunc!


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317483 13f79535-47bb-0310-9956-ffa450edef68"
6496e08b112a154379c9904c2f9a0a0d9941fbe5,"Merge/move of Xerces 2 to the trunc!


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317485 13f79535-47bb-0310-9956-ffa450edef68"
f10c61ef109e138b2e95fbd2a3f8f519f2b69041,"Merge/move of Xerces 2 to the trunc!


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317486 13f79535-47bb-0310-9956-ffa450edef68"
b53de555e28e29c4c49b72f61e58d132505c3c36,"Update change log for XNI Manual addition and Xerces2 branch merge.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317489 13f79535-47bb-0310-9956-ffa450edef68"
af96cf683f15a00411366ad0a67c92f1bb828bca,"Added dynamic validation feature to sax.Counter. This feature
should be added to all of the samples.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317490 13f79535-47bb-0310-9956-ffa450edef68"
5cebe9f00c9b77d782ab2181cde8aca144fe7a7f,"Updates to make the Xerces2 standard components are in sync
with the documentation regarding their supported features
and properties.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317491 13f79535-47bb-0310-9956-ffa450edef68"
07b3c02310349e06ededff212c0685b4ce5013ad,"More updates to the Xerces2 standard components.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317492 13f79535-47bb-0310-9956-ffa450edef68"
10989c5ae89c8a9a922643b658842a3a7a8c4c0c,"Made sure that the DTD validator actually pays attention to
the features and properties that are documented. The dynamic
validation feature was not yet implemented so I added that.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317493 13f79535-47bb-0310-9956-ffa450edef68"
afe5bd179c1fdee7994103999ce83b036268569b,"Docs mentioned that the XMLDTDValidator needed to know the
value of the namespaces feature. This was only true back
when the code was a ""universal"" validator capable of
validating both DTDs and XML Schemas. Therefore, namespace
binding had to be performed in between those two steps.
Now that this class *only* performs DTD validation, this
feature is no longer needed by this component.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317494 13f79535-47bb-0310-9956-ffa450edef68"
fbbcdbd1618f32260483a3c0606af466abdbb691,"Fixed bug for when namespace bindings were added as default
attributes from the DTD. And I had just removed the namespaces
feature from the XMLDTDValidator code because I thought it
wasn't needed. <sigh/>
Reported by:	John Caron <caron@unidata.ucar.edu>
Attempted patch submitted by:	Neeraj Bajaj <Neeraj.Bajaj@sun.com>


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317495 13f79535-47bb-0310-9956-ffa450edef68"
3e29dc4dc6f1f2b847dfc098eea0ce93d0bcb81d,"Changed default for pull-parsing the DTD from within the
document scanner. Previously, the ""complete"" value passed
to the document scanner's scanDocument method was used to
scan the DTD as well. But this is probably not the most
common usecase. So I changed the default to always ""true""
and we can decide if we need to add a feature later in
order to get the other behavior.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317496 13f79535-47bb-0310-9956-ffa450edef68"
74d98401f0de02e79edb8f6f56a3250182ced484,"Updated version number for impending Xerces-J 2.0.0 (beta2) release.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317497 13f79535-47bb-0310-9956-ffa450edef68"
1598890882129872a9179bc5b13841400b582ed0,"Changes to 'todo' list.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317498 13f79535-47bb-0310-9956-ffa450edef68"
166376abc23522972e13c8ca115620fa36621395,"Minor doc update.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317499 13f79535-47bb-0310-9956-ffa450edef68"
f9c1d6b32ec7cd8ae2081a5215e923da1998fcae,"Putting back Edwin Goei's changes made from xerces_j_2 branch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317500 13f79535-47bb-0310-9956-ffa450edef68"
839d3a197dafad054baa990a79b1057389f6f7aa,"Adding design stubs for XML Schema component traversers.
These could be changed or modified later.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317502 13f79535-47bb-0310-9956-ffa450edef68"
393cf01dde2dc8403a8949197630439f37ad05c2,"This class is the successor to the
org.apache.xerces.validators.schema.XUtil class from Xerces1.  The
purpose of both classes was to provide a partial abstraction from the
DOM to be used by the schema parser, so that, should we ever decide to
use some representation other than the DOM for schema documents, the
job of porting would be easier.

This class has additional functionality to serve this purpose.
Specifically, it adds generic methods to get at the owner document and
for dealing with attributes.  It also provides some methods dealing
with ""hidden"" Elements; this will have particular significance for the
new schema design, but might possibly be handy for other applications.

We decided to move this class into the util package because it's
possible that other applications might want to abstract themselves
somewhat from the DOM and might find this useful.
Since there's nothing specific about the class to the new schema
design, we decided to add it in to a live package without making a
branch; it doesn't hurt anything and can always be removed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317503 13f79535-47bb-0310-9956-ffa450edef68"
0cf6dddc4b5ce232443e44440c154a4858d8e233,"Updated (and cleaned) version of all schema symbols.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317504 13f79535-47bb-0310-9956-ffa450edef68"
632bc013ed2713dc69ee8fcc0347a477184724e9,"Copied original org.apache.xerces.jaxp code from xerces_j_2 branch.  Some
files were not picked up during the conversion of making the branch into
the main trunk.  Also minor clean up of comments.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317505 13f79535-47bb-0310-9956-ffa450edef68"
e8004da9938ff8baf2bc18dd8f64a4251836c46a,"Some minor change and implementation of annotation traversal.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317506 13f79535-47bb-0310-9956-ffa450edef68"
4d06784f1bbf6557059aefc3e7faea438ca1b1ba,"add a method for exposing localnames of Nodes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317507 13f79535-47bb-0310-9956-ffa450edef68"
a0823d09968f88735502a1e9f92a7b3f4bcab033,"Port of Xerces1 datatype impl  (the most recent vs) and add v2.msg directory.
Limitations:
- Datatype Registry does not include ENTITY/ENTITIES validators.
- in XMLChar need to implement isValidNCName
- for ID/IDREF datatypes need to update error messages (see validate() method).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317508 13f79535-47bb-0310-9956-ffa450edef68"
dc013707421d2289399c87a7fb0a2b28cbc40c70,"XSDocumentInfo contains all information unique to a schema document.  XSDHandler is what was known as SchemaHandler in the posts on design; it is pretty much a skeleton at this stage, though a few methods are fairly complete.  Left to implement are phases 2 through 4; phase 5 (UPA and derivation checking) awaits stabilization of the relevant traversers.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317509 13f79535-47bb-0310-9956-ffa450edef68"
64c8e15e253a1aaac41ee4b7358348bd30a1112d,"fix a typo...


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317510 13f79535-47bb-0310-9956-ffa450edef68"
2d0e93f83096a07833edf84d4fd5033c892076f4,"Modified the package name.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317511 13f79535-47bb-0310-9956-ffa450edef68"
766f4dd4e094426fbd2c3533801c97afb602ea2c,"Commented out a line that won't compile. Revisit it later.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317512 13f79535-47bb-0310-9956-ffa450edef68"
04c256b8eb7caccd7813e5bd5649f61cdbf93f93,"Removed some of the syntax errors.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317513 13f79535-47bb-0310-9956-ffa450edef68"
f108dee5e22970bfeff6ee795472fe06b03409c0,"Attribute checker (was GeneralAttrCheck).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317514 13f79535-47bb-0310-9956-ffa450edef68"
7548724b0809a62daa07b4e14eff31c86ec58652,"add isValidNCName() - need to port from X1


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317515 13f79535-47bb-0310-9956-ffa450edef68"
e51d893866198abfcafe35224adb6b4caef7429f,"add stubs for some XML Schema components:
- XSComplexTypeDecl (was ComplexTypeInfo)
- XSElementDecl (was XMLElementDecl)
- XSType - common interface for XML Schema types


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317516 13f79535-47bb-0310-9956-ffa450edef68"
bdb23b41c3f65c16b728e0f6d6ce4201caf870a4,"Renaming XMLException to XSDatatypeException


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317517 13f79535-47bb-0310-9956-ffa450edef68"
a5d9c33b7a0a70f111268577fa3290d78d053eb7,"Trying to make things compile. Note that SchemaGrammar is empty.
We still need to following declarations to compile:
1. class ComplexTypeInfo;
2. fRedefine2XSDMap in XSDHandler;


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317518 13f79535-47bb-0310-9956-ffa450edef68"
7df13904969b6b9156a028e97e0e4efb17b716b6,"Trying to make things compile.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317520 13f79535-47bb-0310-9956-ffa450edef68"
102227b2c3344cb9b1e636b4750ef1a9504c78a3,"Trying to make XSDHandler compile


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317521 13f79535-47bb-0310-9956-ffa450edef68"
48139a565f5b2cb6a007f038ccd165432800183e,"A new parser configuration for schema validation.
This is a temprory configuration for the new schema design. It will be merged to the standard configuration when schema support is ready.
Currently the SchemaValidator does nothing but to pass the events to the next component.
A SAX parser is created to use this new configuration. To try the schema validator, simply replace ""org.apache.xerces.parsers.SAXParser"" with ""org.apache.xerces.impl.v2.SAXParser"" in your application. (for example, sax.Counter).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317522 13f79535-47bb-0310-9956-ffa450edef68"
7a53b57c470f2aba7b591c45018b72518a159c73,"convince XSDHandler to compile and add most of the code to handle imports and includes.  Still need to add some code for redefine and of course fill the other stub methods.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317523 13f79535-47bb-0310-9956-ffa450edef68"
c74e586f44002b7339f50ea66353189694c209c3,"Forgot to check in this file.
It's also necessary to get the namespace of an element, so I changed the parameter to Node.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317524 13f79535-47bb-0310-9956-ffa450edef68"
a043eaea3050822ff7b16f01df4f4233b6882a21,"Return compiled form from checkAttributes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317525 13f79535-47bb-0310-9956-ffa450edef68"
53b523c0d2eb90b2e21a6b1347a1b3281662a727,"Port of the deferred DOM to Xerces2. The major change is that it
no longer uses/depends on the StringPool. Interestingly, this actually makes
it more independent of the parser and it could easily be used with another
one.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317526 13f79535-47bb-0310-9956-ffa450edef68"
6d0c558fc4bee616aa09e3251a3379ec5e449216,"Updated documentation for new deferred DOM implementation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317527 13f79535-47bb-0310-9956-ffa450edef68"
b18c514e978831e2fcc7b3be01a0492d1ab1a3d7,"Update CVS link.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317528 13f79535-47bb-0310-9956-ffa450edef68"
c42c8714489711b9a54d78cadece00fc8df6d6f1,"Slight update to BasicParserConfiguration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317529 13f79535-47bb-0310-9956-ffa450edef68"
455cf9995fa1f565b3b919e59cb73785bdf0ea9b,"Separated document scanner so that it's possible to build
configurations capable of parsing document fragments as well
as full fledged documents.

Some additional work should be done, however, so that the
user of the document fragment parser can decide if the
fragment should be considered an internal or external
parsed fragment. This is important due to the presence of
the TextDecl in an external parsed entity.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317530 13f79535-47bb-0310-9956-ffa450edef68"
ed164647a51b5f8ee69c665d9c6f71c0529b96d0,"Change log for document fragment scanner change.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317531 13f79535-47bb-0310-9956-ffa450edef68"
302923d79740ffa6ed467c96ef30037f23b9357c,"remove import statement  [X1 code]


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317532 13f79535-47bb-0310-9956-ffa450edef68"
52890cc2f48c8b9445eda2f1c6e8c57f832299f6,"Macro for Schema validation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317533 13f79535-47bb-0310-9956-ffa450edef68"
1fcdaf403f8b91900d5663d6d135dafbeb3b13a3,"Initial port for simpleType traversal, additional work:
-- port SchemaMessageProvider (+ modify format of our messages)
-- port notation next (simpleType needs access to it)
-- some methods left blank.. need to implement..


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317534 13f79535-47bb-0310-9956-ffa450edef68"
54dcd3dda7644ce873a839d7e22b207d6e0fde69,"Added some fields.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317535 13f79535-47bb-0310-9956-ffa450edef68"
4abcc45356ee0f35a62e98eca1f5a76345e0150c,"Update schema messages [X1 port]


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317536 13f79535-47bb-0310-9956-ffa450edef68"
5ab6e1d8efd8753fb3ba36e5702cb111b88424bd,"acting a suggestion from AndyC, renaming XMLManipulator to DOMUtil.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317537 13f79535-47bb-0310-9956-ffa450edef68"
8303d73eea73a9cd6b5e71efc84e7b6d4d439c30,"and completing the renaming by removing XMLManipulator...


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317538 13f79535-47bb-0310-9956-ffa450edef68"
9286d1dbd842636f2436c4f4202edfa4ac06c6ae,"1. Changed XMLManipulator to DOMUtil
2. Modified attribute checker to return whether a value is specified or from default
3. Implemented ElementTraverser: global element (doesn't compile yet).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317539 13f79535-47bb-0310-9956-ffa450edef68"
5d5122841097d476c4d8bfec34cdb9d94e3b6e31,"Trying to sync error reporting for *Traversers


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317540 13f79535-47bb-0310-9956-ffa450edef68"
dbe6c77012a2d65099b6b7acb208dd26532e9bef,"XML Schema messages


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317541 13f79535-47bb-0310-9956-ffa450edef68"
4a77c075e63d03094cfae497785c8fd0111e3751,"fixing format.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317542 13f79535-47bb-0310-9956-ffa450edef68"
606b621a14c5e9bfafcc506b823df408ccac9c5a,"cleanup - set classpath in build.xml instead of build.sh


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317543 13f79535-47bb-0310-9956-ffa450edef68"
007484d12411dae3a7980c09ee2d0d352786c82d,"cleanup - set classpath in build.xml instead of build.[sh|bat]


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317544 13f79535-47bb-0310-9956-ffa450edef68"
302a2e61bffe957a21d0b4cde0ff67608f4b1edc,"exclude ant classpath when calling javac


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317545 13f79535-47bb-0310-9956-ffa450edef68"
bd88f869aa312a343abe6b4a0abba8237e0291a5,"SchemaValidator is ready to validate element against a simpleType.
It's only temprory code to test our schema implementation.
It won't compile yet, because we need to decide:
1. how to store simple types in the grammar;
2. using parallel arrays vs. objects.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317546 13f79535-47bb-0310-9956-ffa450edef68"
282916bc43fdb6466a0c68f3ea910d500efdef91,"migrate build scrips updates from Xerces1.  These updates help build the HTML docs under Unix.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317547 13f79535-47bb-0310-9956-ffa450edef68"
e4e301fd395b5a00f9e0660e3883ced804d8f6f0,"finish support of <redefine>.  Lots of work left:  1.  create the getComponentIndex method for the traversers to talk to one another; 2. create a main method for testing; 3. actually use real QNames instead of using Strings everywhere.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317548 13f79535-47bb-0310-9956-ffa450edef68"
5503ba22e3a52ef66db327202034d8fa9d664949,"Datatypes now implement XSType


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317549 13f79535-47bb-0310-9956-ffa450edef68"
4b7ffd3b34a331e677bf709da788a14e878536db,"Some modifications to schema grammar:
- need to create XSSimpleTypeDecl, XSNotationDecl (probably extends XMLNotation)
- XML Schema datatypes - creation methods
added XSAttributeDecl stub


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317550 13f79535-47bb-0310-9956-ffa450edef68"
b91e6a124e7fc70c149d79e0f32b140eaa3c5b1c,"implement getComponentDecl in XSDHandler.  Next will implement a main method to test this class.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317551 13f79535-47bb-0310-9956-ffa450edef68"
84c3ebecae376b26688047e7425db1d69446e9ec,"Lots of changes:
1. Make simpleTypeTraverser to return integer;
2. Make attributeChecker to return Object[];
3. Statically create the grammar for schema namespace
4. Clean up SchemaGrammar: add/remove methods/fields. More to be done based on the decision on parellel arrays vs. objects.
5. Update declaration classes.
6. Changed content spec to particle to match the name in schema spec.
Hopefully, with little effort, we can start to validate elements against simpleTypes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317552 13f79535-47bb-0310-9956-ffa450edef68"
50eb5716a2d6828e7f824d00f681fd2cd2c2690f,"Fixed bug in SAX parser that was not forwarding external entity
declarations in the DTD.
Submitted by:	Neeraj Bajaj <Neeraj.Bajaj@sun.com>
Reviewed by:	Andy Clark <andyc@apache.org>


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317553 13f79535-47bb-0310-9956-ffa450edef68"
7c30148f525d3afbaa27c2d97d37213256b14673,"skeleton main method in XSDHandler.  Everything compiles now and runs--at least to an extent.  Now the real testing/debugging can begin.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317554 13f79535-47bb-0310-9956-ffa450edef68"
73b09ff27dbaeb4b8eb8157601ce0b6f3ace30b1,"Again lots of changes. Now we can validate a simple element against a simple simpleType. Cheers.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317555 13f79535-47bb-0310-9956-ffa450edef68"
ff655ba715ea29083928d58be29b38db17f6fbff,"Unsynchronized hash table (String to int mapping)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317558 13f79535-47bb-0310-9956-ffa450edef68"
0fc42aed02ef541acf5a70f2a299e477843c2fd1,"Added more stuff for element and attribute traversal.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317559 13f79535-47bb-0310-9956-ffa450edef68"
6f04e9c6fc78d4e3eda5026b14b51f3b636479ac,"implement XSDHandler#traverseSchemas.  Also fixed a couple of bugs and cleaned a few things up.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317560 13f79535-47bb-0310-9956-ffa450edef68"
d6c5e086c9f868c301f935be7539ca09d29520d5,"Fix for bug #3449.
Submitted by:	Pavani Mukthipudi <Pavani.Mukthipudi@sun.com>
Reviewed by:	Andy Clark <andyc@apache.org>


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317561 13f79535-47bb-0310-9956-ffa450edef68"
0f2aae2c22c5dc0957f0413b6320b4c5497482e8,"1. small bug fixes
2. namespace binding for attribute value (schema)
3. get global declaration implemented in XSDHandler
Now schema v2 implementation is capable of parsing simple xml/xsd files:
global element vs. simpleType decls.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317562 13f79535-47bb-0310-9956-ffa450edef68"
9090872b8fe3cc501a4019357ced71760546f032,"Ported particle traversal methods.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317564 13f79535-47bb-0310-9956-ffa450edef68"
006cc34c85b8159db061ab78686172aade0db4d4,"ported support for document-class-name property


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317565 13f79535-47bb-0310-9956-ffa450edef68"
43ac7482267575e0e9f66115bc236ee2e16704b6,"Group traverser - verified and modified implementation submitted by Rahul Srivastava.
Modified schema grammar to include group declarations.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317566 13f79535-47bb-0310-9956-ffa450edef68"
146b45ea13670dd39fdbc50b0daf7f8d225b461d,"some code restructuring


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317568 13f79535-47bb-0310-9956-ffa450edef68"
15b6c7f9baccaaf7e4747002a8cb6b04de03e416,"add  XML Schema message formatter to SchemaParserConfiguration


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317569 13f79535-47bb-0310-9956-ffa450edef68"
46953987e43af03ac759b517d43cacead6f2ad43,"Again, lots of changes:
1. Add XInt and XIntPool
2. Add I_EMPTY_DECL and I_NOT_FOUND constants in XSDHandler
3. Change QName in the decl classes to 2 strings: name+target namespace
4. Modified the way of processing min/maxOccurs on particles.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317571 13f79535-47bb-0310-9956-ffa450edef68"
b7795baeb68685e707216d6e267adb3a0932cdb0,"Forgot to put license information in.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317572 13f79535-47bb-0310-9956-ffa450edef68"
1f438044f132a8a3d9a15311cbc4c33dd6bb4fb5,"A bad idea to put I_EMPTY_DECL and I_NOT_FOUND in XSDHandler.
They should be in the grammar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317573 13f79535-47bb-0310-9956-ffa450edef68"
8bf8ff9943e9a97c78fcc09af6c2790f3c5995b6,"add initial code for building content models:
-- XSCMValidator new interface
-- CMBuilder - new class responsible for building CM Models
-- XSComplexType has now content model field
-- some changes to particle decl.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317574 13f79535-47bb-0310-9956-ffa450edef68"
70831140f119af9338e32b8039c77a883238451b,"move all schema related code to v2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317575 13f79535-47bb-0310-9956-ffa450edef68"
c0c0d3d4cf931ea4401135e6917f7007137f1740,"Added identity constraint code, ported from the v1 package.  Several
things to note:

1.  Broke out an xpath package from the original ""identity"" package.
I did this so that, should we need the xpath code for something other
than identity constraint support (such as DOM level 3), it's there.

2.  I've merged the unique and key classes and also their traversers.
I did this because, from a schema compilation prospective, they're
virtually identical; the differences with respect to validation can be
accomodated with the type field of the base class.

3.  I've also changed the storage implementation in the grammar class
from being Vector'based to being array based.  This allows <keyref>s
to store indeces of the keys they reference rather than object
references.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317576 13f79535-47bb-0310-9956-ffa450edef68"
9b24487ac628f2c4e931dce070b8ce4def99f45f,"1. Changed the place to call handleOccurrences (now checkOccurrences).
2. Added XSAttributeUse class.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317577 13f79535-47bb-0310-9956-ffa450edef68"
449044bce1a572a4ae31d37365b2c8d5a634eb3c,"Improved memory footprint by moving out the NodeList cache fields into a
separate object and implementing a pool of those on the Document.
Tests show an improvement of up to 7% without any degradation of the perfs.
:-)
Thanks to Andy Heninger for his help in designing this one!


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317578 13f79535-47bb-0310-9956-ffa450edef68"
395cef05201dea8067dee87cf4f259f3399128c2,"Added a non-normalized value to the XMLDTDHandler#internalEntityDecl
method in XNI and implemented it in Xerces2. Also implemented the
non-normalized attribute values as well. Next: remove the entities
methods from the XMLAttributes interface.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317579 13f79535-47bb-0310-9956-ffa450edef68"
11fe4e253a59313302d665a2d56ecbb2b85f2d3e,"moved inner class NodeListCache to an external class to avoid
compilation pbs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317580 13f79535-47bb-0310-9956-ffa450edef68"
1896aabac7a9d90f353de029d30e8667182bb06f,"1) Removed methods for entities in attribute values from the
   XMLAttributes interface.
2) Fixed bug in deferred DOM implementation where attribute values
   where not being ""fluffed"" up properly.
3) Fixed bug in buffering of attribute's non-normalized value in
   XMLScanner.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317581 13f79535-47bb-0310-9956-ffa450edef68"
10dfe24975701e219a109d132c13fa96675e003b,"The current state of a content model will be stored in the validator, thus XSCMValidator interface is modified to pass and return the content model state.
Implemented/ported XSSimpleModel.
Added code to CMBuilder to create XSSimpleModel, and convert particle trees.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317582 13f79535-47bb-0310-9956-ffa450edef68"
30b7ff2298dca9c69138ff0afaa72912c8c43f67,"XSDNotationTraverser, XSNotationDecl implementation and related patches by Rahul Srivastava.
Modified code in simple type traverser related to notation decl.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317583 13f79535-47bb-0310-9956-ffa450edef68"
9ee3d36a8fb3213ea66aeeb16d098049c056b37b,"As well as fixing a problem with identity constraint handling in the grammar, this moves local element traversal in to XSDHandler.  It should also take care of the case where a local element declaration contains a type which itself contains a local element declaration.  Finally, I have implemented a class which subclasses NamespaceSupport in an attempt to find an efficient way for keeping track of local namespaces; this should be useful not only in deferred local element traversal but also in keyref handling.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317584 13f79535-47bb-0310-9956-ffa450edef68"
c6c35aa3646ff91042e5ad35d1cb87c1f4dd58f2,"This class will allow cashing of XML Schema component decl objects [not implemented yet]
The class must be used everywhere we need to create a new component decl.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317585 13f79535-47bb-0310-9956-ffa450edef68"
1f0b6f3b890b07dc2c28e5b6ffbb244f9a317068,"Change implementation to _String_to_Object_ mapping.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317586 13f79535-47bb-0310-9956-ffa450edef68"
f5dccb92be2d7895a837721be1f22971e4b46bb7,"BIG CHANGE: we are replacing parallel arrays with individual objects for
all schema grammar decls.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317587 13f79535-47bb-0310-9956-ffa450edef68"
cc0bda7b5e64112a0ab40924f319dc4c817078a0,"BIG CHANGE: we are replacing parallel arrays with individual objects for
all schema grammar decls.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317588 13f79535-47bb-0310-9956-ffa450edef68"
190780ff1950f5cb2438aa2c4cea0897af5ea2ba,"Use symbol table for schema symbols.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317589 13f79535-47bb-0310-9956-ffa450edef68"
5ef2a1b4e85efd87b41af54d217322ef21986db4,"PA to Objects.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317590 13f79535-47bb-0310-9956-ffa450edef68"
24eb477e52395cd5cb662ca53bbb8d7d675f34e0,"rename XSType to XSTypeDecl


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317591 13f79535-47bb-0310-9956-ffa450edef68"
0e1de3d715bc3e66264037d150a4a9ad9bacafe8,"a few more changes for Objects vs. PAs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317592 13f79535-47bb-0310-9956-ffa450edef68"
c02d59773910e82f64904cfd4f88118a9bcb4868,"moving regex and related utilities out of the v1 package, since it is about to disappear on to a branch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317594 13f79535-47bb-0310-9956-ffa450edef68"
b29549669445140263880d428a5c59c884ad2e7b,"remove v1 dependencies from datatype classes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317595 13f79535-47bb-0310-9956-ffa450edef68"
e11abeca86bb81f5710060e04ccd2e48b08aa38c,"the v1 port has been moved to the branch ""xerces_j_2_v1"".  This is done to make debugging on the main line easier.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317596 13f79535-47bb-0310-9956-ffa450edef68"
fe0eaae918d2abd64242fb64a840e3d6a56bd46d,"very basic complex type traversal - much more to come


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317597 13f79535-47bb-0310-9956-ffa450edef68"
6e90ec1cd35f1b10e71bce641c9122973d28656e,"fixed the setting of fName


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317598 13f79535-47bb-0310-9956-ffa450edef68"
cd1423045ee7c1e5f0f0244f4ad0a56f914baf1b,"Provide names for built-in datatypes. (Temprory solution. Will be replaced by the new simpletype design).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317599 13f79535-47bb-0310-9956-ffa450edef68"
122b1ef0f338c0267201827d736f56fd4e1dae9a,"files to support DFAContentModel (a.k.a. XSDFACM).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317600 13f79535-47bb-0310-9956-ffa450edef68"
b60a4e528189e779ba14c5c7d782097a8a676019,"had to loosen access restrictions in various places so that separation between schema and DTD content models could be maintained and yet some reuse of common code--like the CMNode and CMSTateSet classes--could be maintained.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317601 13f79535-47bb-0310-9956-ffa450edef68"
6257e4315bd90c0621175f0790c949db08324872,"fixes to make these files compile in the new Object framework


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317602 13f79535-47bb-0310-9956-ffa450edef68"
8681cc85d46a9e33d007d7c66815373187fe30f5,"add global types to grammar


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317603 13f79535-47bb-0310-9956-ffa450edef68"
377abac3783b33ec43b60cd46f89ea8c86f639a1,"1. Some new code in SchemaValidator;
2. Cleaned up the parameters of constructors and reset methods for schema traversal classes;
3. Some schema error messages.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317604 13f79535-47bb-0310-9956-ffa450edef68"
6eb0879cac37fb50d984b9a76a19673839bc33b0,"update XML Schema message file name.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317605 13f79535-47bb-0310-9956-ffa450edef68"
9f48243c88d9e3e5b0fd36809425b35db08eb028,"Code contribution from Rahul Srivastava:
XSDAttributeGroupTraverser and XSDWildcardTraverser


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317606 13f79535-47bb-0310-9956-ffa450edef68"
73478d6ce89a9b9e5d324de41b5b958a7d925d58,"change state to int[]


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317607 13f79535-47bb-0310-9956-ffa450edef68"
935c527b8dd7b50582f0e8205a5468a406da509c,"modifications to CMBuilder  and XSSimpleModel to reflect the big change (parallel arrays to objects)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317608 13f79535-47bb-0310-9956-ffa450edef68"
07b7f5e78a4ffdf337488a4559e48842d5cd77d2,"Minor things:
1. Forgot to remove one line from IdentityConstraint class;
2. Use shadowed symbol table in schema parsers;
3. Some changes in SchemaValidator.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317609 13f79535-47bb-0310-9956-ffa450edef68"
2284e29da847ba4eb2e6ad5a696e5de13d32cbfc,"1. Added new code in SchemaValidator;
2. Modified XSAttributeChecker, so that ID is checked within one document, instead of all documents.
3. Part of widlcard traversal is moved into XSAttributeChecker: so that we don't duplicate the code of tokenize the namespace attribute in both classes.
4. An allowNamespace method is added to XSWildcardDecl.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317610 13f79535-47bb-0310-9956-ffa450edef68"
758a32c6c2e62987215e1529c9f37e6373de9972,"1. Updated error messages in XSAttributeChecker;
2. More SchemaValidator code;
3. Fixed a null pointer exception.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317612 13f79535-47bb-0310-9956-ffa450edef68"
860cb3b9c2ad281211d6d52beb871b2439720fa5,"Fixed some small bugs. Now we can have a sequence of two elements.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317613 13f79535-47bb-0310-9956-ffa450edef68"
40d74fe72314b01b404e67f9ff6eda9f2194bf03,"Fixed some namespace related bugs. Thanks to Sandy Gao for
the report.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317614 13f79535-47bb-0310-9956-ffa450edef68"
d1b96186579a3f520f13f0b3c8719fb82c1697ec,"Modified javadoc (and associated implementation) for the
XMLAttributes interface to be more explicit about the
behavior of implementing classes.

Submitted by:	Petr Kuzel <pkuzel@sun.com>


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317615 13f79535-47bb-0310-9956-ffa450edef68"
89b1140d910ab99a690df4175b9ca75f0569a69c,"Added emptyElement method.

Submitted by:	Petr Kuzel <pkuzel@sun.com>


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317616 13f79535-47bb-0310-9956-ffa450edef68"
6405e927d8908552e2bcb0735695a046392822a2,"fix XSDComplexTypeTraverser#genAnonType() so it does not barf on a ClassCastException when it tries to get the parent of a Document node.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317617 13f79535-47bb-0310-9956-ffa450edef68"
49a1f89340917cfe3a2c4eb4d62fb1efa79f8f01,"1. Most validation on elements and attributes are done. But lots of things need to be revisited, and more tests are needed too.
2. A typo in many classes: FIXED_VALUET, should be FIXED_VALUE.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317618 13f79535-47bb-0310-9956-ffa450edef68"
d304cb386ef61ea78f65f37e19315c073f3e73dc,"Ha! Forgot to add this new file.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317619 13f79535-47bb-0310-9956-ffa450edef68"
b021c007c09ae22c3f4361adf37484e2f702b7de,"xsi:type support.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317620 13f79535-47bb-0310-9956-ffa450edef68"
051b763c20a16f9ad92769816bb6b7f2c393053b,"attribute processing and error handling for complexType traversal


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317621 13f79535-47bb-0310-9956-ffa450edef68"
50624cb3d5fb35e0fb55c4f7b2141cc9660300a6,"added debug code for complex type decls


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317622 13f79535-47bb-0310-9956-ffa450edef68"
cd4e07ee9aefeab5cfbeb9d24c9c98f19b71bad3,"moved some attribute processing into a utility method


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317623 13f79535-47bb-0310-9956-ffa450edef68"
e64d2629d7dd3041637e8a22479a781513a18511,"fix for missing break statements in a switch


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317624 13f79535-47bb-0310-9956-ffa450edef68"
2d5af0fa7c54297528a61ca3bcf4e79abf265851,"add support for DFA content models.  This version assumes that we will have XSWildcardDecl inheriting from XSElementDecl; if we decide not to do tihs the change should not be difficult.  Still to do:  Get rid of redundant XSCMAny content model and TEST, TEST and TEST...


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317625 13f79535-47bb-0310-9956-ffa450edef68"
38311345b49af5bb0a6b7b8b29f80acb27e6a5b8,"Updated error messages from element/attributeTraverser classes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317626 13f79535-47bb-0310-9956-ffa450edef68"
b8c70cb68f0ab950dc2f2475a95115fe1df746b6,"fix from Henry Zongaro to permit compilation under JDK 1.1.8


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317627 13f79535-47bb-0310-9956-ffa450edef68"
8bbcd44c1722822a58a8980a2c32add554d19606,"use null to represent the empty namespace consistently instead of using the empty string.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317628 13f79535-47bb-0310-9956-ffa450edef68"
36c916da69f863af652c356f6fbe71f942192e45,"additional changes to support null for no namespace


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317629 13f79535-47bb-0310-9956-ffa450edef68"
87ef78778c265e4411898e737582c9eb5aa80b02,"Error cleanup


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317630 13f79535-47bb-0310-9956-ffa450edef68"
e2677c2f33fdf3c0cc8ee6dbef548b4cc04cc0f8,"changed msg for src-ct


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317631 13f79535-47bb-0310-9956-ffa450edef68"
b16dd097ce2ebce1533edaab4e6743b08da63bfe,"Fixed bug that caused namespace information to be lost
in the deferred DOM.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317632 13f79535-47bb-0310-9956-ffa450edef68"
64834938efa81d6ed3ae84427720c17e2ffec275,"1) Added a parser configuration settings class to allow settings
   to be separated from a configuration and allow settings to be
   ""chained"".
2) Modified xerces.parser configuration classes to descend from
   the new settings class and take advantage of the ""chaining"".
3) Added constructors to the entity manager and namespace binder
   to allow them to share a common context.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317633 13f79535-47bb-0310-9956-ffa450edef68"
2b03ae4e67e43937340a9f519d8e4ee5c73af41d,"Fixed bug where the DTD scanner was reporting entity boundaries
where not appropriate. For example, the use of the implied-space
parameter entity in line 2 and 3 of the following:

1:  <!ENTITY % implied-space ''>
2:  <!ENTITY % parameter-entity '%implied-space;'>
3:  <!ELEMENT%implied-space;elem (this|that)>

Since the XNI handler does not break down the various markup
declarations into the smallest granularity, reporting an entity
boundary in the above cases is not useful to registered handlers.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317634 13f79535-47bb-0310-9956-ffa450edef68"
8a20d83a592554e76a0218e0e831499e4b7e44b7,"Added getter methods to XMLParserConfiguration interface.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317635 13f79535-47bb-0310-9956-ffa450edef68"
470da3d005e36ba821d7486722d95191a6457864,"fix from Henry Zongaro for build problems resulting from addition of getter methods to the ParserConfiguration classes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317636 13f79535-47bb-0310-9956-ffa450edef68"
81e1cabf5b044f9aeec14d6426c2a4a38e2ea1c1,"fix bogus checking for mutual <include>s etc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317637 13f79535-47bb-0310-9956-ffa450edef68"
ec2ddb9f2ec8c648ed80f8346502df4fc137ddd3,"make Symbolhash more robust vis. null uris and add some utility methods.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317638 13f79535-47bb-0310-9956-ffa450edef68"
e261579672f71c9ac6ae4343fbd2636f659d74e0,"Implementation of _special_ mixed content model that  does not allow
any children.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317639 13f79535-47bb-0310-9956-ffa450edef68"
bf48cc7bc9ef36b168f7bf3b89e300afd44524e5,"correct typo


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317640 13f79535-47bb-0310-9956-ffa450edef68"
71ee8c0689b52cb043c6da8f502e399a36aa4a73,"initial code for new datatype design, as contributed by Neeraj Bajaj <neeraj.bajaj@sun.com>.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317641 13f79535-47bb-0310-9956-ffa450edef68"
a51ef9720746ccb506265f212fe271ea39987240,"Documentation updates for patches applied previously.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317642 13f79535-47bb-0310-9956-ffa450edef68"
da05fe5a2268bf2f64362b77952d5235a60bdfa0,"Added *Filter interfaces for pipeline components that both
consume and produce streaming infoset events.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317643 13f79535-47bb-0310-9956-ffa450edef68"
900e913d7fa355c2ad864cf845c717e252a11379,"fixed some typos.  Also fixed lots of bugs in handling of <include>s.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317644 13f79535-47bb-0310-9956-ffa450edef68"
519fb1da8c9fdac573d1f5fd98bff0012ac26522,"renaming new-datatypes to new_datatypes so the code that lives there can compile (Java does not permit -s in filenames.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317645 13f79535-47bb-0310-9956-ffa450edef68"
9790e83bed53b505ba8526b41c5f8d059cf2a460,"new datatype design code in the new package.  Contributed by Neeraj Bajaj <neeraj.bajaj@sun.com> and Gopal Sharma <gopal.sharma@sun.com>.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317646 13f79535-47bb-0310-9956-ffa450edef68"
40ed03825726bad4fbcd8ee6d8ede20c45de2ec1,"implement XSDAbstractTraverser#getContent; thanks goes to Pavani Mukthipudi <pavani.mukthipudi@sun.com>.  It should be noted that, since we have no way to expose <annotation> components at the moment there is not a way to make sure that everything is being passed in appropriately; when this functionality is added some testing will need to be done (particularly in XSDSimpleTypeTraverser).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317648 13f79535-47bb-0310-9956-ffa450edef68"
d92c1df249c3a9b6bba6168b8e9b422a7129c8bf,"more files for datatype redesign from Neeraj Bajaj.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317649 13f79535-47bb-0310-9956-ffa450edef68"
270607ad359793d975975cc6898f02695b46c21b,"some patches from Neeraj Bajaj


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317650 13f79535-47bb-0310-9956-ffa450edef68"
a86452822c1b38024e72011dc6543c4d465ed44b,"move call to getLocalName after checking for null child; call getGlobalDecl instead of getGlobalAttributeGroupDecl from grammar


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317651 13f79535-47bb-0310-9956-ffa450edef68"
2566969d312f3461ab4900eb3ed9de72a9f59d09,"additional changes to support null for no namespace uri


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317652 13f79535-47bb-0310-9956-ffa450edef68"
85ee88252e7472ca682808518786c65b817958e1,"fix a NPE in the SchemaNamespaceSupport class and make sure local element traversing is handled correctly when XSDHandler is reset.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317653 13f79535-47bb-0310-9956-ffa450edef68"
842bf6ea4fbf69862ee7780b490c0cc553680348,"We were calling wrong traverseLocal method.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317654 13f79535-47bb-0310-9956-ffa450edef68"
5e738f44504f15cb0cffc8f816454f4c6166ef9b,"forgot to change accessibility modifier


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317655 13f79535-47bb-0310-9956-ffa450edef68"
c734b9f9a6e74626e6b8615362cba7974e2c4764,"patches from Neeraj Bajaj


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317656 13f79535-47bb-0310-9956-ffa450edef68"
4dfd68b62ef2f1e0d60cf13deb1c58402e0907af,"some optimizations from Henry Zongaro


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317657 13f79535-47bb-0310-9956-ffa450edef68"
597ec97fd85a1b5032ef9a2650f0315ffa28f977,"Patch from Henry Zongaro:
The removeAttributeAt method was removing attributes from its array of Attribute objects by shifting all subsequent objects in the array down one element.  What ended up happening is that the last two elements in the array pointed to the same Attribute object, then the last three, and so on as additional attributes are removed; so later, when the array and objects are reused, filling in the fields of one element of the array affects other elements.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317658 13f79535-47bb-0310-9956-ffa450edef68"
9dd60a6a6596df5d539850fbcc712f3cd4b45b40,"add lots of error messages.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317659 13f79535-47bb-0310-9956-ffa450edef68"
3d13ede51ab1ee1ea5b43e4344cd5eb6d3691766,"implementation of allContentModel, largely thanks to Pavani Mukthipudi <pavani.mukthipudi@sun.com>.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317661 13f79535-47bb-0310-9956-ffa450edef68"
7e902d9a8b76db8b031908880f57af68d0774f17,"modify how we check for mixed content model (dont store fBuffer)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317662 13f79535-47bb-0310-9956-ffa450edef68"
9485eb98511353bd26ba0803940d0bebfb2c8358,"more files for new datatype design.  From Gopal Sharma <gopal.sharma@sun.com>.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317663 13f79535-47bb-0310-9956-ffa450edef68"
e29d41e7654c1f9ab3be66b977c9115d5ca423e9,"removing this file to oblige us to use XMLSchemaMessages.properties.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317664 13f79535-47bb-0310-9956-ffa450edef68"
751f7c6eb683c16494d2d8d4934dd03566813d5f,"Rahul's code for wildcard subset, intersection, union


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317665 13f79535-47bb-0310-9956-ffa450edef68"
da2325881620a9a1e1ff046f1e4a511d67149373,"Code from Rahul to check for duplicate attribute uses.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317666 13f79535-47bb-0310-9956-ffa450edef68"
c70e1170d565ef6cbf17b5e513d189c636b5c7aa,"code from Rahul to get an attribute use out of the group


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317667 13f79535-47bb-0310-9956-ffa450edef68"
353ae1388bbdc8d942a1866a85e5e6e4b0711725,"fix for bug which caused an error to appear whenever a global <annotation> was encountered


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317668 13f79535-47bb-0310-9956-ffa450edef68"
d3f7d9662d8dacd40b77716df6249e3517715e2f,"adding AbstractNumericDV for Neeraj Bajaj.  Also a small dumb fix to DateTimeDV to make it compile.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317669 13f79535-47bb-0310-9956-ffa450edef68"
8b14edbd601cee9779a0e1cab72ada6321a868cf,"handle complexContent type derivation.  Still to come:  simpleContent


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317670 13f79535-47bb-0310-9956-ffa450edef68"
f7e8f5a4157cb59fa906d0a597de7f5f56f46f6c,"added an emptiable method.   Will be filled in when we do particle derivation stuff next month


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317671 13f79535-47bb-0310-9956-ffa450edef68"
afa5b481305d562a71c768cc5905c4225624739d,"added a stub for validRestriction checking.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317672 13f79535-47bb-0310-9956-ffa450edef68"
1dffa6c09c417fda5c8d5d28646d635fa7ace0e3,"fixed some bugs; generally prepared the way for dropping in the changes to the validator to accomodate Identity Constraints.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317673 13f79535-47bb-0310-9956-ffa450edef68"
a9be2323ece0d72ce70c4b5dc9f06c3ab7b65e81,"Moved some facet and restriction code from simple type traverser to abstract traverser.  Needed by complexTypes too


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317674 13f79535-47bb-0310-9956-ffa450edef68"
d2bed5d9872a65e6879adb17e6f9a7247cf959da,"Remainder of complexType support.  Need to revisit error msgs and do more unit testing.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317675 13f79535-47bb-0310-9956-ffa450edef68"
8c9d597a0a03ac8ade66dd440c9f0067e2665463,"removed some old comments; invoke attribute group restriction checking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317676 13f79535-47bb-0310-9956-ffa450edef68"
3825bfc552a9dcad18b5d7180f40ba571448113a,"added attribute group restriction checking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317677 13f79535-47bb-0310-9956-ffa450edef68"
5ba1e840ae01cc15cb5bbfd1117096656b1e47e0,"temporary fix to avoid class cast exceptions because of AnySimpleType.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317678 13f79535-47bb-0310-9956-ffa450edef68"
46755ed90f0f9958e0d4c5271c71fb378433bdad,"Fixed bug in scanElementDecl that would could cause entity
boundaries to be mis-reported. For example, there could be
an endEntity call without a startEntity -- which would then
cause an ArrayOutOfBoundException. (Used simple DocBook DTD
as test case.)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317679 13f79535-47bb-0310-9956-ffa450edef68"
a8128d478bd4fe732cecc6d052044e702c4fda44,"Bug fixes (NPE and class cast exceptions).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317680 13f79535-47bb-0310-9956-ffa450edef68"
78425ade7397096e44cb8c798f79d5f4c1d70157,"fix NPE in default attributes. Add temporary solution to resolve xsd file locations.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317681 13f79535-47bb-0310-9956-ffa450edef68"
5eddf576e6a0630e89f9a683ee5a479894d6732a,"Allow XML schema validator to use the default implementation (temp solution)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317682 13f79535-47bb-0310-9956-ffa450edef68"
5cb6efeea07ec572ebad150308195c80bdcf571c,"One more place where we need to use ""null"" intead of empty string.
Remove some debug info.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317683 13f79535-47bb-0310-9956-ffa450edef68"
55ff1c70f3fa51fe7b07f12861f101b342c8b586,"We were loosing default values for attributes
(because we relied on the new Datatype design which is not implemented yet)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317684 13f79535-47bb-0310-9956-ffa450edef68"
86abd29ef4c4c58df6d35ec963e23bb28056db25,"remove dependency on the new datatype design


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317685 13f79535-47bb-0310-9956-ffa450edef68"
51747a866870bc73c5234dcac2a71a1420ae1c92,"ported identity constraint validation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317686 13f79535-47bb-0310-9956-ffa450edef68"
525c22d164226d0b49a70b32abef7ad2c3e5e903,"add an ant target to build in schema support.  This is only a temporary hack until schema support gets mainstreamed.  In case anyone is interested, schema-all is the target that builds schema support into everything; I have not constructed corresponding analogs for any of the other commonly-used targets.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317687 13f79535-47bb-0310-9956-ffa450edef68"
e6d2b580339f8c664a5f724da12f60987402d92b,"expose default/fixed element values via the XNI XMLDocumentHandler#characters callback.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317688 13f79535-47bb-0310-9956-ffa450edef68"
c5e1687fe9f7b3bd2f671eda0c21b64c198d4330,"includes some files omitted in the last commit


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317689 13f79535-47bb-0310-9956-ffa450edef68"
8973a4e0a87c8b8fcad9e9b1f2a9f9b642609e45,"Changed a bit the datatype construction: never throw an exception during a datatype creation (which would have
resulted in wrong type of errors ""circular definition""). Instead, use error reporter to report errors.
The code just uses try and catch blocks in constructors, however if design is to remain the same, we need
to revisit the code (remove all code for throwing exceptions from the constructor and validate methods as well).
Also fixed some bugs in Simple types.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317690 13f79535-47bb-0310-9956-ffa450edef68"
04f26c61c7c68697b4fbd3ff82f5e2564f2de6b6,"more datatype / simpleType messages


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317691 13f79535-47bb-0310-9956-ffa450edef68"
1122b8f6f474ab602ef8ae7eb2d49bfa58a9479a,"add argument in const.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317692 13f79535-47bb-0310-9956-ffa450edef68"
91974e3c112d69f49aadd38e69dcb508cbf7342b,"the allContextFlags should be powers of 2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317693 13f79535-47bb-0310-9956-ffa450edef68"
545406772ba904e646cffa33fd9d6492a26ce0d5,"various bug fixes.
1.  Make sure identity constraints get a look at element default values as they go by.
2.  Applied a modified patch from Pavani Mukthipudi to simplify the handling of mutual includes in XSDHandler.
3.  Reworked some of the handling in XSDHandler related to <redefine>s.
4.  Applied some fixes to SchemaValidator so that fixed values f elements are properly handled.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317694 13f79535-47bb-0310-9956-ffa450edef68"
8edfe17a10e4d9e4da12197ab78fa052fd68d86e,"fixed the names of datatypes gMonth, gDay, etc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317695 13f79535-47bb-0310-9956-ffa450edef68"
69d2f3d536efb923e06c9b36062e8b8934215d37,"Rahul's patch to invoke checkSimpleDerivationOK for attribute restriction checking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317696 13f79535-47bb-0310-9956-ffa450edef68"
cb9d50ab1b0946c4b279ddc185fa5aa04860184b,"getLocalName will return either localname or name of the node


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317697 13f79535-47bb-0310-9956-ffa450edef68"
7fc1339204fd07211cd4d8e92ef39bfc596812a4,"Fixed a bug with complexType extension.   Added call to checkSimpleTypeDerivationOk when content type is Simple


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317698 13f79535-47bb-0310-9956-ffa450edef68"
04e43420c5d680cc4510a3aa4386c70a80e9b4d9,"follow-on to Neil's patches to get fixed and default values working for attributes and elements


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317699 13f79535-47bb-0310-9956-ffa450edef68"
48ad6ad8854edc306a712f24aef69e7687c3b4b0,"moved setting of retValue for DT_NAMESPACE to ensure we always return a wildcard decl


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317700 13f79535-47bb-0310-9956-ffa450edef68"
73016ea772033dd5e237094617ce317e6a7394f7,"fixes to bugs in simpletype and datatypes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317701 13f79535-47bb-0310-9956-ffa450edef68"
eed5efd747ec590d9e49eefb45a457be5290f39d,"Fixed a problem handling ANNOTATION in named model groups


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317702 13f79535-47bb-0310-9956-ffa450edef68"
07e3d8be480a8bf3e92cd54b5da2b75beb94043a,"ensure that .properties files needed by the v2.util.regex package get included when the schema-all target is used.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317703 13f79535-47bb-0310-9956-ffa450edef68"
c881bc98f2b059d79c97293e9cd3678e24684bb2,"fix for fixed values of complexTypes with simple content


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317704 13f79535-47bb-0310-9956-ffa450edef68"
c1a00d9d80ef3c72c686c9f55ed46a7cecec6db1,"Updated build script so that both the Version.java source file
and the entities used in the documentation that represent the
parser version is set during the build. This simplifies the
build because you only have to update the version numbers in
one place, the build.xml file.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317706 13f79535-47bb-0310-9956-ffa450edef68"
f2c08eeafc2793094be3e08f70583a402011b71e,"Needed to replace one more version string.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317707 13f79535-47bb-0310-9956-ffa450edef68"
71f69d3dd0bbdd3b0d28ae26f36f994e1b4b6642,"Fix output directory name.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317708 13f79535-47bb-0310-9956-ffa450edef68"
91a31df0e0c29046c92cd39e601cd584829d3aa4,"Another build script bug fix.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317709 13f79535-47bb-0310-9956-ffa450edef68"
0ad3674c26d11887b6570db0911cf6bd242a0d1d,"porting patch from Sam Ruby <rubys@apache.org> to permit compilation under JDK 1.4.0 (and to make it faster as well) to Xerces2.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317711 13f79535-47bb-0310-9956-ffa450edef68"
e8e6700a2c3d6a5653c51dc4061e96c51a7a8db3,"Synced up javax.xml.parsers package with latest code from xml-commons
module.  This fixes a number of bugs such as:
  + Code runs in applets
  + Code runs on non-ASCII platforms such as OS/390
  + Code is parser neutral and does not mention a specific fallback parser


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317712 13f79535-47bb-0310-9956-ffa450edef68"
d552df326d11532d23738eaf0325b838876bd942,"applied some correctness and perf. patches from Rahul


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317715 13f79535-47bb-0310-9956-ffa450edef68"
c262aca99df900af3cda6cc152193c3464db598f,"SubstitutionGroup support in content model validators.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317716 13f79535-47bb-0310-9956-ffa450edef68"
2bf0d509429a5a180800a2baf84fd0158382083f,"- Added new internal property validation-manager. The ValidationManager class will coordinate validation process when there are more than one validators in the pipeline.
- Added new set of interfaces: ValidationContext and EntityState. [Grammar implements EntityState]
- Implemented entity validation support for XML Schema attributes.
- Changed [a bit] behavior for our validation features:
if schema feature is set to true (validation=true) - report validation errors only against documents with XML Schema grammar
if schema feature is set to false (validation=true) - report validation errors only against documents with DTD grammar.
However, the behavior for the above features needs to be revisited.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317717 13f79535-47bb-0310-9956-ffa450edef68"
f18f2611d8ae7da0cd9940e8d05eaf20cd31e9d5,"addition of Entity validator for schema datatypes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317718 13f79535-47bb-0310-9956-ffa450edef68"
2c50212d46367d914e960be552e29470d5255885,"several fixes:
1.  Applied a patch from Rahul Srivastava to handle an error condition more gracefully.
2.  Clean up valid redefine cases (we now pass all 19 cases in our internal valid <redefine> bucket).
3.  Handle chameleon includes correctly.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317719 13f79535-47bb-0310-9956-ffa450edef68"
9bfa88fe3c196221fa796850301f7380351ba195,"value of entity was never set


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317720 13f79535-47bb-0310-9956-ffa450edef68"
dab6c625ecddce255a9f1c52a35312582c66b59a,"move ValidationContext interface to validation directory
applied patches from Henry Zonharo for content models.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317721 13f79535-47bb-0310-9956-ffa450edef68"
82844eb87275c2e6e746f7ea98149f2bd8cb3d1f,"cm for empty


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317722 13f79535-47bb-0310-9956-ffa450edef68"
4b80015b682dae63fa6670f0a5baf46be99044f0,"support content models that have empty particles


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317723 13f79535-47bb-0310-9956-ffa450edef68"
2f2b317f4b434b8194b654c9f2888b826ec3ca37,"print a particle with an empty other value correctly


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317724 13f79535-47bb-0310-9956-ffa450edef68"
73bf3dca2b535365cdf888623222d6b41910b590,"if a sequence or choice has only 1 child, still generate the group


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317725 13f79535-47bb-0310-9956-ffa450edef68"
d64b6cce688f934f15fd0ec944682cc7195cabb5,"Fix to some error-reporting vis. entity refs lacking their semicolon.
Now we get error messages like

[Fatal Error] distribution-process.txt:14:9: The reference to entity ""aposll"" must end with the ';' delimiter.
error: Parse error occurred - The reference to entity ""aposll"" must end with the ';' delimiter.

instead of ones like

[Fatal Error] distribution-process.txt:14:9: The reference to entity ""{0}"" must end with the '';'' delimiter.
error: Parse error occurred - The reference to entity ""{0}"" must end with the '';'' delimiter.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317726 13f79535-47bb-0310-9956-ffa450edef68"
54bba8a8585c38efada8cbb31f04f4884acc2468,"fixed some NPEs.  Also fixed a problem arising when a reference was made to a component from the schema-for-schema namespace that could not be found.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317727 13f79535-47bb-0310-9956-ffa450edef68"
9965625f4231be2866700a308fab6d043a47ab94,"for complexTypes which aren't explicit derivations, set base type to anytype.   Also, some cleanup for error recovery


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317728 13f79535-47bb-0310-9956-ffa450edef68"
5cc2d1f6cdf9ff23470a25aafd5d2de0659699fe,"patch from Neeraj Bajaj to handle error conditions in identity constraint decls


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317729 13f79535-47bb-0310-9956-ffa450edef68"
a8049b8bc420bbb1f465485cb3b07c33228d130e,"applied patch from  Gopal Sharma .


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317730 13f79535-47bb-0310-9956-ffa450edef68"
f6dcdc3b7cdea0384e185b4717775d83c1075dc6,"fix failure to resolve xml schemas location.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317731 13f79535-47bb-0310-9956-ffa450edef68"
95fa9b0790ab968e7974707b640820b178090820,"datatype name should be ""Name""


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317732 13f79535-47bb-0310-9956-ffa450edef68"
aa9598e8a70f42a15ba482dff685b863dbbcaea6,"source.getOwnerDocument() could be null in case source node is Document or
a DocumentType which is not used with any Document yet.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317733 13f79535-47bb-0310-9956-ffa450edef68"
a5afc6cc84432adc2119a6c35f505c9bb3c4c758,"use DOMUtil methods instead of DOM calls directly.   Fixed an error to use a proper msg id


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317734 13f79535-47bb-0310-9956-ffa450edef68"
573bc3195de42fe5efb1deab8852855dc8a520ab,"use DOMUtil methods instead of DOM directly


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317735 13f79535-47bb-0310-9956-ffa450edef68"
4b0def86a1a96df8c8cbd5bf50c757023d94325b,"1. fixed various bugs;
2. provided a solid substitution support for validation;
3. made anyType and anySimpleType static;
4. make XSParticleDecl.toString() return a shorter message;


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317736 13f79535-47bb-0310-9956-ffa450edef68"
5bee80149c1cfdcd09a23cc970545d636b9f498c,"More bug fixes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317737 13f79535-47bb-0310-9956-ffa450edef68"
6796634d02a9133e8f558ddfb181354dbd700d0a,"Fixed bug in namespace binder that allowed prefixed attribute
names (e.g. ""xmlns:""+NCName) to have an empty value. This in
turn caused other misleading errors to be reported.
Reported by: Joe Kesselman


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317738 13f79535-47bb-0310-9956-ffa450edef68"
c5bf8540df4e0e0356ae26fab838c0b13a77f20a,"Minor change to avoid other errors when using continue-after-fatal-error.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317739 13f79535-47bb-0310-9956-ffa450edef68"
67bf384b4eddd846575749f40fe6a74408198f0f,"temp fix for notations


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317740 13f79535-47bb-0310-9956-ffa450edef68"
54f8d3abc86c886626281b4a30f2ed4c81033d71,"implemented REVISIT relating to XSWildcardDecl not inheriting from XSElementDecl.  This was originally done for performance reasons, but Henry Zongaro showed the performance gains were minimal; thus the design confusion brought about by this inheritance relationship was not justified.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317741 13f79535-47bb-0310-9956-ffa450edef68"
430ad6c0c52b8ba0b9168957afb30c3ea45959d8,"bug fixes, especially for DFA content model with wildcard.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317742 13f79535-47bb-0310-9956-ffa450edef68"
167a423280a510d82d2d4e718756155ce9c3dbe3,"1. check whether a particle is emptiable;
2. reuse .toString message for particle, wildcard and element.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317743 13f79535-47bb-0310-9956-ffa450edef68"
dd251b56bd0db133bec390478d9de81824e0657c,"PR:
Obtained from:
Submitted by:
Reviewed by:
Modify Deferred DOM implementation to create DOML2 nodes based on setting
of parser's namespace feature.   Joint work with Elena Litani.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317744 13f79535-47bb-0310-9956-ffa450edef68"
1f33eb806efc028d32e875b8b312f7f88ef744f2,"temp fix for notations


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317745 13f79535-47bb-0310-9956-ffa450edef68"
37827a8cf67aeda4fbe36b00a31721bfb1a1e095,"implemented fix for notation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317746 13f79535-47bb-0310-9956-ffa450edef68"
401076e539a704589b5aabef1c3d4d1eb14e0fe0,"typo


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317747 13f79535-47bb-0310-9956-ffa450edef68"
827eb8f272483a5a006fdd04558224bd267ccd5e,"1. modified the error message for complex type content;
2. fixed a DFA bug.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317748 13f79535-47bb-0310-9956-ffa450edef68"
a3c40b1c48651cb038129c4223eeab78d06c4636,"Added checks for NCName start and name characters to XMLChar.
Submitted by:	Rahul Srivastava <Rahul.Srivastava@sun.com>


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317749 13f79535-47bb-0310-9956-ffa450edef68"
5841ddc9cb5519f7af798bdfb84921d6cad60d47,"Fixed newline normalization bug.
Reported by:	Aleksander Slominski <aslom@cs.indiana.edu>


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317750 13f79535-47bb-0310-9956-ffa450edef68"
3aa38daf17b9fe6681a1f36e87ea51f6b457a1e7,"Forgot to add implementation for isValidNCName method.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317751 13f79535-47bb-0310-9956-ffa450edef68"
cf425d72915eded43b2e5238220801ca6900fe59,"various bug fixes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317752 13f79535-47bb-0310-9956-ffa450edef68"
98b8baa88b479a626d51358f14ab1c021aca4a69,"check validation Root constraint, and fix ID/IDREF datatype implementation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317753 13f79535-47bb-0310-9956-ffa450edef68"
5b1036afdc18008e8e7614c05065a48c63aa52d0,"remove changes that were accidentally committed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317754 13f79535-47bb-0310-9956-ffa450edef68"
b11b0b374d7a225c2ca5e97950e4b7087db8854d,"various bug fixes: especially NPEs.
And ID/IDREF DVs were modified so that we can use Ant to compile them.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317755 13f79535-47bb-0310-9956-ffa450edef68"
db010f9fbe7aba940adbae8a41f332a0d1c60975,"replace checkContent method


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317756 13f79535-47bb-0310-9956-ffa450edef68"
f3b66b00e1ceaf6e733b7ffad705742146b9efc0,"Added additional checking for invalid elements in complexType; fixed final check for simpleContent; improved some error msgs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317757 13f79535-47bb-0310-9956-ffa450edef68"
9724c29bdd4e00e6a6d6502e2b6d42d9f4ba2b77,"traverseAttrsAndAttrGrps now returns the first non-attr element found - improves error message emitted from caller


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317758 13f79535-47bb-0310-9956-ffa450edef68"
68bf704ed603d06a7cdddded5de42a76639d320d,"improve error for invalid element in attribute group


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317759 13f79535-47bb-0310-9956-ffa450edef68"
2bac89fc7ad79271e62f750c87064c47b99022c0,"added additional subst. text for a few messages


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317760 13f79535-47bb-0310-9956-ffa450edef68"
7c8f83a02ae63cbffa7a4a903b674467843d1537,"A patch from Rahul.
Check whether tempAttrUse is null, to avoid NPE.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317761 13f79535-47bb-0310-9956-ffa450edef68"
877ca905e9dff38aa7907ef4c46f2d7ccd851784,"After XSCMValidator.oneTransition, we should always report an error if the state is FIRST_ERROR.
Even in the case where a decl is returned.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317762 13f79535-47bb-0310-9956-ffa450edef68"
73e2af829ea744ecc8064f710f1d90d4e3a646a2,"For the grammar of schema namespace, we never need to add decls to the global hashtables other than the built-in types. So I initialized the size of all the other hashtables to 0. But it turned out that it would cause some exceptions in get() method. So I changed the size to 1.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317763 13f79535-47bb-0310-9956-ffa450edef68"
6aadc7097b2de6578a70ff2768db32ce8cf76428,"Added a couple of comments, which I think should be changed in our default entity resolver.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317764 13f79535-47bb-0310-9956-ffa450edef68"
e399dbfb8b4b9d4678aa980053781b716822d35e,"A revisit of empty string """" vs. null.
Make sure that we use """" for prefixes, and null for uris.
And EMPTY_STRING is now declared in SchemaSymbols.
SchemaHandler has its own EMPTY_STRING, which is added into the current symbol table. This is used solely for empty prefix.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317765 13f79535-47bb-0310-9956-ffa450edef68"
b9f2ad7cb65b0497e4de5480a7498868409b8271,"Comments for a bug: if the same document is both imported and include, only the first one takes effect.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317766 13f79535-47bb-0310-9956-ffa450edef68"
ad06e9307dfce03331e79a0cbb9aecaf34fd209a,"fixing a NPE: first check whehter there is an element node.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317767 13f79535-47bb-0310-9956-ffa450edef68"
081d14040e07d350e664f1a6b8212834edbb5c8d,"Remove prohibited attribute uses after we finished traversed all attributes, attribute groups, and attribute wildcard.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317768 13f79535-47bb-0310-9956-ffa450edef68"
41e0777cf6116fcc6926f3af112abb69b7b2a143,"A bug when checking type derivation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317769 13f79535-47bb-0310-9956-ffa450edef68"
6cf194be1b273e3959b4d1a72dbe91d61f4803c4,"check whether the content of simple type restriction matchs that defined in the schema for schemas.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317770 13f79535-47bb-0310-9956-ffa450edef68"
61398aa86cce3934668e29e0acd0afea9065b6c4,"get rid of checkContent method.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317771 13f79535-47bb-0310-9956-ffa450edef68"
77699942ebd75db6766c79b097d0c2f8d46348ce,"we should report a warning (instead of an error) in the case where we can't find a schema document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317772 13f79535-47bb-0310-9956-ffa450edef68"
10ca0ad5324bbbd98acc95d8b1d9e51f049f7a58,"Typos on error code.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317773 13f79535-47bb-0310-9956-ffa450edef68"
370314d6bd8381a6e957f7a2bd3d1f93b5a653da,"In xerces1 datatype constructors relied on the fact that facet's hashtable is not null.
Otherwise, facets won't be inherited proparly. Need to revisit this behaviour (for simpleType/datatype
redesign)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317774 13f79535-47bb-0310-9956-ffa450edef68"
404d08750a095ca5738dbcbd4916e499967b192c,"Report error when there are more than one attribute uses of type ID.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317775 13f79535-47bb-0310-9956-ffa450edef68"
163e05478674a9bce319660f7a3e17f7fac7dc9f,"Check for constraint ""Attribute Use Correct"" in 3.5.6.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317776 13f79535-47bb-0310-9956-ffa450edef68"
a5bf8a3e51f3b5c8fe3c98d6d358881dcbc651fa,"When an attribute is not specified, the value is null, not empty string.
This fix solves some NPEs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317777 13f79535-47bb-0310-9956-ffa450edef68"
0252ae0d73f5f282fedc74ddc45cbb7515193448,"bug fix


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317778 13f79535-47bb-0310-9956-ffa450edef68"
bcc0a84c75ccaedf9bc47790b17f8305cff09eb1,"The method signatures are not consistent.
For the current design, all ""checkContent"" method should return nothing, and
take ValidationContext as a parameter (instead of Object).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317779 13f79535-47bb-0310-9956-ffa450edef68"
3576346290878dae87a920e6c49a9b0350cb58a5,"Sometimes it doesn't report error for mis-match content.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317780 13f79535-47bb-0310-9956-ffa450edef68"
9271a51b037da59e0d0e7a11329d012cba5bf910,"The condition of name blocks us from reporting an error for incorrect component under <schema>.
I moved the error reporting code to another place, where simila conditions are checked.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317781 13f79535-47bb-0310-9956-ffa450edef68"
5063fd6e0ed14634c71dcf5e2a2782601b135c39,"when the value of final/blockDefault on <schema> is #all, it's not always equivalent to the combination of all allowed values.
That is, finalDefault=""#all"" is not the same as finalDefault=""extension restriction"".
Now I treat final/blockDefault=""#all"" as finla/blockDefault=""substitution extersion restriction list union"".


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317782 13f79535-47bb-0310-9956-ffa450edef68"
9873ddb5d80de062724e1ce8f158c70e6d702903,"Make jaxp code compile under JDK 1.1 (it used to only just run on 1.1)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317784 13f79535-47bb-0310-9956-ffa450edef68"
6f6f2dc26a9249c45bea4d68549ff1ac5c397da3,"SAXParser was missing constructor with a parser configuration
parameter.

Reported by:	Neeraj Bajaj <Neeraj.Bajaj@sun.com>


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317785 13f79535-47bb-0310-9956-ffa450edef68"
79f57f4a4f2770836c3b726ab0a3249599e0d3ef,"Fixed more newline normalization bugs. This time the problem was in
attribute values. The code to scan literals was also simplified a
little bit.

Reported by:	Aleksander Slominski <aslom@cs.indiana.edu>


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317786 13f79535-47bb-0310-9956-ffa450edef68"
25806921e40f00b1e858b65a2cf0fa5aa7aea1d6,"Fixed bug that turned off reporting of entities in DTD.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317787 13f79535-47bb-0310-9956-ffa450edef68"
1af74e0133cb8f9874cd03a1c9c0b99345b68504,"Fixed bug (again) that turned off reporting of entities in DTD.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317788 13f79535-47bb-0310-9956-ffa450edef68"
87c03bb8e96a09759d7033d117870258c8e81fb1,"Fixed a number of small bugs which improve the run of Xerces2
through the OASIS conformance tests.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317789 13f79535-47bb-0310-9956-ffa450edef68"
49bd252bcd0a6ea98e0af035e556d2d3d6f2a9b1,"update simpleType messages


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317790 13f79535-47bb-0310-9956-ffa450edef68"
8ee43f79e0038c7288ea87d9c6d5f19cb8884929,"bug fix enumeration-required-notation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317791 13f79535-47bb-0310-9956-ffa450edef68"
f5b718eddaa50193964657bab5016a16024a0680,"Sometimes constructTrees returns null (for example, if the file is not found, or there is no location hint).
We need to check whether newSchemaInfo is null to avoid NPE.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317792 13f79535-47bb-0310-9956-ffa450edef68"
3a07bd8a3befed567c2f913dbef92f62aa9afea0,"remove dependency on v2.msg


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317793 13f79535-47bb-0310-9956-ffa450edef68"
108aabe539e64d0c892df87a4abb595781e801c7,"qname prefix resolution:
1. add checking for unfound prefixes;
2. add comments at places where more prefix checking needs to be done;
3. removed comments about prefix resolution that are not applicable anymore.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317794 13f79535-47bb-0310-9956-ffa450edef68"
b323cf979641925ef931a13bd932ae5a3e7ff824,"consistently use empty string for prefix and null for uri when absent


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317795 13f79535-47bb-0310-9956-ffa450edef68"
656162839e4756ca5b1ae871b21823cac3eda10e,"changed comparison for id constr. node names to use string comparison.   Reference comparisons don't always work - Sandy investigating


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317796 13f79535-47bb-0310-9956-ffa450edef68"
ad65d5b7fee970db07a9e37bda8ae4b0a876afe4,"1. Changed startDocumentFragment to remove context arg - it wasn't used, and resulted in the method not being reached by the validator. 2. Changed start and end element calls to take an element decl, instead of a schema grammar


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317797 13f79535-47bb-0310-9956-ffa450edef68"
7eb0e3489358b4fd29231a4ab994ab9324fbbe53,"Changed matcher start and end element calls to take element decls as arguments


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317798 13f79535-47bb-0310-9956-ffa450edef68"
e9796a3e0046bf27ffecd1f2d072c72ddb07cf9e,"Changed the way in which attributes and data type validators are looked up in the start and end element calls.  This mimics what we do in xerces-1, but may need to be revisited (may not be complete)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317799 13f79535-47bb-0310-9956-ffa450edef68"
c6828f26788c634e01f4df3858476c19141a57b6,"some revisits when we build the DFA.
also related to how we want to implement UPA checking.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317800 13f79535-47bb-0310-9956-ffa450edef68"
81f04727ef1ece720d74d02f0c56a875e9ae2f96,"We didn't report an error if there is no extension or restriction in simpleContent and complexContent.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317801 13f79535-47bb-0310-9956-ffa450edef68"
50e0e90474f17c2340a8b62bc80ec175f34e9416,"new wildcard decl implementation, which supports the (correct) subset/intersection/union operations.
thanks to Rahul's patch (though part of the partch was modified.)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317802 13f79535-47bb-0310-9956-ffa450edef68"
01ec73c51c281f25d7fab49d9cbc562b13e34103,"Fix bug so that code compiles and runs on jdk 1.1.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317804 13f79535-47bb-0310-9956-ffa450edef68"
34125d0b9ecd899d145dc2b8f3d50f7d3591255c,"Updated build script and documentation in preparation for
the Xerces 2.0.0 (beta3) release.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317805 13f79535-47bb-0310-9956-ffa450edef68"
2bab98e279db5dfcbd8fd7c2875c9e5cd4573160,"Add hardwired default fallback factories to xerces jaxp implementations
until we can figure out why FactoryFinder code does not run as applet in
Netscape 4.7 correctly.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317806 13f79535-47bb-0310-9956-ffa450edef68"
a75e8ba3fb50cbd5d2d1435fdc798de27ef1540d,"A patch from Rahul about a missing constraint of keyref traversal:
c-props-correct.2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317808 13f79535-47bb-0310-9956-ffa450edef68"
0b738b3506f7532fee15c7de1f1a4871cf63ac2c,"A patch from Rahul about the comparison of component name.
For now we don't have a full support of symbol table, so we need to use
""String#equals()"" instead of ""=="".


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317809 13f79535-47bb-0310-9956-ffa450edef68"
594ea3edfb458c42d427777baeeb952c915c1621,"Fixed up attribute restriction constraint checking for FIXED


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317810 13f79535-47bb-0310-9956-ffa450edef68"
c00e974c6431c80000877f07a43df0bd20cb169d,"moved call to removeProhibitedAttrs from traverseAttrs into callers.   That's because for derivation by restriction, we need to do the removal after attribute merging


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317811 13f79535-47bb-0310-9956-ffa450edef68"
63299d69ce93b45c949475e91781183d75f50483,"Fixing a NPE: sometimes XSAttributeCheck#checkAttributes return null,
if the element passed in is not expected. And further reference to the returned
value would cause NPE.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317812 13f79535-47bb-0310-9956-ffa450edef68"
a3551277ac86be765ce38273960fded19a3fe447,"Add dynamic validation to schema validator + allow validation of files with dtd only.
Need to revisit the assumptions we make about the meaning of validation and schema features


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317813 13f79535-47bb-0310-9956-ffa450edef68"
dced349796531fef945139605ed5895afc9f1154,"1) Fixed some null pointer exception bugs exposed by domunit 0.0.6.
2) Added notation and entities to doctype node for both deferred and
   full DOM modes.

NOTE: There appears to be a bug remaining in the deferred case of
      entity references where the text content is not getting
      properly cloned to the entity in the doctype. The first two
      characters are missing.

      For example ""<root>&entity;</root>"" where the external entity
      contains ""Hello, World"". The content appearing under the entity
      reference and entity in the deferred case is only ""llo, World"".
      This is because the scanner separated the first two characters
      calls due to trying to autodetect the encoding of the external
      entity.

      This may show a bug in my new cloneNode method that I added to
      the DeferredDocumentImpl class.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317814 13f79535-47bb-0310-9956-ffa450edef68"
360f04377b848f21addf10c0c4607f9755b3a8f3,"use standard parser configuration to parse schemas


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317815 13f79535-47bb-0310-9956-ffa450edef68"
f57bb3d505bb08934d85714de403747f738bddef,"1. Fixing a bug in KeyrefTraverser: after XSDHandler#getGlobalDecl(),
we need to check whether the returned component is a key or unique.
if it's a keyref, we need to report an error.
2. Also updated some error message for XSDHandler#getGlobalDecl().


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317816 13f79535-47bb-0310-9956-ffa450edef68"
3b784074eb3600fe008b37c471af5af3b0f54b59,"1. After the finding all components in <redefine>, we shouldn't set it as hidden,
because we need to traverse all the compoents again in traverseSchemas().
2. Some typo when trying to traverse an <annotation>.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317817 13f79535-47bb-0310-9956-ffa450edef68"
0b0bc06fd2ce8e38528b50e2e35ae85517a3a897,"Add DTD/XML Schema configuration and make it the default configuration for the parsers


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317818 13f79535-47bb-0310-9956-ffa450edef68"
f06edf1ed81f35788c2fd3dc9095ff0d7326d34d,"Apply patch from Pavani Mukthipudi


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317819 13f79535-47bb-0310-9956-ffa450edef68"
d5b61a43c8c737b7d37e8a1d1839aa58a425178a,"Fixed data corruption problem in deferred DOM relating to
Entity and EntityReference nodes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317821 13f79535-47bb-0310-9956-ffa450edef68"
3df24be68cb7f1e208f460c2ab20fae4b605f528,"Documentation changes for new Schema alpha release.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317823 13f79535-47bb-0310-9956-ffa450edef68"
22c0e12e4b704d038f0b290865301ebf56f40455,"Package reorganization to include alpha XML Schema support.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317824 13f79535-47bb-0310-9956-ffa450edef68"
2be1c9fccf0ac5b27ec0bab08b2ce6537c5c3759,"removing files from v2 directory (package reorg)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317825 13f79535-47bb-0310-9956-ffa450edef68"
dfdf40a8c6a1923db6022c2c5511bcd531ff7a12,"update


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317826 13f79535-47bb-0310-9956-ffa450edef68"
0788bce35759288cf42f03dedeb938cf0a506f45,"Updated links and information for SAX.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317827 13f79535-47bb-0310-9956-ffa450edef68"
496bec1ef511aee0813f3521309995876a441ff3,"Minor change to correct parameter to error message.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317828 13f79535-47bb-0310-9956-ffa450edef68"
1070d2d64c0e82e786e303c4c568f84d462aef06,"ensure we always call document handler events from schema validator


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317829 13f79535-47bb-0310-9956-ffa450edef68"
13a0812cdd131a00ae7e816132ba9417a742bb82,"- fixing bug for ignorableWhitespace (CDATA section are never ignorable)
- deferred DOM out of memory exception with recursive entity ref.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317830 13f79535-47bb-0310-9956-ffa450edef68"
01e9115388301d9528f40521d5e0fe825b5670f0,"Applied MS VJ++ workaround for jkesselm


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317831 13f79535-47bb-0310-9956-ffa450edef68"
64f8cd8c5af52cced145b95ab9eba69cc1c37c0b,"Union types should always have a base type. Otherwise we'll get an NPE.
The fix is not good: we should set anySimpleType as the base, but this requires
a relatively big change, which is not desired before the release.
Now I just set the base type to the first member in the list, to avoid the NPE.
We need to revisit it after the release. (The same applies to list types).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317833 13f79535-47bb-0310-9956-ffa450edef68"
9baf7d206fe3a147b4053ae3e0814b101d433acf,"Need to pass current ""grammar"" and ""schemaDoc"" along every method call.
It's possible that we go to traverse another simpleType when traversing the
current one, so having global variables fGrammar and fSchemaDoc is not
correct.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317834 13f79535-47bb-0310-9956-ffa450edef68"
0f624301f7564520d8dc468b92d065a1db72868f,"Should only add global decls to the gramma when they are really global.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317835 13f79535-47bb-0310-9956-ffa450edef68"
f634bc748d661f2e86032adab90969e426b58943,"We have to distinguish the two cases: the type is a restrictoin of another
union type, and the type is a union of another union type and other types.
A new variable is introduced to tell whether it's a restriction. This is also a
temprory solution.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317836 13f79535-47bb-0310-9956-ffa450edef68"
aa5be5a446f46811d8238f0c7d7826673a9f7dd2,"update docs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317837 13f79535-47bb-0310-9956-ffa450edef68"
c5cb29ab5241ba5757bda9a7e2d72a4f131b4be4,"Skeleton release plan for xerces2 schema beta


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317839 13f79535-47bb-0310-9956-ffa450edef68"
4059b0720ce28c9e4a519fac78c819103e537548,"The release plan which was followed for the just-posted schema lapha - posted to capture the work involved, etc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317840 13f79535-47bb-0310-9956-ffa450edef68"
b0784d027fe817fffdde61b942734a9afbb435de,"add src-redefine.7.2.* constraints.  Also add hooks for src-redefine.6.2.* constraints, though the checks themselves will have to wait until derivation-by-restriction constraints are implemented.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317849 13f79535-47bb-0310-9956-ffa450edef68"
c6e91d6992e5101de286a0755a9105829515900a,"1. reorganize method calls, so that code for schema validation and code for forwarding xni events are separated.
2. for default/fixed values, send characters() event between startElement and endElement. The behavior before was a bug.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317851 13f79535-47bb-0310-9956-ffa450edef68"
5d68bcb4055d1bf763c3f087da7efb3fb0bc5ab9,"1. Add a new method to check whether one element is in another's substitution group;
2. Don't try to check substitution group if an element decl is not global.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317852 13f79535-47bb-0310-9956-ffa450edef68"
58c374a1ed6509d806a0cea39403b061f28e4915,"Add more information to element/attribute decls: whether the decl is global.
This is required for PSVI, and other class (traversers, validator) also need this information.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317853 13f79535-47bb-0310-9956-ffa450edef68"
24c0ef71787c631ed749c73aa84a424ba7131b9b,"added more messages for complexType


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317854 13f79535-47bb-0310-9956-ffa450edef68"
bd3c1b3ac7a4949d387148e244cae071f0706cbf,"changed some reportGenericSchemaError calls to reportSchemaError calls with proper msgs.  More cleanup to come.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317855 13f79535-47bb-0310-9956-ffa450edef68"
8ed1f44bac52aef54562b733e9bc8ff08d1a79b5,"Store substitution group information in the grammar.
We'll need to collect such information from different grammars, so that
substitution group handle can calculate {substitution group} for a given
global element decl.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317856 13f79535-47bb-0310-9956-ffa450edef68"
a32f777fa758f0063c31e61f455e1622969c178e,"The constraint ""Element Default Valid (Immediate) "" is used in both
element traverser and in schema validator. So it should live in XSConstraints.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317857 13f79535-47bb-0310-9956-ffa450edef68"
ef60433edd0ebbfc771a43b2b69e53b2dab7f693,"Added missing constructor to DTD/XS parser configuration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317858 13f79535-47bb-0310-9956-ffa450edef68"
65f147559ed6aee96eb38f274c206aea567ed304,"Fixed types for DTD and XML Schema validator components in the
XNI Manual regarding the Xerces2 reference implementation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317859 13f79535-47bb-0310-9956-ffa450edef68"
2b0f349f0c561d6a25f69359c74a9154964208fb,"Reverted Schema validation to pay attention to validation feature id.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317860 13f79535-47bb-0310-9956-ffa450edef68"
fc8cd1c46702105116ae7c2a86ec6e5b4a3749d1,"Applied patch from Henry Zongaro (bug fixes 4463 and 4472)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317861 13f79535-47bb-0310-9956-ffa450edef68"
9096c2e8240a824b487086790af9093fc90582a8,"new messages for complextype constraints


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317862 13f79535-47bb-0310-9956-ffa450edef68"
263d0900c3b9f61d53b5f88743c705a0143f95fd,"Use messages from properties file instead of hard-coded msgs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317863 13f79535-47bb-0310-9956-ffa450edef68"
67f17d1ce1e32672adfc5b79ccd8027c46362ab5,"1. it's possible that fTargetNamespace == null, in this case, don't use it to generate hashcode;
2. implement equals().


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317864 13f79535-47bb-0310-9956-ffa450edef68"
d5f177d80a9964dcceb29c071c2ae46e9a80e7a7,"Fix some DOM L2 conformance bugs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317865 13f79535-47bb-0310-9956-ffa450edef68"
1221cd7ead809e1ea8e89601dcae2c495bef23bb,"Need to add all complexTypes (including local ones) to the grammar for future constraint checking.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317866 13f79535-47bb-0310-9956-ffa450edef68"
9bd80f591fd07516e615d4c65f9fc571a73d4977,"Error message for Unique Particle Attribution.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317867 13f79535-47bb-0310-9956-ffa450edef68"
9898ead65feeb59cedf790391e177fe0197b8858,"Make ""addComplexTypeDecl"" public. Otherwise XSDComplexTypeTraverser won't compile.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317868 13f79535-47bb-0310-9956-ffa450edef68"
3ceb45f5858b5090f10f1f5df04a5050adae9d4d,"XSComplexTypeDecl should be responsibe for setting fCMValidator.
What if CMBuilder#getContentModel is called by other classes, which don't
want to modify XSComplexTypeDecl#fCMValidator.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317869 13f79535-47bb-0310-9956-ffa450edef68"
555a65fe1aee150cf7087273b6476df669ad0568,"XSComplexTypeDecl should be responsibe for setting fCMValidator.
What if CMBuilder#getContentModel is called by other classes, which don't
want to modify XSComplexTypeDecl#fCMValidator.

And removed some commets not applicable in X2.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317870 13f79535-47bb-0310-9956-ffa450edef68"
4e7e29429539bc727711f46a75459a685ff7743c,"Added missing default attribute values.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317871 13f79535-47bb-0310-9956-ffa450edef68"
33dc7342972f36b2cbf19475c2395ac389bf7c04,"Improved output of print() debug method when DEBUG_PRINT_TABLES
debug flag is enabled. Instead of looking at type numbers, you
can see short text descriptions of the types so it's easier to
figure out what each node in the deferred document tables is.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317872 13f79535-47bb-0310-9956-ffa450edef68"
56212e011bfbf78c6a31271250066a8855fb1f02,"Fixed double entity value bug in deferred DOM impl.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317873 13f79535-47bb-0310-9956-ffa450edef68"
dfde1023346665f0d58d377da0194cdcc95cfa0d,"Made sure that specified flag is correct when creating an
attribute node in the FULL dom implementation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317874 13f79535-47bb-0310-9956-ffa450edef68"
6199dd8cd2619952f79dfb3f6d963869f592dbe5,"Bug fixing [2783]: the handling of attributes ""xmlns???"" was not correct in XMLSerializer.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317877 13f79535-47bb-0310-9956-ffa450edef68"
e8a80f3c5d0c6e2786e6e699b2aa47d125a9287a,"Implemented element by id registration required for getElementById() method.
This will work only for DTDs (we can't at the moment retrieve ID type for schema attributes)
Binded namespace attributes defined in XML-Infoset to  http://www.w3.org/2000/xmlns/


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317881 13f79535-47bb-0310-9956-ffa450edef68"
54bca93dedb67f2893bbde426cf95dd40210432a,"fix a small bug in he schedule.  Thanks to Henry Zongaro for picking this out.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317883 13f79535-47bb-0310-9956-ffa450edef68"
2a55beab55231969ac6dd739b525a47a0f14a52e,"Fixing bug [943]: whenever a string is added into SymbolTable, we internalize
it using String#intern(), so that the strings passed to the application are java-internalized,
and can be reference-compared with other java-internalized strings.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317884 13f79535-47bb-0310-9956-ffa450edef68"
c1347feb11416eb839b46a76d6c41f1d84f3217a,"Fixing bug [943]: whenever a string is added into SymbolTable, we internalize
it using String#intern(), so that the strings passed to the application are java-internalized,
and can be reference-compared with other java-internalized strings.
The sax feature controls whether to internalize Strings using String#intern().
The behaviour of this feature changed from always off to always on.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317885 13f79535-47bb-0310-9956-ffa450edef68"
9a92099bd757b674ca39f05ff0660f7bf55bddc0,"apply a patch from Glenn Marcy to fix bug #2206


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317886 13f79535-47bb-0310-9956-ffa450edef68"
51feae36d3573cdf58362883cdddd17b19780811,"Explicitly turn on namespace-prefixes if namespaces is off


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317887 13f79535-47bb-0310-9956-ffa450edef68"
91c47268f5d024ce83256f8f4334104551a3dc93,"applying a patch from Sandor Szego <sszego@saba.com> that permits, at user option, serialized HTML attributes to contain """" for their value instead of standing on their own.  This does not alter the default behaviour.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317891 13f79535-47bb-0310-9956-ffa450edef68"
47a4b62643aa982d753ed81b7f807c08127bc72e,"Performance bug fix (http://nagoya.apache.org/bugzilla/show_bug.cgi?id=4514).
Patch was submitted by Stephane Dahan (stephane@quiver.com) and verified by Henry Zongaro


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317892 13f79535-47bb-0310-9956-ffa450edef68"
5ffa342e0825441c1a4218fd8dd4bb60c35ad9f7,"Making the new simple type design conform to a new set of interfaces.
Not complete yet. And there are still open issues about the interfaces.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317894 13f79535-47bb-0310-9956-ffa450edef68"
108e8a02859386d537d41eea73cbdd77d9e800f4,"New changes to the implementation: some modifications to the interfaces;
fixed some bugs; added normalization support; created all built-in types, etc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317895 13f79535-47bb-0310-9956-ffa450edef68"
bd937837a36b311a3acabe71f2fd4489784d2756,"Fixed two problems:
1) Entity reference and entity content. Previously, I was storing
   the literal value of declared internal entities in the entity
   node under the doctype. Then, when fluffing up the entity ref
   children, the literal value would be copied over the entity ref
   children. Oops!
2) Once I fixed the first bug, then I noticed that I had a ref
   counting problem in my cloneNode(int,boolean) method. As the
   diff shows, you should *not* try to circumvent the setter method
   for the parallel arrays. Otherwise, the reference counting will
   not work correctly and eventually you'll get a NPE.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317896 13f79535-47bb-0310-9956-ffa450edef68"
b359c634420853f0b6d62012ed2bfab333750569,"Slight fixes to patch applied for bug 4515. The new data
fields were not marked ""transient"" for serialization and
the size() method was being called in the loop when
building up string value.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317897 13f79535-47bb-0310-9956-ffa450edef68"
5a4eb6ef4984a61f5ee0eea8d0852cedcb2b87ca,"Fixing bug [3375]: allow a valid uri string.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317902 13f79535-47bb-0310-9956-ffa450edef68"
f416f19a49560290ca9343ad23233c9e998be1d0,"DOM Level 3 experimental interfaces


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317904 13f79535-47bb-0310-9956-ffa450edef68"
9367b9498e22ed8e8edcfec88bad41b904218e8e,"fix for doc problem vis. SAX namespace-prefix feature pointed out by Arun Yadav and Glenn Marcy.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317905 13f79535-47bb-0310-9956-ffa450edef68"
a025903863e38e4bc7820a996f60052beb1cc012,"fix documentation for the defaults of two more features.  The parser does not produce warnings on duplicate attribute definitions or for undeclared elements that are referenced in a DTD by default.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317908 13f79535-47bb-0310-9956-ffa450edef68"
dff0cd6c67a822cf288af4acf8234a242e0b5106,"Full schema constraint checking and Unique Particle Attribution checking:
1. A new feature is added ""validation/schema-full-checking"" (as in Xerces-J),
which controls whether the 3 special constraints are checked against schema:
Unique Particle Attribution, Particle Derivation, Element Consistent.
2. Update schema validator to check the 3 constraints if the feature is on.
3. Code for Unique Particle Attribution checking
4. Updated all content models to check for UPA
5. Code for computing the substitution group for a given element decl


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317911 13f79535-47bb-0310-9956-ffa450edef68"
53d9d57d25000676938d5c73ed6afc03dd0f7ee1,"A new feature is added ""validation/schema-full-checking"" (as in Xerces-J),
which controls whether the 3 special constraints are checked against schema:
Unique Particle Attribution, Particle Derivation, Element Consistent.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317912 13f79535-47bb-0310-9956-ffa450edef68"
c0fbf1c5c20d1238da7fd151d00a387cdb95d2fe,"This class doesn't need access to XInt and XIntPool.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317914 13f79535-47bb-0310-9956-ffa450edef68"
fd364687b4588abe00dc7d84f8f76c6a5b9e58ec,"Element traverser doesn't need access to substitution group handler.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317915 13f79535-47bb-0310-9956-ffa450edef68"
21cda7ed1f772a479e6151fe81f05ad817852204,"Need to implement a method for UniqueParticleAttribution checking.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317916 13f79535-47bb-0310-9956-ffa450edef68"
4e1fac19c3291c5161bb8692e59af201cd77768d,"Need to implement a method for UniqueParticleAttribution checking.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317917 13f79535-47bb-0310-9956-ffa450edef68"
8b716ce78b630018f40cd0d4feba4c698a73beb5,"Mixed content is handled in the schema validator, so we don't need another
content model for that purpose. (It's not referenced by any other class)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317918 13f79535-47bb-0310-9956-ffa450edef68"
3d1e44380293bce9383ea29df5ed0ba98629dd8d,"The handling of ""xsi:nil"" was not correct:
1. When no element declaration is found for the current element, ""xsi:nil"" should be ignored;
2. The value of ""xsi:nil"" should be normalized before being compared with ""true"".


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317919 13f79535-47bb-0310-9956-ffa450edef68"
86d652db15b8eb8ad329c6b8de5269bbee35b120,"Remove DOM L3 methods.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317922 13f79535-47bb-0310-9956-ffa450edef68"
8572606a9452d955fc5f6a126f2aae93db009197,"when a parser receives an XMLParseException that is not wrapping another exception, throw a SAXParseException to the application instead of a SAXExcption so that the application can extract locator information if it chooses to do so.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317923 13f79535-47bb-0310-9956-ffa450edef68"
71dd6a48f618ddb6ef26098a0efd03139a33e3d0,"New simple type design:
1. A new set of interfaces for datatype validators (DTD) and simple types (Schema);
2. An implementation of the Schema interfaces.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317924 13f79535-47bb-0310-9956-ffa450edef68"
0b5698cba10e9c7d38422eb122c6c523628fa8f8,"fix call to XMLAttributesImpl#setType() so that enumerated attributes appear inside parentheses as setType() javadocs expect.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317925 13f79535-47bb-0310-9956-ffa450edef68"
1abc4c7366a384fccf9b945b24afa22ba8c94ef2,"fix XMLAttributesImpl so that getType() returns NMTOKEN for an enumerated list of attributes, as its javadoc (and that of the XNI interface it implements) advertise


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317926 13f79535-47bb-0310-9956-ffa450edef68"
28e403461217a5446481b2f53a6d169111308d0c,"according to DOM l2, the getEntities call in org.w3c.dom.DocumentType should not return parameter entities.  So make sure they are not stored in the docType implementation entities node map.  Thanks to Elena for pointing out the right patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317927 13f79535-47bb-0310-9956-ffa450edef68"
2430dfd4bebf133a350e0f3bb4d2b9255d89bdcc,"fixed small bug in setValue()


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317928 13f79535-47bb-0310-9956-ffa450edef68"
cad0254f572a907f2316edfb53ddd3b718b910ce,"fixed compilation error


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317929 13f79535-47bb-0310-9956-ffa450edef68"
72e96de48bbf607c01562e335c37bc125d0019e5,"SAX requires attribute.uri to be either Namespace URI or empty string, but not null.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317930 13f79535-47bb-0310-9956-ffa450edef68"
8caa139af9074218b0d59f8303d803a78ba4507f,"fix a problem where we would happily throw away any SAXException a user emitted from any SAX ErrorHandler event, and return the SAXParseException passed in to the call instead.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317931 13f79535-47bb-0310-9956-ffa450edef68"
1d7e0ca5fee31d93d43ce6667a4dc63bd8faaaa2,"DOM L3 DOMWriter implementation.
Submitted by: Rahul Srivastava
Reviewed by: Elena Litani


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317932 13f79535-47bb-0310-9956-ffa450edef68"
338083cdb22e38332e2b11adca4bf741230108ff,"Remove ""revisits"" and update saveXML according to the spec:
""if this parameter is null the whole document is serialized""


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317933 13f79535-47bb-0310-9956-ffa450edef68"
e84b40f1b8f8f656b17586750309db138d347397,"Added particle restriction checking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317934 13f79535-47bb-0310-9956-ffa450edef68"
2c39655f30ff5cab62a013e78c62e98adefb6032,"Added particle restriction messages


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317935 13f79535-47bb-0310-9956-ffa450edef68"
cc42d42ef49471bc0e21c70f2ede10ee540a9232,"Added an isEmpty method


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317936 13f79535-47bb-0310-9956-ffa450edef68"
08ec3715b0985eb715a5ed8ed4ef860c1d647356,"Changed an error key from general to General


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317937 13f79535-47bb-0310-9956-ffa450edef68"
e1c8e3fb0997117c4fdf49b8fec6674f9cc85cd1,"fixed problems with subst. groups in particle restriction


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317938 13f79535-47bb-0310-9956-ffa450edef68"
1281996de10d3af1b51f0b4d78cfcd75d8ade6fe,"Modify XNI to include Augmentations parameter on each XMLDocumentHandler call.
Modify samples.
Modify docs http://nagoya.apache.org/bugzilla/show_bug.cgi?id=5058


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317940 13f79535-47bb-0310-9956-ffa450edef68"
898493676cd446152edc4b5c34705c6e2e59e859,"For particle restriction case RecurseUnordered, if there are particles in the base without matching particles in the derivation, and such particles are not emptiable, detect an error


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317941 13f79535-47bb-0310-9956-ffa450edef68"
b00d1f5b765dffbeb5d9cff0b2db41e49cb8b762,"checking in changes to split up APIs and implementation into separate JAR files.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317942 13f79535-47bb-0310-9956-ffa450edef68"
08e660ca8f34abbf0f42634aed81ee4506c91c78,"make printing of Version string more generic


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317943 13f79535-47bb-0310-9956-ffa450edef68"
a14afb02bdb6b1e04495b36a2465c56cb1b751ea,"PR:
Obtained from:
Submitted by:
Reviewed by:
Testing commit. No modifications done.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317944 13f79535-47bb-0310-9956-ffa450edef68"
421e957d69e203605ef272a71330aae7170e63bf,"PR:
Obtained from:
Submitted by:
Reviewed by:
Testing commit. No modifications done to this file.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317945 13f79535-47bb-0310-9956-ffa450edef68"
a9ca8f3da766687a3c9fee0bb2583c813e198e1d,"put JAXP resource files in the implementation jar instead of in the API jar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317946 13f79535-47bb-0310-9956-ffa450edef68"
aea5e226cbe2a8bcbd55b1f217c4863434c66e97,"make search for a SAXParser class by the ParserFactory more robust.  This is a clear bugfix to SAX level 2, and since the new class that is being added is package protected this should have no unexpected impact on users of the API.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317947 13f79535-47bb-0310-9956-ffa450edef68"
7761a4bda75f5156148750a755fbb5c05220b215,"The DV implementation needs to know whether facet checking
or id/idref/entity checking is necessary when validate() method is called
on a DV/simpleType.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317948 13f79535-47bb-0310-9956-ffa450edef68"
e3113b434427fb887f541ab39859accc6056aa47,"Various updates on the new simpleType design:
1. If the type is a union type, we need to return which member type is used
to actually validate a value.
2. Add a method on SchemaDVFactory to get an instance of specified factory
implementation.
3. Provide a way to tell whether a type is a NOTATION type.
4. Bug fixed in the default implementation (xs_new package).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317949 13f79535-47bb-0310-9956-ffa450edef68"
1c118bb61391d1ebffb09fb26d45daa4aa284bd3,"Update xs package to use the new ValidationContext/State, so that the classes
can tell the DV implementation whether facet checking or id/idref/entity checking is necessary.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317950 13f79535-47bb-0310-9956-ffa450edef68"
a21ae11d500c4ce5da4c0571a03088d08fa907ea,"There are special characters copied from the spec. Some editors might have
difficulty dealing with them. Now I'm removing these special characters.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317951 13f79535-47bb-0310-9956-ffa450edef68"
66f1ff787dcb7350e0d101c32033ff7f5a15ba4c,"- Added xni PSVI interfaces for light-psvi support - those are not final and
maybe modified in the nearest future.
- Provided basic implementation for ElementPSVI.
- Modified DOM interfaces to fix known bugs - ls/as modules


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317952 13f79535-47bb-0310-9956-ffa450edef68"
4906edbe9002afa924efca7a6c54cde6426e009d,"Implementation of some features for DOM L3 Core/LS.
Submitted by: Gopal Sharma, SUN Microsystems Inc
Reviewed by: Elena Litani


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317953 13f79535-47bb-0310-9956-ffa450edef68"
2d27c0ece8f8a8b8edbede338aa8f8847c67a41d,"Implementation DOMBuilder (including new feature ""include-comments"")
Submitted by: Pavani Mukthipudi
Reviewed by: Elena Litani


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317954 13f79535-47bb-0310-9956-ffa450edef68"
9c6d37924a2aa115224877d64d82e6ebe808aba0,"We shouldn't insert an ""all"" particle into a sequence or a choice, otherwise
we won't be able to create dfa from the result particle.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317955 13f79535-47bb-0310-9956-ffa450edef68"
71823bb76fbbe51476f8c4f76984133133ae289e,"Switching to the new simple type iimplementation. This enable us to get more
information from simple types, which is essential to PSVI support.
1. Modified xs package to use the new simple type interfaces.
2. Fixed bugs in the new simple type implementation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317956 13f79535-47bb-0310-9956-ffa450edef68"
fe32674b31e7b6e9247ad19cc27deb13c394c445,"added cos-element-consistent checking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317957 13f79535-47bb-0310-9956-ffa450edef68"
107dc8c52e41ccfbd4248e8123120165e55ba992,"new message for cos-element-consistent


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317958 13f79535-47bb-0310-9956-ffa450edef68"
7ce7a4b7485884386812901469d352712b2bdeb5,"temporarily disable cos-element-consistent checking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317959 13f79535-47bb-0310-9956-ffa450edef68"
41e665979d403aedc252b299aae641196467b6f2,"Should pop the namespace context after we finish process the element content.
Otherwise if the type of the element is QName, the value won't be validated correctly.

Thanks to Neeraj's patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317960 13f79535-47bb-0310-9956-ffa450edef68"
91a109f54ea83e20049da5e6314d06b9645d9788,"Modify impl of DOMError to allow to reuse error objects.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317961 13f79535-47bb-0310-9956-ffa450edef68"
4e12e0389e07bbfd210ee072d5c73e535f71b6d6,"Apply patch from Rahul Srivastava adding documentation and fixing some bugs.
Modify implementation of split-cdata-sections.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317962 13f79535-47bb-0310-9956-ffa450edef68"
b67c28a54616c3c0392a2048b1c0a37f34edbb41,"Use an error report wrapper to record schema instance errors for each element.
This is primarily for PSVI: we need to expose a list of error codes for each element.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317963 13f79535-47bb-0310-9956-ffa450edef68"
e425ee60a8966b4d2727fa2596ab10323b72b0d7,"Fill in the PSVI information for elements in XMLSchemaValidator.
Currently it is the default behavior (will be disabled as soon as we add property
/feature to control PSVI output)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317964 13f79535-47bb-0310-9956-ffa450edef68"
396251225c8766cb9660b8ff5d571e432bf7bf63,"re-enable cos-element-consistent checking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317965 13f79535-47bb-0310-9956-ffa450edef68"
e1067d16c3b4825dc53e1703e5a65c400bf7c30b,"Support the two properties (which were introduced in Xerces 1):
external-schemaLocation and external-noNamespaceSchemaLocation.
Please refer to the ""properties"" page of xerces-2 documentation for
detailed information about these two properties.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317966 13f79535-47bb-0310-9956-ffa450edef68"
68b31de10a6a673b3cefd1d61e1183ce5fe22276,"Updating the documentation of the two properties:
external-schemaLocation and external-noNamespaceSchemaLocation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317967 13f79535-47bb-0310-9956-ffa450edef68"
e8ffa7fd861d324ba2ecf10ef6d93c2f1a956c1a,"Updating the documentation of the two properties:
external-schemaLocation and external-noNamespaceSchemaLocation.

Now these properties are also used when we locate <import>ed schema
documents. That is, if ""namespace"" attribute on <import> matches the
namespace part of one of the namespace/location pairs in
external-schemaLocation property, or if there is no ""namespace"" attribte
on <import> and external-noNamespaceSchemaLocation property is specified,
the location specified by the properties is used, instead of the schemaLocation
attribute on <import>.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317968 13f79535-47bb-0310-9956-ffa450edef68"
8e031941506d85178feadaa7fe8cf1acdf7aeadb,"Save docs changes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317969 13f79535-47bb-0310-9956-ffa450edef68"
4e1e19ced55a817426c001c80c45a318b4be4e04,"Add partial attribute PSVI information. Modified XNI to support it.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317970 13f79535-47bb-0310-9956-ffa450edef68"
3a5616841fafc6baf1fc02bf61b3afb56f07ca64,"Finish up support for AttributePSVI.
getElementById() should now work for XML Schemas


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317971 13f79535-47bb-0310-9956-ffa450edef68"
d24395408f0109ac86e12cda36653b49564205fd,"initial implementation of DOM level 3 ASModel and DOMASBuilder.  This will allow a sort of Grammar caching.  This is not well-tested; but it does at least compile.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317972 13f79535-47bb-0310-9956-ffa450edef68"
7a4c05a9f7839e555bb36d63c24d4945130c4b30,"The same validation state can be used to validate more than one (schema)
validation roots. Entity/Namespace/Symbol are shared, but each validation
root needs its own id/idref tables. So we need a method to reset only
the two tables.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317973 13f79535-47bb-0310-9956-ffa450edef68"
8956d0e37f3362fce53d0baf75ae0bfdc7a30ae4,"The ""validation root"" defined in schema spec is not always the docment root.
Now we take this into account, and change the following accordingly:
1. id/idref checking: they should be done with a validation root sub-tree,
instead of within an instance document.
2. element psvi output: the validation context property should be the validation root.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317974 13f79535-47bb-0310-9956-ffa450edef68"
a89040f9f520ecd101c97cbba50695ea36ba72c8,"Updating api docs for the new simple type interfaces.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317975 13f79535-47bb-0310-9956-ffa450edef68"
e09592488ba4d2b007a1ce314b62c72efd1898e6,"Instead of get the class name from a system property, we provide a method
""setFactoryClass"" to set which class name to use to create factory instance.

Documentation is also updated.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317976 13f79535-47bb-0310-9956-ffa450edef68"
9f9eaa828bfbfeaad081b2ef779930463fa9c006,"A runtime exception that's thrown if an error happens when the applicatoin
try to get a DV factory instance.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317977 13f79535-47bb-0310-9956-ffa450edef68"
3409850295b436c6948d7bf5ce4da48003d21500,"Part of fix for 4549200 Xerces2 does not conform to draft JAXP 1.2 spec


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317978 13f79535-47bb-0310-9956-ffa450edef68"
19b32b8bd81203d413e5eacf74c1932aee9ef4c6,"Part of fix for 4549200 Xerces2 does not conform to draft JAXP 1.2 spec


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317979 13f79535-47bb-0310-9956-ffa450edef68"
4b108674841fa127c6a8fc0d8888676d6258055e,"Continued: Part of fix for 4549200 Xerces2 does not conform to draft JAXP
1.2 spec.  Forgot part of fix.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317980 13f79535-47bb-0310-9956-ffa450edef68"
e7e17c40dac023564bc355cca8074fecf8c0822e,"collect partial validation information for PSVI


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317981 13f79535-47bb-0310-9956-ffa450edef68"
3332ac34b4f0a74953ad0c04cb3c1e948b3482f7,"Implementation of PSVI writer by  Arun Yadav,Sun Miscrosystem.
Added PSVIConfiguration and PSVIParser to the samples in xni.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317982 13f79535-47bb-0310-9956-ffa450edef68"
a0b4034a24e2cf38899312c57e99f2389f5dcb07,"Implementation of optional ""false"" value for ""create-cdata-nodes"" defined in
DOM L3 by Rahul Srivastava, Sun. This feature also needs to be supported by
Xerces Jaxp implementation.
Reviewed by: Elena Litani, IBM


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317983 13f79535-47bb-0310-9956-ffa450edef68"
a63c1f9b5f6fb17b711ca1b798f0caa0300dd2c4,"PR:
Obtained from:
Submitted by:
Reviewed by:
Testing cvs commit. File not modified.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317984 13f79535-47bb-0310-9956-ffa450edef68"
0c2b0067c9b907d728ef3a1535c4aaeee05b5e72,"some long-awaited documentation updates reflecting the jarfile split.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317985 13f79535-47bb-0310-9956-ffa450edef68"
b3ba0e786abadc2692f8aea236902f69381e7ace,"some fixes to make alt tags more readable


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317986 13f79535-47bb-0310-9956-ffa450edef68"
54c32d1de125c5e11267a7e44e5d87c54aac7f23,"Solving the relative uri problem for xml schema include/redefine/import.
This should fix bug [4713].


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317987 13f79535-47bb-0310-9956-ffa450edef68"
9e55dcbe03abe683dccd416879f3896d9f6bfb97,"update encoding map so that it contains all IANA aliases (except those with ""cs"" prefixes, since it is not clear that IANA intends them for this purpose


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317988 13f79535-47bb-0310-9956-ffa450edef68"
a16fb7166244595ac090ecda5b37a3db2d9118b9,"Revert to previous version 1.7


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317989 13f79535-47bb-0310-9956-ffa450edef68"
72f787a0794bcf254ace7d5ee7f2b9d28ca28f5e,"1) Updated samples to new XNI interfaces.
2) Added incremental option.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317990 13f79535-47bb-0310-9956-ffa450edef68"
68169e6c70704741b6b7b8684ec68b69ca1d1c5e,"Fix validation switches so that they implement JAXP 1.2 proposed spec.  The
schema association w/ instance doc still needs to be implemented.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317991 13f79535-47bb-0310-9956-ffa450edef68"
54804e8a886d914bbde721a2f282656dbbd5257f,"changes required because we use null for no uri in XNI


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317993 13f79535-47bb-0310-9956-ffa450edef68"
0a0fae26fe67979d7091a649b1c760895c747bc5,"updating XMLReaderFactory to SAX 2.0 R2 Pr3 level.  This makes loading class parsers more robust, in way similar to the previous update of ParserFactory.  Note that this commit also addresses the two alternative methods for locating a default XMLReader that the new XMLReaderFactory provides--that is, an entry in META-INF/services is included, and the XMLReaderFactory defaults to our implementation if no other is found.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317994 13f79535-47bb-0310-9956-ffa450edef68"
a2e63c7a8b06efd394d4d1ccef546bc5764727c2,"Fixing bug [5153]: Pull parsing of prolog broken (and epilog).

Sorry that the commit looks much bigger than it really is because of
white space changes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317995 13f79535-47bb-0310-9956-ffa450edef68"
32915d2ec0d9c69d6580684f59f2c6ecd5bf7b3e,"Updated PSVIWriter to generate ""xerces"" version of PSVI output, as well as fixed some bugs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317996 13f79535-47bb-0310-9956-ffa450edef68"
b8ff71740d9aaec50b6fad105e2b71b5a7401064,"Predefine ""xml"" prefix during XML Schema Parsing.
Update XNI:
- add XML_URI and XMLNS_URI constants
- add clear method to Augmentations


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317997 13f79535-47bb-0310-9956-ffa450edef68"
a8a693f222566af8decc072396d327a348c17a09,"PR:
Obtained from:
Submitted by:
Reviewed by:
Replaced key ""general"" with ""General"" which otherwise leads to an exception.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317998 13f79535-47bb-0310-9956-ffa450edef68"
2e3dc70f0181b23b8f368070018a731c94750f1c,"Make field public to allow sub-classing of XMLSerializer.
Patch by: Brian Thomas


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@317999 13f79535-47bb-0310-9956-ffa450edef68"
d33a56770d976f955786b6e7ea31e6ea50336647,"fixed cloneNode()


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318000 13f79535-47bb-0310-9956-ffa450edef68"
896b5340610c8c1e87c982d027ca1c98fa7f5498,"added missing Range feature which we support


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318001 13f79535-47bb-0310-9956-ffa450edef68"
587c52fa8c58e65dca666a44571172e2252a9c9b,"added DOM tests to the test target,
people MUST run those tests before committing changes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318002 13f79535-47bb-0310-9956-ffa450edef68"
fbc57d4641aa62c13b600568973c1a170aa5cc6c,"added a few tests


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318003 13f79535-47bb-0310-9956-ffa450edef68"
5dc585678e44dd98395822afbdf950f441f2a883,"No one is relying on these files. Removing them from v2 directory.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318004 13f79535-47bb-0310-9956-ffa450edef68"
4b6e5feb6b5be99607c647a04c24873308c07d21,"Change the default parser configuration to StandardParserConfiguration.
In standard config move the setup of the pipeline to parse(boolean) (the components of the pipeline will be reset there as well).
Standard config will add XML schema Validator to the pipeline if schema validation feature is turned on.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318005 13f79535-47bb-0310-9956-ffa450edef68"
371a2aab5f523cab20369efa0556abe2675cad0a,"Turn schema feature off by default


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318006 13f79535-47bb-0310-9956-ffa450edef68"
f1e99bee7a1f9433cf97acbbd01b73498a7a975c,"No longer wrapping RuntimeException in the parse method
so that application errors get passed out correctly.
Bug:	5076


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318007 13f79535-47bb-0310-9956-ffa450edef68"
5255e26297d6c63677493f7f8e8641aeb2da16f9,"fixed bug in code handling EntityReference node subtrees
that left the node empty in non deferred DOM.
Also fixed a bug in importNode of EntityReference nodes which mistakenly
carried the old value.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318008 13f79535-47bb-0310-9956-ffa450edef68"
1518c9e49e51e6eed273482fcc98cf7c1fe3df8b,"fixed cloneNode() on Entity and EntityReference


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318009 13f79535-47bb-0310-9956-ffa450edef68"
4f1a0d2761600fa752e3fc10c00cce87e3049f27,"fix some small bugs in encoding support.  Now we at least recognize EBDIC and many flavours of Unicode and UTF-16.  We still cannot process documents written in these encodings.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318010 13f79535-47bb-0310-9956-ffa450edef68"
a514d37706e2624f5fd334e6e2a64c772d549d51,"update releases doc


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318011 13f79535-47bb-0310-9956-ffa450edef68"
c25927880314d5e3458d5c00c28a1affa1915e3b,"1. Updating an error message for element and attribute traversers.
2. Error were not reported for unnamed global simple/complex types.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318012 13f79535-47bb-0310-9956-ffa450edef68"
1c0b33d4a84fe56279b5e59b4b23a743b4e9d6b6,"if there is no default attribute value, pass null for value to attributeDecl in the pipeline and ensure consumers can handle it


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318013 13f79535-47bb-0310-9956-ffa450edef68"
d274034cb73bdb1349776b1fc2ee385b85047893,"predefined entities should be sent to startEntity method of LexicalHandler by default


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318014 13f79535-47bb-0310-9956-ffa450edef68"
e3edd80d20c4bfd676ff987dc384e998db5ee925,"Update the release document for changes in the coming release.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318015 13f79535-47bb-0310-9956-ffa450edef68"
d20a21c1f1d758911777d3f2531bb31158def026,"Build javadocs for DOM L3 apis


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318016 13f79535-47bb-0310-9956-ffa450edef68"
244768ec01f3a7d186e91cc5431abb34d273d918,"Modified APIs to include reference to DOM L3 APIs
Modified FAQ:
- general to include questions about DOM L3, PSVI
- configuration and validation: to explain how xerces validation works
Modified description of validation features
Modified xni samples to include reference to new PSVI samples.
Commented out xni-core API description (instead should look at javadocs)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318017 13f79535-47bb-0310-9956-ffa450edef68"
49f1ef797c91cb9ebe3480fabda70c2b87f3929b,"In some cases (preparse a grammar via dom3 as api, for example), there is
no current entity. This check prevents seme NPE to happen.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318018 13f79535-47bb-0310-9956-ffa450edef68"
f9fa5e7d2704ffe4c0b275fbb32b49cd876ce66e,"1. XSDHandler is always expecting an entity resolver, so if the application didn't
set one, we should use entity manager (the default implmenation) instead.
2. A check to prevent NPE.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318019 13f79535-47bb-0310-9956-ffa450edef68"
5b8e552d2af617d85a74f3b4c2eeb5369a79ccc3,"A new sample program to illustrates how to use DOM3 DOMASBuilder
interface to preparse ASModels and associate ASModels with an instance
document to be validated.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318020 13f79535-47bb-0310-9956-ffa450edef68"
cdb6c39fc7d7711dd4fca00fa6762e8fe3fa6192,"Updating documentation for the new ASBuilder sample.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318021 13f79535-47bb-0310-9956-ffa450edef68"
026b83d1445d83aeca64fa80c18c163d686614ed,"DOM Level 3 extensions


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318022 13f79535-47bb-0310-9956-ffa450edef68"
beba887c092863184ad414fd5e3cccedb8167720,"added some DOM Level 3 Core features:
DOMImplementationSource, Node.set/getTextContent(), Node.isSameNode(),
Node.getInterface(), Node.set/getUserData()


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318023 13f79535-47bb-0310-9956-ffa450edef68"
efdb9eb3b46ea802d823de85b793950dc9e009dc,"added some DOM Level 3 tests


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318024 13f79535-47bb-0310-9956-ffa450edef68"
a1f1c3541774b27a03cf8266f54a3feeb1f2dfce,"add support for EBCDIC and make support for UTF-16 more robust.  Did this by adding an inner class to XMLEntityManager to wrap InputStreams, in place of the OneCharReader inner class that attempted to rwrap readers.  Because of the way Java-supplied readers work, the former method would not work in general.  While this method does, its downside is that it is not possible to get the wrapping object out of the way as it was in the OneCharReader case, so it is likely to be somewhat less efficient.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318025 13f79535-47bb-0310-9956-ffa450edef68"
675d86ef1c5c7b6661e2cf7c35cab3fd787ea539,"added DOM Level 3 Core stuff


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318026 13f79535-47bb-0310-9956-ffa450edef68"
3ac34aa1574d5844fd3a89d79eb16ff9821e5b8c,"PR:
Obtained from:
Submitted by:
Reviewed by:
Code not modified. Checking cvs commit notification mail.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318027 13f79535-47bb-0310-9956-ffa450edef68"
a0188b4589ee79c255c798af2e48bbe83865946d,"PR:
Obtained from:
Submitted by:
Reviewed by:
Code not modified. As Sam fixed my problem. This commit should generate a commit notification mail.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318028 13f79535-47bb-0310-9956-ffa450edef68"
41c8a3af070d62219681b05eb45a70473424bce1,"updated docs to include info for DOM l3


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318029 13f79535-47bb-0310-9956-ffa450edef68"
d591b5c3b7266357f1782050a35cbbb0b10a2b0c,"add dom3 document


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318030 13f79535-47bb-0310-9956-ffa450edef68"
4b07d05ea1e958483408ae68f0f595190be1f293,"fix problems when reading external entities and other documents without an XML decl


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318031 13f79535-47bb-0310-9956-ffa450edef68"
d58ce8f71c6db95de2cbf00c3af7ff70388c0061,"Should apply schema default value only when:
nil is false and no character/element content.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318032 13f79535-47bb-0310-9956-ffa450edef68"
5e52daa8d5a8310d2df86000b5a2189a97794f52,"add implementation of DOMImplementationAS


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318033 13f79535-47bb-0310-9956-ffa450edef68"
e1c9a67a355058f9211102f87cc3eb889194ae3d,"update sample to use DOM interfaces


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318034 13f79535-47bb-0310-9956-ffa450edef68"
96eae2ecb716b482ad3f2dc185f0748124b72c01,"specified should not be provided if attribute was defaulted from XML Schema


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318035 13f79535-47bb-0310-9956-ffa450edef68"
cc2e61b1f35d77423aaa548c3a65c4f569b63f47,"change validation description


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318036 13f79535-47bb-0310-9956-ffa450edef68"
9486cc21dcca42cf133a88995e4e36a7fd2999c1,"update release info


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318037 13f79535-47bb-0310-9956-ffa450edef68"
eee000fa0f0360f345e80d35b2c811b1b88c6c83,"added setting of some of the new DOM Level 3 attributes:
encoding, actualEncoding, version.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318038 13f79535-47bb-0310-9956-ffa450edef68"
1b71abafc9ef513df561b4e64451c82a949fb259,"fixed something I missed when moving the code from CharacterDataImpl
See bug #5360


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318039 13f79535-47bb-0310-9956-ffa450edef68"
4784ec490ab1f20ff2909e4086a4774a9b649b05,"fixed NPE in readObject


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318040 13f79535-47bb-0310-9956-ffa450edef68"
22aede7635554e8d14cba6f8d12548f1b225273a,"a few corrections + a number of wordsmithing fixes for the documentation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318041 13f79535-47bb-0310-9956-ffa450edef68"
ccab4f6a9b620a494498749ad095f6e29c41a00a,"The <note> element should be put outside of <ul>.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318042 13f79535-47bb-0310-9956-ffa450edef68"
bd7f5cc07eb1ba563bdc1be64da883070a816fed,"Fix bug: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=5216


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318043 13f79535-47bb-0310-9956-ffa450edef68"
dfc183e47bcc1bdebfdb802f4149f21942589555,"fix typos


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318044 13f79535-47bb-0310-9956-ffa450edef68"
e7637541fc878a911853e60d3a9988ae954e7768,"more doc updates--forgot to include info about jar file split last time.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318045 13f79535-47bb-0310-9956-ffa450edef68"
fae42e200ceca093c3493248b6b40c62c2b06033,"changes so that the parser will run on 1.1.8


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318046 13f79535-47bb-0310-9956-ffa450edef68"
bdd663c39e2a38fa593bbdd95d4f0744e4d75f65,"changes for Xerces 2.0.0 beta 4.  Also modified the ""all"" build target to generate a binary distribution containing the old-style jarfile.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318047 13f79535-47bb-0310-9956-ffa450edef68"
7959c95cb72fdeb0232598e9aac5037794df17e3,"forgot to add contributions from Lisa Martin to the release doc yesterday (sorry Lisa!)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318049 13f79535-47bb-0310-9956-ffa450edef68"
3decb44a94638c727017b0cacf612eea8742dac2,"fix a bug where we would parse a document with a Java encoding (not an IANA encoding) irrespective of the value of the allow-java-encodings feature.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318050 13f79535-47bb-0310-9956-ffa450edef68"
032a48717bfc1108699eafb887460f03e0142bec,"PR:
Obtained from:
Submitted by:
Reviewed by:
When namespaces and namespace-prefixes are true, the localpart should be a empty
string for attributes xmlns:x="".."" and xmlns="".."" as per SAX documentation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318051 13f79535-47bb-0310-9956-ffa450edef68"
63fbbba72df95c98af2836cac35bab2938e41330,"update schema limitations document to reflect the fact that we do support UPA, element-cos-consistent and restriction-related constraints.  Also do a bit of wordsmithing.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318052 13f79535-47bb-0310-9956-ffa450edef68"
f0a2f2da48740518796bc37d015ae3fd70f2c5d5,"To be consistent with other global-scoped components, we need to set
<key>/<unique>/<keyref> elements to hidden before traversing them.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318053 13f79535-47bb-0310-9956-ffa450edef68"
665bfb076f46fb0e21eeae0afabc24e41afadf0c,"bug fix http://nagoya.apache.org/bugzilla/show_bug.cgi?id=5546


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318054 13f79535-47bb-0310-9956-ffa450edef68"
4c02c4ce4d343b3afdae2fbf337cbd0a9ed06f05,"textDecl and xmlDecl were never called


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318055 13f79535-47bb-0310-9956-ffa450edef68"
2f8a7dcc80c7895e1dd0722c806abceb0ce296e6,"xmlDecl had a wrong number of parameters


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318056 13f79535-47bb-0310-9956-ffa450edef68"
5fe4a3c1331bc4671d7dd35a3b8c7d2c34a2aee9,"Added internal subset string to DOM.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318057 13f79535-47bb-0310-9956-ffa450edef68"
9054e4e562cd75b0da7f2c737056d2715d54f280,"Bug fix http://nagoya.apache.org/bugzilla/show_bug.cgi?id=5122


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318058 13f79535-47bb-0310-9956-ffa450edef68"
4abea18626bc67b2adfe9e68d7b7ab0e7ed37c6a,"were no longer using the style-apachexml jar; its contents live under the docs directory.  Therefore, removing that file and removing references to it in the ant script.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318059 13f79535-47bb-0310-9956-ffa450edef68"
fdd9579bb7dbf1c6cb84d9909ffb64bdd810a264,"Properties ""external-schemaLocation"" and ""external-noNamespaceSchemaLocation""
were not recognized by the standard configuration.
Now it's fixed. Thanks to Gopal's patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318060 13f79535-47bb-0310-9956-ffa450edef68"
7601145b65f9142a562a1dc2e67cb3628541dca6,"Performance improvement: statically create one instance of the template
base uri, instead of creating one whenever ""getActualValue"" is called.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318061 13f79535-47bb-0310-9956-ffa450edef68"
978068b9ec2f593dcdaa4bc56c24660c13d96888,"According to the schema spec, it's an error if included or redefined documents can't be found. But it's ok if an imported document is not found.
An warning is issued in the latter case.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318062 13f79535-47bb-0310-9956-ffa450edef68"
08a6b1c7c27c46266d7a7fc581f9a2437b8ac85c,"Updating error messages for simple types.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318063 13f79535-47bb-0310-9956-ffa450edef68"
fe7a6b2a62448e58cda78a8b3dd11d1b80feebcb,"1. We can access anySimpleType directly from the SchemaGrammar class.
This is more efficient than looking it up in a hashtable by name.
2. After ""getGlobalDecl"", we need to check whether the retuned type is a
simpleType, before cast it to XSSimpleType.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318064 13f79535-47bb-0310-9956-ffa450edef68"
395f820758fccf827821bff49a046561d7f05ea2,"Implemented methods for the four fundamental facets. Thanks to Neeraj's patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318065 13f79535-47bb-0310-9956-ffa450edef68"
811c1ec6960c1bc1f0a4feb9aa4f8dff450f3d74,"implemented support for UCS-2 and UCS-4 encodings by the use of a custom Reader class.  Still need to revisit performance issues related to reading input character-by-character when that is not necessary.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318066 13f79535-47bb-0310-9956-ffa450edef68"
83bf97a5c1620955ef46f621e236153490d05ab8,"Default schema validation support is false


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318067 13f79535-47bb-0310-9956-ffa450edef68"
2ddb8cdb2235d3b13c07a67d8628c2a1a872b0d2,"Default schema validation support is false


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318068 13f79535-47bb-0310-9956-ffa450edef68"
c12945c0040d57461bc79700fba5865253499c4e,"implement (finally!) redefinition constraint src-redefine.6.2.2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318069 13f79535-47bb-0310-9956-ffa450edef68"
8aff39894893717c87f940e7108c559c3e840257,"when a schema cannot be resolved to in an <include>, we should indeed produce a warning, not an error.  Also implement warning production when a <redefine> oontains only <annotations> and its cchemaLocation cannot be resolved to.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318070 13f79535-47bb-0310-9956-ffa450edef68"
7caaacacb0ccda1add99794bd9a91b33510008e9,"fix two minor typos


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318071 13f79535-47bb-0310-9956-ffa450edef68"
ca5c78b55af32c04a80ec21644447b1950c14d4f,"fixed a typo whereby we were storing NMTOKENS as the type of an attribute when it should have been NMTOKEN


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318072 13f79535-47bb-0310-9956-ffa450edef68"
d336bef19b8407547a5040fd7ac5fc56ad49e4c3,"in attributeDecl call, the type should be a parenthesized list of tokens for enumerated types.  Fix for bug 5317


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318073 13f79535-47bb-0310-9956-ffa450edef68"
eae7f9baa411fb31a14b444d5871de7167b32603,"Minor output adjustment.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318074 13f79535-47bb-0310-9956-ffa450edef68"
ce27cb6142a8bc9da38911a09656e8c13ab63182,"PR:
Obtained from:
Submitted by:
Reviewed by:
Javadoc fixes for HTML DOM


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318075 13f79535-47bb-0310-9956-ffa450edef68"
f59f47412e404f4984480a45a99957ac07d287d4,"PR:
Obtained from:
Submitted by:
Reviewed by:
Javadoc warning fixes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318076 13f79535-47bb-0310-9956-ffa450edef68"
72e1bbad5ca45562eb19a4df8e9b331edc138eb2,"1. Provide getPrimitiveType() and getPrimitiveKind() for atomic types;
2. Pass an extra array to applyFacets, for namespace context. This is used
for qname resolution.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318079 13f79535-47bb-0310-9956-ffa450edef68"
1f9f70459fd56ce3eb536daac4ee7de8dbee3881,"When traversing simple type restriction, need to record the namespace context, so that qname enumeration values can be properly resolved later by simple type classes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318080 13f79535-47bb-0310-9956-ffa450edef68"
fae1f4694b43fd2409a47824875cf69a285aa8b9,"""isNotationType"" is removed from XSSimpleType. Use ""getPrimitiveKind"" instead.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318081 13f79535-47bb-0310-9956-ffa450edef68"
835e87088d5546c6a958ae1fb6319943eb0d3fa4,"According to the interpretation from the Schema WG about ""empty"" content type of complex types, no children is allowed at all: not even PIs or comments.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318082 13f79535-47bb-0310-9956-ffa450edef68"
439d6f838e81eb9704b9fa34d91cf61f606a3e39,"Udating a confusing message.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318083 13f79535-47bb-0310-9956-ffa450edef68"
8e17923a6b9c4274e86996b80069f74347e6a03c,"Fixing bug [5788]: when there is no children under <extension> of <simpleContent>, we didn't copy attribute uses from the base type.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318084 13f79535-47bb-0310-9956-ffa450edef68"
e811016a5d2e10581543ab1d221dd561be6e3b56,"Minimum number of arguments should be 2, not 4.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318085 13f79535-47bb-0310-9956-ffa450edef68"
a40aa2b2e52aa5ce6ba101aa203466b99a3558dc,"Bug fix: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=5694

If the same entity ref appeared more than once in the document, we would throw DOM exception: Modification not allowed.
That happens because we synchronize entity reference nodes when fCurrentNode.getLastChild() (from characters()) is called on the entityref node. In the result we were automatically appending all content to the entity ref from the doctype and making this node read only.

The fix: do not synchronize entity ref nodes when those are created by DOM parser. The DOM parser will append the correct content to the entity ref.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318086 13f79535-47bb-0310-9956-ffa450edef68"
cb2846d271d09a33b1e64a91b982daf152a7bc83,"Implemented namespace fixup during serialization of DOM tree.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318087 13f79535-47bb-0310-9956-ffa450edef68"
13be0a757bfa33e021b6ce3eec7abe92fe642c59,"Test program for namespace fixup alg


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318088 13f79535-47bb-0310-9956-ffa450edef68"
6ae8ad63033bd64d2f0c7c1d3bc6baf76fe1976a,"Added ability to override default parser configuration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318089 13f79535-47bb-0310-9956-ffa450edef68"
c35807fb04d1b83c69553f7b5afed070aeced7a4,"use error messages from XMLSchemaMessages.properties instead of hardcoding them in calls to reportGenericSchemaError


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318090 13f79535-47bb-0310-9956-ffa450edef68"
c254a2a6c3dcd02776eac8b414689d2950ee464f,"clean-up.  Eliminate // REVISITs that have been revisited and get rid of some Xerces1 leftovers.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318091 13f79535-47bb-0310-9956-ffa450edef68"
5836160e8acb22b26e4cbb22fa5d3b9cecfa2abb,"update error messages


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318092 13f79535-47bb-0310-9956-ffa450edef68"
5c311571fa5e79d99452f75e1e91d6c63254d97f,"cleaned up output


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318093 13f79535-47bb-0310-9956-ffa450edef68"
05ca0d71bb9c501662dd14120e1afc9633e77e0a,"output expected to be produced by the test program


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318094 13f79535-47bb-0310-9956-ffa450edef68"
09a2a1da2a2af354ef1f4c7b75b4eca80532239c,"Added FAQ page for the Xerces Native Interface. The first entry
details how to override the default parser configuration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318095 13f79535-47bb-0310-9956-ffa450edef68"
8545d99831c7747e185e6122dd2ef60e0d1ae738,"Documentation fixes related to: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=597


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318096 13f79535-47bb-0310-9956-ffa450edef68"
474a683ae11a84aaa7da8861708189c9d0c5d551,"Bug fix: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=2389


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318097 13f79535-47bb-0310-9956-ffa450edef68"
afdb7411dcd3834cf9246583344bd05830cfcdc3,"Update simple type error messages: get rid of ""General"", and use error codes
from the schema spec.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318098 13f79535-47bb-0310-9956-ffa450edef68"
78f1c0f3eda2e9e3ac06c450c52961b62d895dae,"Cleanup all reportGenericSchemaError() method calls.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318099 13f79535-47bb-0310-9956-ffa450edef68"
d517308f4cf776e3a24a5f1e479bd63312ba225e,"If an child-element is not expected, an error should be reported against
the parent element (an error code in the PSVI item of the parent element).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318100 13f79535-47bb-0310-9956-ffa450edef68"
a1166be36f1644921193156820e4fe43a8e5d774,"Fixing bug [2703]: change network path ""\\host\blah"" to ""file://host/blah"", so that we can find other file paths relative to this one.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318101 13f79535-47bb-0310-9956-ffa450edef68"
607005226b68a0507bbfe48cc12cdd399693cde5,"Provide more accurate error message in the case where the base type of
a simple type can not be found.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318102 13f79535-47bb-0310-9956-ffa450edef68"
218e5367010c771d21d5ac504155d0a1dfef749d,"Add the namespace uri to the symbol table.
This wasn't done for namespaces from the xsi:schemaLocation attribute
in the instance document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318103 13f79535-47bb-0310-9956-ffa450edef68"
1479c089b0e75a0539eb5e985835e8cde13727dc,"PR:
Obtained from:
Submitted by:
Reviewed by:
Javadoc fixes for HTML DOM and Serializers package


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318104 13f79535-47bb-0310-9956-ffa450edef68"
c7eb1696ba82963b3c5fae0c3e3fce6270fa43cb,"first part of changes related to including Grammar caching API.  Renamed XSGrammarResolver to XSGrammarBucket to more accurately reflect the function of this class.  Changed XMLDTDValidator to use its own custom GrammarBucket instead of the (future) grammar pool implementation.  Also renamed impl.dtd.Grammar to impl.dtd.AbstractDTDGrammar to feflect what this class does.  All other changes made to make things compile.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318105 13f79535-47bb-0310-9956-ffa450edef68"
008f1bbdf7de8db4054124e5d8e734aec6d43a3a,"fixed report of event phases which were completed mixed up


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318106 13f79535-47bb-0310-9956-ffa450edef68"
8f585d32b7523597391beed79bf60c1c17dd3450,"updated with correct event phases


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318107 13f79535-47bb-0310-9956-ffa450edef68"
be17504692a97ba25a10dfe6e81dab96c914bcb8,"phase 2 of Grammar caching-related updates.  Now the new interfaces are added, and the Grammar class (now an interface) has been moved to the new xni.grammars package from its former home in impl.validation.  All classes have been changed to use the new GrammarPool.  Still to do:  1. add XSDDescription.java; 2. incorporate the new XMLResourceIdentifier into XNI callbacks; 3. extend XMLLocator from XMLResourceIdentifier; 4. make sure docs are up-to-date to reflect new ways of doing things.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318108 13f79535-47bb-0310-9956-ffa450edef68"
6dbd9c98750799df3a5b292c2dfe140348a325a2,"grammar pool initial implementation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318109 13f79535-47bb-0310-9956-ffa450edef68"
b13adfee2ae807cf843f6c404b9c44eede624b12,"left out of previous commit


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318110 13f79535-47bb-0310-9956-ffa450edef68"
3ab415d7dafa215200ac649c52fc391492294f1d,"implemented DOM Level 3 isEqualNode() method


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318111 13f79535-47bb-0310-9956-ffa450edef68"
5da29edb9a00559aabe3f9325993f5524b66f89b,"added tests of DOM Level 3 isEqualNode() method


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318112 13f79535-47bb-0310-9956-ffa450edef68"
d17bd79b37c08112fd190688cf693cb9239f121f,"Fixing bug [5884] and [5929]:
In the old implementation, when there are multiple <any>/<anyAttribute>
elements in the xsd file, it's possible that the ""process contents"" value in one
wildcard is overwritten by that value from another wildcard.
Now it's fixed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318113 13f79535-47bb-0310-9956-ffa450edef68"
773460951cc0de7e055fa899a91506e4e6fba24d,"Predefined entities should be reported via startEntity in SAX by default.
In DOM predefined entities are expanded by XML processor.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318114 13f79535-47bb-0310-9956-ffa450edef68"
1ab22779af45496ed09d0d35aa50271c6e881b33,"fix for bug id 5927. Thanks to 'Taki' for the solution.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318115 13f79535-47bb-0310-9956-ffa450edef68"
e94cfece717a676ae2799d5c030d2ed5982d1e27,"committing some (slightly modified to take care of regressions) massive XNI changes on behalf of Andy Clark.  These make use of XMLResourceIdentifier in start.*Entity calls, and add Augmentations to various DTD Handler callbacks.  Things yet to do:
1.  Make Augmentation callbacks consistent.  They are null sometimes, not others; need to make them null by default.
2.  Propagate XMLResourceIdentifier to remaining methods it could and is not being used in.
3.  Tie XMLResourceIdentifier and XMLLocator together.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318116 13f79535-47bb-0310-9956-ffa450edef68"
a1d2180b43c98e72a99852ef7c59b5b53be15f87,"PR:
Obtained from:
Submitted by:
Reviewed by:
Update to DOM L3


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318117 13f79535-47bb-0310-9956-ffa450edef68"
b256754aaa860e5feea21a998d205fc814402169,"If an XML document did not have any internal DTD subset we were ignoring settings
for  load-external-dtd feature.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318118 13f79535-47bb-0310-9956-ffa450edef68"
95c464dc52bea778fd0051bfc68382c3642aa805,"Removed workaround for previous Beta3 code which is no longer needed and
causes additional bugs in combination w/ other apache properties.  Calling
setAttribute(name, value) w/ a value of null, causes name to be unset.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318119 13f79535-47bb-0310-9956-ffa450edef68"
f1dc890f1935338836c906ce95d34915a40b6ddf,"Solving many problems related to schema document resolution:
1. Bug[5849]: can't validate schema documents against the schema for
schemas;
2. We failed to report an error when the importing and the imported schema
documents have the same target namespace;
3. We failed to report an error when the including and the included schema
documents have different non-absent target namespaces;
4. We should use different error codes for similar errors related to importing,
including, redefining, and reference from the instance document;
5. We failed to deal with the case where the same schema document without
a target namespace is included by two other schema documents with
different target namespaces. We only considered one of the inclusions.
(Similar problem occurred for <redefine>.)
6. Bug[4421]: We failed to deal with the case where the same schema
document (with no target namespace) is both included and imported by the
same schema document. We only considered the first reference. (Similar problem occurred for <redefine>.)
7. In DOMASBuilderImpl, we should convert a URI input to an InputSource,
not the other way around;
8. If the input is a DOMInputSource, we need to create an XMLInputSource
accordingly;
9. For grammar-preparsing methods, we shouldn't call EntityResolver for the
locations.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318120 13f79535-47bb-0310-9956-ffa450edef68"
acc627b3a88f626eb4caa7d2362fa462bbc978b5,"Now we use property files for error codes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318121 13f79535-47bb-0310-9956-ffa450edef68"
8db71a48157de9720f8b32d152f82a596aa2cd22,"Synced up code to work w/ Xerces2beta4 in the area of JAXP schemaLanguage
property.  The code sets the appropriate internal features correctly now.
Also, returned the Xerces2 SAX parser directly for the SAX1 getParser()
call instead of wrapping it in a SAX2 ParserAdapter().


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318122 13f79535-47bb-0310-9956-ffa450edef68"
5c9fe676cddad619ff89cce9bde0c4d871650ab5,"Cleaning Javadoc comments for the recent XNI changes done.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318123 13f79535-47bb-0310-9956-ffa450edef68"
e4cbbff26d1739d6d6923df0ce043a2ba14dbdd2,"Cleaning Javadoc comments related to recent XNI changes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318124 13f79535-47bb-0310-9956-ffa450edef68"
a950068b7aa5cefcef1d1fcc8177128437400975,"start/endExternalSubset calls were not passed to next component in pipeline.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318125 13f79535-47bb-0310-9956-ffa450edef68"
629ff6c2f6bb99604bde50a2751640b5594f974c,"Synced up code to work w/ Xerces2beta4 in the area of JAXP schemaLanguage
property.  Misc code cleanup.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318126 13f79535-47bb-0310-9956-ffa450edef68"
01585d7f71918b07259943bdfbe7da312456f929,"Synced up code to work w/ Xerces2beta4 in the area of JAXP schemaLanguage
property.  Misc code clean up.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318127 13f79535-47bb-0310-9956-ffa450edef68"
5308e75bb25cdec66f898b7bf734e44b44f5db3b,"This large commit serves several purposes:

1.  As agreed on the list, adds XMLResourceIdentifier everywhere we would
otherwise pass publicId, baseSysstemId, literalSystemId, an expandedSystemId.

2.  Relates XMLResourceIdentifier and XMLLocator.

3.  Changes XMLParseException to fall in line with the new XMLLocator.

4.  Fixes bugs 5071-5073.

5.  Should also fix bug 5800 (not yet tested).

No basic validation differences should result, although API testing needs to be
more thoroughly examined.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318128 13f79535-47bb-0310-9956-ffa450edef68"
fee13267897dd7b8c61b5d35ff54e73d3decfed9,"1. Move the old schema dv implementation to a brahch dv_xs_v1;
2. Move the new schema dv implementation to the xs package.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318129 13f79535-47bb-0310-9956-ffa450edef68"
2d8005496aea56cab440f1baa8dfaad19d57a23a,"Should always use the entity manager, which is always there, and wraps
the user-defined entity resolver.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318130 13f79535-47bb-0310-9956-ffa450edef68"
9af3ba6c6ddcae0f5c940d344f8d7833d7dc08d9,"Should do derivation checking on attribute uses in the derived type, if their
{use} is prohibited.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318131 13f79535-47bb-0310-9956-ffa450edef68"
caf724f4c1202517e8c3578cb3ba73fa8dce9610,"Some messages looked ugly. Fixed them.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318132 13f79535-47bb-0310-9956-ffa450edef68"
9768ff6cd6cd57357deb3c4be70cb29bb476e3d2,"fix for bug #6008


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318133 13f79535-47bb-0310-9956-ffa450edef68"
0c89615b0bdfe565e769952ce9d81b62b7cd076a,"make passing of Augmentation parameters as null values, unless some component has actually augmented them, the consistent behaviour throughout the parser.  SchemaValidator now instantiates its own Augmentations when needed.  Also fixed some typos in the schema validator.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318134 13f79535-47bb-0310-9956-ffa450edef68"
2703919985970f7f594e615c94c07bc66ffa9b4c,"Updated features doc for string-interning feature. Default is true.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318135 13f79535-47bb-0310-9956-ffa450edef68"
aefc5b68934e8251897b337da156f40c3a6549da,"According to DOM L3 clarification:
Cloning an Attribute always clones its children, since they represent its value,
no matter whether this is a deep clone or not


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318136 13f79535-47bb-0310-9956-ffa450edef68"
521b8416e52cef9321bf01529856a59f237b8359,"Implemented current-element-node property for DOM.
Submitted by Ted Leung
Reviewed and modified by Elena Litani


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318137 13f79535-47bb-0310-9956-ffa450edef68"
3bb9a6ed5d138db5562af767c13e8a2ccc5ff2c4,"Fixing some component lookup bugs:
1. sometimes we failed to find a component from an imported document;
2. sometimes we failed to report an error for references to components in a
namespace which is not imported into the current schema document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318138 13f79535-47bb-0310-9956-ffa450edef68"
70bd56673b805dc3b6dece23d955c8129f96bd18,"fix ArrayIndexOutOfBoundsException that would result if one parsed a doc with an incomplete PI or comment.  Regression from XNI change of 01/22.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318139 13f79535-47bb-0310-9956-ffa450edef68"
212f769cf13fe8664a034da3bd23105a266dc2b4,"one more update to the encoding map--added IANA ""printer-friendly"" encoding names (those starting with cs).  This makes our encoding map considerably larger, but it is more comprehensive.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318140 13f79535-47bb-0310-9956-ffa450edef68"
6647bd6bcaca896a9a3779c079aa9c7e691d6fa3,"According to bullet 7 of the constraint ""Particle Restriction OK (Elt:Elt -- NameAndTypeOK) "", we should use {extension, list, union} for type derivation checking.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318141 13f79535-47bb-0310-9956-ffa450edef68"
72ec6b1037e12f145132eb59c29ea6474a65fcfc,"Document handler can be changed during the parse.
Fix related to http://nagoya.apache.org/bugzilla/show_bug.cgi?id=5084


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318142 13f79535-47bb-0310-9956-ffa450edef68"
f2b1d4db42e65a9821236ef4986a07c54d850df4,"DOM WG decided that for consistency with cloneNode, isEqualNode is always deep on Attr nodes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318143 13f79535-47bb-0310-9956-ffa450edef68"
752265928170ebf956f328cd962c05cf28f22248,"cleaned up separation between DOMParser and DeferredDOM by
moving part of the code from createDeferredElement back into the parser,
this has several benefits including to only have to walk the list of
attributes once


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318144 13f79535-47bb-0310-9956-ffa450edef68"
f17905e8fb81376d5e118eed13fcab5b2897f20f,"Added new XML Schema features:
a) validation/schema/normalized-value -- allows to expose XML Schema normalized values via DOM/SAX
b) validation/schema/element-default  -- sends characters() calls for schema element default values.

By default, both feature are set to true. The features are no-op if validation occurs against DTD.
If XML Schema validation is turned on, characters() include 2 values: XMLString always includes original value, Augmentations includes ElementPSVI for which normalizedSchemaValue property is set (if in element content).
XML Schema default attribute are always included in the pipeline with name, namespace, specified and value properties. Additional information, such as schema_specified is stored in Augmentations.

For all simpleTypes, but union, normalization occurs for each chunk of data we receive.
For union types, we can't normalize data until we receive all of it. Thus, for union types we do the following:
(1) sending of characters back to application is delayed till endElement()
(2) if characters() include some augmentations, XMLSchemaValidator will omit character() call with augmentations and empty string as a value. At SAX/DOM level those calls will be ignored.
(3) the normalized value for union datatype is send before endElement() call.

To do:
-- update docs
-- verify what should be behavior if entityref or cdata section


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318145 13f79535-47bb-0310-9956-ffa450edef68"
3ae6a2a916b887a96a7273ad87131abc1cd9f2fa,"PSVI writer should check if characters include element default value


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318146 13f79535-47bb-0310-9956-ffa450edef68"
f6f8d60353bf4480fff422192e00beeedb130608,"removed DesignDoc reference from javadoc


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318147 13f79535-47bb-0310-9956-ffa450edef68"
38fd18797719765645ba9c9d8a0327cbea7152a2,"removed DesignDoc reference from javadoc


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318148 13f79535-47bb-0310-9956-ffa450edef68"
68f9925163eab00bba13d1575f2e96a72823a553,"XNI updates:
1) xni/Augmentations: added
Enumeration keys() method that returns enumeration of keys in the Augmentations
2) xni/XMLAttributes: added
Augmentations getAugmentations(String qName) method
3) renamed some PSVI methods:
- schemaSpecified to isSpecified()
- added get* to some methods.

Minor fix: xni/parser/XMLConfigurationException
change constant value.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318149 13f79535-47bb-0310-9956-ffa450edef68"
92a091cb5c69f92872f5673b58a007b4f2566d76,"removed class files from CVS


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318150 13f79535-47bb-0310-9956-ffa450edef68"
98d75a07098cb8c015e1271388e1c1da909edee5,"Update samples to reflex some XNI changes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318151 13f79535-47bb-0310-9956-ffa450edef68"
dfbcd98ba9ce48623cb7328b899a58e67489fe9b,"fix for bug #6041.  The fix involvestreating SceannedEntities as external even if they have no systmId parameter.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318152 13f79535-47bb-0310-9956-ffa450edef68"
90490adfe83714f04d911e25adc730897148e2b6,"Effecting one more XNI change:  add a constructor to org.apache.xerces.xni.parser.XMLInputSource which has an XMLResourceIdentifier as its argument.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318153 13f79535-47bb-0310-9956-ffa450edef68"
195ce18a6b28abba88bea7313da0f902d71a8ecd,"Small modifications for normalization implementation: if element must have
no character data (nil) we will expose character data in error via SAX or DOM


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318154 13f79535-47bb-0310-9956-ffa450edef68"
94881fee71a0057287b346dd4a9ac7cd61304ab5,"release update


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318155 13f79535-47bb-0310-9956-ffa450edef68"
7ed2665bc3cce028d2b96a0b1077199bf3e2c17e,"Add new features:
validation/schema/normalized-value
validation/schema/element-default


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318156 13f79535-47bb-0310-9956-ffa450edef68"
24eec9245ef64e505f0804a7cd53382e5c04d5c9,"Update release docs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318157 13f79535-47bb-0310-9956-ffa450edef68"
4781bb00457039bd9b4c6a5343fff3ebb616ad7b,"Update docs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318158 13f79535-47bb-0310-9956-ffa450edef68"
bd45a0339c0acabe7c5e5669cb34d1eeb657a47a,"partial update of XNI manual to reflect the various changes that have been undertaken in the last month or so.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318159 13f79535-47bb-0310-9956-ffa450edef68"
bdfa182264f9d64a2848564ed1521e7ef4b1a366,"added line for my fixes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318160 13f79535-47bb-0310-9956-ffa450edef68"
a18c4fff498144db91b6ee02ca79ac900371bd76,"PR:
Obtained from:
Submitted by:
Reviewed by:
Javadoc fixes for org.apache.xerces.impl.dv


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318161 13f79535-47bb-0310-9956-ffa450edef68"
68d2585c893fa4db031d7f2a57e44c1350a88a8e,"PR:
Obtained from:
Submitted by:
Reviewed by:
reference correct variable in added getDocumentClassName method


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318162 13f79535-47bb-0310-9956-ffa450edef68"
925a49f1bb1418723537dce4c3d24344f0ff29c1,"updated copyright


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318163 13f79535-47bb-0310-9956-ffa450edef68"
de3860ac6837bddd337d49f97d1fe1805de4fc68,"cleaned up ^M characters


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318164 13f79535-47bb-0310-9956-ffa450edef68"
d5cb209c6ed2c132f1826cca5aa09604d4f1d41c,"Fixed a bug occuring when a ] is encountered at the end of an entity


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318165 13f79535-47bb-0310-9956-ffa450edef68"
06a879a38c30eb04f3ef003610c6ccea6a14f7ca,"1.Added support for warn on duplicate attribute definition feature
http://apache.org/xml/features/validation/warn-on-duplicate-attdef
its default value is 'false' when set to 'true' warnings will be issued
to the application through error handler.

2.Fixed the bug in which duplicate attribute definitions were not ignored
for ID datatype and Notation.As per XML 1.0 spec when more thean one
definition is provided for the same attribute of a given element type,
the first declaration is binding and later declarations are ignored.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318166 13f79535-47bb-0310-9956-ffa450edef68"
fbb8d012a20a9b72c34a022a83d010e5a8aa42e3,"reversing change: we must escape some characters like &lt; otherwise serializer
will produce invalid XML


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318167 13f79535-47bb-0310-9956-ffa450edef68"
7d0c2bb87d92be329803fc77588d2be525a28e80,"update release document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318168 13f79535-47bb-0310-9956-ffa450edef68"
ae1144f7cfa4d8ef518b8b88c31edd9c3d9e2b5c,"update docs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318169 13f79535-47bb-0310-9956-ffa450edef68"
859967b594e22deb6eaf37d7c2ac98f6886e5e5c,"update installation docs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318170 13f79535-47bb-0310-9956-ffa450edef68"
ae7392879178df344e416e1b914f25c5017ab7da,"1. Updated releases.xml to included my updates;
2. Two of schema bugs were fixed. Removed them from schema-limitation;
3. Now we support dos path, so removed the faq about it;
4. Added description for dom sample: DOMAddLines.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318171 13f79535-47bb-0310-9956-ffa450edef68"
fe972b7e8beb1a1cf68fe51909baa9e49a3b158a,"change ""old"" to ""deprecated""


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318172 13f79535-47bb-0310-9956-ffa450edef68"
d5ec9fb201ce08563f61e421d747b737959c8659,"Minor string changes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318173 13f79535-47bb-0310-9956-ffa450edef68"
97b9f33256801f2756332c9231e6df8e67733ce4,"Change the title of schema limitation page from
""Schema Implementation Limitations"" to ""XML Schema Limitations"".
But it's still open to a better title.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318174 13f79535-47bb-0310-9956-ffa450edef68"
3ae5f2a63c8732ed2163a741360827efee8b854f,"Bug in XSDHandler: convert null to """" before adding a namespace to a vector.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318175 13f79535-47bb-0310-9956-ffa450edef68"
cfbd6134f3413abb2f9ec424736021556dd70be0,"last of the pre-gold XNI changes.  replaced publicId, systemId and baseSystemId on various XMLDTDHandler calls with XMLResourceIdentifier.  This should also fix some bugs in the SAX DTDHandler as well.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318176 13f79535-47bb-0310-9956-ffa450edef68"
d2e7788123ef0f3a9a1373d6e9f5d2ee49441b2d,"minor rewording


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318177 13f79535-47bb-0310-9956-ffa450edef68"
bbdbac150be75e5887464169d712ab52de5e23db,"fixed a typo


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318178 13f79535-47bb-0310-9956-ffa450edef68"
8b233abf519a6f39fda9dbcf1f6d26ed89db02ba,"final? update to release documentation before Xerces 2.0.0


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318179 13f79535-47bb-0310-9956-ffa450edef68"
3a8a6860eb5d572038772088da07d588d8584da1,"modify mapping between Xerces and DOM L3 features


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318180 13f79535-47bb-0310-9956-ffa450edef68"
f4f31417c2b8420b1011b13963f4608ef91c6194,"some grammatical changes and info about deferred DOM


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318181 13f79535-47bb-0310-9956-ffa450edef68"
9cd1f4b82c8be890035d2d7131d6bbd1b9fca613,"update dom3 documentation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318182 13f79535-47bb-0310-9956-ffa450edef68"
6c6b759ff83740e6520ce4c736f1e7d9cf99a7c0,"Fixing three problems:
1. Close all streams/readers even seen by the parser after the parsing is finished.
2. Provide a way to explicitly close streams/readers if a pull-parser decides to terminate parsing before the document is fully parsed.
3. Provide line/column number even if the system id is not set.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318183 13f79535-47bb-0310-9956-ffa450edef68"
ec49d979aa19c4904127e747332a5edc08806f74,"fix for bug #6046 by Henry Zongaro.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318184 13f79535-47bb-0310-9956-ffa450edef68"
6139958777a2d1e218167223393285a2813e4262,"roll version number over to final release.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318185 13f79535-47bb-0310-9956-ffa450edef68"
17ee3afd13696bdcc3a2a05f889ec737b6ca89c7,"Sometimes the system id was not (properly) expanded. Now we expand it
before calling the user-defined entity resolver.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318187 13f79535-47bb-0310-9956-ffa450edef68"
ce2ea37fb0b36f22fe6b4067052baa2a784af801,"Bug fix: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=6165


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318188 13f79535-47bb-0310-9956-ffa450edef68"
e2be2c9206188ac333dfac3babdd6919010d6bf1,"update tests


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318189 13f79535-47bb-0310-9956-ffa450edef68"
e78b64e11d43900f668078137c805704ed7ea132,"Minor cleanup to JAXP code for constants


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318190 13f79535-47bb-0310-9956-ffa450edef68"
359516b5b07ad4e724c3c9bfa5e37e72a084b4cb,"First pass implementation of proposed JAXP 1.2 ""schemaSource"" property.
This code should not affect the way Xerces functions in any way unless a
certain JAXP ""schemaSource"" property is set.  There is also duplicate code
in XSDHandler.java that needs to be cleaned up.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318191 13f79535-47bb-0310-9956-ffa450edef68"
570571446d2b9ce0ace3bb49556634c31954b633,"First pass implementation of proposed JAXP 1.2 ""schemaSource"" property.
This code should not affect the way Xerces functions in any way unless a
certain JAXP ""schemaSource"" property is set.  There is also duplicate code
in XSDHandler.java that needs to be cleaned up.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318192 13f79535-47bb-0310-9956-ffa450edef68"
6bf28b47db6db30779a935f1ea2b84d2479506f8,"Clean up duplicate code for proposed JAXP 1.2 ""schemaSource"" implementation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318193 13f79535-47bb-0310-9956-ffa450edef68"
ccc66cc1eb9c63b79f15023d03f7c75a1721f5a1,"not only was this jar optional, it was entirely superfluous.  Getting rid of it to make clean-up of third-party jars easier.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318194 13f79535-47bb-0310-9956-ffa450edef68"
39bb4bfd8fd299b203ac94c21a47a9d76364ae5f,"Typo: becaues --> because


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318195 13f79535-47bb-0310-9956-ffa450edef68"
ab5219be464623ffea58c11b0f06ebe6349a2c02,"setNodeValue() should throw DOMException for read only nodes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318196 13f79535-47bb-0310-9956-ffa450edef68"
e9fcc96c99f8b8e317a85d4c25a14313695006fe,"Fixed documentation bug: the order of selecting the parser
configuration was incorrect in the documentation but correct
in the source code.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318197 13f79535-47bb-0310-9956-ffa450edef68"
904097a5cf772959c0c8da0459f7ef8077e5f529,"Fixing bug [6258]: we didn't handle /../../ correctly.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318198 13f79535-47bb-0310-9956-ffa450edef68"
6a6d4f67fcfa81ce4b0a9353e88dd903610ef098,"very initial grammar caching implementation.  This is guaranteed not to do anything since, as yet, the methods it uses from XMLGrammarPoolImpl are no-ops.
Still to do (at least):
1.  Make SchemaValidator use the GrammarPool framework properly;
2.  Fix up DOMASBuilder as much as possible to use standard GrammarPool methods
3.  Make the DTDValidator do something intelligent with the GrammarPool, and make the new XMLGrammarCachingConfiguration handle DTDs in some fashion.
4.  Most importantly, actually implement methods in XMLGrammarPoolImpl.
We should also modify the Grammar and XMLGrammarDescription interfaces as suggested by AndyC/Neeraj.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318199 13f79535-47bb-0310-9956-ffa450edef68"
daaac2cefa257ff0e5831ae6dcc1e40c366b1dd3,"took this class out of CachingParserPool since XMLGrammarCachingConfiguration now also needs it.  Also added a constructor to the SymbolTable class to allow its user to set the size--before hardcoded at 101.  For Grammar caching it makes sense to have this size a good deal larger.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318200 13f79535-47bb-0310-9956-ffa450edef68"
c4614cde3780050149f9693f279acfdf6932c216,"PR:
Obtained from:
Submitted by:
Reviewed by:
Add license files for ASF licensed software


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318201 13f79535-47bb-0310-9956-ffa450edef68"
a03c35b6742da7ec66a56c2b01f519a3cef112ea,"Fix JAXP DocumentBuilderFactory.setIgnoringComments() and
DocumentBuilderFactory.setExpandEntityReferences().


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318202 13f79535-47bb-0310-9956-ffa450edef68"
23d73fc37cb584b3e614c4d663419a30f5222e12,"updating Grammar and XMLGrammarDescription interfaces consistent with recent discussions on the xerces-j-dev list.  Now Grammars have XMLGrammarDescription objects, and the getGrammarType method is only found in the XMLGrammarDescription interface.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318203 13f79535-47bb-0310-9956-ffa450edef68"
e79e0ea23258f36a712e6fb63dc10817afe38cd2,"Adding junit license to the repository.  All our jars should now be properly licensed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318204 13f79535-47bb-0310-9956-ffa450edef68"
86bebad4319e48ceb19e8a9d34600cf69434e94d,"fix to enable validation of base64 material in schema instance documents on the OS/390.  Thanks to Stephen Dulin.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318205 13f79535-47bb-0310-9956-ffa450edef68"
874363b725dcbddf23ed1f1d07d9a6fcd6e3ca4c,"corrected attributeDecl signature in samples.
Thanks to John Spitzer for pointing that out (bug#6447).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318206 13f79535-47bb-0310-9956-ffa450edef68"
5d6f376c76cb1e6febee1f148a25b29dfa4322e7,"Cleaned some javadocs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318207 13f79535-47bb-0310-9956-ffa450edef68"
39f52a49410861f6952bdb712de3414473d08b65,"Printing the nonNormalizedDefaultValue passed to attributeDecl.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318208 13f79535-47bb-0310-9956-ffa450edef68"
073242e96b3826176aa6a1b6c43a9b2c59bea5d3,"Add a new way to create element/attribute nodes: passing an extra ""localName"" parameter, so that we can reuse the String objects we already have, instead of creating a new one.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318209 13f79535-47bb-0310-9956-ffa450edef68"
f8858e1369f71642ca32a23bbe411518062313d4,"Use the new way to create element/attribute nodes, if we are using the Xerces dom implementation, so that we can reuse the String objects we already have, instead of creating a new one.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318210 13f79535-47bb-0310-9956-ffa450edef68"
850f37292789783f1ddd6c42c641898880588420,"Added junit JAXP test program to test JAXP 1.2 features.  A minmal set of
features is tested, currently.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318211 13f79535-47bb-0310-9956-ffa450edef68"
e25b9ccf5e904801ffa79aa63464302bc8f26398,"Update DTD datatypes to use the new DV interfaces.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318214 13f79535-47bb-0310-9956-ffa450edef68"
1d91717db311ab9fe62b9a46e960ac6f688c3be0,"Didn't know why this was commented. (Because there were some bugs in
deferred DOM implementation?) But this feature is supported by DOM parser,
so I added the constant back.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318215 13f79535-47bb-0310-9956-ffa450edef68"
d9ad8339044addf567aa0e40fad79b7f41f454c2,"Take the logic of creating element/attribute nodes out of startElement,
so that these methods can be overriden in subclasses, and the nodes can
be created in different ways.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318216 13f79535-47bb-0310-9956-ffa450edef68"
acfa9980abc2094c1a6d2172f312bc613b114e3c,"DOM implementation internally used for schema traversal.
The only difference is that we store line/column numbers in element nodes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318217 13f79535-47bb-0310-9956-ffa450edef68"
ac01f2d385746ec751944403fdfe1f15674501c3,"The infrastructure for report line/column numbers of schema errors.
The next step is to use this infrastructure when reporting schema errors,
that is, pass the Element node (where location information is stored) to
reportSchemaError() method.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318218 13f79535-47bb-0310-9956-ffa450edef68"
5a0caa6977c1a49d144805812d51d5635f6ca578,"Now we have line/column numbers for schema errors!
With the exception of errors against the following constraints:
""Unique particle attribution"", ""Element Declarations Consistent"",
and ""Particle Valid (Restriction)"". (I'll be working on them soon.)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318219 13f79535-47bb-0310-9956-ffa450edef68"
c1a9bd8ca263719cb51dece7953af873c397c11d,"The abstract SAX parser class depended on the symbol table in
the configuration so that it could remove namespace binding
attributes based on the namespace-prefixes feature. But, if
the configuration doesn't have a symbol table, then the
symbols are null and it ends up removing *all* of document's
attributes that aren't in namespaces. Oops. So I removed the
dependency and changed it to perform an ""equals"" comparison
instead.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318220 13f79535-47bb-0310-9956-ffa450edef68"
434990e0d8daeee36672548313ed36994421c200,"Fixed some problems in the SAX parsers that assumed that all
parser configurations used with the parser class had certain
features and/or properties.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318221 13f79535-47bb-0310-9956-ffa450edef68"
8fc6e31e7347c91b4484ab9ab07fece8be38a153,"Bug fix http://nagoya.apache.org/bugzilla/show_bug.cgi?id=6482.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318222 13f79535-47bb-0310-9956-ffa450edef68"
3ecb886ce0766480f96539e1a733859e293cdd03,"Fixing bug [6528]: in the case where a global group has empty content, we didn't create the XSGroupDecl. But the correct behavior should be that we
create an XSGroupDecl with empty particle.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318223 13f79535-47bb-0310-9956-ffa450edef68"
f99ae1f6c139050daeed8ce4c52b0dadf5b50a50,"There is an easier way to get the current  XMLLocator: from startDocument.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318224 13f79535-47bb-0310-9956-ffa450edef68"
9cd46a235cdbbd92d3c0f94426d4602381f7787e,"The two files were moved to dv.util package.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318225 13f79535-47bb-0310-9956-ffa450edef68"
83ed30bde4ea1452990d6ae72171e07200b4c4e1,"Now we have line/column numbers for all schema errors!


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318226 13f79535-47bb-0310-9956-ffa450edef68"
6963905dac8ee1196c7a7582ed26fcbb2f75af28,"Using constants defined in impl.Constants.java and removing hardcodings for features and properties.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318227 13f79535-47bb-0310-9956-ffa450edef68"
89da0b0c64acf98c06603f12a475091dcaea7a7a,"add tests to verify correctness of namespace algorithm


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318228 13f79535-47bb-0310-9956-ffa450edef68"
85ff69d061189c45ca2f214c82c3de151d600f12,"Adding default grammar caching implementation support. If grammar is not
available with the parser, validator component gives a chance to the
application
1. to supply initial set of grammars to begin parsing with.
2. to supply the required grammar as per description.
3. to cache different grammars, validator component ended up with after current
validation attempt. Application can provide these cached grammar, available
to the parser before the next validation attempt.

	Current changes include schema validator and related components. Loading
of the schema grammar is deferred until there is actual reference to a component from
that namespace. Default implementation caches the Schema Grammar using namespace
as key. Application can always *over-ride* this behavior by providing its own
version of XMLGrammarPool impl or extending default XMLGrammarPoolImpl and can
choose to cache/supply Schema Grammars based on namespace & triggering component
or namespace & context etc.. or other information available through XSDDescription.
	Next set of changes (DTDValidator) need to be done for caching of DTD grammars.
Default implementaion will cache the DTD grammar as per the root element..
which can always be over-ridden by the application :-)

Thanks to pavani for her part of changes. Pavani, i have integrated my changes
with yours.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318229 13f79535-47bb-0310-9956-ffa450edef68"
3c759ad70c0b30fcfc7398b95553c9aa3880ea0d,"Add a method to get the wrapped error handler.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318230 13f79535-47bb-0310-9956-ffa450edef68"
c8d855e0480e81ef42e6e1a8b97353e1aaf8a167,"Fixing a line/column number bug, reported by Hua Yang.
Also converted some tabs to spaces :-) (a side effect.)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318231 13f79535-47bb-0310-9956-ffa450edef68"
3c980ae7921c93a72a72bf59fbe39a9827b4c8b9,"Introducing local namespace binder that only stores declarations for current namespace.
This will allow to solve the following problem:

<root xmlns:ns1=""http://example"" xmlns=""http://validdefault"">
<foo:elem xmlns:ns1=""newURI"" xmlns=""default""/>
</root>
If we don't remember what declarations we've seen on the local element we
won't know whether the declaration is a duplicate or it is redeclares previously
defined prefix.

We also store in the global namespace binder, the binding of an empty string to
an empty string (default decl xmlns="""") to solve the following problem:

<elem xmlns="""" xmlns=""default""/>
Let's say a user modified the tree by adding xmlns=""default"" declaration.
We need to bind default namespace to some string (ei. empty string), to be
able to omit duplicate declarations for the same element (related to the problem
described above).

This also fixes a bug: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=6516


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318232 13f79535-47bb-0310-9956-ffa450edef68"
256a43d2ab369ca3d42c1581694c8ccd6dfacf52,"Include tests:
-- element/attribute with prefix and namespace ="""" (empty string
-- duplicate declarations for the same prefix


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318233 13f79535-47bb-0310-9956-ffa450edef68"
46d42b241ab917d5c2293aef50576fbf637ffa74,"Fixing a multi-thread bug. All DV implementation classes should be stateless
(after construction).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318234 13f79535-47bb-0310-9956-ffa450edef68"
97a79c69f6a0db15eefa9f3dd8f851f3d90c6767,"Fixing a multi-thread bug. All DV implementation classes should be stateless
(after construction).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318235 13f79535-47bb-0310-9956-ffa450edef68"
2110aa88aaf6fa930accb99f28f00024cc691d7a,"Reverting the change: according to DOM L1 setting node value for DocumentType,
Entity, EntityReference, Notation is no-op. DOM L2 also specifies that for readonly
nodes implementation should throw no modification allowed exception (there is no
errata item for DOM L1).
Waiting for clarification from DOM WG.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318236 13f79535-47bb-0310-9956-ffa450edef68"
b39f00ef3300134cfc51f451552236264f69bb9e,"Output duplicate declaration for children if those declarations were specified in the tree.
""value"" for xmlns attributes should be added to SymbolTable before
additing it to the namespace binder.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318237 13f79535-47bb-0310-9956-ffa450edef68"
d6485149d6d1036b32568dcf4379758cfd5be3c8,"update (output duplicate declarations for children if those appeared in the tree)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318238 13f79535-47bb-0310-9956-ffa450edef68"
1063d3656b3588fe9e119f7252f8f996f4299fe5,"This class uses schema datatype implementation as separate library.
It shows,
    1. querying property information of Simple Type Definition Schema
Component as defined,
   http://www.w3.org/TR/xmlschema-1/#Simple_Type_Definition_details
   2. get built-in type/s and create new types as derived by
restriction, list or union, using factory methods of SchemaDVFactory.
   3. using those simple type (built-in/created) to validate the values.
   4. switching to different simple type implementation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318239 13f79535-47bb-0310-9956-ffa450edef68"
0b5432dc04ae3bf8bedf5135de19d86d07ce296b,"cleaning some code and fixed a bug where NoNamespace schema location hint
 would be used to parse schema ,
if no location hint is available for given namespace. Thanks to Sandy for
pointing it out.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318240 13f79535-47bb-0310-9956-ffa450edef68"
9159d1b97dccbaab007fb2dc060bc33377e21800,"Applying changes done by Pavani, over-riding equals and hashcode for
XSDDescription and DTDDescription, XMLGrammarPoolImpl uses these methods
to check the equality of two grammars. changes include bug fix for #6698.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318241 13f79535-47bb-0310-9956-ffa450edef68"
e5f6ca9c72628a08ff0f36d1044c2dc15053ae4d,"update release doc


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318242 13f79535-47bb-0310-9956-ffa450edef68"
52a5a1f11ca23a89106e427313c669eabcf107ff,"Updating release document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318243 13f79535-47bb-0310-9956-ffa450edef68"
6a2587d2d6f8119d4a059f7b1882cef7312d5992,"update for forthcoming release


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318244 13f79535-47bb-0310-9956-ffa450edef68"
1cbb9dbdff9de6fe05458a7a4d0261c5733da351,"Fixing bug [6716]: The test to determine if fElementChildrenOffsetStack needs to be resized was incorrect.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318245 13f79535-47bb-0310-9956-ffa450edef68"
cd61d27d7adc15840757211a3514cfe383fa543f,"Fixing bug [6766]: we didn't reset the schema handler (traversers) between parsing schema documents.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318246 13f79535-47bb-0310-9956-ffa450edef68"
3299d77cdef03e1b6e7ff5f01579511d4d670d6f,"Now we defer the loading of schema specified through externalSchema and
noNamespaceExternalSchema location proerties, the specified grammar from
particular namespace is loaded only when there is reference to any component from that
namespace.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318247 13f79535-47bb-0310-9956-ffa450edef68"
9996a814e52721562e5093624475677f74d3dfc4,"Fixing bug [6776]: fields from schema PSVI items should be checked
before being used, in case the instance was not fully validated.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318248 13f79535-47bb-0310-9956-ffa450edef68"
d9caf36bce05348bb36b6233799bb1688af1ae4c,"Removed methods getDTDGrammars() and getSchemaGrammars() to make
the implementation independent any specific grammar types.
Also, synchronized the putGrammar(...), getGrammar(...),
removeGrammar(...) and containsGrammar(...) methods.
Thanks to Pavani's patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318249 13f79535-47bb-0310-9956-ffa450edef68"
eefdf09654db7955a5f8d90be5df989cdf33594f,"changes related to JAXP 1.2 schemaSource property, if the String given is
relative URI, it will be resolved against the instance document being parsed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318250 13f79535-47bb-0310-9956-ffa450edef68"
972e747a16966a96cf85776072cc51c7aaa21779,"Updated the call to reset method of XSDHandler as per the new signature.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318251 13f79535-47bb-0310-9956-ffa450edef68"
12a80e051fbed5b8e2214fa26c1ce821c061855c,"Use the schemaNormalizedValue from PSVI only when validation attempted is full.
Patch submitted by Pavani.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318252 13f79535-47bb-0310-9956-ffa450edef68"
845a61988ffe43ac49e3733bf6cb4a842ac42ab9,"PR:
Obtained from:
Submitted by:
Reviewed by:
Updating KEYS file with my PGP Public Key.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318253 13f79535-47bb-0310-9956-ffa450edef68"
985a1a2ed8f5d10d0013c5eddc076e1c71cb9ce5,"PR:
Obtained from:
Submitted by:
Reviewed by:
Updated files for the next release.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318254 13f79535-47bb-0310-9956-ffa450edef68"
8a14ebb59eb6bc6d32c1f03af44d0a843dd8c9db,"Adding faq entry for Accessing documents available on Internet.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318255 13f79535-47bb-0310-9956-ffa450edef68"
f8b05e04b15329b6392d97d9c2a70edc1ee5efba,"1. Validation root: should be the element where validatation starts, instead of
the first one for which we find an element or type declaration.
2. Bugs in LocationArray inner class.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318259 13f79535-47bb-0310-9956-ffa450edef68"
d76353cbe8381bc35161c22a8a3e8d159d5eec1b,"The intention of the Schema WG is that the wildcards in anyType should have
processContents ""lax"", not ""strict"".


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318260 13f79535-47bb-0310-9956-ffa450edef68"
1c33189b3d29ad6a04af79f57de624b42d24b403,"When an error occurs when we traverse a complex type, to avoid redundant
error messages, we also need an attribute wildcard with processContents ""skip"".


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318261 13f79535-47bb-0310-9956-ffa450edef68"
67ceb0937b9fb38ae82149d6fb5f7606a1e7723b,"Removed a duplicate message.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318262 13f79535-47bb-0310-9956-ffa450edef68"
a14eb4707ce1ed0b87265e6731f91b250a8c1f1a,"Shouldn't expand system id using a static method with null base id.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318263 13f79535-47bb-0310-9956-ffa450edef68"
d66fcfed55c6062ecf0051bc3ab086ca5b76116f,"changes to allow the DOM to be serialized


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318264 13f79535-47bb-0310-9956-ffa450edef68"
980279f54924462ec3e86d30a39e4f12db2bd800,"Fixing bug [6894]: in DOMASBuilderImpl, we can't assume a grammar pool
implementation is already available. In fact, we need to revisit the place:
we always need to create our own grammar pool.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318265 13f79535-47bb-0310-9956-ffa450edef68"
203b30090956a24fc05867f3c36edb521a9056d8,"Fixing bug [7039]. Error rmessage typo.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318266 13f79535-47bb-0310-9956-ffa450edef68"
7f856ddb5537fc5e98c71ff23700a48bac7f652d,"Applying patch suggested by Joe Kesselman. This fixes the following bug:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=6888


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318267 13f79535-47bb-0310-9956-ffa450edef68"
5267740c125e986be50ccb373b73513366a34f0a,"Fix for some performance problems relating to the way in which encodings are detected.  Two parts to the fix:
1.  We now read only a small number (64 bytes) one at a time at the beginning of external entities in order to correctly process their encoding declarations.  Formerly, in certain cases we would end up reading at least 2K bytes one at a time, particularly when using default Java Reader classes.
2.  Previously, there were cases in which we did not turn off this one-byte-at-a-time behaviour.  Now it is turned off for all kinds of external entity once the encoding is finally determined.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318268 13f79535-47bb-0310-9956-ffa450edef68"
1687cdbd77c8f9315b122f8e229bb808dee8dcc0,"We failed to report an error if element was undeclared in the case DTD was
declaring some attributes for this undeclared element. DTD grammar always
create ""dummy"" element declaration to store attributes. The only way for us
to know if element was declared or not, is if elementDecl has a content spec type.
This fixes http://nagoya.apache.org/bugzilla/show_bug.cgi?id=6911.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318269 13f79535-47bb-0310-9956-ffa450edef68"
c080f9e68f894bc1f9769fa764b89f15c12e3ff7,"Removing -np/NP option from help. Thanks to Stan Hendryx for pointing it out.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318270 13f79535-47bb-0310-9956-ffa450edef68"
e1c0a6f3b24a8065480c39b7b8ba17bbe868f658,"DEFAULT_NAMESPACE_PREFIXES is not used.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318271 13f79535-47bb-0310-9956-ffa450edef68"
c4f602f0ad494b415885e26c06f45b1b8b9d5095,"Fixing bug 7075.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318272 13f79535-47bb-0310-9956-ffa450edef68"
8070d29c5c3992f143871c62a959d3363f2005d3,"DOM exposed comments from DTD. Bug fix: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=6317


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318273 13f79535-47bb-0310-9956-ffa450edef68"
9e74a2efc7ea6c27a76899a45d4e92da288c6689,"Making error reporting for missing mandatory pseudoattributes in xml or text decl better.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318274 13f79535-47bb-0310-9956-ffa450edef68"
4b85f8d3e4e75c9acd7125963ed86d9330457baf,"1. Added setter methods on XSDDescription
2. Pass XSDDescription as the parameter to XSDHandler#parseSchema()
3. Pass XSDDescription as the parameter to XMLEntityManager#resolveEntity()
4. Cleaned some ""REVISIT""s.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318275 13f79535-47bb-0310-9956-ffa450edef68"
2c842bac6acbf8c2eb3b6cca67b8cc35e3ea9eae,"Don't always use a new resource identifier object when calling the user's entity resolver. Try to use the one passed in, because it could contain more information (schema namespace, for example.)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318276 13f79535-47bb-0310-9956-ffa450edef68"
cb2ea97935b09a3513b95affb2ba02da74294967,"Use XSDDescription as the parameter to XSDHandler#parseSchema().


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318277 13f79535-47bb-0310-9956-ffa450edef68"
e16a5d3ecb90daf302f2958576479a6782f5fd8a,"XSDHandler#parseSchema signature is changed. The call to parseSchema should use updated signature.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318278 13f79535-47bb-0310-9956-ffa450edef68"
0215e1dc03df29e0915be920408400673d0aaf68,"further fix for EBCDIC file i/o performance.  This also enables more EBCDIC encodings to work with the parser.  Thanks to Henry Zongaro for finding the lines that needed tweaking.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318279 13f79535-47bb-0310-9956-ffa450edef68"
8878baf15277284e47b284a45edff4668430692e,"Fixing the synchronization problem in DV package.
Many thanks to Tomas Bouda for pointing it out.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318280 13f79535-47bb-0310-9956-ffa450edef68"
d632c26abe01b41ab5f90e120157080704c94dad,"Fix to the performance bug for non deferred DOM: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=5602
The problem was that for each new characters() call we would append data to
DOM tree using string concatenation (olddata+newdata). Now, if there are
more than one characters() call per data, the data is saved in the string buffer.
When state changes (endElement/startElement/startGeneralEntity, etc.),
the data is set on the text node (that was created for the first chunk of data).

Also, fixing internal subset: it should include comments, PIs. Modified
notation decl in internal subset - we were omitting SystemId.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318281 13f79535-47bb-0310-9956-ffa450edef68"
a6b4b0c92c5e0be64c2c464fd8eadc1a331248fd,"Bug fix: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=7070


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318282 13f79535-47bb-0310-9956-ffa450edef68"
2895af668e326fbccfd61fd5bf313ecbbc1fd6ff,"Updated the test for relatedNode.
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=7070


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318283 13f79535-47bb-0310-9956-ffa450edef68"
821116e058eff4c5bd36bc3c1815a949bc93bc42,"Fixed two possible exceptions:
1. ClassCast: retrieveInitialGrammarSet returns Grammar[], not SchemaGrammar[];
2. NullPointer: it's possible that parseSchema() returns null, should check before performing further operation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318284 13f79535-47bb-0310-9956-ffa450edef68"
889efd4965dfa53f77fbddef274e7191e233f2da,"Change the lexical representation of gMonth from --MM-- to --MM. This is an erratum of the schema spec.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318285 13f79535-47bb-0310-9956-ffa450edef68"
9937a7538f627abf2baddaf9a6dee38e610e4394,"1. Cleaned up how we traverse simple types;
2. Fixed problems: sometimes we didn't report errors in simple types;
3. Synchronize access to static member in XSComplexTypeDecl.
4. Use error codes defined by the schema spec.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318286 13f79535-47bb-0310-9956-ffa450edef68"
63057bf3380f2eb73395f03d863af0db5c15d1f2,"Use error codes defined by the schema spec.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318287 13f79535-47bb-0310-9956-ffa450edef68"
a5aae07a15b9639436cb20b3f666fa659ae029fc,"1. Make XSSimpleTypeDecl public;
2. Schema rec issue R-75: max/minIn/Exclusive facet values should be from base, unless it has the same value as that of the same facet in the base.
3. Added derivedFrom() convenient methods to check whether this type is derived from another type.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318288 13f79535-47bb-0310-9956-ffa450edef68"
f7ab76affe5ea0984e2d44f2f91c2a9bf51a21b6,"Added derivedFrom() convenient methods to check whether this type is derived from another type.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318289 13f79535-47bb-0310-9956-ffa450edef68"
e177e46eaf8713c2f1b78c70f094250682cdf307,"Added getTypeDefinition() and getAttribute/ElementDecl() convenient methods to expose type/decl information used for validation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318290 13f79535-47bb-0310-9956-ffa450edef68"
33d8ce7d747727942c82d4ffb909a5507a6d135d,"removing unneeded file.  This class did the same thing as StandardParserConfiguration except less flexibly--even when using DTDXSParserConfiguration, it is still necessary to set the appropriate features to have schema validation take effect.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318291 13f79535-47bb-0310-9956-ffa450edef68"
d5f74e011b1a9773d3cc8639718e0c7d60ba2d67,"map Windows-31J to MS918 internal encoding, as requested by Makoto Murata


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318292 13f79535-47bb-0310-9956-ffa450edef68"
6517fabc4452f3f244a678cd22b22d63eaf72b56,"update samples to reflect removal of DTDXSParserConfiguration


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318293 13f79535-47bb-0310-9956-ffa450edef68"
fb2a779962a539f35e8737adcffb0137fd6cdcf9,"Fixing a bug: when preparsing a schema whose target namespace we don't know, we should get it from the ""targetNamespace"" attribute. Then use this namespace for further including/redefining.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318294 13f79535-47bb-0310-9956-ffa450edef68"
4e5357ebb90d944fa79967bea2a2f9cbd799314d,"fix grammar caching framework.  Now DOMASBuilder uses XMLGrammarCachingConfigurations preparsing infrastructure.  Also implement some expanded functionality on the default grammar caching implementation, and make it available through XMLGrammarCachingConfiguration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318295 13f79535-47bb-0310-9956-ffa450edef68"
5889399751b16f0465f3e559d84309530c1ebf25,"adding a FAQ for development-related issues.  Two entries supplied for starters:  one describing how to submit patches, the other how to prepare releases.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318296 13f79535-47bb-0310-9956-ffa450edef68"
41997f2aef633a202eaa0614648d1cc3ecd79c09,"change a copyright date from 2001 to 2002.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318297 13f79535-47bb-0310-9956-ffa450edef68"
fbb0c02a970ab50fab7c77653b51e9fe8b09ff62,"getting rid of dead, commented-out code.  Hopefully this will make this lengthy class easier to understnnd; if we ever want the commented-out sections, we have no further to look than version 1.3 of this file.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318298 13f79535-47bb-0310-9956-ffa450edef68"
8cb49c1df14b3cea59c3849d8865dea6e66fe2e3,"Add ASDOMImplementation that implements DOMImplementationAS. CoreDOMImplementation
now also support Load/Save.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318299 13f79535-47bb-0310-9956-ffa450edef68"
0d5d0186a6bb1a5a11be82465ab858248d6abfd4,"A *dirty* fix for the problem reported on the mailing list by Evgueni Rouban:
when an element has a complex type with mixed content, we didn't process
its fixed/default value correctly.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318300 13f79535-47bb-0310-9956-ffa450edef68"
76541b6689369e95f1e11d4eea9231a0c3da2d10,"Fixing bug [7563]: whitespace characters were not removed before decoding
base64 data.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318301 13f79535-47bb-0310-9956-ffa450edef68"
8ddef22fe58c1ffd831bb200c8a93134d3a76e6d,"make sure AbstractDOMParser can be used in configurations that know nothing about XML schemas by taking into account the case where the configuration does not support the http://apache.org/xml/features/validation/schema/normalized-value feature.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318302 13f79535-47bb-0310-9956-ffa450edef68"
29553620ef83a017bc78d31ccfd99963f50b63f0,"Since the dTD validator may be used within configurations that know nothing about XML schema, it should not recognize the http://apache.org/xml/features/validation/validation/schema feature.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318303 13f79535-47bb-0310-9956-ffa450edef68"
bb1d08e9ded927ace6d7069cab76b10c472e1321,"changes needed to make the building of a DTD-specific xercesImpl jarfile possible.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318304 13f79535-47bb-0310-9956-ffa450edef68"
69484e13f5625881ac43c9c92aed43492cb70694,"add a new build target, dtdjar, for constructing a DTD-only xercesImpl.  Also added dtdjars to build the full set of jars with this one included.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318305 13f79535-47bb-0310-9956-ffa450edef68"
70a3b8c73f52bfed6f74378f66c58232614e41fe,"used by the dtdjars build target, this file serves as the XMLParserConfiguration file in META-INF/services.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318306 13f79535-47bb-0310-9956-ffa450edef68"
5629a972287499931d55d3aed6597f9f62c24028,"remove some spurious import statements.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318307 13f79535-47bb-0310-9956-ffa450edef68"
6d3ed564d735690db22fa190387ba587ff8c32fa,"enable compression of jar files.  Also, added a new build target for factoring out WML/HTML DOM; this gets xercesImpl down to 430K!  Finally, refactored some of the more egregious common code in the various targets, but more could be done here.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318308 13f79535-47bb-0310-9956-ffa450edef68"
686078a1f9aab2b39fa16e27e0dd3ef46cd320bf,"docs updates reflecting extensions to build file.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318309 13f79535-47bb-0310-9956-ffa450edef68"
b5ab952f0411ccb1f7319bf2723adf5d25ec0931,"Tried to optimize XML Schema parsing code:
1. Implemented XSDeclarationPool.
2. Modified impl.xs.DOMParser to use NonValidatingConfiguration and specify CoreDocumentImpl
as DocumentClassName for parsers.DOMParser.
3. Implemented DOMNodePool that manages the pool of DOM nodes that are
used for parsing XML Schemas.

I wrote a small program that was parsing and validating 6 files for about 20 times each.
The test showed ~7.8% decrease in object creation. The speed of the parser remained the same.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318310 13f79535-47bb-0310-9956-ffa450edef68"
28ef04070e1dbf5e7f4cf136540bc45a80f687ed,"Fix for class cast exception. ASDOMImplementationImpl now inherits from DOMImplementationImpl.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318311 13f79535-47bb-0310-9956-ffa450edef68"
4bcde6415d72f1525e1c41d6e7b00eb9627d6b09,"The documentations in the Java source files contained errors and
formatting issues. Updated interfaces using published zips on DOM Level 2
Errata page: http://www.w3.org/2000/11/DOM-Level-2-errata


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318312 13f79535-47bb-0310-9956-ffa450edef68"
77754a0df78d6bae0ec7ab2d0147cdc6a330ecee,"Cleaned up some error messages:
1. Remove (old) error codes that are not used;
2. Convert references to old codes to new ones (defined by the spec.)
Now only error codes of Identity Constraint are not from the spec.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318313 13f79535-47bb-0310-9956-ffa450edef68"
c605be5c25f7e6506ad322b374ad3cef5a18fabc,"1. Storing imported schema grammars in SchemaGrammar objects;
2. When a grammar is retrieved from a grammar pool, recursively get all
grammars imported by this grammar, and add all of them to the bucket.
3. REVISIT: When a grammar from grammar pool has the same target
namespace as one of the grammars in the bucket, issue a warning, and
ignore the grammar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318314 13f79535-47bb-0310-9956-ffa450edef68"
0d2676459e6fb5c5fc7537b2166983ff3c003756,"1. Fixed bugs about <import> and <include>: if two schema documents
with the same target namespace are imported, we end up parsing both,
which might cause ""duplicate global declaration"" errors. Since Xerces
enforces (and relies on) a one-grammar-per-namespace rule, we should
only parse one of them, and ignore the other one.
2. The order of calling EntityResolver and GrammarPool was wrong. We
should consult the GrammarPool first.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318315 13f79535-47bb-0310-9956-ffa450edef68"
98c70d056194914e514102c2f6a886f744234004,"added test program of dom registry


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318316 13f79535-47bb-0310-9956-ffa450edef68"
827608415412f5e14a5bd599314c05f3f41551d4,"Should remove attribute uses that have the same name+namespace as
an attribute use with use=prohibited.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318317 13f79535-47bb-0310-9956-ffa450edef68"
ac2f42d1f1f92f62dbadd1cb28c2def07fece279,"Use an array length to determine if resizing is necessary.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318318 13f79535-47bb-0310-9956-ffa450edef68"
e8a321eb281fdb6360d629bc553d32b3648f648a,"as proposed in bug 7800, now the build will fail if any target that is being executed--including the docs--fails.  Formerly, docs could be executed, fail dramatically and yet the build would be labelled as successful.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318319 13f79535-47bb-0310-9956-ffa450edef68"
c8ed70f108388697a881cad3bdf377774515a121,"Synchronize on access to content models, to avoid thread-safety issues.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318320 13f79535-47bb-0310-9956-ffa450edef68"
f9dfa8b811d86e74b40ce17ca6fa14b1f118ebb4,"For empty elements (<e../> for example), we failed to store element decl
in PSVI item.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318321 13f79535-47bb-0310-9956-ffa450edef68"
9675e28a54d61d7c4234ce3d7dbfc4ea73f86a61,"The work of ""try/catch XNIException"" is already done in parseASInputSource,
so we shouldn't do it again in parseASURI.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318322 13f79535-47bb-0310-9956-ffa450edef68"
abce34e6a65fd2620998c4800b7b484b5b5efa7c,"rewrote setReadOnly to avoid the use of an Enumeration


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318323 13f79535-47bb-0310-9956-ffa450edef68"
ca416fe0b43bcc3eaeb9e30952aeaf771095de0c,"improved management of ID attributes in the DOM:
we now keep track of which attributes are said to be IDs by the parser
and update our id table when their value changes so that
Document.getElementById() is more reliable


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318324 13f79535-47bb-0310-9956-ffa450edef68"
c4acc801324317282413f5a4d9b6d0e155af4d7b,"Program to test our management of ID attributes in the DOM


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318325 13f79535-47bb-0310-9956-ffa450edef68"
c2fb8db25f5dcd07edb8fa084064d82a91273cd2,"added one more test


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318326 13f79535-47bb-0310-9956-ffa450edef68"
70156153ae3e89788f3fbd1e1625d5ee2b52e6c3,"added update about ID attributes managemenet in DOM


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318327 13f79535-47bb-0310-9956-ffa450edef68"
61ac82c2b608c911cb1b1a04065e07a45d8b8a0e,"got rid of use of Enumeration


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318328 13f79535-47bb-0310-9956-ffa450edef68"
0693bc860c54acf5f0d124c47fdfa1caaedb7b50,"Fixing bug [8002]: '!' was missed in the condition of the constraint mentioned
in the bug report.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318329 13f79535-47bb-0310-9956-ffa450edef68"
d339f6bf602e687928d8526bbdc258b7207f42eb,"An error in the message: { symbol should be inside a pari of ' symbols.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318330 13f79535-47bb-0310-9956-ffa450edef68"
aec6294e6e32720d4a5263cfd3fecf6d82cb8da3,"fixed typo in previous commit


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318331 13f79535-47bb-0310-9956-ffa450edef68"
92bcfeae70425b43a4946a50d339c55e489fe8c3,"A more effecient way of cloning a SchemaNamespaceSupport object.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318332 13f79535-47bb-0310-9956-ffa450edef68"
2078104078822c18c05c3935165a7c1e30d5d36b,"returnAttrArray should be called after all the children are traversed,
otherwise namespace declaration won't be recognized by the children.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318333 13f79535-47bb-0310-9956-ffa450edef68"
49c5129e28bdb60164f380f18fde08cf9976ca96,"Fixing a bug: namespace declarations on <redefine> are not recognized
in its subtree for QName resolution.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318334 13f79535-47bb-0310-9956-ffa450edef68"
3bb87fab1dd1396b8a11798849e522cb89594f6e,"cleaning up hardcoded error message strings in the identity constraint code.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318335 13f79535-47bb-0310-9956-ffa450edef68"
5a71af4bdad1b0dd41ee9c7c3074cd60b32a7b3f,"back out bad modifications made in the last commit


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318336 13f79535-47bb-0310-9956-ffa450edef68"
3cbc421659aa6a99fa7fc076fd70e36a0119c1d7,"Fixing DOM bugs related to entities:
If ""dom/create-entity-ref-nodes"" is set to false, we still need to construct
the replacement text for entity node stored in the Doctype. To have all the
children of an entity, we always create an entity reference at startGeneralEntity call.
At endGeneralEntity() if  ""dom/create-entity-ref-nodes"" set to false, we insert children of the entity ref.
before the entity reference itself and remove the entity reference.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318339 13f79535-47bb-0310-9956-ffa450edef68"
9ada231a9c9f4f548004dc6cb76e75fdab182147,"Replacing an attribute with itself is no-op: http://lists.w3.org/Archives/Public/www-dom-ts/2002Jan/0050.html


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318340 13f79535-47bb-0310-9956-ffa450edef68"
fa5ed7cd06557e14361e1147868c3f34e61f7a82,"When both pubId and sysId are null, the user's entity resolver can do nothing
about it. We'd better not bother calling it. This happens when the
resourceIdentifier is a GrammarDescription, which describes a schema
grammar of some namespace, but without any schema location hint.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318341 13f79535-47bb-0310-9956-ffa450edef68"
8b0992291959a0a1b31340889b7370cf9494c1ec,"""integer"" and integer-derived types doesn't allow decimal point in the lexical
representation. A special pattern will be added to ""integer"" (an erratum to be
published).
Handling pattern is too expansive, so we use the same way as how we
handled NMToken/NCName/Name: use some special handling code.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318342 13f79535-47bb-0310-9956-ffa450edef68"
18af9427c0282815e099ef284316724dbc3bc12f,"Fixing a bug reported on the mailing list by Mike Spreitzer:
the min/max effective tatal range wasn't correctly calculated when
the derived particle is ""all"" model group.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318343 13f79535-47bb-0310-9956-ffa450edef68"
bfa84e438a25a15b5f9defc990664a379257a7e5,"Bug in calculating effective total ranges.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318344 13f79535-47bb-0310-9956-ffa450edef68"
ad0da864cd75edc57e23fbf1b5f0cb0d4d11232c,"Fixed bug in WrappedInput/OutputStream sample classes.

Reported by:	Morten Bjrhus <morten.bjorhus@telenor.com>


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318345 13f79535-47bb-0310-9956-ffa450edef68"
6172744a547e755d5126f18e961acf9fc4609adc,"Applied suggested patch from Fabio Riccardi:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=8398


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318346 13f79535-47bb-0310-9956-ffa450edef68"
ee643c3d5c1610fcde341a6fe21279ddc44e6f88,"Fixed another bug in the WrappedOutputStream that I overlooked
in the last bug fix.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318347 13f79535-47bb-0310-9956-ffa450edef68"
701ceed926fc806b8d8ae154710e40f55538a6e1,"fixed Java serialization and added a Test for it


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318348 13f79535-47bb-0310-9956-ffa450edef68"
ef2014f5451f20105e0f23b93447aadd81db7287,"include-ignorable-whitespace feature did not work when grammar is schema. Fixed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318349 13f79535-47bb-0310-9956-ffa450edef68"
3c7779d72b1578a7b359a6d3e434ba4a2e614041,"1. Remove ""symbol table"" from the constructors of schema grammar,
because it's never used.
2. Add a new internal grammar for ""xsi"" namespace. The 4 xsi attributes
are declared in it: xsi:type; xsi:nil; xsi:schemaLocation; and
xsi:noNamespaceSchemaLocation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318350 13f79535-47bb-0310-9956-ffa450edef68"
fc16bd00166f60e7612fd0b4669da0ba579c6307,"Remove ""symbol table"" from the constructors of schema grammar,
because it's never used.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318351 13f79535-47bb-0310-9956-ffa450edef68"
1218488a423d2d090157cb9a6b401d0ee1ccbfb9,"add documentURI


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318352 13f79535-47bb-0310-9956-ffa450edef68"
3485930ffaa210391b2c2e77e63a489b3c2fc45f,"Add DOM Level 3 documentURI property.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318353 13f79535-47bb-0310-9956-ffa450edef68"
620256ef5896a8d498ed3bed57de29a0a09a004e,"Strange character appeared at the beginning of the file, which causes a
well-formness error.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318354 13f79535-47bb-0310-9956-ffa450edef68"
096ac9aa4ae263b25807072fdb9076bffbf2917b,"Modified features according to the 09 April draft.
Changed implementation of set/get/canSet features.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318355 13f79535-47bb-0310-9956-ffa450edef68"
f1f3b3df2d43a91979594e59d05037d5cb4c4cb0,"Fixed bug to avoid null pointer exception in AbstractDOMParser
when locator information is not available from parser config.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318356 13f79535-47bb-0310-9956-ffa450edef68"
e17fbed5092e32631162abf69781d62ad23a86d2,"Fixed bug in HTML DOM implementation that was causing xerces.dom
element nodes to be created instead of the appropriate HTML element
nodes.

Reported by:	Ron Cemer <ron@roncemer.com>


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318357 13f79535-47bb-0310-9956-ffa450edef68"
e292d09e2389f8effb1059964d3ad531d63ed5b5,"Improved handling of settings in parser classes making it easier
to re-use the parsers with other parser configurations. Previously,
the parser instances assumed that all configurations supported
various settings (i.e. the parser would set default values without
first adding the recognized features and property identifiers to
the parser configuration).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318358 13f79535-47bb-0310-9956-ffa450edef68"
17509c81b1017be7bb9611645eb9b8f70833afef,"PR:
Obtained from:
Submitted by:
Reviewed by:
include-ignorable-whitespace feature is relevant only when the grammar is DTD.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318359 13f79535-47bb-0310-9956-ffa450edef68"
2ca8fdf0bf29d99d40a2d05ad5d6d9b5cb4b58ca,"Applied patch from Henry Zongaro to fix ClassCastException in
org.apache.xerces.dom.DeferredAttrNSImpl on NodeList.getLength().


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318360 13f79535-47bb-0310-9956-ffa450edef68"
1618c822612bbc70f0b15bcf48447562480005da,"1. the character ""e"" shouldn't be allowed in decimal values.
2. only #x30~#x39 are allowed in decimal values.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318361 13f79535-47bb-0310-9956-ffa450edef68"
fb13e41e44d89399748403278f8f00bf4f0a663e,"1. only #x30~#x39 are allowed in data&time values.
2. remove instance variables, so that the simple type objects can be safely
used in multiple-thread environment.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318362 13f79535-47bb-0310-9956-ffa450edef68"
4897b684f51b6aacfd4666b690daff1dc245c5ff,"Fixing bug 8471: store the base system id when inputstreams/readers are
provided as schema document source.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318363 13f79535-47bb-0310-9956-ffa450edef68"
8e28a50b92027b6ebafa72dee1b16d988774b14d,"1. Provide PSVI information for the 4 xsi: attributes;
2. Fixed some bugs in attribute PSVI.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318364 13f79535-47bb-0310-9956-ffa450edef68"
f891c97bd2b0a6221878ab0939aa4f0a79297f28,"Many files are modified, mainly for reason 1 listed below. The other problems
are discovered and solved during this big change.
1. Use separate classes to represent ""model group"" and ""particle"";
2. Removed the simple content model, because it's not simpler than DFA
3. Rewrite the why how syntax tree is created: we only go through the tree
once, and create the CM tree at the same time, instead of creating a temprory
particle tree, then traverse it and create the CM tree;
4. Improved how UPA is checked in DFA: avoid cloning particles, but use
some distinct integer to differentiate leaf particles.
5. Fixed a bug in particle derivation: all/sequence/choice restricting wildcard.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318365 13f79535-47bb-0310-9956-ffa450edef68"
7668f027bc779a123f9dd0b5721184ff282dc0ee,"AGAIN: Strange character appeared at the beginning of the file,
which causes a well-formness error. Anyone knows why this is happening?


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318366 13f79535-47bb-0310-9956-ffa450edef68"
e8c31788f5b417033296c155b4e69c3330b811d7,"Strict error checking is not implemented for Deferred DOM.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318367 13f79535-47bb-0310-9956-ffa450edef68"
7c11ec3fb913eb86a6222fbe9464b6428a0a3f74,"added an entry under ""Problem Areas/Known Bugs"" about the problematic behaviour of parser
for large values of maxOccurs and possible workaround.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318368 13f79535-47bb-0310-9956-ffa450edef68"
f7082eb2bef9d39033c3e99b305b3efc5f3c8b46,"To find an ID attribute from XML Schema we now rely on an attribute declaration
which is available in the PSVI. Revisit this code when the PSVI interfaces are finalized.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318369 13f79535-47bb-0310-9956-ffa450edef68"
7d950b2219bb3dff1746cdcfebf5e3cbbdeedadb,"XMLAttributes.getType() represents DTD type - it should not be modified in
the XML Schema Validator.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318370 13f79535-47bb-0310-9956-ffa450edef68"
16650ac5c74e58959529526d3b5cc32d6e59fb89,"Avoid possible NPE.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318371 13f79535-47bb-0310-9956-ffa450edef68"
9cdbd349d77eaaafb26338dcd44b1830af92617c,"fix for bug #8617.  In the case of an internal parameter entity, we were assuming that the global XMLString containing the entity value would remain unchanged even after we requested that spaces between the terminating quote of the entity value and the > had been consumed.  Especially in space-rich documents, this was not necessarily the case since a buffer boundary might exist in the spaces; if one did, the XMLString would change and the entity value would be corrupted.   XMLDTDScannerImpl.java

Note that there is also a bug in nonNormalized values for parameter entities which contain references to other parameter entities.  This will not be easy to fix; I note it here for the record.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318372 13f79535-47bb-0310-9956-ffa450edef68"
7fee3197b7641dde421656c4de18e4c47f155b83,"we always store the normalized value, even if it's invlid, because it might
still be useful to the user. But when the value is not valid, the normalized
value is not trustable.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318373 13f79535-47bb-0310-9956-ffa450edef68"
3c03c7ed08d6fd11b9272883a47b5b4be9118d23,"Update signatures to reflect XMLResourceIdentifier change


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318374 13f79535-47bb-0310-9956-ffa450edef68"
cbc04c247e497bf6e8a010495c24283163d69fec,"allow doctype node to be inserted after doc is created.
The DOM spec was not clear on whether this is forbidden or not, but the
DOM Level 3 makes it legal


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318375 13f79535-47bb-0310-9956-ffa450edef68"
7f6f47aea9b03b5af254d2301cbcbc50bf632215,"Set and reset of DOM pool for XSDHandler should be done in
parseSchema(XMLInputSource is, XSDDescription desc).
Patch from Henry Zongaro


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318376 13f79535-47bb-0310-9956-ffa450edef68"
5322dd5242033534f9b2a2809a23d60f203e5903,"Removed dependence on SAX attribute interfaces from XMLAttributesImpl
utility class. The AbstractSAXParser already defines a SAX attribute
proxy class so that the parser and components can be properly layered.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318377 13f79535-47bb-0310-9956-ffa450edef68"
3980a6664ff23337ff378c8501c2961c4bde93f8,"proposal for 2.0.2 release


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318378 13f79535-47bb-0310-9956-ffa450edef68"
ae951985baee7116783888908e1dda64429536be,"proposal for 2.1 release


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318379 13f79535-47bb-0310-9956-ffa450edef68"
ae62c6c6ddfda7ff84338f3930aed9a5d18356dc,"Updated xni.DocumentTracer to print augmentation information.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318380 13f79535-47bb-0310-9956-ffa450edef68"
a576d87c331710132afc2e07d35b08ea5325fc34,"Store the enclosing complex type in element/attribute declarations
with ""local"" scope.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318381 13f79535-47bb-0310-9956-ffa450edef68"
34aab31cc59d829a17b9f74ce192423af5788d9f,"Add implementation for baseURI and documentURI (DOM Level 3).
 Add XMLResourceIdentifier to startExternalSubset() method defined in  XNI XMLDTDHandler to
allow supporting baseURI for an external subset.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318382 13f79535-47bb-0310-9956-ffa450edef68"
439faef5ccc8f53eb0b4c2034377d92996917afb,"Update releases doc


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318383 13f79535-47bb-0310-9956-ffa450edef68"
17a0e4bf92050e81130cc80b673b39925b781998,"Update startExternalSubset method


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318384 13f79535-47bb-0310-9956-ffa450edef68"
796400a575745062c61f687a1a33aca5dac3be37,"Cleanup for handleStartElement


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318385 13f79535-47bb-0310-9956-ffa450edef68"
2e444b0484dffd046fa7311a2b43365acf4f45dc,"Add '[' and ']' to reserved characters; remove ' ' from mark characters.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318386 13f79535-47bb-0310-9956-ffa450edef68"
e6fe4c7d587b33a1d406ae91346f594b93085bfc,"If the same entity is declared more than once, the first declaration
encountered is binding, SAX requires only effective(first) declaration
to be reported to the application. This is applicable to internalEntityDeclaration
and externalEntityDeclaration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318387 13f79535-47bb-0310-9956-ffa450edef68"
7f94f414bfda6fba9ca9f174b6f53d7dd0869cf3,"<foo xmlns:a=""blah"" a=""blah""> shouldn't give error.
Thanks to Pavani for the patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318388 13f79535-47bb-0310-9956-ffa450edef68"
e53870eff23b6fc77da7c8c8e5563160864e60e0,"fix for bug 8997.  Thanks to Vivek Pandee for pointing out and providing the fix for this bug.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318389 13f79535-47bb-0310-9956-ffa450edef68"
9c54aa4faf3567e0ba734ea1af7f8e3493f2b938,"According to the recently published namespace errata:
1. Bind ""xmlns"" to its namespace
2. Report namespace errors for xmlns/xml bindings


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318390 13f79535-47bb-0310-9956-ffa450edef68"
3b3198c2c9fb6abc89e38fec91b1daa707090b92,"The Schema Component Model API: a set of interfaces that model schema
components.
They are experimental (which is why they live in the impl package), and are
subject to change.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318391 13f79535-47bb-0310-9956-ffa450edef68"
c034fce51f8f78ab929b74f4a902deb10034459a,"Fixing bug 9022: arrayCopy should take oldArray.length, instead of newSize.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318392 13f79535-47bb-0310-9956-ffa450edef68"
af4e5d86e00e50c1b73f70fcaf8a787aa32d6a15,"Fixing bug 8840: reset fBuffer before returning from handleStartElement.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318393 13f79535-47bb-0310-9956-ffa450edef68"
eeb315cf63840e6be8272e610abd4bbe20d85cb3,"Fixed a possible thread issue in the initialization of the
HTML DOM implementation. The initialization code was not
synchronized which could lead to problems in certain
circumstances.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318394 13f79535-47bb-0310-9956-ffa450edef68"
4773cd5f2dbb88f94c04eaec23b09f8ef147709a,"According to the new namespace errata, prefix ""xmlns"" can only be used
for namespace binding, so <xmlns:ele/> is a namespace-wellformness error.
Note that <xmlns/> is not a wellformness error, but it's strongly discouraged.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318395 13f79535-47bb-0310-9956-ffa450edef68"
a6b334a216c31015a928c026837105607d18ea7d,"Error message for the following fix:
According to the new namespace errata, prefix ""xmlns"" can only be used
for namespace binding, so <xmlns:ele/> is a namespace-wellformness error.
Note that <xmlns/> is not a wellformness error, but it's strongly discouraged.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318396 13f79535-47bb-0310-9956-ffa450edef68"
75e2e681bdd7bc3fd19ab1e3fdda21e09b4ec1ae,"Implementing Schema Component Model API:
- All interfaces in impl.xs.psvi package except XSAnnotation are implemented
- Using a SymbolHash to store built-in simple types (Hashtable was used)
- Renamed XSAttributeUse to XSAttributeUseImpl
- Renamed XSModelGropu to XSModelGroupImpl
- Removed interfaces XSAtomicSimpleType, XSListSimpleType,
XSUnionSimpleType, because their methods are included in
XSSimpleTypeDefinition interface
- It's still an open issue (please refer to the message
""[Schema CM API] How it works with grammar loading"")
how XSModel and grammar loading are related. I'll send a separate note
to the mailing lists to describe how to get XSModel from preparsed grammars.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318397 13f79535-47bb-0310-9956-ffa450edef68"
ffeacfe920b96c4e6c9aafe110fd32e4b1e857be,"Interfaces of schema simple type (impl.dv) has changed, due to
the implementation of Schema CM API.
Modified this sample to reflect the changes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318398 13f79535-47bb-0310-9956-ffa450edef68"
b84841a62e6f15aba6658833dc7026f07fd067bb,"first of the agreed-upon grammar preparsing framework changes that were discussed on xerces-j-dev in the last couple of months.  Here, I have moved XMLGrammarPoolImpl from impl/validation to util, where it will perhaps be more accessible to users.  I have also added three methods to the XMLGrammarPool interface for locking, unlocking and clearing grammar pools.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318399 13f79535-47bb-0310-9956-ffa450edef68"
c635e139c837dfee67c54994096a35cccde31106,"Add tasks to retreive and run XML Conformance test suites from sourceforge
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318400 13f79535-47bb-0310-9956-ffa450edef68"
7d2f38b724c51aa1f77a1f89b3c4b64cef8a10c9,"be sure directory exists
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318401 13f79535-47bb-0310-9956-ffa450edef68"
c135a331d7e714ee157930b7d02101513c0a12ce,"introduce a ""fallback"" into our internal class loading factory.  The purpose of this fallback is to permit the classloader that loaded this class to try and find a class with the desired name, if the context class loader of the current thread is either null or throws a ClassNotFoundException when attempting to find a class with the given name.  This should allow better operation on JDK 1.3.x of applications that do not want to set class loaders on their threads.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318402 13f79535-47bb-0310-9956-ffa450edef68"
1b65dc1f229487403d5e1773459010f4a5ff3ea7,"Fallback class loader -- why didn't this commit earlier?


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318403 13f79535-47bb-0310-9956-ffa450edef68"
86d4f453dd2be947244390d9c51161d8df3f60a1,"Add functionality to the NamedNodeMap to clone the content of the map
and remove the specified node using object reference.
Fix removeAttributeNode to use a new method to remove *this* node.
Fix setAttributeNS - one of the parameters is qualified name not a local name.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318404 13f79535-47bb-0310-9956-ffa450edef68"
14353744fac95154d6400575ecd85ad31d7d085e,"According to DOM L3 ""Applications that wish to have no namespace
should use the value null as the namespaceURI parameter of methods""
If users pass an empty string the DOM implementation turns it into a null.
Also, overwrite setReadOnly for entity reference nodes to be able to set all
children read/or write.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318405 13f79535-47bb-0310-9956-ffa450edef68"
730f611a2cf5ab23c4d5c5a6c49a75004379002d,"Use the symbol table passed to the constructor


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318406 13f79535-47bb-0310-9956-ffa450edef68"
79e10cb0539759f0dad9577e8a3bf33d07808f8b,"Performance patch from Henry Zongaro.  This patches converts some array resizing detection code from catching ArrayIndexOutOfBoundsExceptions to simply checking the size of the array;  It also improves the algorithm used for recognizing entities/notations, and streamlines the praramters of certain DTD grammar methods in recognition of the fact the scope is not relevant for that grammar type.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318407 13f79535-47bb-0310-9956-ffa450edef68"
222c08146689578e777d5e7436502b87c728a4cf,"Fixing potential NullPointerException bugs (including bug [9243]).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318408 13f79535-47bb-0310-9956-ffa450edef68"
cebf2fd2446d2e09a5142e4425ba2640c74beb7e,"Provide more descriptive error messages for simple type validation errors.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318409 13f79535-47bb-0310-9956-ffa450edef68"
a893da2806a94d13a51c8d544913a11eb476353d,"Added a new feature http://apache.org/xml/features/warn-on-duplicate-entitydef
when set to ""true"" reports warning to the application for duplicate entity declarations.  This feature works for both validating & non-validating parser configurations. By default the value of this feature is set to false.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318410 13f79535-47bb-0310-9956-ffa450edef68"
4b784193a29a22f1850d515447a57a094f1abd00,"Adding entry for warn-on-duplicate-entitydef feaure.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318411 13f79535-47bb-0310-9956-ffa450edef68"
e4b65df25cd866ee73f479cae9e1f335ae057665,"A typo


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318412 13f79535-47bb-0310-9956-ffa450edef68"
a6cf9f9be8a75d26f37d3d0dba94a3a4c69da73a,"the XMLGrammarLoader interface.  Internally, we will use this to concentrate grammar location/loading functionality in particular classes for given grammar types.  It is also possible that user applications with very specific ideas of what they want out of grammars may wish to implement this interface in order to do things like filtering incoming grammars.  This would require them to to work with internal components to actually produce usable grammar objects.

A schema implementation of this interface is fairly well advanced, and hopefully will appear shortly.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318413 13f79535-47bb-0310-9956-ffa450edef68"
15a41ce863db2ee8e096688e88e9a68fcb34fed9,"Avoid cascading errors when
1. A schema grammar is not found for a given namespace;
2. A schema document can't not access components from a given namespace.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318414 13f79535-47bb-0310-9956-ffa450edef68"
6d16ad6967b361d2162b6662305bba9bea7c8ae2,"Implemented of normalizeDocument and related set/getNormalizeFeature methods.
For the following features setting the state to both true or false is supported:
""comments"", ""entities"", ""cdata-sections"", ""split-cdata-sections"", ""discard-default-content"", ""validate"".
Setting ""datatype-normalization"" to [true] does not have any effect.

Implemented initial support for DOMRevalidation with the following limitations:
1) Validation can only be performed against XMLSchemaGrammar
2) XML Schema normalized values as well as default element content will not be exposed
3) If Entity references are present in the tree their content won't be part of validation process. Same applies for CDATA section nodes.
4) Attribute value normalization defined by XML 1.0 is not performed (XML Schema requires as precondition to validation that the attribute values will be normalized).
5) For the documents created from scratch (not using the DOMParser), before calling normalizedDocument() user must set documentURI that represents the baseURI of the document related to which location of schema grammar will resolved.
6) Performance: the first time user calls normalizeDocument() (with validation turned on) it will be extremely slow since this is the time DOMImplementation will instantiate XMLSchemaValidator. Subsequent calls should be much faster.

In addition to the listed limitations we need to revisit some of the design issues:
a) Currently it is no longer possible to build DTD only xerces jars, because of dependency of normalizeDocument on XMLSchemaValidator. Explore how we can avoid this dependency (this includes the issue with exposing PSVI in the DOM)
b) Grammar cashing - we should be able at least to store grammar against which document was revalidated to avoid reparsing the grammar. Multiple issues here.
c) Implement validators pool - for multi-threaded applications.
etc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318415 13f79535-47bb-0310-9956-ffa450edef68"
65845c8066d459b05005e3907e24f61a5b015e8c,"In the last commit accidentally changed visibility of getDOMImplementation() from public
to package.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318416 13f79535-47bb-0310-9956-ffa450edef68"
d821abc037541f02509496462a21e3de8fd40ac6,"fix a tiny typo.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318417 13f79535-47bb-0310-9956-ffa450edef68"
c49f2a5aa9a3da4cfddf52562190bbf9bffe7db3,"update to use appropriate URIs as constants instead of arbitrary strings.  Of course the question as to whether strings, appropriate or not, should live in this interface is still open.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318418 13f79535-47bb-0310-9956-ffa450edef68"
79ae6b2a6e4d93c0d8444ceb8b56c2dcf04c45d6,"Adding a schema implementation of the new grammar loading interface.  This also results in a complete decoupling of the schema Validator from the schema handler, which will hopefully make their formerly tangled relationship more clear and result in easier-to-maintain code.  Also centralized handling of schemaLocation strings.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318419 13f79535-47bb-0310-9956-ffa450edef68"
2e5397b322e4ad010d39b1a337b455b87fc352ef,"add a convenience method to our internal ErrorReporter to make XMLSchemaLoader have a happier life.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318420 13f79535-47bb-0310-9956-ffa450edef68"
09413c8c80a1ed18e2ed7f0e1958a0caba12def4,"fix DOMASBuilder and XMLGrammarCachingConfiguration to use the new schema loading framework.  This means they are very nearly decoupled from the schema package; when the convenience class for user interaction with the grammar loading framework arrives, it should be possible without too much effort to make this decoupling complete.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318421 13f79535-47bb-0310-9956-ffa450edef68"
fb773e19199666dce4e97126c6b3111293ba7da3,"merging DTDGrammar and AbstractDTDGrammar because AbstractDTDGrammar served no purpose.  Also cleaning up a fair bit of the XML Schma-specific material that remained extant in AbstractDTDGrammar after the schema implementation went entirely its own way.  There is still more cleanup that could be done here, however--DTD element declarations need not, for instance, have an XMLSimpleType field.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318422 13f79535-47bb-0310-9956-ffa450edef68"
ccd3b7b0285818d9e7a9919fc39d45940bb99088,"The spec requires that the ""name"" property of an anonymous complex type
to be ""absent"".


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318423 13f79535-47bb-0310-9956-ffa450edef68"
efafa6aad984dd6d15c2620fcdc0a28d68498fc8,"The updated PSVI interfaces and the implementation:
- updated some constant/method names;
- expose heavy weight properties.
A discussion on the mailing list suggests to change getIsXXX methods to
isXXX. We may need to continue the discussion. When we get a conclusion
from there, we might change some of the method names.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318424 13f79535-47bb-0310-9956-ffa450edef68"
ce65427aae71242abfa07f7c9cdbff1cde2e1c95,"Didn't mean to commit the two sample files in my previous commit. :-P
Now I'm taking them out.
Also a faq for pull-parsing was (accidentally) commited with the last commit.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318425 13f79535-47bb-0310-9956-ffa450edef68"
5078c1897a8dc3c542e8b154f267423d6eaf9e20,"Added a new method on the element psvi item interface to return the
[schema information] property. This property is only available on the
validation root.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318426 13f79535-47bb-0310-9956-ffa450edef68"
c899591d97e80247a6616b12d0d6630a06401fd9,"- Implement the updated ElementPSVI interface to expose [schema information] proeprty;
- A new interface XSNamespaceItem to mode the [namespace schema information item];
- A new method in XSModel to return a list of XSNamespaceItem
Now users can:
1. Get an ElementPSVI from the XNI augmentation of the validation root (normally the root element);
2. Get XSModel from it by calling ElementPSVI#getSchemaInformation();
3. Get a list of XSNamespaceItem by XSModel#getNamespaceItems;
4. From each XSNamespaceItem, get its target namespace, components of that namespace,
and document locations that contribute to that namespace.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318427 13f79535-47bb-0310-9956-ffa450edef68"
0e633597f6121df0050c741c1a072dc7f3e50b26,"Potential NPE. When the returned grammar from grammar loader is null,
return null from parseAS methods.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318428 13f79535-47bb-0310-9956-ffa450edef68"
831d21ee3bb6872f14b8a941353e0b5170891315,"-- To preserve backwards compatibility with Xerces1, XMLSerializer no longer fixes namespaces by default.
Users will have to call setNamespaces(true) on XMLSerializer to activate namespace fixup algorithm.
DOMWriter by default attempts to fix namespaces.
-- Add implementation of ShadowedSymbolTable to utils: it is used in DOM Revalidation and for Cashing parser configuration.
-- Modify DOMNormalizer to add symbols to a symbol table before calling the XMLSchemaValidator.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318429 13f79535-47bb-0310-9956-ffa450edef68"
4453938bdfb617c17e98b31fc5807d9255eda703,"Modify tests for XMLSerializer


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318430 13f79535-47bb-0310-9956-ffa450edef68"
f174ce687791253457831fbcb839d21f88b82aac,"updated according to the latest spec:
http://www.w3.org/TR/2002/WD-DOM-Level-3-Core-20020409/core.html#Node3-lookupNamespacePrefix


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318431 13f79535-47bb-0310-9956-ffa450edef68"
a5e03d4afdc13ca3c6b61e28d021ff01ba3abe02,"Implemented lookupNamespacePrefix && lookupNamespaceURI
using the following algs.:
http://www.w3.org/TR/2002/WD-DOM-Level-3-Core-20020409/namespaces-algorithms.html#lookupNamespacePrefixAlgo
http://www.w3.org/TR/2002/WD-DOM-Level-3-Core-20020409/namespaces-algorithms.html#lookupNamespaceURIAlgo


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318432 13f79535-47bb-0310-9956-ffa450edef68"
5567c91fd964e6c082696cbe56888e161cfd71ec,"Breaking XMLDTDValidator into two components:  one, thich implements DocumentHandler, does validation of instance documents given a grammar; the other, XMLDTDLoader, implements XMLDTDHandler and XMLDTDContentModelHandler and constructs the grammars.  All that now should be necessary to make DTD grammar caching work is for XMLDTDLoader to actually implement XMLGrammarLoader and to make the grammars it constructs available to the grammar pool.  Then it should be relatively straightforward to slap preparsing functionality on XMLDTDLoader by giving it the ability to talk appropriately with the DTD scanner.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318433 13f79535-47bb-0310-9956-ffa450edef68"
26249d35f1459bd07ad78736381c3140354e72e2,"apparently I neglected to include this in ty commit from yesterday... :-( Everything should now build fine.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318434 13f79535-47bb-0310-9956-ffa450edef68"
68617f2f7f8e9f26ab453263a69373171a261c72,"A performance patch from Henry Zongaro:
""In most cases, the Hashtable that's used for these Augmentations objects
contains only a couple of entries, so I thought that it might be better to
have the AugmentationsImpl contain two different inner classes to store
the augmentations.  When there are only a few augmentations,
the AugmentationsImpl uses a class that contains an array that contains
the keys and values; when the number of augmentations exceeds a certain
value, it switches to the other inner class which uses a Hashtable.
I arbitrarily chose 10, but didn't experiment to find the break-even point.""


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318435 13f79535-47bb-0310-9956-ffa450edef68"
f491bd3a8eee637dab58169c17331ffcdb682099,"A performance patch from Henry Zongaro:
""The various components in the pipeline call ""getProperty"" and ""getFeature""
many times per parse:  18 times for getProperty without the schema validator
in the pipeline, 25 with it in the pipeline.  Each time the getProperty and
getFeature methods call checkProperty and checkFeature methods,
respectively, to determine whether those properties and features are valid.
The same properties and features end up being checked a number of times
for each parse.
I tried changing those methods to only check whether the property or feature
was valid when the fProperties.get or fFeatures.get returned a null value,
and to assume that it was a valid property or feature, otherwise.""


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318436 13f79535-47bb-0310-9956-ffa450edef68"
1b1ed1c2d43f423debc07fedc9039cceb4cc641a,"Performance patches from Henry Zongaro:
""The parser spends a lot of time in the characters() and handleCharacters()
methods of this class doing normalization.  One obvious improvement was
in the references to ""fBuffer.append(text.toString())"" - the conversion of
text (which is an XMLString) to a String is unnecessary because StringBuffer
class has an append method that accepts a char[] with offset and length.

In the findSchemaGrammar method, if there are no schema location hints
available, the code ends up creating an fXSDDescription.fLocationHints
array with zero elements and calls System.arraycopy to copy the empty array
to it.  But code elsewhere is able to handle it if that array is null, so I changed
it to avoid creating an array with zero elements.""


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318437 13f79535-47bb-0310-9956-ffa450edef68"
338b51afeed0529683b144b6ab76730ee9338c9d,"Rename DOMRevalidationHandler to RevalidationHandler


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318438 13f79535-47bb-0310-9956-ffa450edef68"
68c772561b45397a530d3f60fe83d2fbc8d176c6,"fix some wrong IANA names.  Also, and thanks to Glenn Marcy for pointing this out, since the IBM 1140 family does have an IANA name, use it.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318439 13f79535-47bb-0310-9956-ffa450edef68"
554d262da2a272494c22f1e8c71faf62840af11e,"removing IANA aliases with ""+"" symbols in them.  Since these cannot be valid XML 1.0 encoding names according to production 81 of that spec, including them in the table is pointless.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318440 13f79535-47bb-0310-9956-ffa450edef68"
79a410ad5ea69368e239b6b838936aeb2d11af1b,"The error message only takes one replacement text: the attribute name,
but the code supplied 2: element name and attribute name.
I removed the element name.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318441 13f79535-47bb-0310-9956-ffa450edef68"
e0bfb69e179c0403fdb2e167ad0a248e12df0440,"Accidentally committed a change made for debugging purpose.
Removing it now.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318442 13f79535-47bb-0310-9956-ffa450edef68"
3c2f837dbca259201119f32736fd75ef679d2586,"Fixing 2 bugs:
1. Potential ClassCastException: when validating a valud constraint against
an xsi:type, we should use the String value (instead of the actual value) for
validation.
2. Potential NullPointerException: when there was an error validating a String
value, we shouldn't try to use the actual value (null in this case) for further
constraint checking.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318443 13f79535-47bb-0310-9956-ffa450edef68"
6dd821e07c3bf6aa5c207fd4d0bc9e00de1cbdde,"A performance patch from Henry Zongaro:
""I changed the parseSchema(XMLInputSource,XSDDescription) method
to defer creating a DOMParser and the various traversers until it knows
that they're actually needed.  I also moved the invocation of the prepare()
method until we know that the registries, etc. that it clears are going to be
needed.""


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318444 13f79535-47bb-0310-9956-ffa450edef68"
7bed8af57d9b6926e6e043fb7c0821a83b858d13,"Provide error messages for the constraint
""Attribute Group Definition Properties Correct"" (ag-props-correct).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318445 13f79535-47bb-0310-9956-ffa450edef68"
6ca45d8cc07648b3dd5597f0e7f67d5e254915c5,"1. Should use different error code based on whether an attribute group or a
complex type is traversed.
2. Also provide the type/attribute group name as part of the replacement text
of the error message.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318446 13f79535-47bb-0310-9956-ffa450edef68"
c6554b41586daa67948623566b97b2121e6dd656,"When the item type of a list type is or is derived from ID, or when one of
the member types of a union type is or is derived from ID, the list/union type
itself should also be considered as derived from ID.
The implementation of ""isIDType()"" method is modified to reflect this.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318447 13f79535-47bb-0310-9956-ffa450edef68"
fad4e53fc5fe6d68ea4052983a23c55f39480187,"Fixing bug [9041]:
We were trying to defer the traversal of Schema documents, until they are
actually referenced. But in this case, it was too late to load the schema
*after* we try to get the element declaration from the content model.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318448 13f79535-47bb-0310-9956-ffa450edef68"
1daa24e03f7ed8cce51ec166e6795f4881a4a8d1,"Moved DOMWriter implemenation to a separate class: xml.serialize.DOMWriterImpl.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318449 13f79535-47bb-0310-9956-ffa450edef68"
65f78a97c0a14a154e0ca81535580f92c0bdcc80,"(hopefully) fixing a bug reported by Kosuke Kawaguchi.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318450 13f79535-47bb-0310-9956-ffa450edef68"
819bff62e2a4ae6ea626a33f146b85b2a45acf3d,"making a couple of private methods public, since they definitely have applications outside the specific needs of thie class.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318451 13f79535-47bb-0310-9956-ffa450edef68"
a4b145a52990ad1d7d0e9aeefd3dd8b5591d00bf,"implementing DTD grammar caching/preparsing.  XMLDTDProcessor is what XMLDTDLoader used to be; XMLDTDLoader extends XMLDTDProcessor by adding functionality specifically needed for preparsing.  The limited testing I have done appears to indicate that this set-up does indeed succeed in caching DTD grammars both when preparsed (as external subsets) and when loaded as part of parsing an instance.  I will post a message describing in more detail what I have done here on the xerces-j-dev list tomorrow.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318452 13f79535-47bb-0310-9956-ffa450edef68"
4890ffe970d6360f38cea28b084ea693fab76076,"in order to make DTD preparsing/cacing work, I had to make the document scanners aware whether there was a need to build a grammar (and hence to expand entities).  I also had to add some new functionality to the DTD scanner so that it can be reset outside of a component manager.  (it could be argued that the DTD preparser should be a componentManager, but I saw no reason to complicate the implementation by doing that at this stage.)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318453 13f79535-47bb-0310-9956-ffa450edef68"
3a63eaaf3648b614265019bcb36a5ee949532dff,"This is the face of preparsing as designed to be used by a user application.  It can preparse schema but has no dependency on schema classes.  It can also preparse DTD grammars.  It also has a facility for adding other grammar implementations.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318454 13f79535-47bb-0310-9956-ffa450edef68"
547f48f569e4264839af4ba39c0ac388dff24657,"make DTDConfiguration use XMLDTDProcessor instead of XMLDTDLoader


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318455 13f79535-47bb-0310-9956-ffa450edef68"
614d09d73ec758a2f1293a5699be1686f88d135f,"the work of carrying (some) of the information the scanners need to know when a DTD that has been cached is being used is done now by ValidationManager.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318456 13f79535-47bb-0310-9956-ffa450edef68"
fca8e232f036101058031125f853783b3be46312,"a sample that shows how to use Xerces native grammar preparsing/caching abilities.  This does somewhat the same thing as the ASBuilder sample, except that it handles DTD grammars (external subsets) and (hopefully!) its implementation will be a fair bit cleaner.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318457 13f79535-47bb-0310-9956-ffa450edef68"
2af25186f35f5e6bb05aa592e6fdcab0ec81db16,"Add interfaces that were added in the DOM L3 WD.
Those are experimental and can be modified.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318458 13f79535-47bb-0310-9956-ffa450edef68"
5fc9d03aac36730ce655700b8cdd31585e2b43c1,"Add DOM Level 3 Load and Save interfaces (WD Experimental)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318459 13f79535-47bb-0310-9956-ffa450edef68"
5ddb29aef06982c7093e72c9ffd688f1a0eacf2c,"Re-organize the code to expose DOM L3 implementation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318460 13f79535-47bb-0310-9956-ffa450edef68"
83c6614a102720a5a0573e8c79c7cc4e08d385b1,"Modify tests to use new interfaces for DOM L3


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318461 13f79535-47bb-0310-9956-ffa450edef68"
7260d95a776b3fce6d0caa510904ecb9ce96db08,"Fixing bug [9771]:
It's a bug in XSGrammarBucket: when a grammar doesn't import other
grammars, we failed to add it to the bucket.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318462 13f79535-47bb-0310-9956-ffa450edef68"
31b7fcd18f0a0e3e6de4e75b18a30276b5a33832,"updates samples to use DOM L3 interfaces


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318463 13f79535-47bb-0310-9956-ffa450edef68"
8135e480d5e3d278be7df9e00f4d9e5755647878,"fix a problem in loading the schema grammar loader.  Now XMLGrammarBuilder appears to behave as well as DOMASBuilder.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318464 13f79535-47bb-0310-9956-ffa450edef68"
76caa5ec943666db2d1789dba7e165da03e34528,"DOM Level 3 interfaces, put in a different hierarchy to allow
building with this or the DOM Level 2 Core


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318465 13f79535-47bb-0310-9956-ffa450edef68"
4ba5722acb6e344322d4db96056f04bd58261309,"continued Elena's changes to have a new build supporting DOMLevel 3 Core,
the default build no longer contains the DOM Level 3 Core extensions,
on the other hand a bunch of new targets are defined to build Xerces with it,
compile-dom3, samples-dom3, tests-dom3, test-dom3.
More may be added later on.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318466 13f79535-47bb-0310-9956-ffa450edef68"
1bcd64a10fa9b98f88816b31b6b9e8ba0a7ea1b6,"Registering the schema message formatter to the error reporter.
Otherwise the error messages won't be formatted correctly.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318467 13f79535-47bb-0310-9956-ffa450edef68"
2ce11d6b446d740052437a0430c0144c37ca000f,"Fixing bug [9795]:
Particle derivation (restriction): derived: element; base: model group.
We need to create a fake model group for the element in this case, and the
min/maxOccurs values for such fake thing should be 1 and 1.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318468 13f79535-47bb-0310-9956-ffa450edef68"
3814b5c34c282014be638463238bd7380f0cd32c,"added a bunch of additional targets for DOM Level 3 support


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318469 13f79535-47bb-0310-9956-ffa450edef68"
a01d7a8db8b4fb1ff2a2f8c62736b56bb2d84d63,"fix a couple of bugs with schema preparsing:  make sure the error reporter knows about schemas; and make sure XSDDescription .equals method actually works in contexts such as Hashtables (the parameter should be an Object, not an XMLGrammarDescription).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318470 13f79535-47bb-0310-9956-ffa450edef68"
39aa384e8de5a15340fb1939f8d64114f0ee02c0,"fix very many bugs in DTD grammar caching/loading.  In fact, it now does something whereas previously it did nothing in a clever and complicated way.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318471 13f79535-47bb-0310-9956-ffa450edef68"
706f38b480264bf6098a61ea9ce05d03ab7b05db,"fix a number of bugs in the nascent XMLGrammarBuilder sample.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318472 13f79535-47bb-0310-9956-ffa450edef68"
3354c2c1c415c9453c7586ed780f02c93745d9cb,"small fix to please the latest version of ant


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318473 13f79535-47bb-0310-9956-ffa450edef68"
90d327f6b4eaebcda2c3c7be0cc05b3420eca0cb,"Re-implemented lookupNamespacePrefix and lookupNamespaceURI using
different algorithm from the one in the DOM L3 WD.
Added implementation to isDefaultNamespace().
Modified  import statements given the change in DOM L3 implementation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318474 13f79535-47bb-0310-9956-ffa450edef68"
afd23c2a0c5f32b9384f592f36eb578203bdf081,"Minor bug fixes in normalizeDocument and lookupNamespaceURI


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318475 13f79535-47bb-0310-9956-ffa450edef68"
98e74731ca41683044d0a2cd212957679b36f33d,"Updating release document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318476 13f79535-47bb-0310-9956-ffa450edef68"
ce4c937bcd04bc1809516784256c774d1cc62314,"initial implementation of compareTreeNode.   Further testing and some cleanup required


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318477 13f79535-47bb-0310-9956-ffa450edef68"
0ca00513ef69c712b32f780d6112f4df373a44f6,"Add specialized lists (StringList, ObjectList) to PSVI interfaces. Use these interfaces
when need to return a list of strings or a list of objects.
Add implementation for StringList and ObjectList interfaces.
The implementation is not optimized: we need to revisit the code and make sure
we create list objects only when needed. Also, need to consider whether we can
use StringList instead of Vector and string arrays.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318478 13f79535-47bb-0310-9956-ffa450edef68"
ddfb5af0034cb87e067a9241646de6f2488d9930,"getErrorCodes now returns StringList (instead of Enumeration).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318479 13f79535-47bb-0310-9956-ffa450edef68"
0d9c0048d445f03050d7c22f9250b9a0601227a0,"Add removeItem (Node item, boolean addDefault)  method to AttributeMap to allow
removing *this* node. Make sure that id tables are updated during removal or
addition of default attributes of type ID.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318480 13f79535-47bb-0310-9956-ffa450edef68"
a372bc36d2e9dd227ff606d06c8f5851a7400dbf,"Save type for default ID attributes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318481 13f79535-47bb-0310-9956-ffa450edef68"
b77e599e8cee67392a6b17401c2abbd8b73ebec1,"Add more testing for ID attributes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318482 13f79535-47bb-0310-9956-ffa450edef68"
7626d9643b57ff0f89f9057c2518be1de30b178e,"Include in testing dom.ids.Test


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318483 13f79535-47bb-0310-9956-ffa450edef68"
56fe671cd9be93d50fd7411d3d01d1b96efe0320,"Update documentation related to DOM Level 3


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318484 13f79535-47bb-0310-9956-ffa450edef68"
4a4f29b95d4523a4992050c778bd0de2806b204a,"New test sample for DOM L3


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318485 13f79535-47bb-0310-9956-ffa450edef68"
e085497525150a60e43d963c8cd108af67719269,"document dom3 targets


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318486 13f79535-47bb-0310-9956-ffa450edef68"
f1276d4ec66b296a6d7c4f70c90ace9ef0e2671d,"Update comments


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318487 13f79535-47bb-0310-9956-ffa450edef68"
bf329a322416e6aa753128aa20d713574091f246,"added line for compareTreePosition


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318488 13f79535-47bb-0310-9956-ffa450edef68"
d80ebefd8e7b9ff72d0af43b45781174aecb655a,"Re-organize the code to allow building DTD only Xerces (build dtdjars)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318489 13f79535-47bb-0310-9956-ffa450edef68"
8e1bed05a185b8b9fa2fd85c392d0ee3a0768ea7,"Modify build dtdjars target:
The src need to include org.apache.xerces.impl.xs.XSTypeDecl and
org.apache.xerces.impl.XSSimpleType to be able to ask isIDType() in
DOM Parser. Need to come up with better way to query isIDType..
Also includes org.apache.xerces.impl.xs.psvi -- it allows us to expose PSVI information via DOM.
Note xni.psvi is also included.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318490 13f79535-47bb-0310-9956-ffa450edef68"
62e7b36f3d3bbc61866ceaa1a46a9ccafbc31a59,"Xerces fails to compile under JDK 1.4


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318491 13f79535-47bb-0310-9956-ffa450edef68"
20d14bab91dca656a7341b6335dd0cc49ba2fdff,"Update performance/samples docs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318492 13f79535-47bb-0310-9956-ffa450edef68"
9eb25ad6fff874d637060f6742a0c7958484063d,"1. Changed the title of the schema page from ""schema limitations"" to ""xml
schema"", because its content is not limited to ""limitations"".
2. Added a new item in the schema page, to describe the usage of PSVI
and schema component API.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318493 13f79535-47bb-0310-9956-ffa450edef68"
a58405f4f6e6a6a71e00eddd6b94fe3353aade2c,"Update docs to make sure it is clear what interfaces are DOM L3 WD interfaces.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318494 13f79535-47bb-0310-9956-ffa450edef68"
acba9206f4f00e00058dfc6761e60204f5c8a618,"Update docs to make it clear that these interfaces are DOM L3 WD interfaces.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318495 13f79535-47bb-0310-9956-ffa450edef68"
13e0b29ec6d63b277fd645455a96c7744a8d90bf,"implemented the DOM Level 3 renameNode method,
the only piece missing is the firing of the related mutation events,
other than that everything seems to be working.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318496 13f79535-47bb-0310-9956-ffa450edef68"
d0472b128706844a20cffd395c1efc2deb6b6b35,"new test program to test the renameNode method


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318497 13f79535-47bb-0310-9956-ffa450edef68"
c6f32dda7f3eeea24328372e7c79faa2ec391535,"excludes new DOM level 3 test program from default build


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318498 13f79535-47bb-0310-9956-ffa450edef68"
cc18b3d8252fd847905e3a33be0d81fcca3e92a0,"fixed typo


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318499 13f79535-47bb-0310-9956-ffa450edef68"
8ef35b68516f684269e40de5ae77c67c1fed2881,"Fixing bug [9974]: typo of the name of the boolean type.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318500 13f79535-47bb-0310-9956-ffa450edef68"
1d1451a301a96fdeeb8d425699d41b06f69fc222,"finally:  some documents on grammar caching.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318501 13f79535-47bb-0310-9956-ffa450edef68"
f450e64d6d02e4298a4a5dc4fe96325803f45bd1,"in response to at least two bug reports, adopt a change of implementation from SAX 2.0.1.  Now it should be possible to create attributes lists with 0 elements.  Note that this has no effect on the behaviour of this class (except it will not throw ArrayIndexOutOfBounds exceptions) and neither does it affect signature compatibility.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318502 13f79535-47bb-0310-9956-ffa450edef68"
7f3aa17048737f92d955fe6f773054bb9383c77d,"final release update before 2.0.2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318503 13f79535-47bb-0310-9956-ffa450edef68"
80ab0016cf601b35cf7eea7052d7331c39bcddcc,"flip the version number to 2.0.2.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318504 13f79535-47bb-0310-9956-ffa450edef68"
7755200680b9d2be2967804a91dfbf0948fe70ae,"fix to make JAXP 1.2 properties work again.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318506 13f79535-47bb-0310-9956-ffa450edef68"
6c72ab817ca6b4636c4c6d79cc9d2063e3796ea7,"fix for bug 10251


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318507 13f79535-47bb-0310-9956-ffa450edef68"
0ec7d45fbc6e0d47f72127d40ffae0a92add1f7d,"first of the static mutability changes.  Now all RECOGNIZED_(PROPERTIES | FEATURES) members are final private; we also return clones of them in getRecognized(Properties | Features) methods instead of the originals.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318508 13f79535-47bb-0310-9956-ffa450edef68"
731c48af0b3f14394a908aeb0b5dc9788958ea40,"Unexpected '|' characters in the error messages.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318509 13f79535-47bb-0310-9956-ffa450edef68"
70b7b24feecf18d8ac4f51eb39acdd929dea5021,"applying some fixes from Kent Tamura to the regular expression code used in Schema validation.  This should fix bugzilla bugs 3560,, 7752, 7806.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318510 13f79535-47bb-0310-9956-ffa450edef68"
ed83712d2bb5581aaebeda0035fc77a5dc2ff321,"give credit where it is due.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318511 13f79535-47bb-0310-9956-ffa450edef68"
6a96d138f6731c496729b724263125989d8a1f04,"Fix for JAXP1.2 property - SchemaSource for the case when value is Object[].


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318512 13f79535-47bb-0310-9956-ffa450edef68"
a423f185884f22fda36d191d1e9701e93e0268d7,"Fixing the pull-parsing FAQ:
- typo ""to to"". should be a single ""to"".
- update ""continueParse"" using the return value of config.parse().


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318513 13f79535-47bb-0310-9956-ffa450edef68"
fec2481e45bcadcb7a75f4b2e2577953e1e66ff3,"Fixing bug [10474]: min/maxOccurs doesn't work properly.
When building the syntax tree, we need to copy the leaf nodes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318514 13f79535-47bb-0310-9956-ffa450edef68"
8d8db84780e0d153993332f65bc3f5e9eadb8f05,"since there have been no loud cries in protest, modifying the static kidOk array in the DOM CoreDocumentImpl to address static mutability issues.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318515 13f79535-47bb-0310-9956-ffa450edef68"
5527195ce8d119f5ff253859ffa60fd42192ac75,"addressing static mutability issues in XSAttributeChecker.  Since this new implementation, where XSDWildcardTraverser can rely on getting fresh objects from XSAttributeChecker also saves some copying, it stands some chance of actually being more efficient than the old approach.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318516 13f79535-47bb-0310-9956-ffa450edef68"
2bdfd9d9462214cedd47a33552495aadfa291f19,"Use ""&amp;"" in the source code.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318517 13f79535-47bb-0310-9956-ffa450edef68"
46622833b8f74ff4993c961bf1495758e213ad3a,"statib mutability updates.  Make a few variables private that do not need public visibility.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318518 13f79535-47bb-0310-9956-ffa450edef68"
0a9feb8dae89daa2b1801f39ac326e13f18d501f,"make some constants final; these should always have been final, so even were it not for static mutability concerns this would be a clear bugfix.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318519 13f79535-47bb-0310-9956-ffa450edef68"
b4fb7e97464f5e7fdf907d77b2a78f181f5644b1,"removing some unnecessary files.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318520 13f79535-47bb-0310-9956-ffa450edef68"
4b946cbf1ada5bf5ff6c0ebf2dec15a4bcc64b19,"fix to make facets work with Hexbinary and Base64 datatypes on non-ASCII platforms.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318521 13f79535-47bb-0310-9956-ffa450edef68"
d106a79f5ebe26ce7873bd0d8b56c0d125afc501,"more static mutability fixes.  These simply make access to various static members more restrive--static members which is is not obvious access to which is actually useful anyway.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318522 13f79535-47bb-0310-9956-ffa450edef68"
1f0f5d551d80d25cf89f5dfa965b6a6fe93c5585,"Fixing http://nagoya.apache.org/bugzilla/show_bug.cgi?id=10607


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318523 13f79535-47bb-0310-9956-ffa450edef68"
e2a9e6596bd858abaeb4031ce72199d91bfad512,"Fixing Java serialization: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=10491


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318524 13f79535-47bb-0310-9956-ffa450edef68"
4b1569aefddf677389b43ac63ca3af9a28acd8e0,"Add implementation to replaceWholeText and getWholeText.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318525 13f79535-47bb-0310-9956-ffa450edef68"
7ebc0aae1d1825c128a80d1478df581de5caa218,"Because of nested entities we need to query for entity declaration at the
endGeneralEntity call. Otherwise, entity replacement text won't be available.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318526 13f79535-47bb-0310-9956-ffa450edef68"
a6429dae8508001af521ee138ba5adbd4cc20084,"Add tests for DOM Level 3 and for Java serialization.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318527 13f79535-47bb-0310-9956-ffa450edef68"
08113028bacf9a363964bd2d1f286cc9c0138e9b,"Add different tests for DOM Level 3


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318528 13f79535-47bb-0310-9956-ffa450edef68"
f955a41340104a83144c1fe7b7c29849f99a6405,"Fixing bug : http://nagoya.apache.org/bugzilla/show_bug.cgi?id=7972


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318529 13f79535-47bb-0310-9956-ffa450edef68"
5c4c4663369a327c24059fce0500a20e0db85a2a,"more static mutability changes.  Make SchemaGrammar.fAnyType statically immutable.  This complicates the design of the complex type traverser a bit, but that should not lose any noticeable efficiency.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318530 13f79535-47bb-0310-9956-ffa450edef68"
da4f787dd0ef78b24b1c36d016cd9493d5c4cb2d,"infrastructure for localizing DOM implementation and serializer error messages.  Unfortunately, since the DOM has no provision for setting or storing Locale info, we are limited to using the platform default in this implementation.  In subsequent commits messages will actually get localized.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318531 13f79535-47bb-0310-9956-ffa450edef68"
a24c9ca5e7944f9b1df322516c009640339e861e,"making the two static SchemaGrammars statically immutable (or at least they will be immutable once the static simpleTypes have this property.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318532 13f79535-47bb-0310-9956-ffa450edef68"
17bff973310f646d4f2e11e256f34b0cefe2750f,"a couple of javadoc fixes.  The DOM l3 implementation seems to need a few as well.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318533 13f79535-47bb-0310-9956-ffa450edef68"
039153ac570c66d32424acbdd430165b8e735d8c,"eliminate a few statics that were only used in fluffing up error messages.  These create static mutability risks and error situations do not tend to be ones where optimizing for speed is critical.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318534 13f79535-47bb-0310-9956-ffa450edef68"
b8ee6d40d507d55ec020ebf9eac1a129ec43d2b3,"Add support for DOMBuilderFilter.
The filters are not supported with deferred DOM implementation.

All the code is located in AbstractDOMParser but for performance reasons we might
want to move this code to another class.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318535 13f79535-47bb-0310-9956-ffa450edef68"
0ec9311b382d6dec1bbe145dbc779a896787ba16,"Fix bugs in DOMBuilderFilter handling


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318536 13f79535-47bb-0310-9956-ffa450edef68"
667e87976f8e56a2c2f519a452c000a17323b67a,"Add support for DOMWriterFilter


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318537 13f79535-47bb-0310-9956-ffa450edef68"
7c45011a7078a282e8ac95d30bab10958500182f,"1. Resend 4 PSVI properties on endElement: element declaration,
type definition, notation, and validation context. Now all element PSVI
properties are available on endElement calls.
2. Fixed a bug in the method getSchemaDefault().


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318538 13f79535-47bb-0310-9956-ffa450edef68"
0704320678b5e2570b0cf7d4a7d425ab31ae1b75,"addressing static mutability issues in the Version class.  Now use of the fVersion field is deprecated, since that field cannot be made statically immutable and retain its function.  Instead, a new method--getVersion():  String--is provided; static immutability of this method can be guaranteed, while similar function to fVersion is provided.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318539 13f79535-47bb-0310-9956-ffa450edef68"
b4e6612b3bf9d64c5608f41ff3d272f5d9115d0c,"splitting messages specific to the DOM into a separate file from those used by the serializer.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318540 13f79535-47bb-0310-9956-ffa450edef68"
b4be0c49e13d7fd4ab676266bcd6c142beba1a72,"Add a new kind of DOM document implmentation, which supports PSVI.
When this kind of document is used, element/attribute nodes can be casted
to Element/AttributePSVI interfaces to retrieve PSVI properties.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318541 13f79535-47bb-0310-9956-ffa450edef68"
859aaa00350684744bfc50819ea05e76543212f7,"Update the dom parser: when the document class is set to the PSVI document
class, the parser stores PSVI properties in elements/attributes of such
document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318542 13f79535-47bb-0310-9956-ffa450edef68"
b928d62bcd2b03791d96b1706ea02c199be66992,"A line was removed by accident. I'm adding it back.
This caused some performance problem:
we don't need to do strick checking when creating a DOM tree from
the parser, because such checking is already perfomed by the parser.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318543 13f79535-47bb-0310-9956-ffa450edef68"
5f376b90e083774934eb9fefa089f3c6115a8b89,"localize some exception message produced by our custom reader classes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318544 13f79535-47bb-0310-9956-ffa450edef68"
54fc734757f2b1ffc9480ab3c8170741e8131c2e,"Fixing bug: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=10926


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318545 13f79535-47bb-0310-9956-ffa450edef68"
619d00f3d569d2c139942ac1887eeb55f471503b,"Fixing problems regarding circular references between schema documents.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318546 13f79535-47bb-0310-9956-ffa450edef68"
3e54fb6090e671974a9c4d5fcb4d84e951320acb,"Moving the interface ""ValidationContext"" from package impl.validation to
impl.dv, because it's part of the datatype interfaces, which live in impl.dv.
This makes it easy to use the impl.dv package as a standalone datatype
libaray.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318547 13f79535-47bb-0310-9956-ffa450edef68"
eb2d0c05ac1f7a892380449e216af5ad78547ff7,"The interface ""ValidationContext"" was moved to impl.dv.
This sample needs to be updated accordingly.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318548 13f79535-47bb-0310-9956-ffa450edef68"
24260a0585fedcb38ee955e6d006f8f1c10c8e9a,"make static XSSimpleTypeDecls immutable.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318549 13f79535-47bb-0310-9956-ffa450edef68"
5710dd4ba83f27be5a6f09864efeb2103c92be6f,"Fix for the redefine case: when both files are redefined, need to check
the second condition based on namespace and location.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318550 13f79535-47bb-0310-9956-ffa450edef68"
65412468625cac57ddb5e3f6ae0be5fbcbc9e3ee,"This interface provides an access to the post schema validation infoset for an
 API that provides streaming document infoset, such as SAX, XNI, and
 others


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318551 13f79535-47bb-0310-9956-ffa450edef68"
ad1991f87436be6bc760f942587864ee9dc7966a,"Users can now retrieve PSVI in SAX using PSVIProvider interfaces.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318552 13f79535-47bb-0310-9956-ffa450edef68"
a14963d6cd30734da3e82a20726e87078ba4420f,"Code cleanup for handling DOM L3 features.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318553 13f79535-47bb-0310-9956-ffa450edef68"
ac43c0f8fb96b87e6db17e2144d1ea31d2333f1c,"Update some of the serialization code to use the new DOM/Serializer
message property files, instead of hardcoded Strings, to make localization
possible.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318554 13f79535-47bb-0310-9956-ffa450edef68"
e27f9abd5f2eaa6b3fcd80d7e2859c72b3c867c4,"Provide an empty validatoin context when no such context is specified.
This makes the datatype libary easier to use for types that don't need the
validation context. And it doesn't have performance impact: the null-pointer
check happens anyway.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318555 13f79535-47bb-0310-9956-ffa450edef68"
e14524d133caaa651177faa4c4da85b4ff8c1166,"Overwritten print* functions in XMLSerializer to check if a character is a valid XML character.
During serialization of CDATA sections we also check if data includes characters that can not be represented. In this case CDATA section will be split.

This change might have effect performance of the serializer.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318556 13f79535-47bb-0310-9956-ffa450edef68"
39cde9c713a948ac02c2794ce479e9e3cc7babb6,"add back a constructor with only a Stream argument so that the build ""tests"" target will work again.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318557 13f79535-47bb-0310-9956-ffa450edef68"
c7e727f789c50b704034703f378118f37515f9bc,"make the get-conftests target work (thanks to Shane Curcuru for pointing out that it did not).  Also, taking the opportunity to update to ant 1.5; this should fix some problems, particularly with respect to attribute ordering, which we have previously had to hack around.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318558 13f79535-47bb-0310-9956-ffa450edef68"
bf9e43cdab573eaf51a13056b04df662473710b4,"Commented out a debugging message, as reported in bug [11085].


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318559 13f79535-47bb-0310-9956-ffa450edef68"
70be908f3fbcae34b2e9756b88f79ab271012a48,"changing behaviour of datatype factories so that they may be used to create multiple instance of the datatypes.  This means that our default implementation must be used for instance document validation, but the factories can still serve a useful role as gateways to standalone datatype libraries.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318560 13f79535-47bb-0310-9956-ffa450edef68"
05d173f452d7c5e5dad2a01ea22532c0bce09516,"some minor cleanup


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318561 13f79535-47bb-0310-9956-ffa450edef68"
75fa61002ec06856faec9a3cd36dac70ae4c8bc5,"DOM error message localization.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318562 13f79535-47bb-0310-9956-ffa450edef68"
5845833beebfe294584140c6debb6f9ea5662acc,"DOM error message localization.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318563 13f79535-47bb-0310-9956-ffa450edef68"
ba9bdf054eaee5cd7718e39a343600c8d2858b5e,"minor doc fix.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318564 13f79535-47bb-0310-9956-ffa450edef68"
fe96abd8187c17a37c8784563270064350480c2f,"static mutability fix.  Now the XHTMLNamespace member has a sensible value, and a method is provided so that this can be overridden by an application on a per-instance basis.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318565 13f79535-47bb-0310-9956-ffa450edef68"
db80fe019fecfe0ea1fccf6d482388842fc82758,"Fixing bug [11155]. It contains 2 parts:
1. Traversal: for a model group like this:
 <sequence/>
we didn't generate a particle. But we should.
2. Content Model: for a case like this:
 <choice>
    <sequence/>
    <sequence>
      ...
    </sequence>
  </choice>
we used to ignore the first (empty) sequence. Instead, we should treat the
second sequence as optional.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318566 13f79535-47bb-0310-9956-ffa450edef68"
b6178b8a210c1c7100c50cf4380cde4876bd026c,"Add check to avoid NPE.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318567 13f79535-47bb-0310-9956-ffa450edef68"
d6bea98148e2fa83e6475b54fbde627c34a65027,"Compute baseURI value of element


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318568 13f79535-47bb-0310-9956-ffa450edef68"
ec05a40f06749ea2a4e0899679e1edbf598804ff,"Overrides getMessage() method in DatatypeException to return
the formatted&localized error message.

REVISIT: the system locale is used to load the property file.
do we want to allow the appilcation to specify a different locale?


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318569 13f79535-47bb-0310-9956-ffa450edef68"
36edf3db18969926ca5070193ae3654b6a6230da,"Remove (some of) the dependency from schema dv implementation (impl.dv.xs)
to schema core implementation (impl.xs).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318570 13f79535-47bb-0310-9956-ffa450edef68"
3750efb3978e2c9f94358c755ebbb08b27699565,"2 new ScheamDVFactory implementations: one for XForms base types (base),
and one for all schema built-in simple types (full).
The difference between the full one and the current SchemaDVFactoryImpl
is that the latter uses an XSDeclarationPool while the former doesn't.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318571 13f79535-47bb-0310-9956-ffa450edef68"
59f3286740957b0739cf48751da02ca76c17785c,"1. Make the build target ""tinyjars"" work. This jar depends on some of the
schema component and datatype interfaces. We need to include them in the jar.

2. A new build target ""dvjar"", which generates a schema datatype jar. The
result ""xercesDV.jar"" provides the ability to query/create schema tpes, and
use them to validate String data, without the dependency on any other xerces
jars.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318572 13f79535-47bb-0310-9956-ffa450edef68"
300910c9a720c1b96e10cd9fe37779ce291fceea,"new version without any static table to avoid static mutability problems


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318573 13f79535-47bb-0310-9956-ffa450edef68"
db41ce562b6007b9f6f4894212998a02ee2fba93,"updated to use new regitry class


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318574 13f79535-47bb-0310-9956-ffa450edef68"
c6739ef25b45e612c9dd868b96b98d4f85740b52,"making this class somewhat more extensible by providing a method for the constructor to call to create an instance of the EntityScanner implementation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318575 13f79535-47bb-0310-9956-ffa450edef68"
e92ed3c32ee2a8ba41557d9a913a13fdbfb956c0,"Implemented a test platform on which XML 1.1 can be implemented.

Here, I have only implemented XML 1.1 whitespace handling and support for the new version number.  But, using this architecutre, it should be possible to implement the rest of the new features without disturbing the current XML 1.0 default.

The implementation is based on a new configuration (XML11Configuration) which extends StandardParserConfiguration by creating a new XMLEntityManager, XMLDocumentScanner and XMLDTDScanner components which implement XML 1.1 functionality.  This is not the most efficient approach from the XML 1.1 perspective, but it allows the current code to remain (almost completely) unchanged--particularly advantageious given the performance challenges of some XML 1.1 features.  Still to do will be to properly extend XMLChar to take into account things like the new XML 1.1 definition of Name/NCName.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318576 13f79535-47bb-0310-9956-ffa450edef68"
abe7fbc494cec7f3b2e3fbf0a78761997719aae3,"This commit addresses several things:

- adds entries for a number of encodings that some
JDK's support which we previously didn't;

- adds support for IBM1047.  This is not yet part of the IANA
registry, but there is a proposal to add it; see
http://lists.w3.org/Archives/Public/ietf-charsets/2002JulSep/0049.html

- Add a number of aliases that contain dashes.  This proposal
has also yet to be accepted by IANA; details can be found at:
http://lists.w3.org/Archives/Public/ietf-charsets/2002JulSep/0058.html

If either proposal is rejected, the change can be reverted
easily enough.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318577 13f79535-47bb-0310-9956-ffa450edef68"
764381c410587f7a08494516a7cb9deb9e5a1ee0,"Got rid of old dtdjar* targets because they did not seem to be useful; renamed tinyjar* to dtdjar*.  Also added a new target, xml11jars, so that a xercesImpl can be built which transparently uses the new (experimental!) XML 1.1 support.  Finally, renamed the output of the various new targets so that the resulting jars have somewhat self-describing names, and so that everything is not xercesImpl.jar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318578 13f79535-47bb-0310-9956-ffa450edef68"
773d6867289cb453d52b1a36d630be50ea11137a,"new version without any static table to avoid static mutability problems


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318579 13f79535-47bb-0310-9956-ffa450edef68"
198498664b510ac69f6e7bb366aa225334491930,"updated to use new regitry class


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318580 13f79535-47bb-0310-9956-ffa450edef68"
cf6f7c9929edc98321bb7183182beaf3889b279b,"Fixing bug [11323]. Thanks to Loz for reporting this, and providing a patch.
The error handler should be set when it's *different* from the one previously
set. A typo: changed ""=="" to ""!="".


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318581 13f79535-47bb-0310-9956-ffa450edef68"
bd2298ed43a997254de5fd284d6a1298bd9bb0b2,"Fixing bug [11349]. The normalized value in the ValidatedInfo object was
overwritten if the type is a list. Now we store the normalized value *after*
each of the items is validated, so it won't be overwritten.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318582 13f79535-47bb-0310-9956-ffa450edef68"
ef4f12df6ceef58d0976e59c42d72c11836172c8,"Fixing bug http://nagoya.apache.org/bugzilla/show_bug.cgi?id=11176


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318583 13f79535-47bb-0310-9956-ffa450edef68"
066c932d2fa3cc630eb45b38e52b1652a5d404cb,"Fix docs to allow null input source (see bug http://nagoya.apache.org/bugzilla/show_bug.cgi?id=11176)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318584 13f79535-47bb-0310-9956-ffa450edef68"
aa2bd508e7160698f5e87b79810bc55a0ed3d68c,"Allow value for setPrefix to be null or empty string:  http://nagoya.apache.org/bugzilla/show_bug.cgi?id=8738


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318585 13f79535-47bb-0310-9956-ffa450edef68"
9c7ed582a8968480eef94693649f51e5022b05f6,"DTDHandler could be null..


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318586 13f79535-47bb-0310-9956-ffa450edef68"
f632eced61e98093fab8e9197ab1df70a7c54c84,"Fixing bug [11455]. Added a null-checking to avoid NPE.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318589 13f79535-47bb-0310-9956-ffa450edef68"
0b4e7288777cbb49e0de1c66dddd766c3b6076af,"A performance patch from Henry: avoid using exceptions to determine whether
an array needs to be resized.
I also replaced some tab characters with spaces, because it looked ugly in
my editor where the tab size is set to 4.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318590 13f79535-47bb-0310-9956-ffa450edef68"
e4458009a887b61d3361568f06ed82bb3b3137fd,"A performance patch from Henry: avoid using exceptions to determine whether
an array needs to be resized.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318591 13f79535-47bb-0310-9956-ffa450edef68"
6885f23515e4c30ae8795eba2042e3e8ed2cf120,"when normalizing a String object to upper- or lowercase for a normalized comparison to some internal constant, it turns out that we need to be very careful not to rely on the default encoding of the platform.  This results from the fact that Turkish in particular does not map characters to their upper- or lowercase equivalents in English.  Now, everywhere where this could pose a problem, we force case conversion to be done according to an English locale.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318592 13f79535-47bb-0310-9956-ffa450edef68"
4d4332667c552c2afd233cb4ccb401633caffef3,"Removed the parameter that's not used anymore.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318597 13f79535-47bb-0310-9956-ffa450edef68"
cf15efa7c8f3e7ff317c8ad612b110f5d00331a8,"One more occurrence where exceptions are used as array-resizing conditions.
Changed them to straight array null/size checking.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318598 13f79535-47bb-0310-9956-ffa450edef68"
db7e9f6d5f052c838c6ea661bf6b6fa0668be7c5,"More changes to the namespace fixup algorithm. Fixing the case where
there is a top level element <xsl:stylesheet xmlns:xsl=""http://xsl"">
User creates via DOM another element ""body"" (bound to the ""http://xsl"" namespace) and
a namespace attribute re-bounding ""xsl"" to another namespace: <xsl:body xmlns:xsl=""http://another"">
Need to make sure that the new namespace decl value is changed to  ""http://xsl"".

Also, normalizeDocument is now recognizes ""namespaces"" feature. If it set to false - the namespace fixup algorithm is turned off.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318599 13f79535-47bb-0310-9956-ffa450edef68"
e701230f3af8b4437859489c0426fee0fbaed367,"More changes to namespace fixup algorithm.
During serialization we need to have additional checks to make sure we don't
output duplicate namespace declarations.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318600 13f79535-47bb-0310-9956-ffa450edef68"
2e58102dfdca03bd3ebffe11bf4c81ad18209ef8,"Add testcases to verify namespace fixup algorithm.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318601 13f79535-47bb-0310-9956-ffa450edef68"
8ece0283f67103f4472d5634d06aa9d318a611eb,"remove call to Vector.clear() so Xerces can be run under JDK 1.1.8.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318603 13f79535-47bb-0310-9956-ffa450edef68"
dad26d4c94e091c15dab2ad493df974133371627,"remove call to Vector.clear() so Xerces can be run under JDK 1.1.8.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318604 13f79535-47bb-0310-9956-ffa450edef68"
613383c7c4a3cd21f3e9e7f11746c56ece9375ac,"A new message for the error where non-whitespace characters appear in
schema elements other than xs:appinfo or xs:documentation.
Only these 2 elements have mixed content; all others are element-only.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318605 13f79535-47bb-0310-9956-ffa450edef68"
2898aea61783d8319102502a17a7961ec537ffba,"Report an error when non-whitespace characters appear in
schema elements other than xs:appinfo or xs:documentation.
Only these 2 elements have mixed content; all others are element-only.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318606 13f79535-47bb-0310-9956-ffa450edef68"
096a791585c939f523920528482da03d7089a7b8,"ensure that all our files have an @version field placed consistently above the beginning of the class.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318607 13f79535-47bb-0310-9956-ffa450edef68"
6c8101cdf427d82a880f5e9e3b9ee7bbb96b70fc,"Fixing bugs [11004] [11016] and [11017]. They are all the same.
It appears that the JLS requires every single-line-comment (//)
to be terminated by an end-of-line sequence. 3 Xerces files had this problem.
One was fixed by Neil in his previous commit. I'm fixing the other 2.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318608 13f79535-47bb-0310-9956-ffa450edef68"
082e2604b9d43e5eec49bae9d47b435d3b0dab94,"Add current node field to the wrapper. This field can be set by other components, such as
DOMNormalizer, to point to the current node in process.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318609 13f79535-47bb-0310-9956-ffa450edef68"
3269b5ff7f51d15f65055c6dcaa053630678974c,"Set current node on the DOM error handler wrapper, so that applications
that register DOM error handler before calling normalizeDocument,
have access to the current node if any validation error occurs.
Make some modifications to  DOMError and DOMLocator to make those objects reusable.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318610 13f79535-47bb-0310-9956-ffa450edef68"
066b073188ce872861c8918b63904de9803ebba1,"canSetFeature now accepts Xerces features.
If exception occurs during parsing, we now report it via DOMErrorHandler.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318611 13f79535-47bb-0310-9956-ffa450edef68"
edee82ac4a1bedfcb3347124807c2c24148fa212,"Update code related to DOMError


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318612 13f79535-47bb-0310-9956-ffa450edef68"
15f252c2367567a70ab397a1b3d3c053a21578bc,"Modify error message to include error node


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318613 13f79535-47bb-0310-9956-ffa450edef68"
dce380567b50fa4b9720e310430281c1a0d3dde8,"identity constraint fix.  Since character content is buffered and normalized in XMLSchemaValidator so that
it can be made available through the PSVI, no need to buffer it in identity constraints.  Therefore, removed
characters callback and added an ElementPSVI object to the endElement  callback.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318614 13f79535-47bb-0310-9956-ffa450edef68"
ebf0a0bd0bc370b68629274506fcc81b82c5a700,"no need to init sources, this is done by newInstance


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318615 13f79535-47bb-0310-9956-ffa450edef68"
aba4b01887f0991a92594df441badbe0f750c5a2,"more identity constraint performance fixes.  Eliminated unnecessary endDocumentFragment calls for XPathMatchers.
Selectors now do not attempt to examine character data; only fields need do this.
Refactored some code and eliminated some unnecessary global variables from XPathMatcher.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318616 13f79535-47bb-0310-9956-ffa450edef68"
7ff1ee2bfcb0c6c0fc2da1f083be16336576b89c,"1. Trying to improve the use of symbol tables. Many predefined Strings are
added to symbol tables every time the parser is reset. For small documents,
this would be a significant cost. Now since we call String#intern for Strings
in the symbol table, it's sufficient to use String#intern for those predefined
symbols. This only needs to be performed once.
2. These commonly used symbols are gethered together in a new class
XMLSymbols.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318617 13f79535-47bb-0310-9956-ffa450edef68"
d89777cdff273d0dc3a062bca904d78a906c6fba,"1. Trying to improve the use of symbol tables. Many predefined Strings are
added to symbol tables every time the parser is reset. For small documents,
this would be a significant cost. Now since we call String#intern for Strings
in the symbol table, it's sufficient to use String#intern for those predefined
symbols. This only needs to be performed once.
2. These commonly used symbols are gethered together in a new class
XMLSymbols.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318618 13f79535-47bb-0310-9956-ffa450edef68"
08b6fa46bf34f90a0c2587982823647d6185a42c,"fix for bug 11152


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318623 13f79535-47bb-0310-9956-ffa450edef68"
aec614b58d246e93977d69d435caef1c124070d2,"Shouldn't have moved the string constants from xni.NamespaceContext to
util.XMLSymbols. Those are public fields, hence part of the XNI API. Moving
them would break some applications that use those constants.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318624 13f79535-47bb-0310-9956-ffa450edef68"
cb40686471c3248f07d5234a938b898da5888b5b,"1. Fixing an obvious typo. The condition to resize an array should be if it too
*small"". So '<' should be used instead of '>'.
2. The ""fixed"" size of an SchemaNamespaceSupport should be 3:
- an empty context (which all NamespaceSupport objects have);
- an context for ""xml"" and ""xmlns"" decls (ditto);
- an context for global namespace decls on <xs:schema>.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318625 13f79535-47bb-0310-9956-ffa450edef68"
9ac1d36b501d69d80f2b0af4c615f760cc06e9a9,"1. Removed the SymbolTable parameter of NamespaceSupport#reset().
2. Call NamespaceSupport#reset() in XSDocumentInfo, after a new
NamespaceSupport object is created.
3. Don't need to declare ""xml"" prefix in XSDocumentInfo, because they are
already in every NamespaceSupport object.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318626 13f79535-47bb-0310-9956-ffa450edef68"
e6e2d0f932965baa46c9e85bcb3d71a598c7de22,"Fixing an error introduced by my earlier commits.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318627 13f79535-47bb-0310-9956-ffa450edef68"
9d5bec04e02d01464710df285d76098b372473ff,"Bug fix: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=9664.

The problem is reproducable when load-external-dtd feature is false and document has
a doctype (no internal DTD).
In this case we *forget* to send endDTD() call for SAX users. SAX has fewer events --
startDTD and endDTD -- where XNI also has doctypeDecl call. So in the pipeline we
send doctypeDecl event and in SAX we convert it to startDTD(). That means that in SAX
if we receive XNI startDTD call we ignore it. That also means that in the current code if we
don't need to load external DTD we will never send XNI startDTD()/endDTD calls. This will
cause problem in SAX since it already received startDTD() call (==doctypeDecl()) and it needs to receive endDTD() call.

The patch forces XNI pipeline to send startDTD()/endDTD() calls in this case.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318628 13f79535-47bb-0310-9956-ffa450edef68"
2fff20f493d6588583b086131a26b07539b0ffb7,"Bug fix in namespace alg. Added setNamespace method to allow turning on namespace
support from XMLSerializer (temporary solution -- in long term users should move using DOMWriter)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318629 13f79535-47bb-0310-9956-ffa450edef68"
ffb248dce32ec6afdc9dfe74a86f617649c59556,"Remove tests for invalid nodes, i.e. DOM Level 1, non xmlns prefix bound to the xmlns namespace, etc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318630 13f79535-47bb-0310-9956-ffa450edef68"
4bc2e2d6c6b216466241145a36cc79d70fcaf455,"only xmlns prefix can be bound to the xmlns namespace


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318631 13f79535-47bb-0310-9956-ffa450edef68"
357a2481d8ae603267053d65ab6d5a50af1d421c,"Change XNI to include XMLDocumentHandler.setDocumentSource/getDocumentSource and
XMLDocumentSource.getDocumentHandler. This change allows us to modify the pipeline dynamically,
in particular we now remove DTDValidator if no DTD grammar is available. This change improves parsing
performance by 7%-12% for medium size files (100k-1M).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318632 13f79535-47bb-0310-9956-ffa450edef68"
910720df73e61bdfbad26f3feb2744811e42bc49,"Update XNI samples following a change to XMLDocumentHandler/XMLDocumentSource


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318633 13f79535-47bb-0310-9956-ffa450edef68"
13781f56f0f35c40dfe59dc503366fc0b4954ce2,"According to the latest Namespace in XML erratum no other prefix other that
 ""xmlns"" can be bound to the xmlns namespace.
DOM L3 createAttributeNS() throws an exception in this case.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318634 13f79535-47bb-0310-9956-ffa450edef68"
e7f2f252798544eb7d3376069086c4ab2423aead,"""fix"" for bug 11571.  The bug report was wrong, but this fixes an NPE that it provoked.

Also, identity constraints now properly handle cases where an identity constraint is
defined on a recursive element.  I have also reworked some code to save
some method calls.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318635 13f79535-47bb-0310-9956-ffa450edef68"
5dd7e6b46b4974f804f2f1b62841a1e7425c229f,"emptyElement should not call handleEndElement if validator is removed from the
pipeline.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318636 13f79535-47bb-0310-9956-ffa450edef68"
649c3c60460f1ca94877aeecc6ac63567dd69438,"for external subset preparsing, set an XMLErrorReporter on the EntityManager so that
it can create a locale-sensitive reader.  Also, eliminate a spurious, synthetic endDTD call.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318637 13f79535-47bb-0310-9956-ffa450edef68"
e7d32d1d1d01ca45aa945f80738b25e5e9ade486,"Applied patch from Philippe Le Hegaret: NPE parsing entity with no value.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318638 13f79535-47bb-0310-9956-ffa450edef68"
8ec4621644aefa1919b7768bae738dfd93d8846a,"Allow both --MM-- and --MM as valid gMonth representations.
We'll remove the support for --MM-- when the erratum is officially in the rec.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318639 13f79535-47bb-0310-9956-ffa450edef68"
0a0af77b981d0f58a64b8c25a5dd02d6e51e3864,"The processContents for ""anyType"" should be ""skip"".


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318642 13f79535-47bb-0310-9956-ffa450edef68"
91dc950686ebb933a0ac43e619e16d89d3c7f42e,"Copying a performance change that Neeraj made to the
""jaxp-ri-1_2_0-fcs-branch"".

The change avoids the parsing of end element names.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318643 13f79535-47bb-0310-9956-ffa450edef68"
d903cb0f05191ecbaa55dd6b52baaf1fa5598a8e,"A new interface representing (preparsed) schema grammars.
When a grammar is preparsed, and its grammar type is XML Schema, it can
be casted to this interface. Objects of this interface can be converted to
XSModel, from which further information about components in this grammar
can be obtained.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318644 13f79535-47bb-0310-9956-ffa450edef68"
be975bd910a729ce810a3e6189d6b001db83ed22,"Implementing the new XSGrammar interface. Now preparsed schema grammas
can be converted to XSModel (a PSVI interface), from which detailed information
about components in this grammar can be obtained.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318645 13f79535-47bb-0310-9956-ffa450edef68"
8d9ed04978bbad6c7b3d163f2b9df384fd73a435,"Second re-organization of DOM code: 6 new DOM Level 3 interfaces are removed
from org.w3c.dom. package to org.apache.xerces.dom3 (modifed import statements
in implemenation code).
Removed org.apache.xerces.dom3.ls and org.apache.xerces.dom3.Entity3/Document3.
The dom3 and dom3.ls packages are not included in the default Xerces build.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318646 13f79535-47bb-0310-9956-ffa450edef68"
3921ac3595f0d6c31041200cb6fbfe9b2c1e2ccf,"Modify build to allow building xerces with DOM Level 3 implementation by modifying
import statements in the source code before compile


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318647 13f79535-47bb-0310-9956-ffa450edef68"
bfa176d2aed6881a10e59680585204851e936571,"Update sample to reference DOM Level 3 interfaces in org.apache.xerces.dom3 package


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318648 13f79535-47bb-0310-9956-ffa450edef68"
bd0f48a3be449674c5eb368eb2029846666144c9,"Performance changes (thanks to Neeraj's changes to the jaxp branch):
1. A new property for the input buffer size. The value is an Integer. It's better
to use a larger buffer for big input files, and smaller one for small files.
2. Use different buffer size for internal and external entity, because internal
ones are usually of smaller size.
3. The rewindable input stream doesn't need to be that big. In most cases,
it only need to hold the <?xml ... ?> decl, and 64 bytes seem to be sufficient
for many ecodings.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318649 13f79535-47bb-0310-9956-ffa450edef68"
af3d5fd3d0d561405793cceb917bfbcf420b34f9,"Copy the ""allow-java-encoding"" feature to the schema loader.
Without this, we'll have problem parsing instance documents that refer to
schemas with non-IANA encoding names.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318650 13f79535-47bb-0310-9956-ffa450edef68"
80489e5e831147ddaa6f0c9c307cdb03d49291e3,"a fix for the case where a <field> matches an element with
type xs:anyType.  Previously, we would throw an NPE; now we treat the situation as valid if there is no element content.  We need clarification of whether this is correct.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318651 13f79535-47bb-0310-9956-ffa450edef68"
5959ade2ecffddef09c78c5603671ba102020f63,"message localization changes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318652 13f79535-47bb-0310-9956-ffa450edef68"
f7aae0ad7ffc9ddebe5e9040e10587d81dc7762c,"message localization changes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318653 13f79535-47bb-0310-9956-ffa450edef68"
cba4980e051c5df9c641e780940a5ae2f5eeae7d,"message localization changes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318654 13f79535-47bb-0310-9956-ffa450edef68"
e3d5a805f0af5a5176295c5a6f8f04a71fe528db,"Message localization changes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318655 13f79535-47bb-0310-9956-ffa450edef68"
900df2fcdd2dfd1134009efd39f09dc4143fdf56,"Move derivation-restriction.5.2 checking to XSConstraints.  Occurrence info for local element decls in complextypes isn't valid during complex type traversal


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318656 13f79535-47bb-0310-9956-ffa450edef68"
a39cc43dff292d6d7eccd3ec80cba74d5049874e,"reverting change where content validated by xs:anyType would be exposed in the schemaNormalizedValue property of the PSVI.  Also, identity constraints will no longer validate such elements.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318657 13f79535-47bb-0310-9956-ffa450edef68"
9c088b75c0f362bcffd872cdaa7a2d5e28d9b93d,"modified 2.1 release info


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318658 13f79535-47bb-0310-9956-ffa450edef68"
179c35ac87a8b44292086cc92fc62234774f38a7,"Updating the doc for the new property ""input-buffer-size"".


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318659 13f79535-47bb-0310-9956-ffa450edef68"
a309f96896ec5717796cc4aab1e65fe64fdd90e0,"Fix bug: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=11156
If the document does not have any data after doctype, we receive endEntity call.
In this case we should just exit, since DTD scanner should be replaced with Document scanner


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318660 13f79535-47bb-0310-9956-ffa450edef68"
c843a529bc83644ea8515ccb23db7118f11d29aa,"The XML Schema specification ""requires as a precondition for assessment
an information set as defined in [XML-Infoset]"" (Appendix D). According
to the XML Infoset the infoset items contributing to the [character
information item] are: characters in the document, whether literally, as
a character reference, or within a CDATA section, or within Entity
Reference.

Given that all characters (in CDATA Section or Entity
reference) must be part of schema assessment process. That may result in ""corruption"" of
data inside entity or cdata section, i.e entity value could be normalized.
To avoid it users should turn off ""http://apache.org/xml/features/validation/schema/normalized-value"" feature.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318661 13f79535-47bb-0310-9956-ffa450edef68"
e67e665059d6b24ee699354307c528ffdf390ff8,"Updating the release documentation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318662 13f79535-47bb-0310-9956-ffa450edef68"
a7d7e2c737a60667658fcd68f289e5a60155c822,"Update according to the latest draft: http://www.w3.org/TR/2002/WD-DOM-Level-3-LS-20020725/


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318663 13f79535-47bb-0310-9956-ffa450edef68"
72c2102e57d5fbc397ee247ae343d61fb5e10ba6,"include running registry tests (for test-dom3 target)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318664 13f79535-47bb-0310-9956-ffa450edef68"
6df7e91d3c40d60df372bd2a1b85131241fc8d32,"migrating changes by Edwin Goie that address problems with the
old JAXP FactoryFinder code in environments that employ security managers.  This change
breaks compilability on JDK 1.1.8.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318665 13f79535-47bb-0310-9956-ffa450edef68"
510ac1532e33785aa9cc292f38f950ccc593f67b,"porting changes by Edwin Goei that address problems in environments with Security managers into
our SAX interfaces.  This code is now thoroughly nonstandard, but
no test-suite compatibility problems should result from this change.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318666 13f79535-47bb-0310-9956-ffa450edef68"
9af8167b5ae1221659ef667a9dda90d92d227fb5,"porting change by Edwin Goie intended to address problems with class loading in environments
with security managers to our internal ObjectFactory code.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318667 13f79535-47bb-0310-9956-ffa450edef68"
bb874b493927adb4dfbaaaf8161fd52984082561,"modify code that uses ObjectFactory directly to take account of new signatures.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318668 13f79535-47bb-0310-9956-ffa450edef68"
6371deafd1d83356b44848977e534d04a65c6752,"Updates docs to include description of DOM and XML Schema implementations in Xerces


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318669 13f79535-47bb-0310-9956-ffa450edef68"
ec46b15eab0f3df6049c92a338a55a7001639701,"For extensibility, remove final methods


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318670 13f79535-47bb-0310-9956-ffa450edef68"
a4bf4ded074bb018bf1217800683355ef02e54ee,"Fixing bug [12062]. After the first time we see an error in the ""all"" content
model, we should change the state from ""first error"" to ""subsequence error"",
so that the schema validator won't report one error multiple times.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318671 13f79535-47bb-0310-9956-ffa450edef68"
d846186c2294e763cbf1049bc62d751bf73db21e,"Improving the error-handling code in XSAllCM.
In the old code, we go through the whole list of candidate elements to find
the one that matches the current element, even if some of those elements
were already matched.
The new code only looks at those elements that are not matched yet. This
will improve the performance for valid documents, because checking whether
2 elements match is an expensive operation (which involves substitution
group checking). Of course, the performance would suffer a little bit for invalid
documents (because we might need to go through the list twice), but the
performance for valid documents is our primary concern.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318672 13f79535-47bb-0310-9956-ffa450edef68"
09da68947d72f0f7aebefe264da7f9cfa8ce93d8,"doc updates for upcoming release


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318673 13f79535-47bb-0310-9956-ffa450edef68"
6059545cf17b60337ad813d8e0c9cb15256e5ee8,"roll over the version number to 2.1.0


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318674 13f79535-47bb-0310-9956-ffa450edef68"
d93833904a5745e565550cecabfa77519a3fa7f2,"Reversing the change I made some days ago.
The current JAXP TCK requires that the process contents of ""anyType""
not to be ""skip"". We'll change it to skip when the TCK is updated.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318675 13f79535-47bb-0310-9956-ffa450edef68"
4de34a522106906c5def315551445005384a8f07,"adding message relating to identity constraint validation.  Also fixing bug#11840


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318676 13f79535-47bb-0310-9956-ffa450edef68"
17aae663844b2d4a9c2de6b62948a74d04df34a0,"minor doc updates (really should have gone into 2.1).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318678 13f79535-47bb-0310-9956-ffa450edef68"
457441435cef5a7936504ab5cdc9b44ad2a55f01,"Relacing ""Vector#insertElementAt()"" with ""setElementAt()"". The latter is
supposed to be a bit more efficient.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318679 13f79535-47bb-0310-9956-ffa450edef68"
bf7c75829fc6636a06e18836c0505d439981e097,"1. Don't always create a new Vector, while it's possible to reuse the old one.
2. Relacing ""Vector#insertElementAt()"" with ""setElementAt()"". The latter is
supposed to be a bit more efficient.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318680 13f79535-47bb-0310-9956-ffa450edef68"
6b6200f595f18ca711935ac3fde01968ba23f82a,"It's better to use Hashtable#elements() to get all the values out of a hash
table, than to call Hashtable#keys() to get all the keys, then use the get()
method to get the corresponding values.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318681 13f79535-47bb-0310-9956-ffa450edef68"
216f83ea0267e40917c91416a059eceb15ea7163,"fix for bug 11094.  Our handling of unions in selector xpaths
was broken because we did not insert a self-axis test on on anything but the first component of the union.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318682 13f79535-47bb-0310-9956-ffa450edef68"
6f6a4b81a04241b053b5d02981daf8494d57fc9d,"some minor code cleanup


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318683 13f79535-47bb-0310-9956-ffa450edef68"
8240ccf884ae6b519b140d0a1ffc2b7fd92b9399,"Taking advantage of the fact that Strings internalized using symbol table and
String#intern() can be compared by reference.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318684 13f79535-47bb-0310-9956-ffa450edef68"
93b13cc846e0f77e0db2f1bda2b86828ba43eeeb,"fix for bug #12234


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318685 13f79535-47bb-0310-9956-ffa450edef68"
ec5a1026169947d07660825cf01af3c2889b6247,"Fixing bugs [8535] [10468] [10633].
when a directory name containing whitespaces is used to absolutize a
relative URI,
- in 2.0.1, DTD or Schema files can't be found
- in 2.0.2/2.1.0, no file can be found, with a ""no protocol"" exception.
Now it's fixed by escaping the whitespaces (and other special ASCII characters)
in the ""user.dir"" system property.
But it's still strongly recommended to provide the full-absolute (and properly
encoded/escaped) URI to the ""parse"" methods.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318686 13f79535-47bb-0310-9956-ffa450edef68"
9762a66d10ed1eeee1e05e81d378d67e574c914b,"""fix"" for bug 5950.  The bug itself is not valid,
but a modification of it whowed that our handling of . in XPath expressions--both
with and without surrounding whitespace--was broken when unions are in use.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318687 13f79535-47bb-0310-9956-ffa450edef68"
9d6b42601380e935c5e2a1dcd91b77ccb536b02f,"Escaping more ASCII characters that are not allowed in URI.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318688 13f79535-47bb-0310-9956-ffa450edef68"
3bcc2d9d464160d39a3ba7973706079e24a3daad,"Patch: the current version in the Apache repository does not support request
such as ""XML 2.0 LS-Load 3.0"".
Submitted by: Philippe Le Hegaret
Applied by: Elena Litani


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318689 13f79535-47bb-0310-9956-ffa450edef68"
b20cedb0657e3632b512bb7a01122f2387236f5a,"fixing bugs 11406 and 12040.
When searching for a mark-up terminating symbol (like --> or ?>), the parser would go into
an infinite loop if only some of the characters were present before EOF.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318690 13f79535-47bb-0310-9956-ffa450edef68"
0d6d96e9927724050d63a611a85a52065e2ad728,"make Version#getVersion() static because it seems to be the right thing to do and has no
obvious side-effects


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318691 13f79535-47bb-0310-9956-ffa450edef68"
a7a891a19e125f742929ae7b5d3f5cbc599e8473,"use a constant rather than an undefined variable in this sample code.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318692 13f79535-47bb-0310-9956-ffa450edef68"
6ef03103f7ee084faef77543940bfed3dda01f67,"refactored Object instantiation code lsightly so that this class can now be used in the DOM implementation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318693 13f79535-47bb-0310-9956-ffa450edef68"
cdba1c2853ebaf1aa71a656c0afa1f677ba54204,"fixing bug 9256.  Now all Xerces class finding/loading is`cat ~/temp/mods`
done using the ObjectFactory mechanism, and hence by using the context classloader
when available.  If the context classloader is unavailable or throws a ClassNotFoundException, then
the system classloader is used as a fallback.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318694 13f79535-47bb-0310-9956-ffa450edef68"
69ef9bbcf46ccd1db814edfa92a60abdce94446b,"revert part of last commit.  That was experimental code that should not have been checked in.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318695 13f79535-47bb-0310-9956-ffa450edef68"
c51d90a644431135e57db2ad7314009033bd7fbc,"When the ""validation/schema/normalized-value"" feature is off, we don't
need to augment PSVI for characters() calls, hence don't need to go through
the initialization process of the augmentations and PSVI augmentation item.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318696 13f79535-47bb-0310-9956-ffa450edef68"
42b0479819193586b93bc4beab8d3c74b2cdbafa,"1. We don't always need to create a new ValueStoreCache when the parser
is reset. The startDocument call can reset the ValueStoreCache.
2. When there is no IDC map, we don't need to clone the empty hashtable
and push it into the stack. I'm pushing a null now. When the stacked is popped,
we perform a null-checking to see whether we need to iterate the elements
in the hashtable.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318697 13f79535-47bb-0310-9956-ffa450edef68"
ec88ca90cf6533e91f2685520eac4e17d00b54b7,"removed reference to non-existent option.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318698 13f79535-47bb-0310-9956-ffa450edef68"
3903e72e0c378988413443586c4db7d273c69263,"at long last, add a description for the XMLGrammarBuilder sample.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318699 13f79535-47bb-0310-9956-ffa450edef68"
0e7c0df0a27548710d5ad94e7fb6465a05355c7a,"make the XNI samples use our classloading mechanism, rather than
simply relying on Class.forName().


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318700 13f79535-47bb-0310-9956-ffa450edef68"
92f1a5521d9306a5f32663cdb2e615e9180e0875,"this change attempts to address poor performance parsing documents with very large comments.
I observed between 10% and 15% improvement (depending on the kind of parser being used) on a 200K file with a 100K comment.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318701 13f79535-47bb-0310-9956-ffa450edef68"
1e6f52e01a77012ef530f6450aa2760127de53d9,"Some cleanup in the schema validator:
1. Removed some code/variable that are never used;
2. Moved some one-time initialization code from ""reset()"" to the constructor;
3. Moved PSVI-related code closer to each other to improve readability.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318702 13f79535-47bb-0310-9956-ffa450edef68"
6b0be6dbe7ae70fb85a79e635f504b807b26fa50,"processing instruction targets were not being reset.  This should fix Xalan smoketests.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318703 13f79535-47bb-0310-9956-ffa450edef68"
1c7dc3ed6f5c57bebe993be9a168ea60b5929296,"Add a specialized scanner implementation that is also responsible for binding the namespace.
This scanner will not bind namespaces if DTD grammar is available since it might add
some default namespace attribute.
Add a new DTD Validator that is responsible to bind namespaces, in case the scanner
could not do it.

Create a new parser configuration that uses this scanner and DTD validator and does not include the XMLNamespaceBinder
in the pipeline.

This should increase the spead of parsing from 6%-12% (depending on the size of the document and document structure).
More changes will be added later -- to optimize namespace binding in the DTD, and in the scanner.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318704 13f79535-47bb-0310-9956-ffa450edef68"
28030f370e8b017e890135215f9af5eacfb8e0c5,"fix for the mysterious ArrayIndexOutOfBoundsException that assailed Xerces-J during gump builds on 09/12/02.
Cause was a small optimization, where a character was read from the current entity *before* it was
ascertained whether there was anything at that place in the buffer.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318705 13f79535-47bb-0310-9956-ffa450edef68"
e544ff61a5f31d58e8b1a68e9657661eb1696911,"Added the scanner/notify-char-refs and scanner/notify-builtin-refs
features to the documentation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318706 13f79535-47bb-0310-9956-ffa450edef68"
41e5a1bbf9f3d3441ca4d9c120c0a8cbc9106e06,"Adding default attributes *after* we've validated those attributes
that are present. Otherwise the default attributes will be validated *again*,
but we know they are (supposed to be) valid.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318707 13f79535-47bb-0310-9956-ffa450edef68"
2d69036d97c8637ca0bffe53d124143d6f7ab7c0,"This was a long pending REVISIT: the handling of the feature
""schema/normalized-value"" was handled both in the schema validator,
and various parsers. Now all the code is centralized in the validator.
This has many benefits:
1. Applications that use xni parsers directly can benefit from this feature,
instead of duplicating code from SAX or DOM parser to get the normalized values.
2. Centralized code makes it easier to understand and maintain.
3. This feature doesn't need to depend on PSVI.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318708 13f79535-47bb-0310-9956-ffa450edef68"
07d0ad64ad7ad3af3837cd2c0fe0a5eb06e9dc2d,"Performance improvement for default element value handling:
1. Don't always need to create a new XMLString.
2. Don't need to augment PSVI for characters() calls.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318709 13f79535-47bb-0310-9956-ffa450edef68"
fa8c704eba562a7f022d8f9c0f700ffbd7243565,"The NonValidatingParserConfiguration now uses optimazed scanner (that binds namespaces).
This commit also re-organizes some configuration code.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318710 13f79535-47bb-0310-9956-ffa450edef68"
d8d2a14c000495a84ffb3c1896109671549a9202,"Modified the identity constraint code so that it doesn't depend on PSVI.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318711 13f79535-47bb-0310-9956-ffa450edef68"
2be080107f5558edc84f6ada1a18ef3987386ec6,"propagate change to improve processing of long comments to the experimental
XML 1.1-handling XMLEntityManager.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318712 13f79535-47bb-0310-9956-ffa450edef68"
55e61cb970d3185f57b952da1966e726977ca26a,"fixing bug 11989.  Now entities in the entity manager
know whether they were declared in the internal or external subset.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318713 13f79535-47bb-0310-9956-ffa450edef68"
b53332e6e2e64152f2ae6d84c59ce58730255a4d,"Add new internal property: namespace-context that represent a shared namespace
context between all the components. This property is reset by a configuration just before
parse and is queried by all components.
Note: this property MUST be set by the configuration.
The private copies of the namespace support are removed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318714 13f79535-47bb-0310-9956-ffa450edef68"
aa9912ed279bd272ed0e389c2104109d77db8661,"Add a new field to the XMLAttributes implementation class, to indicate
whether an attribute was validated using a Schema ID-drived type.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318715 13f79535-47bb-0310-9956-ffa450edef68"
4b9a07b8726356ac6a4bba80804819076fd48f45,"A new field for the property [schema default].
We used to get it from the attribute declaration. But for default attributes,
the declaration is absent, but the schema default property has a value.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318716 13f79535-47bb-0310-9956-ffa450edef68"
20cecb8fa7fe6bc9ad20c645d42075c5f9fef1b6,"1. Explicitly set the [schema default] property, since it's separate from the
attribute declaratoin now.
2. Update the ""schemaId"" field of XMLAttributesImpl to indicate whether
an attribute was validated using a schema ID-derived type.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318717 13f79535-47bb-0310-9956-ffa450edef68"
49bf4d09e74fcba5974db1d8ac4b18c2b71eccee,"Update the AbstractDOMParser to use the new field from XMLAttributesImpl,
instead of accessing PSVI:
1. Remove the dependency on PSVI;
2. Better performance by avoiding accessing the augmentation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318718 13f79535-47bb-0310-9956-ffa450edef68"
bfa983b04ec326c08b86cf93fcf0cee3e456a39e,"Should check whether there is a default/fixed value before storing it in PSVI.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318719 13f79535-47bb-0310-9956-ffa450edef68"
abfd5195a3ed478ad6b0620d458681c1aa8aebb3,"fix to permit compilation under JDK 1.2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318720 13f79535-47bb-0310-9956-ffa450edef68"
0ac26f8bec9148e6565b41c01f4445ec7feebcbe,"Integrated configuration is now the default one.
If namespace are turned off we use the original implementations of XMLScanner and
DTDValidator that do not bind namespaces.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318721 13f79535-47bb-0310-9956-ffa450edef68"
910fffbeeeb30465e0c0bba5119b77af83f99b95,"fixing bug 11991


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318722 13f79535-47bb-0310-9956-ffa450edef68"
b1be20b0ef7952b520fe7cce793d0291c4a032c1,"Check whether fEnumeration and fPattern are null before accessing them,
to avoid NPE's.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318723 13f79535-47bb-0310-9956-ffa450edef68"
d25b30225af83c0ff67fecc2da34bfe9c4a9629b,"Fixing the meaning of some combinations of various validation features:
- The meaning of validation off and schema on: according to the doc,
the only difference from both are on should be that no errors are reported.
But currently it controls more than that. Got fixed now.
- Dyanmic validation. It only relies on whether xsi schema location attributes.
But it should really depend on whether a decl is found for the root element.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318724 13f79535-47bb-0310-9956-ffa450edef68"
88ec404b6166b8c3680eb2d6cd4d927a7488babf,"A new method to reset the state.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318725 13f79535-47bb-0310-9956-ffa450edef68"
666a9ddc196896bef002996fbbf5112b56ecdcf1,"1. A new feature to indicate whether PSVI augmentation is necessary.
It turned out PSVI augmentation is costly. For applications that care about
performance but don't need PSVI, this feature can be turned off.
2. Fixing a PSVI bug: when an attribute is invalid, it's parent should also be
marked invalid.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318726 13f79535-47bb-0310-9956-ffa450edef68"
8878088a1737c9998e73a2b6af57cfcae94b55fd,"A new feature to indicate whether PSVI augmentation is necessary.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318727 13f79535-47bb-0310-9956-ffa450edef68"
435f923dbba3ce5c3b11f232054635ecff011152,"Adding DOM Level 3 XPath to the org.w3c.dom.xpath package.
These are experimental interfaces and maybe modified or removed in the future


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318728 13f79535-47bb-0310-9956-ffa450edef68"
856f40d59997166795291fd33e7ce535040d4010,"DOM Level 3 Xpath should be included in xercesImpl.jar


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318729 13f79535-47bb-0310-9956-ffa450edef68"
320c08272504ffad4cc15e1a15d6eb600f1de122,"Performance improvement for schema grammar parsing:
1. Specify the size of hashtables, to avoid too many empty enties or rehashing.
2. Choose either vector or hashtable based on the number of enties.
3. Avoid whitespace normalization: stripping the leading and trailing spaces
are sufficient in most cases.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318730 13f79535-47bb-0310-9956-ffa450edef68"
952d4121aff3a1e447412799fd3407d9f6bed362,"When removing a DTD validator from the pipeline, the document source of
its document handler should be changed to the document source of the
DTD validator.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318731 13f79535-47bb-0310-9956-ffa450edef68"
084e19c93cde62dd42e831b3809c1935620054a4,"Removing unnecessary code related to schema normalized value.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318732 13f79535-47bb-0310-9956-ffa450edef68"
c09a5e24ac84ce8504f6877cc930d0aa0b470396,"Make sure the default value of the PSVI augmentation feature is true.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318733 13f79535-47bb-0310-9956-ffa450edef68"
7639eca52815d691d432f19f864fb821f2062755,"Move this feature ID from AbstractDOMParser to this class, where it's actually
used.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318734 13f79535-47bb-0310-9956-ffa450edef68"
ed68305690d5f58f32c57cb479446aa5f61d10aa,"Remove the schema validator from the pipeline when it's not supposed to
do anything. This happens when
1. A DTD grammar was found, but no schema grammar was found.
2. Dynamic validation is on, but no schema grammar was found.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318735 13f79535-47bb-0310-9956-ffa450edef68"
c15ce54d275939db92b91abdc42376171c71ec4c,"since it is now recognized by IANA, add GB18030 to the list of supported encodings.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318736 13f79535-47bb-0310-9956-ffa450edef68"
a05a16a283a55ac0ecb8be4330ecee6a03bbd130,"fix for bug 11994


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318737 13f79535-47bb-0310-9956-ffa450edef68"
0dc6aa563332f3daf6c73ef3f44921556078c3a7,"update docs to specify which methods are used by the Xerces DOM parser directly


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318738 13f79535-47bb-0310-9956-ffa450edef68"
579167249f9d6162c31b5917bccc3b799682a0e3,"fix typo


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318739 13f79535-47bb-0310-9956-ffa450edef68"
675e02d477158ebf42440183fa485afabacf0739,"add note that dom.DOMAddLine is not included in the default Xerces distribution.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318740 13f79535-47bb-0310-9956-ffa450edef68"
c74ec19b676f15a58a798b0799b65d1c73282dc8,"Avoid NPE if namespace were set to true.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318741 13f79535-47bb-0310-9956-ffa450edef68"
e6ae0f5af6600b9ea202fa1b4fb96e311eebb63e,"Add *temporary* setProperty method to DOMBuilderImpl (this method will be removed
if the W3C adds simillar method to the DOMBuilder interface).
Users can set grammar pool using this method.
Also, make DOM Level 3 implementation copy grammar pool from the parser: this is also
a temporary solution to allow using grammar pool. Intead, we should add setProperty to the CoreDocumentImpl
interface.

This change is based on the patch submitted by  Mikko Honkala <honkkis@tml.hut.fi>.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318742 13f79535-47bb-0310-9956-ffa450edef68"
2c798392718b0822396f029602c935cd32ae2a94,"1. A typo in ""endElement"" call: should apply schema default element value
when the ""schema default"" feature is ""on"", istead of ""off"".
2. Cleaned up some code related to normalizing data.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318743 13f79535-47bb-0310-9956-ffa450edef68"
74991e00331e13ae672eda4dbdbc04e24eada4be,"1. A typo in ""endElement"" call: should apply schema default element value
when the ""schema default"" feature is ""on"", istead of ""off"".
2. Cleaned up some code related to normalizing data.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318744 13f79535-47bb-0310-9956-ffa450edef68"
bfb30c1257202fe074c7ac49eec45932c4deeaf6,"1) Added methods to XMLComponent so that parser configurations can
   query the preferred default values for settings. Also modified
   all of the classes that implement or use this interface to take
   advantage of the new calls.
2) Removed extraneous output from xni.Writer sample.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318745 13f79535-47bb-0310-9956-ffa450edef68"
4b7faba4209d6ae1e471a90a83669cde08499ef4,"Fixing bug [12919]. Was a typo.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318746 13f79535-47bb-0310-9956-ffa450edef68"
e6998112dec295ac23db179c370735d9a4e636b4,"Temporarily comment out the finalize() method, because
1. It seems that finalizers are not guaranteed to be called, so the
functionality is not implemented.
2. It affects the performance greatly in multi-thread environment.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318747 13f79535-47bb-0310-9956-ffa450edef68"
08bfac706d1cee814c024f3513d486754fe43d00,"Fixing bug: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=12862
The CoreDocumentImpl.importNode is used for both clonning and importing nodes, and
we should differentiate between the two cases


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318748 13f79535-47bb-0310-9956-ffa450edef68"
ddb98c485dd567c99351d3993760e59113e0688f,"Add constructors to the new IntegratedParserConfiguration, so that it can
be constructed in other ways: with a given symbol table, a given grammar
pool, etc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318749 13f79535-47bb-0310-9956-ffa450edef68"
e35195f7a0c6580606e059e939caf23b23f776f0,"The ""IntegratedParserConfiguration"" became the default.
Updating the XNI samples to reflect it.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318750 13f79535-47bb-0310-9956-ffa450edef68"
c72222df7e377545ab426e8efbd6c82a98f13a20,"Add xni.NamespaceContext to the XMLDocumentHandler.startDocument() and update
the implementation accordingly.
Set default for  validation/schema feature in XMLSchemaValidator component
to true.
Modify docs for xni.NamespaceContext.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318751 13f79535-47bb-0310-9956-ffa450edef68"
6d87ee1532993cabbc7381e7b0009f0322309514,"Update XNI samples:
added xni.NamespaceContext to the XMLDocumentHandler.startDocument()
Need to update DocumentTracer to print out current namespace information
per element.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318752 13f79535-47bb-0310-9956-ffa450edef68"
9d893891937a4a979984ad48ee42f605a640e704,"Remove internal property for namespace context


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318753 13f79535-47bb-0310-9956-ffa450edef68"
5314bd8550884f91fac256643de073452b014b1e,"Made some fixes for the last change which added methods to
the XMLComponent interface which allows the parser config
to query preferred default values for settings. However,
since the XML Schema validator component is created
dynamically, the parser config would query the default
settings and overwrite the values set by the application.

I have changed the XML Schema validator so that it doesn't
try to set default values. This seems to solve the problem.
This sort of goes against the purpose of the new methods
in XMLComponent and their intended use but the XML Schema
validator is so heavy-weight, I'm making an exception in
this case.

This problem doesn't arise when the components are created
and added at parser config construction time. It only poses
a problem when components are created dynamically.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318754 13f79535-47bb-0310-9956-ffa450edef68"
bbaaafc8cb39b2e778150dd7baf80cfef2bcc7b8,"Removed UTF-8 BOM that was confusing StyleBook.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318755 13f79535-47bb-0310-9956-ffa450edef68"
4cec8509ef529958427df62863544a27b67d5c1e,"Fixed typo bug introduced with XMLComponent changes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318756 13f79535-47bb-0310-9956-ffa450edef68"
b23bcf2a5319b4bb0551e9f81757dd617a044fb0,"A bug: we didn't send characters to the document handler if
schema-normalize-value feature is on, but the text doesn't need to be
normalized (WS= preserve, or complex content).
Fixed now.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318757 13f79535-47bb-0310-9956-ffa450edef68"
db146fa467a5150e12c5e634e6a71332da39d4b6,"DTD validator should pass the namespace context object to the next component.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318758 13f79535-47bb-0310-9956-ffa450edef68"
6d1bfcc2116db32256e83bb8a2c0ec98e03570af,"Moving the calls to ValidationManager#reset() to the classes where it gets
created. It was called in DTD validator, but in the case where there are more
than one DTD validator, it'll get called more than once; and when there is no
DTD validator, it won't get called.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318759 13f79535-47bb-0310-9956-ffa450edef68"
1684905504ab574c7bb674b0a5e38b97117474cb,"Applied patch (with minor modifications) from Mikko Honkala <honkkis@tml.hut.fi>
to update the PSVI in the DOMNormalizer.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318760 13f79535-47bb-0310-9956-ffa450edef68"
e2a1dc72c069ad060214a834e170128a1bf14f2c,"Update sample following the XNI changes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318761 13f79535-47bb-0310-9956-ffa450edef68"
b41342096522c8ab81a72d383425673ad778104f,"Remove dom/xpath api from xerces distribution. Fix dtdjar target.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318762 13f79535-47bb-0310-9956-ffa450edef68"
e24510945f29ddc5d97487887ec131146358b1fc,"Add deprecated flag


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318763 13f79535-47bb-0310-9956-ffa450edef68"
0e14a45d20b46da1babb827c919af3f8b08a6b63,"update xni doc to reflect XNI changes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318764 13f79535-47bb-0310-9956-ffa450edef68"
b0f5424e6a8435c5fcd5719576894732f149a681,"release updates for 2.2.0


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318765 13f79535-47bb-0310-9956-ffa450edef68"
e2558606d4a2b81b460ebe709830783ce175c796,"fixing bug 7247


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318766 13f79535-47bb-0310-9956-ffa450edef68"
7fbf2946c75b778e9ac57dac9bade4f0c9ced3be,"update tools so that our docs can be built on IBM JDK 1.4.
We are now using Xalan 2.4.0, Xerces 2.1.0 and a version of
StyleBook freshly built from CVS.

This also removes the slightly ridiculous situation where Xerces2 was still a client of Xerces1.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318767 13f79535-47bb-0310-9956-ffa450edef68"
118f667bbb9a7f93bab9026e696eb6dbbccf2547,"fixing bug http://nagoya.apache.org/bugzilla/show_bug.cgi?id=12257
Added a new class which escapes character sequences that doesn't have representation using an unreserved character, it corresponds to printable character of US-ASCII coded character
  set [00-1F and 7F hexadecimal] or any US-ASCII character that is disallowed like space ' '
 As of right now this class doesn't not handle  non-US ASCII character. But it may be extended in future to handle those cases.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318768 13f79535-47bb-0310-9956-ffa450edef68"
91b786faf14652d72d4205efc892491faff7f9ef,"fixing bug http://nagoya.apache.org/bugzilla/show_bug.cgi?id=12257
Added a new class which escapes character sequences that doesn't have representation using an unreserved character, it corresponds to printable character of US-ASCII coded character
  set [00-1F and 7F hexadecimal] or any US-ASCII character that is disallowed like space ' '
 As of right now this class doesn't not handle  non-US ASCII character. But it may be extended in future to handle those cases.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318769 13f79535-47bb-0310-9956-ffa450edef68"
b687bf6bfb4b2e47e4bec87e53a99508c2923589,"version number revision for 2.2.0


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318770 13f79535-47bb-0310-9956-ffa450edef68"
101ccf85186cf553798adda97714d7c1e2603f6e,"Fixing bug [13044]: the order of clearing the hashtable and storing the
external schema location properties was not correct.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318772 13f79535-47bb-0310-9956-ffa450edef68"
15772d2ce0d3e1ab90633c4dd8e87e6ecdf28c1b,"It should also recongnize JAXP_SCHEMA_LANGUAGE property. http://java.sun.com/xml/jaxp/properties/schemaLanguage


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318773 13f79535-47bb-0310-9956-ffa450edef68"
7426dec8b052410735544486efe05ce0a094db5f,"enable Xerces to be compiled under IBM JDK 1.4.0 without hacking the JDK installation.  This should not affect other JDKs at all.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318774 13f79535-47bb-0310-9956-ffa450edef68"
8318ddf9d4ada37c90f79a754256c2b3cb391ae0,"Escaping non-ASCII characters that appear in the ""user.dir"" property.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318775 13f79535-47bb-0310-9956-ffa450edef68"
ec1c6c7f46c60698cf44b198f519f10f94a0fdb1,"The array for property defaults has one less entry than that of the property
names. This causes ArrayIndexOutOfBoundsException when the
getPropertyDefault methods is called for the JAXP schema language property.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318776 13f79535-47bb-0310-9956-ffa450edef68"
c8ed9f7617b7aef095f3e03f97aefda48972f356,"Fix for bug 13054


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318777 13f79535-47bb-0310-9956-ffa450edef68"
e058fddde2b8ce6aa3d5373c49878ad82de62116,"1. Shouldn't prepend ""file://"" to the user dir, because later on when a URI
is created, another ""file://"" will be prepended.
2. Avoid creating a new Sting to change ""blah/blah"" to ""blah/blah/"", now
we do it when we still have the string buffer.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318778 13f79535-47bb-0310-9956-ffa450edef68"
57f08e2bfc40d1472e2d85ba782926209d1b886e,"1. JAXP spec. allows []s of String, File, InputStream, InputSource as well, apart from Object[] for the property ""http://java.sun.com/xml/jaxp/properties/schemaSource"". Implementation must adhere to the spec.
2. Making the exception message more descriptive.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318779 13f79535-47bb-0310-9956-ffa450edef68"
ad4a7b11cc0f274a6e6430e1e684fc546949356e,"Fixing a threading problem.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318780 13f79535-47bb-0310-9956-ffa450edef68"
c61593bd345eee7790e1535d3fbebb0e29c2e520,"Fixing bug [13275]: should fill all PSVI properties at once, before exiting from
handleStart/EndElement calls.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318781 13f79535-47bb-0310-9956-ffa450edef68"
819813658b5334c6fabedff21d13a37c88d66837,"enhance robustness when continue-after-fatal-error is set to true.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318782 13f79535-47bb-0310-9956-ffa450edef68"
215b93473097ace5731f4921612719a9b13ecb76,"URI was not updated in the element stack thus it was not set at the endElement() call.
Fixes bug: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=13321


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318783 13f79535-47bb-0310-9956-ffa450edef68"
37a0e0f40b23046292ca5c215f0f3ccac8d27ef7,"ensure that the allow-java-encodings and continue-after-fatal-error features are propagated from the main configuration to the parser responsible for parsing schema documents.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318784 13f79535-47bb-0310-9956-ffa450edef68"
1637b5cd9edc537ca38c374d0e16b057053b48bc,"correct handling of continue-after-fatal-error feature.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318785 13f79535-47bb-0310-9956-ffa450edef68"
6236b23ee18896b60412d134a83cc734363f29ef,"Fixing bug [13428]: ""annotation?"" is allowed as a child of local <group>.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318786 13f79535-47bb-0310-9956-ffa450edef68"
e601e26155825a195fa8ce0020e9052ed66f9a9e,"as described in a post to xerces-j-dev, this change introduces a JAXP-like default for Xerces to examine for a properties file ($java.home/lib/xerces.properties, to be precise).  It also no longer prepends $java.home/lib/ to a passed-in properties filename.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318787 13f79535-47bb-0310-9956-ffa450edef68"
95dea0decc7b93fcf8693b878c8513bee595da05,"formerly, if Xerces encountered a file where the end-tag of the root element was repeated, it would enter an infinite loop and only stop when the JVM ran out of memory.  This commit fixes this problem.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318788 13f79535-47bb-0310-9956-ffa450edef68"
ccb36ebcae5a78393b31862ee73e0bd587470b2e,"fix for bug 13717


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318789 13f79535-47bb-0310-9956-ffa450edef68"
930c6bcbb5e78d89e6bcb540499fcb6c7537b0f4,"Fixing bug [13593]. Need to reset the first character to a space
in the normliazed string buffer.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318790 13f79535-47bb-0310-9956-ffa450edef68"
233958281b5108d77787db1764fd6d42a0b43b31,"It doesn't make much sense if the buffer size is too small (smaller than 64).
And if it's set to something less than 6, there isn't enough space to hold the
""<?xml"" string, and we'll get an ArrayIndexOutOfBoundException.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318791 13f79535-47bb-0310-9956-ffa450edef68"
ad92f83b0324f19a60aeb75aa3a0ec5f6833352c,"Making sure that getPrefix() returns the correct prefix. In the following case:
<e1 xmlns:p=""uri1""> <e2 xmlns:p=""uri2""> ... </e2> </e1>
In the context of ""e2"", getPrefix(""uri1"") shouldn't return ""p"".


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318792 13f79535-47bb-0310-9956-ffa450edef68"
1d1aba9b786f6dcf65c29d72ba4464ead780c238,"Peformance patch for XMLDTDValidator. Optimizing addDefaultAttributeValidate (hotspot) Passing elementname object to addDTDDefaultAttrsAndValidate, we already have this information available and can directly pass it. Greatly reduces the invocations of DTDGrammar.getElementDecl() (another hotspot).

Made new function 'getContentSpecType(int:elementIndex):short' in DTDGrammar
to get contentSpecType info.We can straight away fetch this value from 2D arrays using elementIndex and  can avoid
filling of values in temporary elementDeclaration object and then getting the actual value.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318793 13f79535-47bb-0310-9956-ffa450edef68"
5e6f60f06018db28a7274f3bd4462b85c1065ace,"The PSVI for endElement were added after we retrieve from the stack information
for the parent element.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318794 13f79535-47bb-0310-9956-ffa450edef68"
b8c347e014f2b50d3cd5564fa457c18b46287a98,"Fixing a bug in traversing wildcards: a static value was updated when multiple
wildcards are traversed, if none of them specifies the ""namespace"" attribute.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318795 13f79535-47bb-0310-9956-ffa450edef68"
09bac55cef4c05a5a7e8f9a6cee42fb6cae4e5cc,"Fixing bugs related to PSVI properties ""validity"" and ""validation attempted"":
1. it's not invalid if an element decl/type definition can't be found for the root
element. for historical reasons, we still report an error in this case, but in PSVI,
the validity should be unknown.
2. if an sub-element/attribute is invalid, then the containing element should be
invalid too.
3. if an element is laxly assessed, its validity should be unknown, instead of
valid.
4. if an element is laxly assessed, and it doesn't have any children, its ""validation
attempted"" should be ""none"", not ""full"".


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318796 13f79535-47bb-0310-9956-ffa450edef68"
afe1265a958e41ed2dbd704fa43af8238f7ede52,"1. Fixing validation bug: need to a flag to indicate whether textual data appeared
in the content of an element. We used to check the length of fBuffer, but for
perforance reasons, we don't always want to append textual data into such
buffer, and sometimes the buffer is normalized, hence could be empty even
if there were character data (all whitespaces).
2. We don't need to know the could of sub-elements. Using a boolean
fSubElement to replace the integer fChildCount.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318797 13f79535-47bb-0310-9956-ffa450edef68"
7f5e0f6260bf64ece18ca19d7b31388dfd05278c,"Performance fix: we don't always need to append textual content to
the buffer. It's only neccesary when the element decl has a fixed value
constraint, or the type is simple.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318798 13f79535-47bb-0310-9956-ffa450edef68"
970ca6e703426f843ee68bdd4db365b2e648fd9e,"Use a different way to convert the file path to a URI. This approach is similar
to what's in XMLEntityManager, and it can handle non-ASCII characters.
When ""ConvertToURI"" is updated to be able to handle non-ASCII characters,
we can come back and choose the better solution.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318799 13f79535-47bb-0310-9956-ffa450edef68"
37a937f623c26d9fce246bcd0eb9213798c0b231,"Performance: adding a new validate method that takes an Object as the string
value. This enables passing a StringBuffer to such method, and possibly avoid
some object creations. Without this method, we need to convert StringBuffer
to String before calling validate method, then create a StringBuffer in the
validate method for normalization, and finally convert the StringBuffer to a
String again after normalization:
buffer -> string -> buffer -> string
With this method, the original StringBuffer can be used to hold the normalized
value. This saves 2 object creations:
buffer -> string


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318800 13f79535-47bb-0310-9956-ffa450edef68"
522e6e6227d7fcdc49cea58a8b1b755e971e719a,"We can dynamically figure out the component before and after the DTD
validator, so we don't need to pass such kind of information to the namespace
scanner.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318801 13f79535-47bb-0310-9956-ffa450edef68"
bca78dc49f1d13aa4e6636aef946a5f595d0d5a5,"1. Schema assessment doesn't augment the infoset for character information
items, so our PSVIWriter sample doesn't need to output information abou characters.
2. All PSVI properties for elements are available on endElement calls, so we
choose to output them all together.
3. When ""validation attempted"" is none, no other property is meaningful, so
we don't need to output any other properties than ""validation context"", ""validity""
and ""validation attempted"". This also fixes bug [13276], because we won't
try to access the ""type definition"" property when it's null.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318802 13f79535-47bb-0310-9956-ffa450edef68"
725630756bba1ba5c72582890dfc415f0cc8bcc3,"Performance: we don't always need to fully normalize the string.
1. For base64 and derived types, the whitespaces are actually handled in the
Base64 classes, so we don't need to normalize the string at all.
2. For many other types (all but string and derived types), no whitespace is
allowed in in the value (only leading and trailing ones are allowed). So instead
of collapse, the whitespaces, we only need to trim the leading and trailing one.
if there are whitespaces in the middle, an error will be reported when trying to
convert the string value to actual value.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318803 13f79535-47bb-0310-9956-ffa450edef68"
d3d664db45c810ae1b21d11dd6e21373ed502328,"Performance: we were using java.math.BigDecimal and BigInteger to represent
decimal values. These classes are too heavy, and involve a lot of object
creations. Now we use a light weight object for decimal values.
We may want to add more functionality to this new representation later, but
it now has everything necessary for schema validation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318804 13f79535-47bb-0310-9956-ffa450edef68"
bb210c2839d91c39a8ad5c07185b4376869621bd,"Fixing bug. When an array of Objects is used as the value of JAXP SCHEMA_SOURCE property it
is illegal to have two schemas that share the same target namespace.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318805 13f79535-47bb-0310-9956-ffa450edef68"
f83cbfd548f22544081f22886555e5db4f7380d2,"Putting the appropriate license.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318806 13f79535-47bb-0310-9956-ffa450edef68"
0ca18dde10524dce70ede881faa15365cbbf798c,"Fixing Bug. Any component in the pipeline may open new entity using central XMLEntityManager component.
So check in scanner ( DocumentFragmentScannerImpl , XMLNSDocumentScannerImpl )
that the element was opened in the same entity should be made before passing
information to the next component in the pipeline.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318807 13f79535-47bb-0310-9956-ffa450edef68"
287358028b18ada29ce29a3651c68e53bcb3aae3,"addressing bug 1329.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318808 13f79535-47bb-0310-9956-ffa450edef68"
c2c537859a33bdf88ee6f1fba0649b597bd9fe78,"Bug: we also need to check the pattern facet for list and union types.
Performance: whitespaces are not allowed to appear in ID/IDREF/ENTITY
types, so we don't need to perform full normalization on values of these types.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318809 13f79535-47bb-0310-9956-ffa450edef68"
2a2e8e25cc1bc74e9fd08e8ddc691faed95724a9,"DOM Implementation now checks if qualifiedName is malformed/invalid per Namespace in XML specification.
(createElementNS/createAttributeNS/createDoctype)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318810 13f79535-47bb-0310-9956-ffa450edef68"
107f69f1c6648c6998af337aaced206fb97f098c,"Performance: for list types, after tokenize the input string, we don't need to
normalize each item, because there won't be any whitespace in there.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318811 13f79535-47bb-0310-9956-ffa450edef68"
32191a2dc758f39b19a2974d4c06f1066f1ec577,"alter documentation to reflect the fact that Xerces implements JAXP 1.2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318812 13f79535-47bb-0310-9956-ffa450edef68"
2b2593eef2e2d2c5352fbc9b4e356053a93e34ab,"Bug fix: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=13062


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318813 13f79535-47bb-0310-9956-ffa450edef68"
4b4d20ffe3a5e2388ed7eba2b8894e37084f2015,"fixing bug 9102


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318814 13f79535-47bb-0310-9956-ffa450edef68"
aa19746831a23a213aa3ff26f991726d09d2c647,"Typo: should be { instead of ""


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318815 13f79535-47bb-0310-9956-ffa450edef68"
ce4ad79be5b1a307d2f61b44bb15a2212c9da848,"According to an errata (E1-2), <all minOccurs=""0""> is allowed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318816 13f79535-47bb-0310-9956-ffa450edef68"
bcbc4cdcdc1beebf3b664390e8d3ddd78feff080,"According to an errata (E1-2), <all minOccurs=""0""> is allowed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318817 13f79535-47bb-0310-9956-ffa450edef68"
87587c5794fa9a7bfac2b0a5b7be169cdb0f64ce,"1. Changed the type of ""public"" attributes to ""xs:token"", to avoid one indirection;
2. Changed the type of ""version"" attributes to ""xs:normalizedString"", as required
by erratum E1-9.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318818 13f79535-47bb-0310-9956-ffa450edef68"
bf05ca7408e1478784da4cb38f9ce10cb9c8db90,"Changed the pattern facet of the ""language"" type as required by erratum
E2-25.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318819 13f79535-47bb-0310-9956-ffa450edef68"
692f02297ca0a43ca4ae4c568af141d25bac5210,"Need to expose type information for default attributes.
Don't know why the spec didn't ask for the attribute declaration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318820 13f79535-47bb-0310-9956-ffa450edef68"
7700da7bd603052cf6782a738db5634094af51d6,"release doc update for 2.2.1


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318821 13f79535-47bb-0310-9956-ffa450edef68"
8bbf51d2bf5be08924e2c94b3a0565d6e740c23e,"Need to output character information, as part of the base infoset.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318822 13f79535-47bb-0310-9956-ffa450edef68"
d2e738280c6fa09f3f13e6717c4bc355ec3ff51d,"FAQ update describing how to derive XSModels from Grammars produced from parsing Schema documents


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318823 13f79535-47bb-0310-9956-ffa450edef68"
1a81c43dba26a0d641fbdbcc9b47bd3df6eda22c,"We need to check if attribute map not null (default) before attempting to reconcile the default attributes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318824 13f79535-47bb-0310-9956-ffa450edef68"
4c8c17fe59d4c120257437bce6f6a3db8694c802,"Add reference for parsing schemas


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318825 13f79535-47bb-0310-9956-ffa450edef68"
51ee38026b2eb50d95652ec6927ca63c6f4dda2b,"add a note about DOM Level 1 nodes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318826 13f79535-47bb-0310-9956-ffa450edef68"
8e76092417b5119eec3dc897b5edfb1f9d2d49ce,"getElementBy id moving to DOM FAQ


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318827 13f79535-47bb-0310-9956-ffa450edef68"
a65e116a3601b517f38e239fb393b7594af4e5a0,"add FAQ on SAX characters()


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318828 13f79535-47bb-0310-9956-ffa450edef68"
4a547e7b97b6196a27882ad9b338717d344174f3,"Fixing a memory leak problem: need to set the number of attribute uses
that are currently used to 0 after each parse, otherwise the parser will keep
creating new instances of XSAttributeUseImpl and store them in an array.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318829 13f79535-47bb-0310-9956-ffa450edef68"
ea5821c697760c2985cabd2e4863abb846aeb10a,"This variable was not reset to 0. It stores the number of child elements of
the current element. Each time the parse finishes, it's value is 1 (because
there is one root element). Without setting it to 0, its value will increase by 1
each time an instance is parsed. It's used as an index to an array. With its
value increasing, the size of that array needs to increase as well, which leads
to some memory leak.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318830 13f79535-47bb-0310-9956-ffa450edef68"
a858ab6fb85c4bd675d9178697930fe2c242b4b1,"As pointed out by Katarzyna Marszalek, we didn't propagate the entity resolver
(that's set on the document parser) to the schema parser (a DOM parser that's
used to parse the schema documents). Fixed now.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318831 13f79535-47bb-0310-9956-ffa450edef68"
12af3d5218dc2ba91d1f60d8b731a6da2d0a2ea9,"remove javax.xml.parsers.ConvertToURI.java from API jar file.  Also, clean up exclusions of non-existent files and remove some dead targets.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318832 13f79535-47bb-0310-9956-ffa450edef68"
072bbc0c183f628165dd56807553d3f59bb5575f,"increment version number for 2.2.1


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318833 13f79535-47bb-0310-9956-ffa450edef68"
2e12fb7077bbc38a815b56552ff535f7bba3062a,"doc updates to reflect ability to validate schema for schemas


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318834 13f79535-47bb-0310-9956-ffa450edef68"
2d6a9031074c0ce194e8079453822d7ad3c4c84e,"Now we can process the Schema for Schemas
(found at http://www.w3.org/2001/XMLSchema.xsd)
without reporting any errors. Inserted special logic to permit the presence
of the built-in Schema datatypes in this particular schema.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318835 13f79535-47bb-0310-9956-ffa450edef68"
c25a3ca634c59a3cce73bec41ce68483bd3b015f,"fixing bug 14455.  Since it is not possible to read a byte stream twice, we used to fail when we tried doing so.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318836 13f79535-47bb-0310-9956-ffa450edef68"
c7168ee3c3bebf69f5b5397160e33cc3ebb9284d,"fix broken pack-tools target.  Most of the LICENSE files, and the new xjavac task, were formerly omitted.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318838 13f79535-47bb-0310-9956-ffa450edef68"
8e0af34bbfcf31d24abbf8b6c7ae1c2ba35f8cf3,"1. Provide canonical representations of Schema datatypes;
2. Provide more accurate equality checking for union types.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318839 13f79535-47bb-0310-9956-ffa450edef68"
e51ce2c0e73e2d37d4808f387256722869dad19d,"Make use of the changes made to the data types:
1. Use canonical representations for validation and PSVI, when required;
2. Use new equality checking machenism.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318840 13f79535-47bb-0310-9956-ffa450edef68"
cc5f7f8cdd26e69daaad72bd80e4886ada2638ad,"javadoc fix: change @returns to @return


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318841 13f79535-47bb-0310-9956-ffa450edef68"
ff81c9e97346b2681ff32fa3202b6b0d5607ef00,"fix more javadoc warnings


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318842 13f79535-47bb-0310-9956-ffa450edef68"
18e5c5caf7eff3af768c862622d73ba28a729267,"allow Locale to be set on DOMParsers, as they can be on SAXParsers and could on DOMParsers in Xerces1


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318843 13f79535-47bb-0310-9956-ffa450edef68"
248580cc2d9a7b0a4cfbe1a54f2bf29453ea3033,"1. If there is a pattern facet, then we have to do full normalization, because
pattern is checked on the normalizaed value.
2. Output more descriptive error message for pattern facet violations.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318844 13f79535-47bb-0310-9956-ffa450edef68"
97790a56864a3b27f2447902eca72561740f5151,"1. Rec issue R-22 suggests that 0 and -0 are the same value for float/double.
Making necessary changes for order comparison (0 no longer greater than -0).
2. Generating correct canonical representations for float/double. We were
relying on Java to do the job, but apparently, Java Float/Double don't do
what we want.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318845 13f79535-47bb-0310-9956-ffa450edef68"
8ee4203a3b547f66c4174fc909b28ed8556ab404,"When normalizing a StringBuffer, and the whitespace facet is collapse, we
need to adjust the length of the StringBuffer after the normalization.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318846 13f79535-47bb-0310-9956-ffa450edef68"
88480819d5a1b8fb6db36d3e96926d836bb34265,"Fixing some indention problem in the sample source code.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318847 13f79535-47bb-0310-9956-ffa450edef68"
ee957f5269c23f77437ff9de6dbf2b5be69bcf95,"Fix for bug 13282.  A great deal of thanks goes to Tim Bruce for
the patch and stand-alone test case, and to
Jean-Francois Arcand for much patience.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318848 13f79535-47bb-0310-9956-ffa450edef68"
be47e0bfe22ea699ac0981906b290f906f2bf6e2,"give credit for patch to bug 13282 in release docs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318849 13f79535-47bb-0310-9956-ffa450edef68"
084976c6ff9b3775112d8e27bb2c3d8d3ecd7d4d,"fix for bug 14882


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318850 13f79535-47bb-0310-9956-ffa450edef68"
6ea84a46ecb8a4b4507b6513b328f55a189decbc,"premature commit of this file...  oops...


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318851 13f79535-47bb-0310-9956-ffa450edef68"
b25b4597a4c172b405d835abd17a635c716428b5,"Fixing bug 14939: the default attribute value was incorrect.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318852 13f79535-47bb-0310-9956-ffa450edef68"
db2ea711674948c9621d44045a8fd2a2321c449a,"Fixing bug 14915: possible array index exception if there are more than 11
grammars in the grammar pool.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318853 13f79535-47bb-0310-9956-ffa450edef68"
25cb36ea92de04586144ac0de3f3bfd91bfecbaa,"A new error message for the new ""disallow-doctype-decl"" feature.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318854 13f79535-47bb-0310-9956-ffa450edef68"
29c33b872b866cd5c6d9025243f54bf3129034dc,"Introducing a new feature ""disallow-doctype-decl"". When this feature is set
to true, a fatal error is thrown when the incoming document contains a
doctype decl. This is to solve a security problem: processing the internal
subset of the DTD might bring the JVM down.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318855 13f79535-47bb-0310-9956-ffa450edef68"
42d6912345d32f8705572ad58cca405105b41b56,"Updating the docs for the new ""disallow-doctype-decl"" feature.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318856 13f79535-47bb-0310-9956-ffa450edef68"
4ee21bab5e00b0e5469fbf6aca2b2e441e2acc8e,"A potential NPE. We check whether fDTDHandler is null everywhere else.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318859 13f79535-47bb-0310-9956-ffa450edef68"
f67babd0cd526bfd85cdc25734f54dc8b301d957,"Fix for errata E1-16: the ""public"" attribute of <xs:notation> is optional.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318860 13f79535-47bb-0310-9956-ffa450edef68"
cb3f902f6521ef387942b347d118145abdde690d,"as agreed on the list:  added getDTDSource to DTDHandler, getDTDHandler to DTDSource, and similarly for DTDContentModel*


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318861 13f79535-47bb-0310-9956-ffa450edef68"
fd76a3ed6e86cc58b0180d377f35376a88a991b4,"no longer needed in new architecture for XML 1.1 support


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318862 13f79535-47bb-0310-9956-ffa450edef68"
c148255997e1f986a952043322a34fbefbf4e982,"Changes in support of XML 1.1.

The new class XMLVersionDetector determines which version of
XML the document is in, and reconfigures the pipeline
accordingly.  In order to minimize performance impacts on
existing XML 1.0 users, all XML 1.1 functionality has been implemented
in new classes which extend methods of existing classes.

The entity scanning code has also been reorganized:  the
EntityScanner inner class of XMLEntityManager has taken the place
of the former abstract XMLEntityScanner class.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318863 13f79535-47bb-0310-9956-ffa450edef68"
1070f1129c4256b7d3b5261e0ad68b5fc3d61b11,"implementing XNI changes and XML 1.1 support in DTD validation code


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318864 13f79535-47bb-0310-9956-ffa450edef68"
12265e72e83f8310eebeacbc67bc3441f4598c79,"to properly support XML 1.1 in DTD datatype validation code, it is necessary to implement a new factory which calls out specific XML 1.1 validators for NMTOKEN, NMTOKENS, ID, IDREF, and IDREFS


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318865 13f79535-47bb-0310-9956-ffa450edef68"
e7339ba65a7ad23839c58f770916c35e210b9b66,"add a character properties file specific to XML 1.1.  While these methods could have been included in the existing XMLChar, for applications that do not use XML 1.1, it may be possibly to avoid static initalization this way.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318866 13f79535-47bb-0310-9956-ffa450edef68"
1578e5e24313fc37bfce64c29d5a799bf934791b,"changes in support of XNI modification


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318867 13f79535-47bb-0310-9956-ffa450edef68"
e5aa8cdd257a3164e8029127729461826c030af5,"changes in support of XML 1.1.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318868 13f79535-47bb-0310-9956-ffa450edef68"
88668f8e236f680e87671100fdf9b53712ebaad8,"support for XML 1.1


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318869 13f79535-47bb-0310-9956-ffa450edef68"
3a95efd045b5043b5537950504d6393b9b68995b,"handle the version pseudoattribute correctly in both XML 1.0 and 1.1 contexts


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318870 13f79535-47bb-0310-9956-ffa450edef68"
e6c755316a8c0ec534e48d82a99364ef88411c99,"The texts for whitespace facets were not ordered correctly.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318871 13f79535-47bb-0310-9956-ffa450edef68"
90495ced5d3045488ca06a3c0f64c6bad342c4ab,"Fix for errata E1-21: need to check the processContents of wildcards in the
derived types (by restriction), to see whether they are stronger than those in
the base types.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318872 13f79535-47bb-0310-9956-ffa450edef68"
e559c5760693d6143188b00968f134df8d95477f,"For existing attribute setAttributeNS changes value and prefix, make sure
that prefix is not null before constructing the qName.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318873 13f79535-47bb-0310-9956-ffa450edef68"
aa6ccfc06117ac7261f9ba28c067bf8b3b8e9b0c,"update generic tests:
-- xmlns attributes must belong to the xmlns namespace, it is forbitten to create
element with ""xmlns"" as a prefix or local name
-- test setAttributeNS for value and name change
-- QName tests some should catch namespace error


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318874 13f79535-47bb-0310-9956-ffa450edef68"
0f6ab5ed2261c82917173d99e33c2ec1834d2932,"add support for namespace 1.1 when XML 1.1 documents are being parsed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318875 13f79535-47bb-0310-9956-ffa450edef68"
10bf1350274dafae586c3112ed046ec6aba7f878,"Modifying XSDHandler so that it doesn't rely on DOMNodePool directly.
This made it easier to switch to another DOM implementation
(DTM for example).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318876 13f79535-47bb-0310-9956-ffa450edef68"
9544fdae655c7698f9e22b8de814d8f768a01541,"Add implementation for DOMConfiguration for DOMWriter.
DOMWriterImpl now implements DOMConfiguration interface and supports 2 new features
""namespaces"" and ""xml-declaration""


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318877 13f79535-47bb-0310-9956-ffa450edef68"
89d2a20998a90ba220dcc4f403dcddbd7abb1e19,"Add implementation of DOMConfiguration for DOMBuilder and Document.
Add support for ""schema-type"" and ""schema-location"" properties.
Document no longer contains any code for configuration -- instead there is a new
DOMConfigurationImpl class that implements configuration.
No properties from the DOMParser are propagated to the DOM tree -- instead
user should use setParameter mechanism to add any additional properties, ie.
error handler, entity resolver.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318878 13f79535-47bb-0310-9956-ffa450edef68"
1b40ed204ee53829fb0b45426b327df89551a20c,"Update LS to reflect DOMConfiguration changes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318879 13f79535-47bb-0310-9956-ffa450edef68"
fcf870652d9693e0bd410e2aabc8f9953aee1709,"Update DOM L3 Core interfances to include DOMConfiguration


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318880 13f79535-47bb-0310-9956-ffa450edef68"
88c5a31efe2077a2c4bd9def7ecf5874f7993042,"use getParameter


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318881 13f79535-47bb-0310-9956-ffa450edef68"
ffbfc8333addb31c614405e396d8033f1aaa7b61,"Update dom l3 samples


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318882 13f79535-47bb-0310-9956-ffa450edef68"
a20576dc6efa54411b082d65a4acd8f608af2fba,"Update the build to incorporate changes for the DOMConfiguration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318883 13f79535-47bb-0310-9956-ffa450edef68"
b74a17a8a0ee00e131821220ecddd4f6e3298a4d,"Add tests for ""schema-type"" and ""schema-location"" and modify the test to use DOMConfiguration


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318884 13f79535-47bb-0310-9956-ffa450edef68"
78bcc0335f427f5ec5f1d6f6d0ae142143587b16,"add sample files that include both dtd and XML schema


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318885 13f79535-47bb-0310-9956-ffa450edef68"
cc2ea25792dc91b88d47315be6625a49d26cbf2e,"Update build for dom l3 tests


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318886 13f79535-47bb-0310-9956-ffa450edef68"
9bdc19b9d8aa608b9da3123a1b6a20d8d96e2e36,"Fixing error in ""test"" target


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318890 13f79535-47bb-0310-9956-ffa450edef68"
ac88c1d827ebd480691fd54b3ee081dab6b31069,"A table-based implementation (DTM) of DOM, to improve schema loading
perfomance. The code was originally developped by Rahul Srivastava in
a branch of Xerces. Thx Rahul.
The main differences from Rahul's code:
1. DefaultDocument extends NodeImpl now (instead of DefaultNode),
to avoid some casting.
2. DefaultXMLDocumentHandler is modifed to reflect changes in XNI.
3. ElementImpl stores the line/column information, to better error reporting.
4. SchemaDOM parser is modified to check the error where non-whitespace
textural content appears within schema elements other than annotations.
There are still things that need to be implemented:
1. How to store content of annotation elements. To expose annotation,
we need to provide all information about it, including its textural content, PIs,
and even comments. But such information is not currently stored in DTM.
(This is not a problem for now, since we don't expose annotations yet.)
2. Implement a DTMNodePool to further improve the performance by reusing
the node objects.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318891 13f79535-47bb-0310-9956-ffa450edef68"
029f80f09d6564ede8ab93041fb66e8554040c9b,"Now it works with both DTM nodes and Xerces DOM nodes.
This enables the possibility that we support both DTM and DOM as schema
source at the same time.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318892 13f79535-47bb-0310-9956-ffa450edef68"
4cc81f7e9f57a9849c0c08e40b0cac8f018bb2a8,"Switching from DOM to DTM for schema parsing.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318893 13f79535-47bb-0310-9956-ffa450edef68"
41a9eddf1f69a94ac4334a19d85b1a0424c4bcae,"XNI modifications
1. XMLResourceIdentifier add the following methods:
public void setPublicId(String publicId);
public void setExpandedSystemId(String systemId);
public void setLiteralSystemId(String systemId);
public void setBaseSystemId(String systemId);

2. XMLLocator add the following methods:
public void setLineNumber();
public void setColumnNumber();

3. Remove startPrefixMapping/endPrefixMapping from the xni.XMLDocumentHandler and xni.XMLDocumentFragmentHandler
and modify the pipeline. From now one all components that need to read or modify namespace context need to save a pointer to the namespace context that is passed in the startDocument() call.

4. NamespaceContext
Add pushContext, popContext, declarePrefix, getURI, reset() methods.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318894 13f79535-47bb-0310-9956-ffa450edef68"
fbbc8b831ae4a9706254a3860b43f3242d28b54e,"Modify samples following the changes to XNI (removing start/end Prefix mappings)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318895 13f79535-47bb-0310-9956-ffa450edef68"
16d1e133927cfe537b646c698fcee977285071b9,"Tentative release plan


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318896 13f79535-47bb-0310-9956-ffa450edef68"
96f243a8d06de25302936cd1bc6d571b662cdefc,"SAX reports empty string for a null URI.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318897 13f79535-47bb-0310-9956-ffa450edef68"
662dd87fb1aa88fe8da872fdc8ec759a6b2dbc35,"createElement in HTML DOM converts a tagName to upper case, thus on the endElement we should
compare names ignoring the case.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318898 13f79535-47bb-0310-9956-ffa450edef68"
175e37e7fa1c6b48c97f34ce8246441061d01cad,"cleanup.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318899 13f79535-47bb-0310-9956-ffa450edef68"
0d01bb71bf8451a8d217f12b3ee24a3d8442e151,"fixing DOM Level 3 built that was broken (impl/xs/opti)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318900 13f79535-47bb-0310-9956-ffa450edef68"
fb83a29bdb9f0b25d2b17da3cc646f6df192ad77,"fixing DOM Level 3 built that was broken (impl/xs/opti)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318901 13f79535-47bb-0310-9956-ffa450edef68"
130aeee42c8fd7c7663b99e8c88807ff7e8ac39b,"Implement XML 1.0 attribute value normalization. Expose normalized values and default content via DOM Tree.
Add implementation of discard-default-content.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318902 13f79535-47bb-0310-9956-ffa450edef68"
8c22cec9f49d30156123c1d942643b75fbfecb87,"Fix tests


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318903 13f79535-47bb-0310-9956-ffa450edef68"
79f3cf6c6f2c959978e7a08da7f2b352abc71629,"uncomment some tests


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318904 13f79535-47bb-0310-9956-ffa450edef68"
a0853fb68c40fa31af665852dc057b4a6a9a48c4,"Implementation of DOM Level 3 setId* methods.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318905 13f79535-47bb-0310-9956-ffa450edef68"
73d435406eaf24bbc5b70397fbe6ed9969a233ca,"Update interfaces to include new ID methods


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318906 13f79535-47bb-0310-9956-ffa450edef68"
eca090abc0cce0f84cc0d5c85e622417a8fbd65c,"Add test for DOM Level 3 setID methods


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318907 13f79535-47bb-0310-9956-ffa450edef68"
44db052d8fcc26634308593a80400665ad5794fd,"Feature ""discard-default-content"" should only be supported in the DOMWriter
(Minutes DOM teleconference 20021204).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318908 13f79535-47bb-0310-9956-ffa450edef68"
a556144fd3a70c85f9f96e94c9962fc3c3ae237e,"Update implementation with new DOM L3 methods


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318909 13f79535-47bb-0310-9956-ffa450edef68"
f2630ae7e531ce966f39017ea9e860c06976f61d,"Rework handling of encodings within the serializer.  Now it should
be able to support the intersection of the IANA encodings that
Xerces recognizes and those for which the JDK has a CharToByte converter.
To maximize portability of serialized documents, by default the serializer
will only accept IANA names for encodings now.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318910 13f79535-47bb-0310-9956-ffa450edef68"
120cac5c63250aeed40a3fb1204264333072fcd3,"reworking encoding support, as well as fixing bug #15313


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318911 13f79535-47bb-0310-9956-ffa450edef68"
06776cac2dac78fd9751f3f6ed0e6c388fd6a07a,"add a new XML 1.1 serializer.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318912 13f79535-47bb-0310-9956-ffa450edef68"
37f63dab19362e8cf393d394dfd034af898a4ce4,"fix broken DOM 3 build


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318913 13f79535-47bb-0310-9956-ffa450edef68"
152b37083f6a5170e4f998c7434dbffea2904cec,"Enable the DOMWriter implementation to correctly serialize XML 1.1 documents.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318914 13f79535-47bb-0310-9956-ffa450edef68"
a37d914358ff23e27d8c64db4ffc7a46d7718bd5,"localize an errant error message


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318915 13f79535-47bb-0310-9956-ffa450edef68"
b2909b39efcd0e2a64379aac6544d637d50f87f5,"sync JAXP code up with tck-jaxp-1_2_0 branch from xml-commons.  This closes the file input stream we opened when reading the jaxp.properties file.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318919 13f79535-47bb-0310-9956-ffa450edef68"
3551c0576bc7022d7ea9ea1a0dc1e03d5e195721,"Close the file input stream we opened when reading the xerces.properties file.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318920 13f79535-47bb-0310-9956-ffa450edef68"
e4299dc5957bbdfb3d8539e64bd385737af945b3,"The texts for content types weren't ordered correctly.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318921 13f79535-47bb-0310-9956-ffa450edef68"
14510bfbc4a1947154af38d0e98c00e40716025d,"Exclude DOMUtil.java from dtd-only jar build.
This file is only used by XML Schema code, and has dependency on
impl.xs package.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318922 13f79535-47bb-0310-9956-ffa450edef68"
50401ced679b6f52ede6c4410cc05704d867e65e,"Update Id table during normalizeDocument operation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318923 13f79535-47bb-0310-9956-ffa450edef68"
ffe442af545b97831472958e059ab51512049b5e,"Fix a JAXP TCK failure.  Now, whenever an EntityResolver
needs to be set on one of our parsers, the corresponding
configuration's setProperty method is called instead of its setEntityResolver method as
had formerly been the case.  This allows the new resolver to be
passed to all registered components; BasicParserConfiguration's setEntityResolver method
does not exhibit this behaviour.

REVISIT:  BasicParserConfiguration's setEntityResolver (and setErrorHander)
methods *should* in all likelihood exhibit this behaviour...


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318924 13f79535-47bb-0310-9956-ffa450edef68"
45f5a513165a0b933a33bb8764f5aeb617889d69,"Two new grammar description interfaces, for describing DTD and
XML Schema grammars respectively.
With these interfaces, users can get more detailed information about
a grammar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318925 13f79535-47bb-0310-9956-ffa450edef68"
3222bc8d49a93d0c07a9c16ca1d0b0dcaf3f2c68,"Implement the new grammar description interface for DTD grammars.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318926 13f79535-47bb-0310-9956-ffa450edef68"
6960df22d8c5d831b081e4f140ed236913b81615,"Implement the new grammar description interface for XML Schema grammars.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318927 13f79535-47bb-0310-9956-ffa450edef68"
6474cf5b538a07d23cafa149928d6e2b2d4fb290,"Implement validators pool for normalizeDocument


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318928 13f79535-47bb-0310-9956-ffa450edef68"
5bf50387eed5603084f6fa709eb4ecdf0e03a65e,"Update setIdAttributeNode methods per latest DOM L3 draft


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318929 13f79535-47bb-0310-9956-ffa450edef68"
78ae219a2b2a8937125080a89b4f58104075de7b,"Modify to test normalizeDocument


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318930 13f79535-47bb-0310-9956-ffa450edef68"
2fd5cba302da2a95ef4b0630e8bd6b0c45cafa34,"Include thread test for dom and sax for ""test"" and ""test-dom3"" targets


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318931 13f79535-47bb-0310-9956-ffa450edef68"
01cadc0c8261e76312ed49f6fb97cae1b25a1436,"clean up some unused imports


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318932 13f79535-47bb-0310-9956-ffa450edef68"
b9169a39675735055c61d8df9b5b73dc39e010a1,"add new SecurityManager property.  Once components have been altered to handle security problems, this property will allow the parser to behave in a security-conscious way if and only if an application has caused it to be set on the configuration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318933 13f79535-47bb-0310-9956-ffa450edef68"
db10f0a6ca6eccef761d08249f946eb9e9b8206e,"applying a patch, based on code Neeraj committed earlier to a branch, that leverages the new SecurityManager property to fix the entity expansion DOS hole.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318934 13f79535-47bb-0310-9956-ffa450edef68"
5edcee0533d1d8f5424dd2cd57935b3dc4be0c74,"add a new configuration that allows Xerces to behave in a security-conscious way with no changes in application code.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318935 13f79535-47bb-0310-9956-ffa450edef68"
715d1945be6c014a270a0435d711159bc884782e,"fix JAXP 1.2 limitation where DTD errors would be emitted if a DTD were present, even if the schemaLanguage property was set appropriately.  Now no errors will be emitted under this condition.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318936 13f79535-47bb-0310-9956-ffa450edef68"
8ec00d82579d325fcacc087cfaab872f8479e933,"fixing bug 16021


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318937 13f79535-47bb-0310-9956-ffa450edef68"
51be532c652cf9a20ca7e950b34b2f00f7dafdd3,"fixing bug 15768.  According to the javadoc for StringBuffer and String, this is what the original code would have compiled to; this fix simply makes sure that, if compiled under JDK 1.4, Xerces will work with previous JDKs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318938 13f79535-47bb-0310-9956-ffa450edef68"
efd4719813963644e65ed39eed73dfffea14467a,"Committing the patch proposed by Michael Glavassevich to solve some
performance problem in the URI class. Thx Michael.
""
1) I created a lookup table for the character classes of URIs, to
eliminate the linear character searches through strings.

2) I modified the character checking methods, to use the lookup table, and
combined checks i.e. (isReservedCharacter || isUnreservedCharacter ->
isURICharacter).

3) I modified the signatures of initializeAuthority, and initializePath to
take string indexes, eliminating the need to create substrings when
calling these methods.
""


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318939 13f79535-47bb-0310-9956-ffa450edef68"
6464b76fa2bc67eb8804867ab7c70cde91ea82d5,"fixing bug# 15574.  Thanks to Michael Glavassevich for both pointing out these bugs and providing an excellent fix for them!


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318940 13f79535-47bb-0310-9956-ffa450edef68"
4d0ffc8ba30220c49f3c9d0c9c1b0c74a5f6b96e,"fix DTD-only jar build


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318941 13f79535-47bb-0310-9956-ffa450edef68"
ecb3a007d50064a77832d083a13726949b000a20,"Modify PSVI interfaces


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318942 13f79535-47bb-0310-9956-ffa450edef68"
fe279f0bc89074e9d570e6231994444372ed71f6,"Update PSVIWriter according to the changes in the PSVI interfaces


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318943 13f79535-47bb-0310-9956-ffa450edef68"
0299de4628db7dc3afbe3bc9011d25f061b2aedf,"XSTypeDecl interface is no longer needed since xs.psvi.XSTypeDefinition already
includes methods that XSTypeDecl used to define


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318944 13f79535-47bb-0310-9956-ffa450edef68"
832b5ac42fb89056d7631770ed2ea08976c5442b,"Update this sample according to the changes in the PSVI interfaces


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318945 13f79535-47bb-0310-9956-ffa450edef68"
91f57f7070b191fb7cc96fb2d30f0f7e69bc948c,"Make dv-only jar work again:
1. dvprepare-src target needs to depend on the prepare target
2. dv package now needs more classes to compile, namely those related
class loading and security managing.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318946 13f79535-47bb-0310-9956-ffa450edef68"
967c2d128645cc56dfb3f43d406413130f0c32da,"make DTD preparsing work again.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318947 13f79535-47bb-0310-9956-ffa450edef68"
735ee9a1b60d8aa71d0e9ff29b6358e890b0aa81,"if a SecurityManager has been enabled and the continue-after-fatal-error has nonetheless been set to true, there seems no better way to continue than to reset the entity expansion count once it has reached the limit and the fatalError has been thrown.  One could, in principle, use this to determine how much memory it cost for a particular number of entity expansions.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318948 13f79535-47bb-0310-9956-ffa450edef68"
a4633dc3306df9473ed748c5bda91094d650a038,"Fixing another security problem. High value of maxOccur attirbute causes stackoverflow error. When application switches the mode of parser to behave in security conscious way using SecurityConfiguration. It sets the maximum number of nodes that should be created when building
    content model from maxOccurs attribute value specified in schema document, number of nodes
    created depneds upon the type of content model and value of maxOccurs attribute.Current limit of maximum number ofnodes has been set to 3000. However, it can be set to higher value if required by the application using SecurityManager Object.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318949 13f79535-47bb-0310-9956-ffa450edef68"
f07c489654447daa345c2f946da4a5eae75c074d,"Generate correct canonical lexical representation for date-time types.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318950 13f79535-47bb-0310-9956-ffa450edef68"
67d3c68c7ddde78aec3a656b6997c4e0c133fb63,"According to a recent clarification of the schma spec, both the original lexical rep
and the canonical rep of fixed/default values need to be valid wrt the type definition.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318951 13f79535-47bb-0310-9956-ffa450edef68"
c5536ec1942eff93d947cbd5bf646b2a3f7e5f2f,"Fixing another security problem. High value of maxOccur attirbute causes stackoverflow error. When application switches the mode of parser to behave in security conscious way using SecurityConfiguration. It sets the maximum number of nodes that should be created when building
content model from maxOccurs attribute value specified in schema document, number of nodes created depneds upon the type of content model and value of maxOccurs attribute.Current limit of maximum number ofnodes has been set to 3000. However, it can be set to higher value if required by the application using SecurityManager Object.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318952 13f79535-47bb-0310-9956-ffa450edef68"
28603bdd518cb58dcf64bc023e153bb4fbac1d67,"Fixing another security problem. High value of maxOccur attirbute causes stackoverflow error. When application switches the mode of parser to behave in security conscious way using SecurityConfiguration. It sets the maximum number of nodes that should be created when building
content model from maxOccurs attribute value specified in schema document, number of nodes created depneds upon the type of content model and value of maxOccurs attribute.Current limit of maximum number ofnodes has been set to 3000. However, it can be set to higher value if required by the application using SecurityManager Object.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318953 13f79535-47bb-0310-9956-ffa450edef68"
0661905484d09a671eab2d1ac5a89f2566a4393a,"fixing bug #15255.  Also, I have altered things so that we are able to validly parse our own documentation--there were several errors related to duplicate declarations to get rid of.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318954 13f79535-47bb-0310-9956-ffa450edef68"
705d2033b919216253ff9c63d1365ef80e5e5cad,"document new SecurityManager property


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318955 13f79535-47bb-0310-9956-ffa450edef68"
b59cc8e3c3601b78c33c111acaecbfdee01b836b,"Implement DOM L3 TypeInfo.
Clean up a bit DOMParser -- it used to create notation declarations from external DTD...


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318956 13f79535-47bb-0310-9956-ffa450edef68"
aac6a92eae155af2284b6ce6ef3e4f0bbf7bfffb,"Update DOM L3 interfaces to include TypeInfo


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318957 13f79535-47bb-0310-9956-ffa450edef68"
634de41e710b00d04f6314bfcdb6fabb3a188f0d,"Modify build (implemented DOM L3 TypeInfo support)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318958 13f79535-47bb-0310-9956-ffa450edef68"
89dd3df121258610fb9bee054aec6108e8f05de4,"A new feature: http://apache.org/xml/features/standard-uri-conformant
When it's turned on, it has to be a URI where a URI is expected, otherwise
a URI.MalformedURI excpetion (a subclass of IOException) is thrown.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318959 13f79535-47bb-0310-9956-ffa450edef68"
c365b31c1b7dbc44f841769f3d945815da0ae36e,"Include the schema for the schema namespace in XSModel.
Types from the schema namespace are by definition present in every
schema document, so they should be included in XSModel.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318960 13f79535-47bb-0310-9956-ffa450edef68"
66764ac7dd2dba667bc346cd0467c61ebffa951b,"Function to create instances of different node types should return CMNode type. Resetting the node counter
once we are finished building content model.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318961 13f79535-47bb-0310-9956-ffa450edef68"
5a14bab0762a851069a18eebd7f278b943f88c00,"Fix a bug introduced in the new getTypeInfo method (DOM L3)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318962 13f79535-47bb-0310-9956-ffa450edef68"
8048a5dd970ddc1029c0e7871a16d5991dc56b4e,"Element Definition should not have -1 code (related to debugging of the deferred DOM)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318963 13f79535-47bb-0310-9956-ffa450edef68"
f8e04fa42df1e79fa85335cbfb5bbd27224a4bb1,"According to the latest DOM L3 clarification XML 1.0 attribute value normalization
will not happen in the DOM (since DOM exposes the Infoset).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318964 13f79535-47bb-0310-9956-ffa450edef68"
54387d7ee29b6b9fe2fcfda19a600ff208d7738f,"add a tarball containing API source from the JAXP TCK-compliant branch of xml-commons.  Note that this is not blessed yet; that will come as soon as one outstanding issue has been resolved and I am able to tag a frozen version of this branch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318965 13f79535-47bb-0310-9956-ffa450edef68"
3562fee62b6e8afbf572a38d8c226639b4189e12,"update the xml-apis jar to match the current state of the JAXP TCK-compliant branch of xml-commons.  Note that this is not blessed yet; that will come as soon as one outstanding issue has been resolved and I am able to tag a frozen version of this branch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318966 13f79535-47bb-0310-9956-ffa450edef68"
eff96d6143196452b4abad7b91dde02353ab05bb,"compile against the classes in xml-apis.jar instead of the APIs in our CVS source tree.  Updated all build targets to get sources from the new xml-apis--src.tar.gz; now we are ready to remove our APIs from CVS.  Also updated the build script to copy DOM and SAX license information into distributions.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318967 13f79535-47bb-0310-9956-ffa450edef68"
24a8a8517b42d962a7fc580910e91f13c28a85cf,"adding files to describe the licenses under which we are allowed to distribute DOM and SAX API sources/binaries


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318968 13f79535-47bb-0310-9956-ffa450edef68"
6ee66ab0b019de8f4c5f7bc285be66373b09e7d1,"adding license info for the xml-apis--src.tar.gz file


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318969 13f79535-47bb-0310-9956-ffa450edef68"
7175ec5a7dd93651077e5f67548ff47f5312f218,"CMNodeFactory should not be a singleton, since this could cause thread-safety issues.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318970 13f79535-47bb-0310-9956-ffa450edef68"
31e3ae57452fd27f5bd3b6a76372577506c766fe,"improve error message and the description of the new methods added to SecurityManager for the control of schema content model construction


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318971 13f79535-47bb-0310-9956-ffa450edef68"
2cbfc93606c627c276882f3aba73ab9a04f7adc5,"For PIs the baseURI is lost if entity refs are expanded, instead a warning is issued.
Modifying also DOMError interfaces to include ""type"" and ""relatedData"" fields


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318972 13f79535-47bb-0310-9956-ffa450edef68"
d2418aadf1a33be9953b49a891c3e51018be4f4b,"Modify DOMError interface to include ""type"" and ""relatedData"" fields


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318973 13f79535-47bb-0310-9956-ffa450edef68"
01d5b834054df25dd57763d38441b29f862cd0c3,"this file is corrupt!


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318974 13f79535-47bb-0310-9956-ffa450edef68"
03468cf5406609e8f37be426d291a20636df630a,"reintroduce source for xml-apis.jar.  Hopefully this will not become corrupt.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318975 13f79535-47bb-0310-9956-ffa450edef68"
512cc757d42f430d5c7bad9ad1d3ff4f6dfe3e3f,"but that failed too... Let us see if CVS understands zip files next time


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318976 13f79535-47bb-0310-9956-ffa450edef68"
a7198af0874081f43f7c88a53d05dcfc34ddad5b,"with high hopes that CVS will not corrupt this zip file, here are the sources for xml-apis.jar once again.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318977 13f79535-47bb-0310-9956-ffa450edef68"
89b1ecf074189d8666d246728a40463e53bef9e3,"since it seems that CVS does not understand tarballs, use a zip to store commons API source instead.  Also, update copyright info as it appears on the documentation etc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318978 13f79535-47bb-0310-9956-ffa450edef68"
9354605330ed380b9d9f3de1a205e6c095f253e2,"at the suggestion of some people in Xalan-land, here is a sample xerces.properties to use, along with some directions on where to put it and why it might be useful.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318979 13f79535-47bb-0310-9956-ffa450edef68"
73fe91acd7160e0aab61373109d04b4fe415ac2b,"Update XS API according to the erratum: E1-14 & E1-12


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318980 13f79535-47bb-0310-9956-ffa450edef68"
93260ea52e07b6fa4f865d36580a7568587481d3,"The latest ""cleanup"" is invalid per DOM spec... Notation interface represents
notation decl from DTD (internal or external)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318981 13f79535-47bb-0310-9956-ffa450edef68"
00f864047fd77a9e3b42898df73283c130a3a717,"Changes for Erratum E1-5: some rules concerning
""Property mapping for complex type definitions with complex content""
have changed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318982 13f79535-47bb-0310-9956-ffa450edef68"
3f7e6490c99da5a8b1850e1e496c2b04ff5e4161,"Small performance fix: if the number of particle is 0, we don't need to
always create an array of length 0.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318983 13f79535-47bb-0310-9956-ffa450edef68"
31a164cf134c45b3eba55318ad6a4f1354b526d0,"Error code change as per Erratum E1-15.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318984 13f79535-47bb-0310-9956-ffa450edef68"
da55074ecbfd592c1f844477789dce086d24360a,"1. Changes for Erratum E1-15: if derived CT is mixed, base must be too.
2. Error code change as per Erratum E1-15.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318985 13f79535-47bb-0310-9956-ffa450edef68"
58623d118a7fcd42348da81cb5c628601c4142e5,"Error code change as per Erratum E1-15.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318986 13f79535-47bb-0310-9956-ffa450edef68"
b2a0ab608c08dc24e0fc4bddf5e353fa52826798,"Change Validatiy_unknown to validity_notknown


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318987 13f79535-47bb-0310-9956-ffa450edef68"
7ab7e50fbcecda5e1138f9df8b47faed48a10830,"1. Fixing some errors in the message file;
2. Proper error codes for circular references;
3. Error code change as per Erratum E1-23.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318988 13f79535-47bb-0310-9956-ffa450edef68"
da91c5776ea953f82bf56161d194d7375d7fa0eb,"re-enable successful builds on SUN 1.4.x platforms.  This requires making sure our APIs are prepended to the bootclasspath, since the Sun JDKs contain a slightly different version of the HTML DOM than we do.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318989 13f79535-47bb-0310-9956-ffa450edef68"
562f86aa3abc3f28516cb66887fc66d263bc4289,"re-enbale building under JDK 1.2.2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318990 13f79535-47bb-0310-9956-ffa450edef68"
d2d4f44da9f511edc3e25fe84cced5cae93b74f6,"fix some warnings issued when compiling under JDK 1.2.2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318991 13f79535-47bb-0310-9956-ffa450edef68"
d47f880a98695c5cebdc660a4842ec67bf14fd40,"More changes for E1-5: error code; an NPE introduced from a previous commit.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318992 13f79535-47bb-0310-9956-ffa450edef68"
4bfdba2df65c0b165220a493c0ae9cc18ba247d3,"Error code change as per Erratum E1-36.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318993 13f79535-47bb-0310-9956-ffa450edef68"
db5ed21ec0df9fd21de7070ad08baf093dc790d9,"Fixing bug: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=16235


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318994 13f79535-47bb-0310-9956-ffa450edef68"
618e2dbf490ab3bc89d187d324bb780f1b52010f,"Error code change as per Erratum E1-39.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318995 13f79535-47bb-0310-9956-ffa450edef68"
6986cf1dd5d2ac18ccbba12d8ac767f47a81af3c,"Update the DOM documentation for the new release


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318996 13f79535-47bb-0310-9956-ffa450edef68"
0e12f175186caadf3cfa70f827e6f2a4df31419b,"The SAX DeclHandler#attrDecl method requires no callback to be made
for the second and subsequent declarations of attributes.  This patch
fixes the parser so that it correctly implements that behaviour.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318997 13f79535-47bb-0310-9956-ffa450edef68"
6cd6caa300a6ec9ee572ff21bed5a6ad102ea309,"Additional fixes related the bug: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=16235


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318998 13f79535-47bb-0310-9956-ffa450edef68"
a874fb9e5a3a6c3a65bc26b96e53fa5e23c395a0,"fix the ""test"" target


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@318999 13f79535-47bb-0310-9956-ffa450edef68"
9402afd22981ace66e80c3f344a97fc12cee0116,"change default configuration from IntegratedParserConfiguration to XML11Configuration


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319000 13f79535-47bb-0310-9956-ffa450edef68"
54004f33bbbe6c859df70127dbe52cc11b0d245f,"Enable XML 1.1 support by default.  Now, if the parser is presented
with a document with the version pseudoattribute having a value
of 1.1, it will parse it according to the XML 1.1 candidate recommendation.
This was effected by changing the default configuration that the parser
uses for SAX/DOM parser construction from
IntegratedParserConfiguration to XML11Configuration.

It should be noted that this might result in slight performance
degradations for documents that use namespaces and do not employ
DTD's, since XML11Configuration does not yet contain the optimization for
these documents that IntegratedParserConfiguration does.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319001 13f79535-47bb-0310-9956-ffa450edef68"
87380dbd50d7c2e9ee84a41a0e7acc781c89038f,"Pulling out the change for schema erratum E-16:
The JAXP JCK is not updated for this erratum, but we need to pass it before
the release. Will put the change back when the TCK is updated.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319002 13f79535-47bb-0310-9956-ffa450edef68"
ad7a88690789109cfaf2baf6fb1a428c17e11a87,"Mark the interfaces as deprecated (next release those might move to another package)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319003 13f79535-47bb-0310-9956-ffa450edef68"
7387e6e073befc7e03358d268165796e2449f252,"XNI API changes as per Andy's suggestion:
1. Augmentations: rename ""clear"" to ""removeAllItems"";
2. NamespaceContext: clarify what the ""reset()"" method is responsible for;
3. XMLAttributes: add a new method ""setAugmentations"".


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319004 13f79535-47bb-0310-9956-ffa450edef68"
4e31e2a1902765d75fb43996ef848e2fb9ca6b97,"change getMapLength to getLength to be consistent with the rest collection interfaces.
Also rename methods that were missed during the XS API change


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319005 13f79535-47bb-0310-9956-ffa450edef68"
c3e5e16e6d81da36d4c1a063d163e1a00819d48d,"""validate"" and ""validate-if-schema"" are mutually exclusive in the DOM


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319006 13f79535-47bb-0310-9956-ffa450edef68"
674ddc67b935c1d011d3e331d65630ed080d8054,"pull back recognition of XML 1.1 documents by default.  The performance of the code implementing this behaviour appeared to be unacceptable.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319007 13f79535-47bb-0310-9956-ffa450edef68"
5254437c187aeedd023641655f13c67f5106440f,"Update documentation before the release


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319008 13f79535-47bb-0310-9956-ffa450edef68"
b29768e263055fe0f0187be85f41930c9673bc9f,"Fixing an NPE. When applying default element values for elements with
xsi:type, we only need to validate the string once (as oppose to twice when
we traverse the element decl with value constraints, for the original lexical
rep and the canonical one).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319009 13f79535-47bb-0310-9956-ffa450edef68"
6f9e26a9d0e907ba5859a67e9718ac39f4328dae,"fix a problem with the signature of the SAX DefaultHandler#resolveEntity method.  This cannot throw an IOException under SAX 2.0


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319010 13f79535-47bb-0310-9956-ffa450edef68"
cbd91483db38346c587f3ca89b38200452f0951d,"Update release info


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319011 13f79535-47bb-0310-9956-ffa450edef68"
f9508d7416156894484392c161093dc15d4fbadd,"Making the behavior of dynamic validation consistent:
- Make it work as what the feature description says;
- Make DTD and Schema validation work the same way.
That is, when dynamic validation feature is on, dynamic validation always
happens, in spite of the state of the validation feature.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319012 13f79535-47bb-0310-9956-ffa450edef68"
a0c033ffdb137272843c4c3eb09f645f16ab475e,"added a method needed by compareDocPosition


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319013 13f79535-47bb-0310-9956-ffa450edef68"
cab5b3b1b30ea06e0bfd44f863cac380b94543ad,"added initial impl for compareDocPosition


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319014 13f79535-47bb-0310-9956-ffa450edef68"
1b9ca1bd9df4c7c5bc5b4969893b855ef513a3de,"Removed setter methods from XMLLocator interface for finalization
of XNI.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319015 13f79535-47bb-0310-9956-ffa450edef68"
91a3b17e477353668f1babfbbb30476a92c662fc,"changes for compareDocumentPosition as per Oct public WD


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319016 13f79535-47bb-0310-9956-ffa450edef68"
1e68f7cb86f3781b6911e1a238b2a1288d1e292c,"changed method sig. for compareDocumentPosition


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319017 13f79535-47bb-0310-9956-ffa450edef68"
f38393e8668bde9b3c3d74346521d0a1233ff032,"added compareDocumentPosition


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319018 13f79535-47bb-0310-9956-ffa450edef68"
44335f3da208b6a70414902a0f186902081c2a12,"make ObjectFactory cachec xerces.properties, refreshing it when necessary, in like manner to the FactoryFinder implementation we will be relying upon.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319019 13f79535-47bb-0310-9956-ffa450edef68"
2d0105055e6cbfdb5e7163159637051eace964ee,"replace logic to reset the current entity character buffer after version detection by something which seems a good deal more correct.  It also allows the class to work properly when the source of characters is a character reader, rather than a byte stream.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319020 13f79535-47bb-0310-9956-ffa450edef68"
0c710aad90f3eaee7147f400ec0e8dbe29c122b3,"update release docs in preparation for 2.3.0


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319021 13f79535-47bb-0310-9956-ffa450edef68"
1cbf589cc892ce32c89daca469f3a56cb22349e6,"final update of commons code; this incorporates the performance fix to cache jaxp.properties files, if present.  This code was generated from the Xerces-J_2_3_0 tag on the jaxp-tck-1_2_0 branch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319022 13f79535-47bb-0310-9956-ffa450edef68"
a75e6ed16be6399693df623da97261d1022412f9,"Update the release document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319023 13f79535-47bb-0310-9956-ffa450edef68"
bcffef472fc5e08c2270b2325b3e6c4d44cd5c6d,"documentation update for the upcoming release.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319024 13f79535-47bb-0310-9956-ffa450edef68"
8f443e0ece61586093b18ec25f85a802426a40ae,"reflect certain XNI changes in the docs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319025 13f79535-47bb-0310-9956-ffa450edef68"
1124ca44d32dafd2eaa60080cc3a7a803cd8c827,"updated release info


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319026 13f79535-47bb-0310-9956-ffa450edef68"
344beca5a77f198f5997033619218d8753781fe3,"document newly-added interfaces in the xni.grammars package


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319027 13f79535-47bb-0310-9956-ffa450edef68"
ad0dcb5edc2f67f20252048d78f29e37f6f5be35,"Fixed XMLLocator interface per mailing list discussion
and updated implementation to comply.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319028 13f79535-47bb-0310-9956-ffa450edef68"
d0213afea41d6bfc26c112837a1354a03f643e7e,"minor doc update to complete description of XMLLocator change


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319029 13f79535-47bb-0310-9956-ffa450edef68"
4e3f4927aac92d213f04ac195c1d828d099ea0b6,"Should initialize the datatypes when either validation or dynamic validation is
turned on.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319030 13f79535-47bb-0310-9956-ffa450edef68"
b2627c29b0ec403c17dc8e2682568fd9ede65fd4,"Should initialize the datatypes when either validation or dynamic validation is
turned on.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319031 13f79535-47bb-0310-9956-ffa450edef68"
6451eb438b0a2302c473525e6743b66fdfe32be5,"update release number


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319032 13f79535-47bb-0310-9956-ffa450edef68"
125747d3b5f6dc65cb77cf6c41cd0be34f67e84e,"Update info about DOM l3


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319033 13f79535-47bb-0310-9956-ffa450edef68"
d0fd9a78b0fc302372d4370c2d5e1f970a5d0552,"updated release plan


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319034 13f79535-47bb-0310-9956-ffa450edef68"
f92a23ae1c21b275450bfdab30e0cf55c2a38cb4,"Updates to PSVI interfaces


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319035 13f79535-47bb-0310-9956-ffa450edef68"
e71a97d3ed3c65fd30d7718b091db956488796d2,"Delete ""Changes from Previous Release"" section


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319036 13f79535-47bb-0310-9956-ffa450edef68"
4957658e3f0f0f98993d50acf77e82c2626487ae,"Fix for Javadoc that still stated the XMLLocator extended
XMLResourceIdentifier.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319040 13f79535-47bb-0310-9956-ffa450edef68"
8596b2c627e5aca31e696978b6453d4687528ba9,"""getLexicalPattern"" didn't give correct answer for ""Name"", ""NCName"",
and ""NMTOKEN"" derived types.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319041 13f79535-47bb-0310-9956-ffa450edef68"
689076f9749c63b7acf68c77c553a8fa9e00df5f,"With the ""XMLResourceIdentifier"" interface being read/write now, we can
write directly to it, instead of finding an instance of XMLResourceIdentifierImpl.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319042 13f79535-47bb-0310-9956-ffa450edef68"
1d432d2163151fcc90f067c23e018763520f6854,"Fixing a class cast exception: actual values of list types are no longer of type
Object[].


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319043 13f79535-47bb-0310-9956-ffa450edef68"
d87ded379fd31434ab42d97b2b730183cded7625,"while adding default attribute from the DTD back (after removal) we must also
copy a namespace from the attribute we are trying to remove.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319044 13f79535-47bb-0310-9956-ffa450edef68"
f241a34b3b7c38d177f50067f3bb5df481f45c77,"Updated the scanner implementation to NOT buffer when scanning
CDATA sections. This enables Xerces to use less memory and be
able to parse very large CDATA sections which would previously
cause out-of-memory exceptions.

Reported by:	Jim Layer <james_layer@reyrey.com>


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319045 13f79535-47bb-0310-9956-ffa450edef68"
ac8930324b1d2245a14b280573d5873fd0fe16ae,"Fix for my fix. ;) Now both CDATA sections and processing instruction
scanning works as expected.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319046 13f79535-47bb-0310-9956-ffa450edef68"
969540b2751614cd4bba2bdec4c3b0ccf5efe332,"Update comment.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319047 13f79535-47bb-0310-9956-ffa450edef68"
250dd66feb63e52a29a3d5daa7ef976720ae77c9,"change reference to the dom package to a reference to the sax package in the SAX samples documentation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319048 13f79535-47bb-0310-9956-ffa450edef68"
82a56a4475ca9c1dc5a96af43254fdb07d723166,"fix security exceptions that result when the parser is run in an applet environment


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319049 13f79535-47bb-0310-9956-ffa450edef68"
61bb06e3445e27859c00776fddc5cafac72ffb9b,"If the same entity reference used in the document more than once,
we should only build entity definition when we *see* an entity reference the first time
See non-deferred DOM implementation or Xerces1.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319050 13f79535-47bb-0310-9956-ffa450edef68"
fa5da931bf9f62874cab879b1b0afcff1c3ba529,"Value of attribute should take into consideration entity reference nodes (appended as children)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319051 13f79535-47bb-0310-9956-ffa450edef68"
6a8fe0c3dd6375a4dc555a271ba30d2e4b84682d,"some spelling/punctuation corrections; thanks to Steve Dulin


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319052 13f79535-47bb-0310-9956-ffa450edef68"
462e8414e20aa4b99a7eba99f3967b9bd0e44259,"Bug: it's an error if fractionDigits > base.totalDigits.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319053 13f79535-47bb-0310-9956-ffa450edef68"
4fe557201aa617a849837902cbc83678891ee21b,"Bug in substitution group handling.
All {derivation method}s and all {disallowed substitution}s should be considered.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319054 13f79535-47bb-0310-9956-ffa450edef68"
219a1d566c89d5180381ef9555c6c4f8b7107c6b,"Fixing an NPE: if the namespace list in a wildcard is empty, toString() shouldn't
try to access the namespace array, because it's null in such case.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319055 13f79535-47bb-0310-9956-ffa450edef68"
cc6667e5dad62ac58a92967ff3cdc8785680e1cf,"get rid of unnecessary instanceof checks


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319056 13f79535-47bb-0310-9956-ffa450edef68"
17bab0b2191e27957a2bbdc84b0e69b8d4241b4e,"When a particle is empty, the min/max effective ranges should both be 0.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319057 13f79535-47bb-0310-9956-ffa450edef68"
dba747cb571b18f20f06a3b27ee03dd34492691e,"1. Should combine the derivation methods (missed bit-or operation);
2. Need to deal with the special case of the base type of anySimpleType.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319058 13f79535-47bb-0310-9956-ffa450edef68"
2127b836368f718aeb03a1c2dea640f1ced41aa4,"if the file containing the replacement text for an external parameter entity contained a text decl, the parser would go into an infinite loop; fixed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319059 13f79535-47bb-0310-9956-ffa450edef68"
329b3017b7d7be84a65fea99c46449769958aa20,"replace a superfluous string concatenation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319060 13f79535-47bb-0310-9956-ffa450edef68"
c308b10ba31ea6cbaccd6a5f689ec6f92c0dd3ca,"Checking for DOM L1 nodes is done using localName instead of relying on colon.
Local namespace binder now carries all the prefixes that have been printed
out during namespace fixup of the current element.
Add resetting of namespaceBinder in XMLSerializer and other fixes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319061 13f79535-47bb-0310-9956-ffa450edef68"
d6aef1d1f4c3f62a67f6cf2cc73af9f5fb3bd880,"Remove reset() method, instead use reset present in XMLSerializer


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319062 13f79535-47bb-0310-9956-ffa450edef68"
30d162104e96d08294b7190ce2c0d72db6525253,"Checking for DOM L1 nodes is done using localName instead of relying on colon.
Local namespace binder now carries all the local declaration that has been modified/added
by the namespace algorithm.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319063 13f79535-47bb-0310-9956-ffa450edef68"
500ef06115899a02a7f2eb6f2e17fed834cb5c07,"Add tests (to check that serializer won't output multiple namespace declarations) and
modify the output accordingly. See bug:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=16612


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319064 13f79535-47bb-0310-9956-ffa450edef68"
9dd190d6830014d5dbc3548c37e966a3b4ff12c2,"We always attempt to find a prefix following the pattern ""NS"" +index (starting at 1).
Previously we kept global namespace counter to find an index..


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319065 13f79535-47bb-0310-9956-ffa450edef68"
1a5cb000afdc2924ede4864528c5eab7ca9de1f7,"XML 1.1 parsing would not work if the parser was being reused.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319066 13f79535-47bb-0310-9956-ffa450edef68"
f0d7d075599398bfee4bf02ee5692c0009d47c4c,"remove unnecessary data member


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319067 13f79535-47bb-0310-9956-ffa450edef68"
32706b447ac449bd96d173477fde3feb11feb2a4,"SAX 2.0 conformance bug.  When a null DTDHandler, ContentHandler, ErrorHandler or EntityResolver is registered with the XMLReader, SAX 2.0 clearly requires an NPE to be thrown.  While this is at variance with both SAX 1 and SAX 2.0.1, to conform to SAX 2.0 this behaviour is necessary.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319068 13f79535-47bb-0310-9956-ffa450edef68"
33a747ab7f84b82f6ba554ab86542a8e09f8d742,"Fixing a schema traversal: while deferring the traversal of local elements,
we need to check the minOccurs value to make sure ""emptiable particle""
works fine.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319069 13f79535-47bb-0310-9956-ffa450edef68"
4be20c189de91b072fbddb27b59073c1786bfe2f,"when the normalize() method is invoked on a DocumentFragment object, Text/CDATA nodes must be coalesced just as they are with Elements.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319070 13f79535-47bb-0310-9956-ffa450edef68"
b7505135f5a030b49c6d19954b34d5be20b234ac,"Erratum E1-27: a complex type with simple content *can* restrict another
complex type with mixed content and an emptiable particle.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319071 13f79535-47bb-0310-9956-ffa450edef68"
1f14684c786d6f330247faf2f063b294c08fb2b8,"Remove prohibited attributes *before* checking for valid restriction, otherwise
prohibited attributes will make the restriction invalid.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319072 13f79535-47bb-0310-9956-ffa450edef68"
e20c590aebae1f88ca257c0df60a170eea19a062,"Erratum E1-23: the definition of ""substitution group"" was changed so that
some element declarations (those blocked by either the head or one of the
type definitions) aren't in the substitution group anymore.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319073 13f79535-47bb-0310-9956-ffa450edef68"
dcc2875b2309dc83297cb1eed2b7adc29b5bd077,"Xerces failed to report a fatal error on invalid QName. Bug fix: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=15079.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319074 13f79535-47bb-0310-9956-ffa450edef68"
09a925b3391849068ece18dfb4b13e2f61c286fb,"Under some JDK's (notably both Sun and IBM 1.4.0), getClassLoader(), when invoked
on the JAXP or SAX classes, it returns null.  This means that
the fallback mechanism in these API's may not work correctly:  in
particular, when an attempt to invoke an unknown Parser/XMLReader
implementation is made in SAX, a NullPointerException rather than the correct
ClassNotFoundException results.  This patch fixes this problem,
by using Class.forName() in the event that the bootstrap
classloader is not returned in this particular situation.

Note that these API's and source *do not* correspond to a
tagged version in xml-commons; they should be replaced by files built from such a version
before the next Xerces release!


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319075 13f79535-47bb-0310-9956-ffa450edef68"
ed605a0e2acdd08488634e06e680fff08b5bf425,"Synchronizing startDocument calls with the (not-so-recent) XNI change.  Thanks to Steven Dulin for discovering this problem


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319076 13f79535-47bb-0310-9956-ffa450edef68"
6de98ee3ba00294b3144c762fda73906269ebc85,"removing API files made redundant now that the API jar (tools/xml-apis.jar) and source (tools/xml-apis--src.zip) are pulled from xml-commons


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319077 13f79535-47bb-0310-9956-ffa450edef68"
24a7a6cc4f2737533e538469b573e6e8c2b573b4,"Schema erratum E2-40:
NaN in float and double equals itself, and isn't comparable with any other value.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319078 13f79535-47bb-0310-9956-ffa450edef68"
631666259b839e5055ff6f1709652b3c68ed8394,"Schema erratum E2-40: float and double types are partially ordered.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319079 13f79535-47bb-0310-9956-ffa450edef68"
1ee7c601417d6d11fc93b633f102d057403b793e,"Schema erratum E2-36: length, minLength, maxLength facets have no effect
on QName and NOTATION derived types.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319080 13f79535-47bb-0310-9956-ffa450edef68"
8f0de0714f2e227bd42c15149c58578593eac090,"Fixing a schema traversal bug: for the following case
<complexType> <sequence> <element minOccurs=maxOccurs=0
according to the spec, the complex type has element-only content (though
it doesn't allow any element). We used to make it an empty content.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319081 13f79535-47bb-0310-9956-ffa450edef68"
76f93c827a6dc58fef3b6934138820dc896f63e9,"Fixing reference to the constants defined in the xni.NamespaceContext interfaces.
Patch submitter: Ville Skytt  (http://nagoya.apache.org/bugzilla/show_bug.cgi?id=12502)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319082 13f79535-47bb-0310-9956-ffa450edef68"
b11ff2f56508442c5447acd012798a544440364b,"Fixing ""datatype-normalization"" bug: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=16594


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319083 13f79535-47bb-0310-9956-ffa450edef68"
f98034ee1cb02850d5406b818f5656b30e8d32dc,"fix for bug 16840; thanks to Jorg Pietschmann


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319084 13f79535-47bb-0310-9956-ffa450edef68"
bc3c07be9aa592a9547069915310f1fdd781011a,"Fix related to the datatype-normalization[1]  bug -- default content.
[1] http://nagoya.apache.org/bugzilla/show_bug.cgi?id=16594


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319085 13f79535-47bb-0310-9956-ffa450edef68"
6f55d79f254025193e3b5cd54cdf5b5f9bd54c9a,"fix for bug 16674; thanks to Igor Malinin


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319086 13f79535-47bb-0310-9956-ffa450edef68"
cdfd152b781124cc60aefe0a6d252041572eb9d8,"release doc update


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319087 13f79535-47bb-0310-9956-ffa450edef68"
3574857d4a4ddaf8aabec99216c178a5a6089a19,"fixing bug 16714


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319088 13f79535-47bb-0310-9956-ffa450edef68"
91f00356525c73513f3aad61ee293e5597236c43,"fix to bug 16509; thanks to Igor Malinin


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319089 13f79535-47bb-0310-9956-ffa450edef68"
056c030deb8e37e7fb1ac8b19ab6105198ba78c7,"amendment to fix for bug 16509


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319090 13f79535-47bb-0310-9956-ffa450edef68"
2d75d4b32dcfc89e4ba3db26809e213fa8555bac,"additional fix for bug 16674; thanks again to Igor Malinin


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319091 13f79535-47bb-0310-9956-ffa450edef68"
01efdc8c267b6e214704d5ba705df3f90a6598b2,"If namespace feature is off, we should issue an error when validating
against XML Schema. Reorganizing IntegratedConfiguration configurePipeline() so that
the namespace aware scanner is only used in the case namespace feature is turned on.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319092 13f79535-47bb-0310-9956-ffa450edef68"
f905e13bf111fee815eabfc522f4dfc0949fb422,"Bug fix: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=17064
Patch submitter: Michael Glavassevich


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319093 13f79535-47bb-0310-9956-ffa450edef68"
a2465bb97ef83fee2791c5e024147f0ad0f77a4b,"Bug fix: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=17152
This might be a temporary solution, in the long run we should see if XML Schema
type information could be made serializable.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319094 13f79535-47bb-0310-9956-ffa450edef68"
674aade6f6193bd9fcd30ec592f6b4972c7ebe23,"Remove @deprecated flag -- since we have not provided any replacement interfaces
we should not have deprecated existing ones. Instead, just have a warning that those
interfaces might be updated or replaced.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319095 13f79535-47bb-0310-9956-ffa450edef68"
7c493074875858ae638765f1ef29e977363c08a9,"Add testing serialization while validating against XML Schemas


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319096 13f79535-47bb-0310-9956-ffa450edef68"
54e90933eca97963f8c47c3d95fc8f68207779b1,"use XML schema in the test for java serialization


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319097 13f79535-47bb-0310-9956-ffa450edef68"
708fed3649366e52e4549be5ace62531f055a65c,"Fixing bug 17286: NPE when toString is called on a model group with no particles.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319098 13f79535-47bb-0310-9956-ffa450edef68"
3117ff4fc8e3e2df0a343a562b6798ef1917819a,"Fixing bug 17020: didn't report error on some invalid date/time literals.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319099 13f79535-47bb-0310-9956-ffa450edef68"
a65338144a809a388a0a72f7c38cc3945c43292a,"A potential NPE: actual value in a value constraint might be null (if the value
constraint is invalid). Use stringValue() instead.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319100 13f79535-47bb-0310-9956-ffa450edef68"
7a85162efd8059a8642ba77edd125c678e26122c,"in anticipation to the DOM Level 3 Event spec support, we now call event
listeners in the order in which they were registered


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319101 13f79535-47bb-0310-9956-ffa450edef68"
962208caf48ca85844d266f763c2a2030c3423c2,"added output of getAttrChange() for DOMAttrModified events


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319102 13f79535-47bb-0310-9956-ffa450edef68"
e12b6dc4aaf423d84d094778a56085543830a167,"added a call to setAttribute()


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319103 13f79535-47bb-0310-9956-ffa450edef68"
a0e601375581791c7c089fc9ec280d4aca129d3e,"updated to the new Test and EventReporter


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319104 13f79535-47bb-0310-9956-ffa450edef68"
aea4f8a7e502dadf0cccce4c03237cb75d733a10,"Schema erratum E2-38: some character blocks are removed.
Many thanks to Khaled Noaman for the patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319105 13f79535-47bb-0310-9956-ffa450edef68"
4fce991226ad2a75c0fe7b7acfff3dd5e68b28a9,"Canonical for QName types: we use the rawname as the canonical for now.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319106 13f79535-47bb-0310-9956-ffa450edef68"
4c39dc89e0c7b62b85a0e2115058f9d05723c217,"1. E1-23 was updated. The head's block is considered when determine the
substitution group for an element declaration.
2. Fixing a bug in determining the substitution group.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319107 13f79535-47bb-0310-9956-ffa450edef68"
95bca9b893adccd216ba2adde906331f87431a45,"Fixing bug 17529: shouldn't be able to set totalDigits to 0.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319108 13f79535-47bb-0310-9956-ffa450edef68"
1c3a76d5aecca3c7aa5290e65f225b58273ba727,"Schema erratum E2-44: a clarification on totalDigits makes 0.1 to be valid for
a type with totalDigits=1.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319109 13f79535-47bb-0310-9956-ffa450edef68"
2cb72d219bfb616e4c33481291185124cf8abb1a,"when memory usage is enabled in this sample, the garbage collector should be explicitly run before the parse so that the statistics reflect the amount of memory the parse actually used, rather than that plus whatever was used by initial class loading etc.  The current code actually returns negative values for certain platforms; thanks to Steve Dulin for pointing this out.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319110 13f79535-47bb-0310-9956-ffa450edef68"
070c091ac4f33e9a55ed263ba6709e03af9413f2,"Fixing a bug in using the Schema Decl Pool.
When a grammar is preparsed, even if there is no grammar pool, we still can't
use a decl pool, because the application might store the grammar somewhere,
and the decl objects shouldn't be recycled by the decl pool.
Now the decl pool is only used when the schema loader is called by the schema
validator, and no grammar pool is set.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319111 13f79535-47bb-0310-9956-ffa450edef68"
61971fdf4859be5a1f4cb7b4bfdb3cb7d4260979,"remove some unnecessary imports


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319112 13f79535-47bb-0310-9956-ffa450edef68"
00d97b243f5838d0bb6d42afd8509dc12c264ad4,"Improve performance of XML11Configuration and make it the default one.
The XMLVersionDetector is now only responsible for parsing the XML decl and
reporting the version back to the configuration. The configuration job is to reset
a pipeline in the case the document is XML1.1 document. The XMLVersionDetector
is then called to reset the entity manager's scanner and start parsing of the document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319113 13f79535-47bb-0310-9956-ffa450edef68"
90e0434752ec5a07e3d421bcd3456cdb93e6aa45,"Fixing bug 17414: \pL isn't a valid schema pattern regex value.
Many thanks to Khaled Noaman for the patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319114 13f79535-47bb-0310-9956-ffa450edef68"
70b3c80f83b7fcd277b5905ccde6e49f5e6274bb,"fixing bug 15584.  Thanks to Michael Glavassevich for pointing out this bug in a SAX context; it was equally an XNI bug, however.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319115 13f79535-47bb-0310-9956-ffa450edef68"
04c6fe8ef049c678280f56960e272b2131ed26d9,"fixing bug 16706


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319116 13f79535-47bb-0310-9956-ffa450edef68"
e22d3821e8f44abd8565921d69c04fa5cfcd48f0,"Applying patch from Michael Glavassevich as well as fixing some import statements.
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=17385


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319117 13f79535-47bb-0310-9956-ffa450edef68"
bacf782985c9f23645580234a1d51f15d6fcba8c,"fix for bug 17330


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319118 13f79535-47bb-0310-9956-ffa450edef68"
92505ef4d38d73c869fc631899e956111877b4e4,"more complete fix for bug 16706; thanks to Navid Mehrigani for pointing out the previous fix did not handle all cases.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319119 13f79535-47bb-0310-9956-ffa450edef68"
be117926737653fad670082acc11c1b368f19154,"Implemented whatCanGoHere in the schema content models.
For now it's only used internally. If we ever want to expose such functionality,
we might want to revisit the method signature.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319120 13f79535-47bb-0310-9956-ffa450edef68"
250f5b6331a1015a9499c3e430deebbe88e54e37,"Improve some of the schema error messages, to make it easier to understand.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319121 13f79535-47bb-0310-9956-ffa450edef68"
2a4f777da2d0388320911fb3b3c76204d9bb6e5b,"Fixing bug 17412: ']' isn't a valid schema pattern regex value.
Many thanks to Khaled Noaman for the patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319122 13f79535-47bb-0310-9956-ffa450edef68"
8ebff4457b3e8042507f2410955b38a013bfc6aa,"Fixing bug 17885: sometimes the member type definition in PSVI is not null
when the type definition is not a simple type with union variety.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319123 13f79535-47bb-0310-9956-ffa450edef68"
ea31e19550280f9522ef26b02edc548384aed3fd,"Another bug was introduced when fixing 17885.
Can't reset the content of ValidatedInfo when validate is called, because
the normalizedValue will be used later.
So we should only clear the memberType field.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319124 13f79535-47bb-0310-9956-ffa450edef68"
4dd47aa7c820f4821e359e9b4bbd228652ae9810,"Fixing bug 18034. Need to check whether there is anything unexpected
between ""second"" and ""time zone"".


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319125 13f79535-47bb-0310-9956-ffa450edef68"
83686f6c9078bc37bdd28fb98e79f2bd45283ed8,"fixing docs bug 17325


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319126 13f79535-47bb-0310-9956-ffa450edef68"
ed42ddaba521e69454769bfd609e64d857f7a64e,"Fixing range bug: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=17590


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319127 13f79535-47bb-0310-9956-ffa450edef68"
ccf8b21f06411310dce75dc971bc7d4a7747afe3,"Modify range testing to include in automatic build ""test"" target


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319128 13f79535-47bb-0310-9956-ffa450edef68"
aeb574868b46071de42b4632426aa36502533b85,"add ranges testing


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319129 13f79535-47bb-0310-9956-ffa450edef68"
4dfbbd62a847de888c69ff33fff25233a0e6bbf1,"we were testing threads with DOM parser and no test were done on SAX one


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319130 13f79535-47bb-0310-9956-ffa450edef68"
4ab208754314534e77d20ed1772a5eeb96c597a2,"permit DOM 3 samples to be built under (sun) JDK 1.4


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319131 13f79535-47bb-0310-9956-ffa450edef68"
061b61f30a17020d63254e496439bca1eaa1cdc4,"Modified the Xerces DOM implementation according to the latest DOM L3 draft:
http://www.w3.org/TR/2003/WD-DOM-Level-3-Core-20030226/


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319132 13f79535-47bb-0310-9956-ffa450edef68"
45a220073c8cc52750a3b0afb0f4d9f9c6ec0f5c,"Modified the DOM L3 tests according to the latest DOM L3 draft:
http://www.w3.org/TR/2003/WD-DOM-Level-3-Core-20030226/


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319133 13f79535-47bb-0310-9956-ffa450edef68"
3b4899c52b587b24e35651f5aa34c55ee380acf1,"Modified the DOM L3 sample according to the latest DOM L3 draft:
http://www.w3.org/TR/2003/WD-DOM-Level-3-Core-20030226/


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319134 13f79535-47bb-0310-9956-ffa450edef68"
b7ce571bc8a13c42b863537dba434c8d2373e97d,"Updated the build to take into account latest changes:
http://www.w3.org/TR/2003/WD-DOM-Level-3-Core-20030226/


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319135 13f79535-47bb-0310-9956-ffa450edef68"
fc45ed6c33b6cae685880e805ea2a3fdf8cd7eb9,"Fix compilation under JDK 1.4 (compile against Xerces api.jar)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319136 13f79535-47bb-0310-9956-ffa450edef68"
267bc48cc8a36782cd3469e9fe5334fcb4f1cb8a,"update release-preparation instructions so that they mention xml-commons dependencies


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319137 13f79535-47bb-0310-9956-ffa450edef68"
4a39a72866252a24a6f13aca8f00350a63bfdadc,"Fixing bugs 16579, 16639,  and 16702:
some invalid test cases concerning <redefine> weren't detected.
Many thanks to Khaled Noaman for the patch.
Also removed some unused imports and local variables.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319138 13f79535-47bb-0310-9956-ffa450edef68"
2ac02c2c2df36b4d3ac166f80192630b02327cc6,"Fixed null pointer exception caused when no DTD handlers are
registered with the parser.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319139 13f79535-47bb-0310-9956-ffa450edef68"
5f6e47c3ac707e7e8f5df61c8e9fe51570a1d9af,"Fix compilation under jdk 1.4.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319143 13f79535-47bb-0310-9956-ffa450edef68"
3f9213013acadf51bee3392d24d63b94f47d6bb7,"Update DOM L3 Load and Save implementation according to the latest draft:
http://www.w3.org/TR/2003/WD-DOM-Level-3-LS-20030226/


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319144 13f79535-47bb-0310-9956-ffa450edef68"
bdb26bd50dff0e9caa0d128e12258217178b37bb,"Add a sample implementation of DOMBuilderFilter


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319145 13f79535-47bb-0310-9956-ffa450edef68"
da656c26486375f5b3dd9b11d313f035bcb6bb38,"update build to remove deleted dom l3 ls file from the jars-dom3 target


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319146 13f79535-47bb-0310-9956-ffa450edef68"
32263c840b7b31f8458162a9c164b6d5f939137b,"rename assert methods to allow running under JDK 1.4 without warnings


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319147 13f79535-47bb-0310-9956-ffa450edef68"
f0aff20ed32dfee5378e979541c64ff04889014e,"Given that AS module is not longer under development by the W3C mark
Xerces AS implementation and interfaces as deprecated


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319148 13f79535-47bb-0310-9956-ffa450edef68"
2d116920ea92fc681d9fb6d6372cf48519a194ce,"Given that AS module is not longer under development by the W3C mark
Xerces AS sample as deprecated


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319149 13f79535-47bb-0310-9956-ffa450edef68"
11ecf73153cfa1534e087d2e8bdaf43795df11a6,"Undeprecating setNamespace() in XMLSerializer :
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=16103


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319150 13f79535-47bb-0310-9956-ffa450edef68"
7a54a61a23c3f898d2e9de4ba22861712963f890,"Introducing 2 new methods on XMLResourceIdentifier, to get/set
the namespace information, which is useful when the resource is some kind
of namespace-aware grammar.
Also re-organizing some import statements for readability, and removing some
local variables that are never referenced.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319151 13f79535-47bb-0310-9956-ffa450edef68"
c5c6df08cf83094f8ae4d67f24fdaeaa5b6e7a37,"Updating the doc to reflect the addition of ""namespace"" to the
XMLResourceIdentifier interface.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319152 13f79535-47bb-0310-9956-ffa450edef68"
1bb518b07fbefda57f4dde7bbdac839bd99ceb44,"Updating the release document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319153 13f79535-47bb-0310-9956-ffa450edef68"
7a189f88a340c94c10f35b7e2231984df9511df5,"Remove ""xml11"" target since Xerces supports XML 1.1 by default.
Fix ""dtdjars"" and ""dvjar"" targets.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319154 13f79535-47bb-0310-9956-ffa450edef68"
e995fbb66d766443268c4d82b18f0c41c34f592c,"Issue warnings for unsupported features


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319155 13f79535-47bb-0310-9956-ffa450edef68"
b647fb5cade2ba02ca4a1cab0ce0b6f90b7cb649,"Applying patch from Michael Glavassevich
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=17381


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319156 13f79535-47bb-0310-9956-ffa450edef68"
17092beeda7f3501bbfdeecec192bb0a42cca473,"Applying patchesfrom Michael Glavassevich:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=17359
Also, made some renamed some FAQs to avoid truncation...


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319157 13f79535-47bb-0310-9956-ffa450edef68"
cbfbaa1c2aad90d6a476f0e14caad07eca4c9dfc,"Fixing spelling errors in the message property file.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319158 13f79535-47bb-0310-9956-ffa450edef68"
218c54d8d80c22fd4d9f45f8013e14eb23838699,"Fixing bugs 17417: Regex {min,max} with min > max not rejected.
Many thanks to Khaled Noaman for the patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319159 13f79535-47bb-0310-9956-ffa450edef68"
e4d524aa8bd58fd8a47d22e37ecb751cbf991e17,"Fixing bugs 16563: Parser accepts invalid regular expression.
Many thanks to Khaled Noaman for the patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319160 13f79535-47bb-0310-9956-ffa450edef68"
a2bdc54fa748a5b2e44d84469c4a0a2cfac0d0dc,"Fixing a bug for PSVI. Schema document locations weren't correctly reported.
Many thanks to Stef Epardaud for reporting the bug and the proposed patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319161 13f79535-47bb-0310-9956-ffa450edef68"
f6fbb6219a5d2f0cfd71f23812b4571049b5613b,"Fixing bugs 17415: Regexes with large min/max not handled correctly.
Many thanks to Khaled Noaman for the patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319162 13f79535-47bb-0310-9956-ffa450edef68"
719202c7e19708543100b434be13636bbc2d1053,"Change the default parser configuration to the one that supports XML 1.1.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319163 13f79535-47bb-0310-9956-ffa450edef68"
31166d04b32bde45570885863bc1aab6fe06c3fe,"added support for ordering disconnected nodes - needed for compareDocumentPosition


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319164 13f79535-47bb-0310-9956-ffa450edef68"
9c3b3b78761412feedceaa9f115296d083915fc6,"Make the schema limitation page in the docs up-to-date.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319165 13f79535-47bb-0310-9956-ffa450edef68"
23c34ae1bd1893bd68ac522f727aab5eaf177cdd,"Update dom3 and release docs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319166 13f79535-47bb-0310-9956-ffa450edef68"
7672f9f9feffd8e2fc0e4d25f71cae4b0dd35e24,"in preparation for a new release - change version of the parser


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319167 13f79535-47bb-0310-9956-ffa450edef68"
9ad208aaf6685bc69c6f74ffd1ea141269f4cca2,"Remove broken link


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319168 13f79535-47bb-0310-9956-ffa450edef68"
6a441b116737120bcc26f8a03ff53ed75c307702,"XNI change:  add getEncoding():  String to XMLLocator interface as per list discussion


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319169 13f79535-47bb-0310-9956-ffa450edef68"
0a817282188d5fdf6e10fe6c4ca58358e3fdc483,"implementation of XNI change (addition of getEncoding to XMLLocator)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319170 13f79535-47bb-0310-9956-ffa450edef68"
d4b05ea723ad495cfbc2fef8af59fbdf98f2a043,"document XNI change (addition of getEncoding to XMLLocator) and describe how to make use of it in a SAX context


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319171 13f79535-47bb-0310-9956-ffa450edef68"
eb82a0dfea76e1e56699682c211d58dfb9b185fc,"update sample xerces.properties to reflect new default configuration


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319172 13f79535-47bb-0310-9956-ffa450edef68"
ff65b093dd144e058813e2cc8b02ea0bda2ce780,"add manifest info after the manner of xml-commons.  Should fix bug 9345


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319173 13f79535-47bb-0310-9956-ffa450edef68"
f26892b2aa0b1cba2b80ad20fe383280100d452b,"Adding bugzilla documentation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319174 13f79535-47bb-0310-9956-ffa450edef68"
674e82c9bc962bfac9d3cd1535217335df30b061,"Taking changes out as per consensus on mailing list.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319175 13f79535-47bb-0310-9956-ffa450edef68"
22f18d5fd5df5d90853bcb5f7237711eaf3b2b29,"Update according to the latest in xml-commons (tag 'Xerces-J_2_4_0')


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319176 13f79535-47bb-0310-9956-ffa450edef68"
52e3394c2f04d90c5f64bc88cdf6efbb6d137550,"Add a new public key


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319177 13f79535-47bb-0310-9956-ffa450edef68"
d53c6bfef1b49b1c7c4ba360aa2b7290c7575ef4,"add tests for external-schema location. Submitter: Khaled Noaman


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319178 13f79535-47bb-0310-9956-ffa450edef68"
4f6014bf5b1800bd321cfe739652bef93aeb0c7e,"typo


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319179 13f79535-47bb-0310-9956-ffa450edef68"
69fd26e99040f78d34d4772825abfdc4f8c704ae,"Fix the EOFException in the case of parsing an empty file.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319180 13f79535-47bb-0310-9956-ffa450edef68"
a35990110870c174a5cc14622262cee3b7b7fc90,"fix thread safety problem


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319181 13f79535-47bb-0310-9956-ffa450edef68"
3b1c3bea565aaed8fecdf78af1906d876a04106a,"patch from Michael Glavassevich to fix a typo in docs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319183 13f79535-47bb-0310-9956-ffa450edef68"
d9741d06da79917c07cc9e0fe280b82dd440fe0e,"include manifest.xerces in the source distribution; if it is not present a build failure results.  Tanks to Neil Delima


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319184 13f79535-47bb-0310-9956-ffa450edef68"
fd4b34e58e8bdd6d566962cd0569952a4ad378fe,"Fixing a bug in dateTime comparison algorithem.
Sometimes 2 values aren't comparable if one has time zone and
the other one doesn't.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319185 13f79535-47bb-0310-9956-ffa450edef68"
7392bd92a4fbb068fb68a41a3d0b1412cdedfbf3,"Fixing bugs 18603: schema default value returned from attribute PSVI
wasn't correct.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319186 13f79535-47bb-0310-9956-ffa450edef68"
67d09fcc3cc88213e9b4245d927e6d5edea24093,"The first step towards improving the performance of the deferred DOM.
Instead of setting the value of each entry in the array, use the system
array copy method.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319187 13f79535-47bb-0310-9956-ffa450edef68"
7e9d0dcd865631d7dc5c5ea8a3e58cb68073a836,"Fix for bug 17294. Thanks to Venugopal for the patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319188 13f79535-47bb-0310-9956-ffa450edef68"
68f99c5a37cd78cc9e0daf32d331fa90fd8f4da5,"Changing the parameter order while calling and in error messages as suggested by Glenn. We should take care of it in future too so as the standard of "" all attribute
errors have the element name as the {0} parameter and the
attribute name as the {1} parameter and any *additional*
parameters occur after these. "" is maintained.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319189 13f79535-47bb-0310-9956-ffa450edef68"
c0f71ab261e6520d36cb86b45504ac09b0f7dfff,"Fixing bug [18677]: wrong error message.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319190 13f79535-47bb-0310-9956-ffa450edef68"
996accd04b1ad1bc693db284f058e2025cc39f02,"formerly, if the parser received an arbitrarily long sequence of ] in a CDATA section, an internal buffer in the document scanner would grow without bound.  Thanks to Michael Glavassevich, this is now fixed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319191 13f79535-47bb-0310-9956-ffa450edef68"
afa64b309fd4c707b3f6903fbd1f8ba152aee0ee,"make samples use same default configuration as the parser itself


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319192 13f79535-47bb-0310-9956-ffa450edef68"
dbf803b047fe2c334e5fe793f92ab34610193ffa,"fix to XML 1.1 attribute normalization.  Thanks to Michael Glavassevich


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319193 13f79535-47bb-0310-9956-ffa450edef68"
37bca108485dd3cb1bf3d9797a6cdb1338fc4aea,"Unicode characters 0x85 and 0x2028 are not part of the S production in XML 1.1.
Thanks to Michael Glavassevich for pointing this out.  Also,
Michael pointed out that the original code incorrectly
implemented the spec's normalization provisions with respect to 0x0d 0x85.
Thanks to Michael for providing a partial patch to fix this latter
problem.

Both these issues should be resolved by this change.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319194 13f79535-47bb-0310-9956-ffa450edef68"
d4a1bf869fdbdc56a6bc24ddd57967cde249ad39,"Running the xni.XMLGrammarBuilder  throws NPE in Integrated configuration since
the document handler is set to null but configuraition attempting to access it.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319196 13f79535-47bb-0310-9956-ffa450edef68"
7909c18870a194e9df93e423cef7b7be087b43a1,"Fix for bug 18937. Thanks Venu for the patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319197 13f79535-47bb-0310-9956-ffa450edef68"
7f22b0ecc09ab6f24f84ec1236d637f8d4778194,"Fixing a bug: should create new arrays for each type of component.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319200 13f79535-47bb-0310-9956-ffa450edef68"
2a31910c4f696b3ca117411fa7984f5a89b52018,"Given that differnt platforms have different default code pages, we need to specify code
page while attempting reading ASCII HTMLEntities.res file.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319203 13f79535-47bb-0310-9956-ffa450edef68"
54221eb233fe63d357029e7af4d64d667f3d799c,"fix the STDeclInvalid message so that a meaningful value is printed out instead of a placeholder.  Thanks to Neil Delima.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319204 13f79535-47bb-0310-9956-ffa450edef68"
bc55bdb0a4ae926034cd942f1bfe74f2f1103aff,"Sometimes we failed to read included/redefined documents, if they are provided
in the form of byte or character streams, by no system Id is specified in the
input source. Fixed now.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319205 13f79535-47bb-0310-9956-ffa450edef68"
facde1e3e12e4e8cd7378f1a20a8ed53b61379c1,"Some error message fixups.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319206 13f79535-47bb-0310-9956-ffa450edef68"
4ed0f8af6bef1ed7a9267e8651d600d4ec20fb9f,"Fix for bug 19107. Thanks to Venu for the patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319207 13f79535-47bb-0310-9956-ffa450edef68"
0ca9dc4099842f1e3685488e3b7a93bdda0337b7,"Fix for bug 19211. Thanks to Venugopal for the patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319208 13f79535-47bb-0310-9956-ffa450edef68"
02a532332054a46a9895daf0cf0767793979d417,"Removing unused imports in the dom package


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319209 13f79535-47bb-0310-9956-ffa450edef68"
672a0010a0790ffc4c81102ef5ea5a8544ae15a6,"reference correctly static fields


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319210 13f79535-47bb-0310-9956-ffa450edef68"
635e631a88882d4bb7ca02b7ddf931cfd7f112ec,"Access correctly static fields


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319211 13f79535-47bb-0310-9956-ffa450edef68"
761b09f35f298302518ffbc539d75a5c1487716a,"Access static method in a static way


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319212 13f79535-47bb-0310-9956-ffa450edef68"
0ef3062a04f2f00c6d903600ec7731601edd95f4,"Access static method/fields in a static way


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319213 13f79535-47bb-0310-9956-ffa450edef68"
10834ce3c9a20a3bd1bd1d83c75ce378554a5f78,"Removing unused import statements and accessing static method/fields in a static way


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319214 13f79535-47bb-0310-9956-ffa450edef68"
e8ce517d35e57758b4945598bb46179dfa806bcc,"Removing unused import statements.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319215 13f79535-47bb-0310-9956-ffa450edef68"
17ae255ae42024a3aea47e612949c433f12e9afe,"Fixing potential NPEs:
1. Sometimes a complex type has ""simple"" content, but its simple type is null;
2. Sometimes a complex type has a null base type (in error situation);
3. Sometimes an element has a null name (in error situation);
4. Sometimes an attribute has a null name (in error situation).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319216 13f79535-47bb-0310-9956-ffa450edef68"
67a5e5234231e168eabdc5cd569850a811a3165d,"Remove redundant imports


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319219 13f79535-47bb-0310-9956-ffa450edef68"
9258bafd4b84a62d37d848cb93a20fc2cbb01541,"The predefined entity quot should only be used in attribute values.
It should not be used in character data. Applying patch thanks to Ias (
iasandcb@apache-korea.org)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319220 13f79535-47bb-0310-9956-ffa450edef68"
c0d213a8e962eb687dc32a840740e93c38e95628,"Fixing one infinite loop after fatal error.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319221 13f79535-47bb-0310-9956-ffa450edef68"
477a1c00bbb646eb7f97aee12328f3d984a84edf,"Fix dom3 target


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319222 13f79535-47bb-0310-9956-ffa450edef68"
44c7938a9b505580488bcd9a0de57a7fca1c97f6,"For particle restriction checking, don't emit an error when the restriction is empty and the base is element-only with an emptiable particle


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319223 13f79535-47bb-0310-9956-ffa450edef68"
8512ab26facae1c686964b2f9c2a15f0c45b9e4c,"Fixing a bug: whitespace normalization didn't work properly for ""collapse"",
if the first chunk contains only whitespaces, and the second chunk starts
with a whitespace


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319224 13f79535-47bb-0310-9956-ffa450edef68"
eae092609b86b3f8b76d009686099039c1f6ae18,"remove *deprecated* for PSVI api


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319225 13f79535-47bb-0310-9956-ffa450edef68"
5f8a9d820a65f4d624a30be0772819e553a45b1b,"Fixing bug in textContent (it should not return null for element.getTextContent).
This fixes the following bug reported for normalizeDocument: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=20172


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319226 13f79535-47bb-0310-9956-ffa450edef68"
2b534cd204448cd6b5be500e1268478d7efb8d97,"Add tests to textContent


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319227 13f79535-47bb-0310-9956-ffa450edef68"
62146e091cf3cd7511d300bed02f8f160bcbecae,"Applying patch from Michael Glavassevich (Document.standalone):
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=20245


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319228 13f79535-47bb-0310-9956-ffa450edef68"
45845cc4c4609fa6243f28a32cfaee92bf32420a,"Fixing a typo in serializer, thanks to Michael Glavassevich:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=20248


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319229 13f79535-47bb-0310-9956-ffa450edef68"
a4d2168d2ab9bb83ee0cbe91e3443cd84517cb47,"The DOM schema-location property was not mapped correctly to the JAXP schemaSource
we should use array of Objects if more than one schema is specified.
See: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=19106


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319230 13f79535-47bb-0310-9956-ffa450edef68"
fa8eda9960e5bcf0dae9f851726e4e0e7a8a4b83,"Fix code for handling JAXP schema-source property. Given that target namespaces
are not specified, when we load schemas XSDDescriptions do not have a target
namespace set. Therefore, we should not attempt to find a schema in the local
cache first, because if a schema with no namespace was loaded first, findSchema
method will always find no namespace schema for any attemp to load more schemas.
This is realated to the following bug:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=19106


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319231 13f79535-47bb-0310-9956-ffa450edef68"
c64e6c5b000639d1ca737f901283ec5af1894c63,"Add tests for JAXP schemaSource property


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319232 13f79535-47bb-0310-9956-ffa450edef68"
66d596ac12326cc34e8c838f911136cac02a9abe,"Run test for JAXP schemaSource property


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319233 13f79535-47bb-0310-9956-ffa450edef68"
0f4d50691b68371e88d9a5812d98562f0e14b409,"Committing the patch for bug 17294. Lot of thanks to Venu for providing patches to long pending issue.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319234 13f79535-47bb-0310-9956-ffa450edef68"
7b7d8ca313150b459d0008e7d81fffb53d5ad012,"Fixing bug: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=18374


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319235 13f79535-47bb-0310-9956-ffa450edef68"
5591d70b129d54a0280b73ce6dce7e9808848127,"PR:
Obtained from:
Submitted by:Venugopal	k.venugopal@sun.com
Reviewed by:Neeraj
Adding new Test case for testing JAXP 1.2 specification constraints as submitted by Venugopal. Many thanks to Venu for this contribution.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319236 13f79535-47bb-0310-9956-ffa450edef68"
e1ef650aac90ca15aa1bb6d42c6eab944b6f5d91,"PR:
Obtained from:
Submitted by: Venugopal k.venugopal@sun.com
Reviewed by:Neeraj
Adding new Test case for testing JAXP 1.2 specification constraints as submitted by Venugopal. Many thanks to Venu for this contribution.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319237 13f79535-47bb-0310-9956-ffa450edef68"
084a847818fe9c28bb29e4da3f1f2d69173c6a87,"PR:
Obtained from:
Submitted by:
Reviewed by:
Adding Apache copyright license.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319238 13f79535-47bb-0310-9956-ffa450edef68"
6a84aba2fd0fa452efbd3f74877d9595d420d482,"Applying patches from Venu (k.venugopal@sun.com) for bugs 20429 and 20431


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319239 13f79535-47bb-0310-9956-ffa450edef68"
2ae848000339e78103c9c02f2ce9e89ae657a6fd,"add a scanNCName function which may be used to scan names which are known must be NCNames


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319240 13f79535-47bb-0310-9956-ffa450edef68"
8a67cf054e05dd29e2125eb2dff1cf77a30ddc6b,"fix non-conformance to namespaces (1.0 and 1.1) with respect to ENTITY/NOTATION/PI names


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319241 13f79535-47bb-0310-9956-ffa450edef68"
c0c9dd0c7fa1c408b84e9f3e03a2cf1c6798e493,"in order to be namespace-valid, attributes of type ID/IDREF/IDREFS must be NCNames.  Thus, ValidationContext must be able to describe whether namespace processing is enabled.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319242 13f79535-47bb-0310-9956-ffa450edef68"
14ebac9252be19d7fc89ace81e47cc8b9fff0fae,"when namespaces are enabled, we will now honour the namespace-validity constraint that states that attributes of type ID/IDREF/IDREFS must be NCNames


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319243 13f79535-47bb-0310-9956-ffa450edef68"
e8b504751142b3ddb89961bc3aa29abc55282fe3,"updating error messages


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319244 13f79535-47bb-0310-9956-ffa450edef68"
fe819f6b51cf705d3145d6377cfe145359bd3838,"fix entity-reading bug created by previous commit


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319246 13f79535-47bb-0310-9956-ffa450edef68"
8eddf8658a4037adbc5f580f1e045a2d978fde56,"Fixing setParameter/canSetParameter: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=20636


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319247 13f79535-47bb-0310-9956-ffa450edef68"
a50aae62c22943820d85843add114d4b555217c7,"Fix a small bug in the latest commit


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319248 13f79535-47bb-0310-9956-ffa450edef68"
7744fa754861eaf1a05b2ac330cfabb0fa8eb1bd,"Add constants for new DOM L3 features


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319249 13f79535-47bb-0310-9956-ffa450edef68"
25d21955b980bcada10370df0ee55593ae6926b7,"Remove dom3 interfaces before update to the Last Call version


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319250 13f79535-47bb-0310-9956-ffa450edef68"
fa5a38704de234cca45086bdf104b3e340a0823d,"Update to the DOM level 3 Last Call version


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319251 13f79535-47bb-0310-9956-ffa450edef68"
1a6b251cd650ab4c676db23dce67aaccff8828d5,"Sink up with the DOM Level 3 Core Last Call interfaces. Also add a hook to support
XPath DOM API if Xalan implementation can be found in the classpath.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319252 13f79535-47bb-0310-9956-ffa450edef68"
e8443a7069cda3eba582df03e072ebce126c2eb5,"Remove duplicate interfaces for DOM L3 support


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319253 13f79535-47bb-0310-9956-ffa450edef68"
103b0ca573ee2e804169491d1e36b9934c10a8e3,"Remove class that no longer exists


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319254 13f79535-47bb-0310-9956-ffa450edef68"
4181dfd440e395c8fe16ef52ee388ce387bde444,"Update according to the latest DOM L3 draft


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319255 13f79535-47bb-0310-9956-ffa450edef68"
ed59d96c3058f4a825d4b1a8363f4deb0f1f5733,"fix for bug #9102.  This assumes that, in JDK 1.4, ISO8859_15 is an alias for ISO8859_15_FDIS.  This seems like a safe assumption, so this should fix the problem in 1.3.x and have no ramifications for 1.4.x users


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319256 13f79535-47bb-0310-9956-ffa450edef68"
e92b187dc7322838ed241bf6f3a94dac32ffcd43,"now that we have used a DTM for schema-document parsing for a long time, there is no longer a need to maintain the old DOM-based code.  Removing it, along with the references to it in XSDHandler.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319257 13f79535-47bb-0310-9956-ffa450edef68"
fab1289c84c949e94100765c414a5040a3cd8b12,"Updating copyright to '1999-2003', and simultaneously checking that I can 'cvs commit'.

Bugzilla #20790: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=20790.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319258 13f79535-47bb-0310-9956-ffa450edef68"
249e358005dd0f6d5442d190c2ae3bec01afb639,"E2-41 and E2-45: allowing 24:00:00.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319259 13f79535-47bb-0310-9956-ffa450edef68"
ac8977e43d784987e1b499678aa5c72b3fbb070b,"XML Schema support: Balance the syntax tree to improve the reliability
and performance of the parser.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319260 13f79535-47bb-0310-9956-ffa450edef68"
68c36ca7fd3ce41ec15c7d49728f16e9ec79df89,"StackOverflowException isn't likely to be thrown anymore.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319261 13f79535-47bb-0310-9956-ffa450edef68"
82dfc1a0cf4d33af39301ce59c5c90c6a07e0676,"A performance improvement for UTF8 scanning.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319262 13f79535-47bb-0310-9956-ffa450edef68"
a72c9be288047aa1434b5400f7a267b2e632c204,"Based on Glenn's suggestion, fixing a bug which allowed invalid ASCII bytes to slip through the reader.

Bugzilla #15538: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=15538


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319263 13f79535-47bb-0310-9956-ffa450edef68"
3480794c86221520db5bf2797c68ac8a3a281bd3,"Improved language of InvalidASCII error message.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319264 13f79535-47bb-0310-9956-ffa450edef68"
3a2854003dd6d558735de9eba2c05a999aea7125,"change order of constant declarations to match comments


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319265 13f79535-47bb-0310-9956-ffa450edef68"
75315f10dc03da1abeff9a7bb4077c017540929f,"first step towards support for exposing XML Schema annotation components.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319266 13f79535-47bb-0310-9956-ffa450edef68"
5537ef44ad47149b50468a546834e47d2a177cb3,"Fix 2 related bugs:

(1)  The contents of <include> and <import> elements were not inspected;
(2) attributes of <schema> and <redefine> elements were not
passed to the annotation traverser.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319267 13f79535-47bb-0310-9956-ffa450edef68"
ffe5345aee0fa0713a524c94f59093e6fa5a1aa8,"pass non-schema attributes of complexType children to the annotation traverser


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319268 13f79535-47bb-0310-9956-ffa450edef68"
841a543458d7b19286dbcc32207d8978ccf195f5,"Fixing 2 bugs:
1) Bugzilla# 18429, NPE thrown validating NMTOKEN. Thanks to Neil Delima for the patch.
2) S production is unchanged in XML 1.1, so shouldn't override isSpace()


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319269 13f79535-47bb-0310-9956-ffa450edef68"
d6e418eec78c8b253b3f353be05259d353faa58a,"Fixing a bug introduced by a previous commit when trying to balance the
syntax tree.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319270 13f79535-47bb-0310-9956-ffa450edef68"
08452497d5ddc107ce0c88dafa4af418a8162487,"Committing the patches proposed by Peter McCracken.
These patches provide more useful information for schema errors.
Thx for the good work, Peter!


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319271 13f79535-47bb-0310-9956-ffa450edef68"
8c70948b54894cda3aba3a0e7dc6a42a7460e1d1,"Schema erratum E2-13: it's an error for fraction digits in the derived type to be
greater than that in the base type.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319272 13f79535-47bb-0310-9956-ffa450edef68"
dc5b2f932fe9eec671184c931a772694e78b6b2b,"update to use new error schema for schema error message


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319273 13f79535-47bb-0310-9956-ffa450edef68"
a8584d3312a5833c8fbe6b4ef13e4d8e103a0f67,"just as complexType definitions can possess multiple annotations, so can simpleType definitions.  It appears that there is a bug in the schema specs that only gives one annotation component to simpleTypes.  Fixing this problem in our schema component API as a prelude to full annotation support


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319274 13f79535-47bb-0310-9956-ffa450edef68"
f42be5538c820e79ae4b39bbfdcd209caa0ef385,"ensure that annotations are passed to all components that may possess them.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319275 13f79535-47bb-0310-9956-ffa450edef68"
42ca322ea8ac4be5de3f277f111700384c06f8d7,"as part of annotation support, enabling schema datatype factories to create XSSimpleType implementations containing lists of annotations


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319276 13f79535-47bb-0310-9956-ffa450edef68"
4a57b692a32c721fd1a6e6e432588b9c9e7fbe04,"add annotation support to simple types


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319277 13f79535-47bb-0310-9956-ffa450edef68"
d9038f9f5327b1c00296e44a5cdeea33ad90fee8,"add a method to reset an XSObjectList implementation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319278 13f79535-47bb-0310-9956-ffa450edef68"
b80a7e7251ee7e56581ccc03b86133ee287f7081,"Change to PSVI API -- adding a way to retrieve facets as objects, to allow users access to annotations


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319279 13f79535-47bb-0310-9956-ffa450edef68"
092c5a3032ad4dbceeb55bfc566382dfc81bebeb,"The preliminary implementation of XInclude submitted by Peter McCracken.
It supports most normal functions: regular includes, text includes,
fallbacks, namespace fix-up, etc, and it should be okay for regular use.

The main functionality that is currently missing:
- XPointer support.
- Fix-up of unparsed entities and notations.
- Encoding of included documents when parse=""text"".


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319281 13f79535-47bb-0310-9956-ffa450edef68"
860cadc84031be46fea295f9038e531d5eecf2ed,"Preliminary support for XInclude submitted by Peter McCracken. It supports: regular/text includes, fallbacks, namespace fix-up, etc...


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319282 13f79535-47bb-0310-9956-ffa450edef68"
2a38eb580618b794d058f6182d3e5f425515505a,"Fixing bug 21038: when an identity constraint field is invalid,
sometimes we add the same IDValue to the hashtable again and again,
leading the parser into infinite loop.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319283 13f79535-47bb-0310-9956-ffa450edef68"
f12ae964944eb2e0b261e1db06cd56ab025064d4,"rename recently-introduced method to more appropriately reflect what it does


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319284 13f79535-47bb-0310-9956-ffa450edef68"
06d60a448bb0e8b89e66276c071e277c90faa0a6,"add representations of annotations as Text-node children to the first child of an annotation element.  The complete annotation is stored as a string, with all in-scope namespaces from ancestor elements.  This allows for minimal schema-correctness checking in the schema-parsing code, while giving the annotation implementation full access to a representation of what was included in the schema


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319285 13f79535-47bb-0310-9956-ffa450edef68"
7050c3b44dd57567a60f1f4f213e422308405361,"change visibility of data member to make annotation implementation easier


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319286 13f79535-47bb-0310-9956-ffa450edef68"
8d1ad1743ef3d30b413d1c54175af34398b926f0,"as part of the annotation implementation, need to pass SymbolTable to the SchemaGrammar constructor; also, need to allow for GrammarBucket queries


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319287 13f79535-47bb-0310-9956-ffa450edef68"
1147949fede952a00bb5f1dc2132536f19209f61,"expose annotations in the PSVI.  Now the XSAnnotation implementation is complete (though probably not yet bug-free)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319288 13f79535-47bb-0310-9956-ffa450edef68"
9dd86cacc29291b0bc89b7a7d3175b436a58bc5f,"remove some debugging code


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319289 13f79535-47bb-0310-9956-ffa450edef68"
5183ecb6f7c329bdc907df71f211d71a3ded84a2,"Remove extra semicolon to fix GUMP failure.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319290 13f79535-47bb-0310-9956-ffa450edef68"
d1fd0668a071ddcf44c6bdf1b50030bab12d18ee,"Fixing bug in HTML DOM (http://nagoya.apache.org/bugzilla/show_bug.cgi?id=18744). Deletion of rows other than row 0 were failing siliently.

Thanks to Brett Sutton for the fix.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319291 13f79535-47bb-0310-9956-ffa450edef68"
30a0bfa099f1e2ec305841a59f6ff27be6ece619,"as made clear by Xalan bug #21300, we should recognize the KS_C_5601-1987 encoding.  This is now fixed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319292 13f79535-47bb-0310-9956-ffa450edef68"
294d2838f5226fbaafaca27838733dd90507c99f,"Fixing #18597, AIOOBE thrown for invalid char refs of the form &#; &#x; &#2147483648 (and every other 'codepoint' > 2^31-1).

(http://nagoya.apache.org/bugzilla/show_bug.cgi?id=18597)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319293 13f79535-47bb-0310-9956-ffa450edef68"
8621ebda73f956c9f4b0613aa1509237d189665a,"Fixed 16566, 18320, 18344, 18345, 18776, 18780, 18782, 18785 (partial).

We're much closer to meeting RFC 2396, though a few other fixes remain.
Support for IPv6 was the largest change.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319294 13f79535-47bb-0310-9956-ffa450edef68"
b47a66d57ac3f898f5225cf79a31f1c04e9b023b,"Fixing ""illegal unicode escape"" error so that it compiles with JDK 1.4.2.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319295 13f79535-47bb-0310-9956-ffa450edef68"
4dbea23661885bf9b3bf4ac91240150518856c76,"Added a necessary constraint not expressed by the BNF.
IPv4 addresses are 32-bit. Each segment contains 8-bits of information, and thus each one cannot be greater than 255.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319298 13f79535-47bb-0310-9956-ffa450edef68"
74a9afc8742aeb8b38e5cc4bd4f619105ec34272,"Added a necessary constraint not expressed by the BNF.
RFC 2396 states that hostnames take the form described in RFC 1034 and RFC 1123. According to RFC 1034, hostnames are limited to 255 chars.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319299 13f79535-47bb-0310-9956-ffa450edef68"
d3457eaeb8f313873532c8e6323e9e4b0c3d9ed4,"Recognize ISO-8859-13 (Java supports this encoding), and Latin-9, a registered alias of ISO-8859-15.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319300 13f79535-47bb-0310-9956-ffa450edef68"
5cd5db64802dff9e3906ba6b0a2cd986dbadb59b,"Added ISO-8859-13 & ISO-8859-15 to list of supported encodings.
Improved the language in one of the FAQs.
Replaced mention of xmlParserAPIs.jar with xml-apis.jar since the former is deprecated.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319301 13f79535-47bb-0310-9956-ffa450edef68"
6ea37a69840a11d6674f5dbb3cf47c16ebde6762,"Replaced instances of xmlParserAPIs.jar with xml-apis.jar.
Documented the deprecation of xmlParserAPIs.jar.
Capitalized each occurence of Xerces, Xalan, and Ant.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319302 13f79535-47bb-0310-9956-ffa450edef68"
9b3fac190bd2c9ecf5344da76bb128b40d0baeac,"Use English locale when converting to upper case, otherwise we might not get the behaviour we expect.
In the Turkish locale, letter i (#x69) maps to I with a dot above (#x130).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319303 13f79535-47bb-0310-9956-ffa450edef68"
f31aac620d0db94ab60f34beda96fc4c278d73ae,"XInclude implementation update:
* Couple of bugs fixes, copyright date updates (Peter McCracken)
* XIncludeHandler is now using EntityResover and structure of text inclusions has changed. (Peter McCracken)
* Implementation for determining the encoding of  included documents
when  parse=""text"". Encoding is determined  as per  section 4.3 of XInclude
spec (Arun Yadav)
* Support for unparsed entities and notations (Peter McCracken)
* Introduce a new features ""allow-dtd-events-after-endDTD"" that controls sending unparsed entity declaration and notation declaration
events outside of start/end DTD events. (Peter McCracken)

There is still no support for XPointer fragments.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319304 13f79535-47bb-0310-9956-ffa450edef68"
da200a5bddc2b18e73e477041cb50a4a6ef968c2,"More fixes to the URI implementation.
Using the definition of IPv6 addresses from section 2.2 of RFC 2373, since the BNF in Appendix B is incorrect.
Labels in hostnames must be <= 63 chars.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319305 13f79535-47bb-0310-9956-ffa450edef68"
896f4f41a8ae6365c6018e6a4483398f1673e601,"Build Javadocs for XInclude implementation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319306 13f79535-47bb-0310-9956-ffa450edef68"
b09947c37fde4f9f039c7e7db77553b7f251495a,"Fixing dom-jar3 target.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319308 13f79535-47bb-0310-9956-ffa450edef68"
a5d2ca24465a95b88eb4233b55ece284e64c5722,"Provide a way in the implementation to construct an XSModel that
corresponds to all the schema grammars in the grammar pool implementation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319309 13f79535-47bb-0310-9956-ffa450edef68"
a23577d97680e0446c860d52dda4f07ad9ca8ce5,"Making changes to recognize DOM L3 wellformed-ness feature.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319310 13f79535-47bb-0310-9956-ffa450edef68"
1b20fdfd0e92e36d5d66b17da8c7cbeb6e59c899,"Store and expose annotation for simpleTypes and facets. Add a new interface to
represent enumeration and pattern facets.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319311 13f79535-47bb-0310-9956-ffa450edef68"
7444273e5e7beb92dbb82122edbe78fad430cdad,"Add a new facet to store enumeration and patterns


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319312 13f79535-47bb-0310-9956-ffa450edef68"
4ba026d16a8b5b8b33647bee3dad3e5843997626,"Well-formed feature could be both true or false. For ex. currently DOMWriter/DOMSerializer
doesn't check for well-formedness when serializing and sets the value of this feature to false.
Still need to make changes in  DOMBuilderImpl.java for ""well-formed"". Will work on it tomorrow.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319313 13f79535-47bb-0310-9956-ffa450edef68"
9b3fb44e959b5aed1c6adbe3ea4d942be4760b31,"Fix a small bug in exposing pattern annotation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319314 13f79535-47bb-0310-9956-ffa450edef68"
5202b9bcc0617f44750c623f52d320537bc21461,"inherit annotations for pattern facet from the base type


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319315 13f79535-47bb-0310-9956-ffa450edef68"
dd3374a88c3eea8fc2aa494d991808d2f49b5383,"inherit annotations for pattern facet from the base type


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319316 13f79535-47bb-0310-9956-ffa450edef68"
06cfee408427bbe7e51ac8807f1737a02f0ac23e,"fixes for various small bugs (potential NPEs, problems in certain situations with well-formedness of annotation strings) in our PSVI/schema component model support.  Patches by Peter McCracken.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319317 13f79535-47bb-0310-9956-ffa450edef68"
109adfc06bd18c9bb9c351f8a0d5cc9567483388,"updates to PSVIWriter by Peter McCracken.  Now it outputs the entirety ot the PSVI as well as exercising our entire schema component model API.  It also outputs to a stream of XNI events rather than to a hardcoded XML file.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319318 13f79535-47bb-0310-9956-ffa450edef68"
7c0e999494ec205b6c158b516474fc5646877dd3,"documentation update to reflect the change in PSVIWriter from outputing to a hardcoded XML file to a stream of XNI events; thanks to Peter McCracken


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319319 13f79535-47bb-0310-9956-ffa450edef68"
41ff257df291e5ec4852fa88951d22b9093c2f3d,"Upgrade to SAX 2.0.1 (sax2r2)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319320 13f79535-47bb-0310-9956-ffa450edef68"
6cfd8cf055c26cedd2dae2f9e19086ef9435f689,"Fix endless loop after continue-after-fatal-error is set to true: bug #18271.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319321 13f79535-47bb-0310-9956-ffa450edef68"
ffa944be9e3dc28ea8c3ca5d88b3a3b9bf49352a,"Fix a problem when searching for the port boundary.
Do not accept any index before the beginning of the host.

Made some Javadoc corrections as well.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319322 13f79535-47bb-0310-9956-ffa450edef68"
250758cd1a0bb89989777edc742bf21a7e40e7fd,"DOMBuilder always checks for well-formedness. Doing appropriate changes so that default parameter value is 'true' and setting to 'false' is not allowed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319323 13f79535-47bb-0310-9956-ffa450edef68"
7f75e0afa7d99e809ba83556298961c1b65f239b,"PR:
Obtained from:
Submitted by:
Reviewed by:
Setting the default value to 'false'. We only support the 'true' value in DOMBuilder
which is taken care in DOMBuilderImpl.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319324 13f79535-47bb-0310-9956-ffa450edef68"
2c3c54c0011dbb81897f1f1484b2a1da2d9bce5a,"fix for bug 18789; thanks to Neil Delima for the patch


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319325 13f79535-47bb-0310-9956-ffa450edef68"
e7930233e76acff55263155b5732ece35e71f803,"the fix to bug 18789 exposed another bug in the XML 1.1 implementation:  For comments and processing instructions, we permittted control characters to be present, unescaped. This commit should resolve that bug.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319326 13f79535-47bb-0310-9956-ffa450edef68"
185dda37524d4cc68cf0f091586f6b9a0ea4c982,"fix for bug 20892; thanks to Peter McCracken for the report and the fix.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319327 13f79535-47bb-0310-9956-ffa450edef68"
e7911237f54ef3a9b96d3d31235ae646aa79f1a1,"Fix reset problem: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=18272


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319328 13f79535-47bb-0310-9956-ffa450edef68"
ab02b893ff68a9d2689d2385b9e371306729e513,"Fixing reset problem -- after XML 1.1. was parsed sometimes we did not reset property
dtd scanner and processor.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319329 13f79535-47bb-0310-9956-ffa450edef68"
f7946fc841ed927ce7f130ea97bce5af33664e11,"An additional error message is needed for unsupported versions of XML.
The  XML 1.1 scanners were incorrectly reporting that only 1.0 is supported.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319330 13f79535-47bb-0310-9956-ffa450edef68"
90191a5d2dbe50eab8ee37e3a1602041903bde72,"Added a VersionNotSupported message key for  XML 1.1.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319331 13f79535-47bb-0310-9956-ffa450edef68"
6d6af344fe97d8782c32d2641c57d716c40fda7e,"Fixing a possible NPE exception in the case QName is invalid.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319332 13f79535-47bb-0310-9956-ffa450edef68"
2c48bc35f3115542810cf880126ab8492d6ddfd5,"Added missing Apache license.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319333 13f79535-47bb-0310-9956-ffa450edef68"
65abf614ad4023bfada23615e1b5c32e1712cbfe,"fixing some minor bugs in the PSVIWriter; thanks to Peter McCracken for the patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319334 13f79535-47bb-0310-9956-ffa450edef68"
f4e78cd4ecfea0caf3c3490d3afa81cd1e698efb,"Fixing some bugs in XInclude implementation.
Submitter: Peter McCracken


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319335 13f79535-47bb-0310-9956-ffa450edef68"
215d99d9bb87c9fa33af46ec7c242b539d274801,"Commit the tests for XInclude implementation.
Submitter: Peter McCracken


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319336 13f79535-47bb-0310-9956-ffa450edef68"
b41fdaf2a13565872c6ba474926ec137de070487,"Automate tests for XInclude.
Submitter: Peter McCracken


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319337 13f79535-47bb-0310-9956-ffa450edef68"
70fb5bec0c38b3a501d1b0b0060a945f5f226370,"update the release doc


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319338 13f79535-47bb-0310-9956-ffa450edef68"
68f168043c64d1c3812b5d987a0e1c7acc5777c8,"Performance patch by Thomas DeWeese from Apache Batik:
the patch makes XMLStringBuffer use array doubling instead of a fixed 32 char increment.
For one of Batik test files with a 500Kb embedded image, this patch reduces
parse time from ~4.5min to .8 sec (n*log(n) is much better than n^2).
This is not even a particularly extreme case for SVG.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319339 13f79535-47bb-0310-9956-ffa450edef68"
35ef0dad7d51c088e9f5dc38509248b7da2064b7,"Updating the release document, and fixing some typos.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319340 13f79535-47bb-0310-9956-ffa450edef68"
91575a9a340a5334500008f71f63b1044ef55224,"Patch from Neil Delima: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=18678
Reviewed by Peter McCracken.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319341 13f79535-47bb-0310-9956-ffa450edef68"
4fd18e26bb072b80348cbdd1c8fb8baa1889c1f9,"Patch from Neil Delima: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=18676
Reviewed by Peter McCracken.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319342 13f79535-47bb-0310-9956-ffa450edef68"
8f8aa2e551a1070e203e9660ee7e6a0e2c2dcaec,"Document updates for the new release


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319343 13f79535-47bb-0310-9956-ffa450edef68"
9bda70e5d1a3de0d4f68e6b0ca4e6f8790269c9e,"Applying patches to upgrade to latest DOM L3 LS draft. Thanks Gopal.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319344 13f79535-47bb-0310-9956-ffa450edef68"
77073168642ba7d3682ceeeb25c3b3b589f3f96c,"Applying patches to upgrade to latest DOM L3 LS draft. Thanks Gopal.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319345 13f79535-47bb-0310-9956-ffa450edef68"
c77db9d933541cd0d253bb1257387b40cde845a2,"Applying patches to upgrade to latest DOM L3 LS draft. Thanks Gopal.
  DOMBuilderImpl.java is changed to DOMParserImpl.java
  DOMWriterImpl.java is changed to DOMSerializerImpl.java


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319346 13f79535-47bb-0310-9956-ffa450edef68"
9506fc092709ce61d2930d0ea2750343914e27c8,"PR:
Obtained from:
Submitted by:
Reviewed by:
Correctin build failures. Now the build compiles sucessfully.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319347 13f79535-47bb-0310-9956-ffa450edef68"
79c6beb9d1a7f43bcd093667ae81f56a7c1a58fc,"Additional docs for Xinclude FAQ.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319348 13f79535-47bb-0310-9956-ffa450edef68"
dd491607c6a52722601ab5c72f313156d63e9373,"Apply patch by Peter McCracken: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=21966


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319349 13f79535-47bb-0310-9956-ffa450edef68"
8cce80b73e10bfa8c99b0efb19440860a2e72f24,"Remove reduntant methods (no longer supported by DOM L3 LS) as well as fix
implementation of write* methods to use reflection API to allow to compile this
code with the DOM L2 implementation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319350 13f79535-47bb-0310-9956-ffa450edef68"
1ff852ed56af69e64af2971c50912326a343f490,"Reverse the upgrade to SAX 2.0.1 which caused some TCK failures. Plan to upgrade
to SAX 2.0.1 in the next release


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319351 13f79535-47bb-0310-9956-ffa450edef68"
4823fe55698770f62d009153744f644f06b47de1,"fixing several small bugs in the PSVIWriter, found and fixed by Peter McCracken.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319352 13f79535-47bb-0310-9956-ffa450edef68"
cbf7e95f93f0d1831a4c53b61c6c0f475f4cb54b,"According to the latest spec, version can never be null


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319353 13f79535-47bb-0310-9956-ffa450edef68"
fbacc46da7d2125c4bdd01015b8b9c71650771f7,"Add UID (serialver): http://nagoya.apache.org/bugzilla/show_bug.cgi?id=17815


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319354 13f79535-47bb-0310-9956-ffa450edef68"
e46955ebc6bc4fdb9e81568cc160ee597085e43a,"Preparation for the new Xerces release


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319355 13f79535-47bb-0310-9956-ffa450edef68"
f1fd1ae8762e56e94a024a02cd640058065e80c7,"Preparation for the new Xerces release: update docs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319356 13f79535-47bb-0310-9956-ffa450edef68"
0839312fc73f61121a0cabe7ed0f7f9e63957a09,"The latest change has broken dtdjars target. Reversing it to fix dtdjars.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319357 13f79535-47bb-0310-9956-ffa450edef68"
e0b32461bc5ef3e3c373f839495de70d0ce87bd5,"Adding ability to convert all grammars in the XMLGrammarPool to XSModel.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319358 13f79535-47bb-0310-9956-ffa450edef68"
b80ce51b759aeadd3d309902279b337a108a62c4,"Fixing dtdjars and dvjar targets


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319359 13f79535-47bb-0310-9956-ffa450edef68"
ba26fd20788b1d7bbeac72ce5ddb650b966f5d20,"We don't have tinyjars target anymore


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319360 13f79535-47bb-0310-9956-ffa450edef68"
dd6f593350134f2ca94cc723f1883e0fa19eb5c1,"For dtdjars need to extract sources for the API before compiling


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319361 13f79535-47bb-0310-9956-ffa450edef68"
1db601908e5ce05fc069bfa8f0d4932692c3fa31,"We meet all the requirements of setting 'infoset' value to true when loading the DOM.
So, Changing the default value of 'infoset' feature to true.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319365 13f79535-47bb-0310-9956-ffa450edef68"
b7730059c715e33f7c5b59d456eec2fe38a75138,"Fixing a typo.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319366 13f79535-47bb-0310-9956-ffa450edef68"
5792c242a756dede91dc2fa84d5c5cf4490ebaaf,"Fixing Bug #20363, incorporates fix for XML SE E20.
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=20363.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319370 13f79535-47bb-0310-9956-ffa450edef68"
c43ec4ad88ed6ebc4d8d026789a736fe72926dc9,"Committing the patch from Peter McCracken to avoid potential NPE's.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319371 13f79535-47bb-0310-9956-ffa450edef68"
efbb8ee3b3cce260406a26ad1eb20ad6e3e3df4d,"Errata for XML 1.0 Second edition:
this fixes E15.1, (elements declared to be EMPTY in the DTD cannot have
comments, PIs or entity references), E15.2 (character references to
whitespace are not allowed when the elements are declared to have child
content), E27 and E2 (Validity constraint: No duplicate tokens)

Patches provided by Glenn Marcy, Peter McCracken, Neil Delima.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319372 13f79535-47bb-0310-9956-ffa450edef68"
d179bfef6bd92052e3662b649d04a66c9fcab057,"fix for bug 22531; thanks to Peter McCracken


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319373 13f79535-47bb-0310-9956-ffa450edef68"
64506d6dfd4127b3a283abe0bdf0cf0304984a64,"Errata fo XML 1.0  Second Edition:
E43 (partial): the base URI is the URI of the resource after all redirection has occurred.

Fixes Bug #20383.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319374 13f79535-47bb-0310-9956-ffa450edef68"
a8a7f80eeb1f61cfa52486e8c710b62369d6ae43,"Fixing E2: Check uniqueness of enum lists when attdecl is validated instead of once for each instance in the document. Before, a list may have been checked none or many times.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319375 13f79535-47bb-0310-9956-ffa450edef68"
406182b84d3dbb75f556412fc0a1bcca8b4f5344,"Improve MSG_DISTINCT_TOKENS_IN_ENUMERATION and
MSG_DISTINCT_NOTATION_IN_ENUMERATION for users by providing
information specific to the invalid attribute declaration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319376 13f79535-47bb-0310-9956-ffa450edef68"
e51b2e4db4638a877872e182116286e88a93ffbc,"Errata for XML 1.0 Second edition:
This fixes E20 for attribute default values.

See: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=20363


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319377 13f79535-47bb-0310-9956-ffa450edef68"
c6792a651900bb817cecc09bc8aafd074ccd94dd,"Fixed bug in HTML DOM implementation that would cause a hierarchy
request error because it was trying to move all of the document
node children to be children of the <html> node. But this is not
desired behavior and actually causes a problem when trying to
move the doctype node.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319378 13f79535-47bb-0310-9956-ffa450edef68"
261fa63e7f0503e2a5d25f37de56deb5dc29c3b2,"Fixing various bugs involving NEL and LSEP.
In some cases they were treated as spaces in internal entities, and in others they were not normalized to LF in external entities.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319379 13f79535-47bb-0310-9956-ffa450edef68"
6a1bd30c0d9b678612d85311fedfb489a12b75c9,"Fixing #22871:
The rawname parameter in some error messages was null because the variable was only set if the DTD validator was removed from the pipeline.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319380 13f79535-47bb-0310-9956-ffa450edef68"
cb6044e00b91dd9ad90d6a3fc23be57c6ef41aa9,"Support printing of XML 1.1 documents, CDATA sections, and print space and end of line characters appearing in content so that they can be roundtripped.
Fixed a bug with escaping characters in comments.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319381 13f79535-47bb-0310-9956-ffa450edef68"
2c10d7a739dd6dd5c3b6a219f7015c13a9ba0d98,"Support printing of XML 1.1 documents, comments, and print space and end of line characters appearing in content so that they can be roundtripped.
Fixed a bug with printing null system IDs in DOCTYPE.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319382 13f79535-47bb-0310-9956-ffa450edef68"
2969451c3f70db2936c34fb71975c146fbd80ce8,"Bug: Incorrect locator info was reported for errors in 1.1 external entities.
The locator must be replaced in the error reporter before parsing with the current entity scanner.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319388 13f79535-47bb-0310-9956-ffa450edef68"
03998cfb79727d24def862933e8968546ab2b940,"Fixes: Ensure we have a message formatter, and that the locator for the error reporter is the current entity scanner.
Errors reported had garbled messages and no locator info.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319389 13f79535-47bb-0310-9956-ffa450edef68"
9caa3ca8742a69cb6576413ba0dcf91746658b6b,"Initialize external entity features to their default values. Defaults were only written when this component was reset.
This allows external PEs to be read when a DTD is preparsed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319390 13f79535-47bb-0310-9956-ffa450edef68"
fc8f3a94263097c6c58d3d1a31132c539c395529,"Fixing potential NullPointerException.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319394 13f79535-47bb-0310-9956-ffa450edef68"
996e2fa28bcff8f7622571fe38a28111aa0f2123,"In anticipation of J2SE 1.5, replace all occurences
where enum has been used as the name in a local 
variable, with a new and appropriate name. In J2SE 
1.5, enum has become a keyword. Making these 
changes should prevent potential compilation
problems when J2SE 1.5 becomes available.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319395 13f79535-47bb-0310-9956-ffa450edef68"
69d04560faf2d77ea00d03b36e0b03b73e6b1cdc,"In anticipation of J2SE 1.5, replace all occurences
where enum has been used as the name in a local 
variable, with a new and appropriate name. In J2SE 
1.5, enum has become a keyword. Making these 
changes should prevent potential compilation
problems when J2SE 1.5 becomes available.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319396 13f79535-47bb-0310-9956-ffa450edef68"
0bda873da1f953991e2e851625ade33725fdcb47,"Reorganization of Identity constraint code that improves performance of schema validation.
Some initial testing showed that for smaller documents (2K) with IDC support schema validation improves by 7%, for larger documents (10K) - up to 30%.
Main changes are
* removing reduntant data passed in the interfaces between XMLSchemaValidator and IDC support
* changing data structures for IDC in XMLSchemaValidator: removing OrderedHashtable
* storing actual values in the IDC code, previously the values were recomputed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319397 13f79535-47bb-0310-9956-ffa450edef68"
9948792be0a9eb45e0162ac5166db13418a75f30,"The URI grammar is ambiguous concerning whether or not 
a URI contains a net path or absolute path. Two slashes means 
we may have authority, but definitely means we're either matching 
net_path or abs_path. Every net_path is an abs_path.

RFC 2396 resolves this ambiguity by applying a greedy left 
most matching rule. Try matching net_path first, and if that
fails we don't have authority so then attempt to match abs_path.

net_path = ""//"" authority [ abs_path ]
abs_path = ""/""  path_segments

Fixing this allows this category of valid URIs to be accepted.
We previously gave up and rejected URIs of this form if 
they didn't match net_path, but had two leading slashes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319398 13f79535-47bb-0310-9956-ffa450edef68"
a5ec842147e8e432246caa7e754c87b50aaacdf4,"Fixed 18779: We now support registry based naming authority.

Fixed a comment from the last commit. Every net_path except 
for ones containing IPv6References is an abs_path.

Improved scanning of escape sequences. The implementation
was previously reading them twice.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319399 13f79535-47bb-0310-9956-ffa450edef68"
db2131ea7e1d4171bcd7cbeb4f12b5ef1f076c3e,"Fixing a typo in the XInclude documentation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319400 13f79535-47bb-0310-9956-ffa450edef68"
0c2e775e676736168194e4a5dd91c826b57c438c,"Update the release document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319401 13f79535-47bb-0310-9956-ffa450edef68"
c9a9bf19a5d0826088d950314e5ae27be6107591,"Expected output from XInclude test harness. Submitted by Peter McCracken.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319402 13f79535-47bb-0310-9956-ffa450edef68"
b71bf88d563c27e35a5a2eadeb434ff7f13cfada,"Added XInclude tests for xml:base. Submitted by Peter McCracken.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319403 13f79535-47bb-0310-9956-ffa450edef68"
818e2dbfd4fbac61cacde401ede7f9a1bc169557,"Additional clean up for identity constraint code: removing parameter that is not used.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319404 13f79535-47bb-0310-9956-ffa450edef68"
64b8a75abca5b6b509edaccc28bed38e7cd2ac71,"Adding a specialized document scanner and DTD validator
for namepace binding of XML 1.1 documents. This was inspired
by the improvement that was gained from a similar change for
XML 1.0.

Preliminary performance testing showed a 5-10% 
improvement depending on the characteristics of the document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319406 13f79535-47bb-0310-9956-ffa450edef68"
d954abe66b7b1e4cc31b4a4cd05201210fc8aa4a,"Fixing indentation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319407 13f79535-47bb-0310-9956-ffa450edef68"
44d8a61f164c932e3dc2a95d99434a589c1eec56,"Adding specialized document scanner and DTD validator to the
configuration for improving performance of namespace processing.
When namespace processing is enabled, these components are 
added to the pipeline. They are responsible for binding namespaces; 
replacing the role of the NamespaceBinder.

The regular scanner and DTD validator are used in the pipeline
when namespace processing is off.

Also, we weren't setting the source on most of the pipeline 
components. This has now been fixed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319408 13f79535-47bb-0310-9956-ffa450edef68"
34e1452e5290ffa114226106e3a83dee555a7fd3,"removed code tag which was invalid.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319409 13f79535-47bb-0310-9956-ffa450edef68"
8029a90c823706fdcb52b347c7a3cd6cfe15e625,"Removed emph tag which was invalid.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319410 13f79535-47bb-0310-9956-ffa450edef68"
d19552c5e0621e39d3f84831501eb811923a2398,"Removed character that made the document poorly formed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319411 13f79535-47bb-0310-9956-ffa450edef68"
a0dd01c178cee1a3ce3c1af2e8ee5252f5c3453c,"Added download.xml for mirrors download and updated dtd/stylesheet to deal with this.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319412 13f79535-47bb-0310-9956-ffa450edef68"
5c2a81050d9a8de84ccde0f9e2d5ffe079841245,"Fixing potential NPEs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319413 13f79535-47bb-0310-9956-ffa450edef68"
36ea6f1b1916b9c2d805ee56905cd2edfdb6818e,"Improved processing of attribute lists both small and large
in many ways. Take advantage of the SymbolTable and
always use reference comparison when checking names.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319414 13f79535-47bb-0310-9956-ffa450edef68"
213320a9dd5cae59cff7c08368bb9659005b4273,"After loading a DTD grammar the streams opened 
by the parser need to be closed.

Repeated use of DTD Loader would eventually lead to a 
java.io.FileNotFoundException (Too many open files), because 
none of the streams were being closed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319415 13f79535-47bb-0310-9956-ffa450edef68"
0db64b7ea46bf7df837f6626eba19976d48d17ba,"Fix an infinite loop when processing a DOCTYPE that appears
where content is expected. This problem only occurs when 
continue-after-fatal-error is set to true.

The parser is only expecting content to appear here, so it seems
reasonable to process the rest of the 'DOCTYPE' as content, 
since we're in an unrecoverable error state anyways.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319416 13f79535-47bb-0310-9956-ffa450edef68"
3e32053575077093a3cea4ce7b7733720828c832,"Improve the language used in the DoctypeIllegalInContent message.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319417 13f79535-47bb-0310-9956-ffa450edef68"
66dfbfbf7d70cf63cd80025fde34d74cda5b6d33,"Nonterminal S is unchanged in XML 1.1, so NEL (0x85) 
and LSEP (0x2028) are not space characters.

REVISIT: NEL and LSEP need to be escaped in order for
them to be roundtripped, otherwise they will be
normalized to LF when the document is read back.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319418 13f79535-47bb-0310-9956-ffa450edef68"
b5fda1b1f5c37274a9994b9531c484bd0d939b55,"Add a method which returns the integer value of the element
at a given depth in the stack. This method is used by the
XInclude implementation. Submitted by Peter McCracken.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319419 13f79535-47bb-0310-9956-ffa450edef68"
2eff3ea68ccab6ece623b1307f507df9c00e8092,"A very large update to the XInclude implementation. Submitted
by Peter McCracken.

xml:base is now supported! XML Base processing is now done in 
XIncludeHandler, and a XMLResourceIdentifier is put into Augmentations 
of startDocument() under the name ""currentBaseURI"" which is updated 
with the current base URI.

This commit includes several fixes to the implementation. Most are in
XIncludeTextReader.  It wasn't doing the right thing with
BOMs, charset values, and encodings.

Thanks to Neil Pitman for a patch to XIncludeHandler which fixed
resolution of relative URIs. The code now appropriately uses
XMLEntityManager.expandSystemId().

Also javadocs for the XInclude package were written, and some
of the error messages were updated.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319420 13f79535-47bb-0310-9956-ffa450edef68"
41e85b16aec1f81628dc0a74cf7068741fc144cb,"Some changes to the XInclude test harness submitted 
by Peter McCracken. The changes include new tests
for xml:base, and checking against expected output.

I've disabled the output checking for now. The expected
output no longer matches what the parser generates
so all of the tests fail. This methodology needs to be
explored more before including it.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319421 13f79535-47bb-0310-9956-ffa450edef68"
6b3e2d72fcaca161d3d685d1a328e8f3842062b6,"Some cleanup. 

Remove references to XIncludeFatalError. This class is no longer used.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319422 13f79535-47bb-0310-9956-ffa450edef68"
c5350400418001eb1ce60573fbe868164c8d7539,"These classes no longer have any use, since the error reporter
is consistently used by XIncludeHandler.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319423 13f79535-47bb-0310-9956-ffa450edef68"
9931bc78eebfbdb8ddb882da0dc91d2741256a30,"Update the release doc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319424 13f79535-47bb-0310-9956-ffa450edef68"
a34f2123b03f96c68bb332702745ad51776f2a00,"Update to reflect the FAQ to reflect that XML Base is
now supported by the XInclude implementation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319425 13f79535-47bb-0310-9956-ffa450edef68"
746773c29439674de548054e40b52657fe2939ce,"Remove redundant check for XML 1.0 well-formness (the check is now done in ElementNSImpl)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319426 13f79535-47bb-0310-9956-ffa450edef68"
0070797a88903b0afdc19a329b6cf11d6511a259,"Fixing potential AIOOBEs and NPEs that can occur
when the continue-after-fatal-error feature is
set to true, and an attribute specification contains
duplicate names.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319427 13f79535-47bb-0310-9956-ffa450edef68"
645ed94f7af12469125496d6e2cc648aa55b9298,"Fixing Bug #24113 reported by Ville Skytt, as well a few other issues.
We need to fill in the version and vendor information ourselves because Ant will write itself as the creator if not specified.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319428 13f79535-47bb-0310-9956-ffa450edef68"
fdd6bcec5d80d129c4748a1d0a1812803a5b44a8,"Fixing Bug #24113 reported by Ville Skytt.
Replace hard coded 'Created-By' with tokens to be replaced by a filter for version and vendor.
Also include the version of Ant used to build Xerces.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319429 13f79535-47bb-0310-9956-ffa450edef68"
0ae384e1c5af610ea5de9ebd6947ba1f18fb782b,"Fixing Bug #23947.
There were some typos in the message for e-props-correct.4.
Patch submitted by Gareth Reakes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319430 13f79535-47bb-0310-9956-ffa450edef68"
af28e8145459e79217349f4ddc7bd8111a8b4d55,"PR:
Obtained from:
Submitted by:
Reviewed by:

Fixing Bug. If the NamespaceURI, qualifiedName and doctype are null,
the returned Document is empty with no document element.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319431 13f79535-47bb-0310-9956-ffa450edef68"
e1631937d916e603ad03eee4efdccccc3179d206,"Fixing another bug. The method Node.getBaseURI() returns null in case when
the base URI is defined by the attribute 'xml:base' in a root element.
Absolute base URI is computed according to XML Base (http://www.w3.org/TR/xmlbase/#granularity)
1.the base URI specified by an xml:base attribute on the element, if one exists
2.the base URI of the element's parent element within the document or external entity, if one exists, otherwise
3.the base URI of the document entity or external entity containing the element.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319432 13f79535-47bb-0310-9956-ffa450edef68"
97ffc9c2297dd84432894b4172aaf0caa8687214,"Fixing another bug. canSetParameter returns 'true' if the parameter could be
successfully set to the specified value, or false if the parameter is not
recognized or the requested value is not supported.
This method does not throw DOMException.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319433 13f79535-47bb-0310-9956-ffa450edef68"
39bb7f6f50e7b98f13cc703c50da536dce255a27,"Fixing another bug. NullPointerException was thrown with following call.
implementation.createDocument(""http://xxx.xxx"", null,
null);

Also added additional checks:

NAMESPACE_ERR:
1.Raised if the qualifiedName is malformed,
2. if the qualifiedName has a prefix and the namespaceURI is null,
3. or if the qualifiedName is null and the namespaceURI is different from null,
4. or if the qualifiedName has a prefix that is ""xml"" and the namespaceURI is
different from "" http://www.w3.org/XML/1998/namespace""


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319434 13f79535-47bb-0310-9956-ffa450edef68"
51bb056f7a8513213c4998de4661011231ea17c0,"Fixing baseURI problem in ElementNSImpl.java too.
The method Node.getBaseURI() returns null in case when
  the base URI is defined by the attribute 'xml:base' in a root element.
  Absolute base URI is computed according to XML Base (http://www.w3.org/TR/xmlbase/#granularity)
  1.the base URI specified by an xml:base attribute on the element, if one exists
  2.the base URI of the element's parent element within the document or external entity, if one exists, otherwise
  3.the base URI of the document entity or external entity containing the element.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319435 13f79535-47bb-0310-9956-ffa450edef68"
01271955b824b185d6954c49a2c56c571fb82de5,"Fixing another bug. The method Document.adoptNode() throws NullPointerException in case when an
attribute node is adopted


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319436 13f79535-47bb-0310-9956-ffa450edef68"
1c8ef96b7db02b83918a5d655674685c95a2aba7,"PR:
Obtained from:
Submitted by:
Reviewed by:

Fixing another bug. adoptNode() should not adopt nodes of entity & notation
types.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319437 13f79535-47bb-0310-9956-ffa450edef68"
6b6321e666e6bd7de245ea86146a8524480e5bed,"PR:
Obtained from:
Submitted by:
Reviewed by:

Since entity & notation are readonly nodes, NO_MODIFICATION_ALLOWED_ERR should
be thrown. Changing the code accordingly.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319438 13f79535-47bb-0310-9956-ffa450edef68"
c3fd640c8d3e1bb3409d921a5ddec8657fe649a3,"Performance: Reduce object creation by reusing temp QName
(already available) instead of creating a new one for each
element declaration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319439 13f79535-47bb-0310-9956-ffa450edef68"
a3c5b7f925dea750168c5f021ec3f98a6cdfdbaf,"Fixing Bugzilla #22482.
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=22482

Modified patch submitted by Jari Aalto. The JLS states that
// comments must be followed by a line terminator. This seems
to have been the problem. The end of line was missing in both
of these files.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319440 13f79535-47bb-0310-9956-ffa450edef68"
5624df5a9fd4a5b15ee7f954590d221eece0709f,"Fixing Bug #21568. Patch submitted by Peter McCracken.
Document.getOwnerDocument() always returns null.
Compare node against 'this' instead.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319441 13f79535-47bb-0310-9956-ffa450edef68"
3885b90f9ba755f1ae66eb3536e8e36838f4700c,"Description : DOMInput.setEncoding should take priority when DOMInput has bytestream.
	 Also changed UTF-16 encoding for java.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319442 13f79535-47bb-0310-9956-ffa450edef68"
8d709194cd4172707ef003d84f3f5903eb05508d,"Fixing a bug.
<?xml versions=""1.0""?> was being accepted by the parser because we were trying to consume the '=' after 'version' without checking if it actually was one.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319443 13f79535-47bb-0310-9956-ffa450edef68"
afab8d34f4cb4ec5a368046d242d7b0fc0bc7bee,"Fixing Bug #21625. Patch submitted by Neil Delima.
In several methods INVALID_STATE_ERR was not being raised
after detach() was invoked on the Range.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319444 13f79535-47bb-0310-9956-ffa450edef68"
576531aa1b7799c2f00ad9d9630b7d785727cda6,"Update copyright.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319445 13f79535-47bb-0310-9956-ffa450edef68"
dd7fe66709332c6b42c46025d786bc8bae59aa1d,"Fixing Bug #22329. Patch submitted by Neil Delima.
This implements DOM L2 Ranges Errata - range-1.
Also fixed up some typos in the Apache license.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319446 13f79535-47bb-0310-9956-ffa450edef68"
39891239b3922aabd784f4cffe27a44f518f9525,"Description : When  attribute is not declared , mark the attribute type to null.
Refer TypeInfo interface DOM core L3 spec.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319447 13f79535-47bb-0310-9956-ffa450edef68"
987abb1bca7746d9d9158d0e2d3bfd9950fe0c17,"Description : When  attribute is not declared , mark the attribute type to null.
Refer TypeInfo interface DOM L3 core  spec.
Dependant files : XMLDTDValidator.java


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319448 13f79535-47bb-0310-9956-ffa450edef68"
1d86ce70dfdffe6beb4699e9464d92b83775dab4,"Update the release doc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319449 13f79535-47bb-0310-9956-ffa450edef68"
e879c679d30e7ddae44484ecdfc33f692cf111b1,"Description : When  attribute is not declared , mark the attribute type to null.
  Refer TypeInfo interface DOM L3 core  spec.
  Dependant files : XMLDTDValidator.java,AbstractDOMParser.java


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319450 13f79535-47bb-0310-9956-ffa450edef68"
6956372f4a86e352871dd4e68bfcb59401b05ba0,"backed out changes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319451 13f79535-47bb-0310-9956-ffa450edef68"
2eb2d6feda08763833c1c3ec3453f5fbeba6f469,"Backed out changes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319452 13f79535-47bb-0310-9956-ffa450edef68"
b49f9d6b0689fb0954bdc211e72bb9b1f390f3b7,"Fixing Bug #20304:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=20304

Static compile time and run time dependencies on
sun.io.CharToByteConverter made it impossible to compile
Xerces with JDKs which do not contain this class, and made
the serializer unusable (assuming you already have a binary)
for encodings which tried to access it. Users were probably
getting a NoClassDefFoundError in this situation.

For now, access the CharToByteConverter through reflection.
This should hopefully resolve both of those problems, however
on platforms where the converter is available we fall back to the
old behaviour of printing character references which are
expressable in the output encoding. This is something to revisit
in the future.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319453 13f79535-47bb-0310-9956-ffa450edef68"
b1956e92cbea1bdd81f57ad91593ce147b50c6c4,"Fixing another bug. NOT_SUPPORTED_ERR: Raised if the version is set to a value that is not supported by this Document.
We only support XML version 1.0 and 1.1


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319454 13f79535-47bb-0310-9956-ffa450edef68"
60ac71aacc44d49c8ce5f8d3aa97c8271f0423d6,"Fixing a bug which seems to have arisen from factoring
entity scanner out from the entity manager several
releases ago.

The buffer size passed to the entity scanner 
was not being kept in synch with the actual size
of the buffers in each scanned entity. If any
of the buffers were actually resized, it was possible
that the parser would throw an ArrayIndexOutOfBoundsException
for documents which contained names which are longer than
the current buffer size.

Conceivably the buffer size passed to entity scanner could be
used to determine a minimum size for resizing, if doubling the
buffer's size is smaller than this minimum. We currently don't
do this.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319455 13f79535-47bb-0310-9956-ffa450edef68"
ef0215d9d632c98282d4c6b604275aeebfb658a6,"Fixing compilation error in the previous commit.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319456 13f79535-47bb-0310-9956-ffa450edef68"
e8e4f31d5533ad16ce5445278f165739f52816fd,"During addition of recognized properties/features from the component we should only add
these the main vectors and not try to propagate to all components.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319457 13f79535-47bb-0310-9956-ffa450edef68"
3601a42c6b90a0d9d822da4db52605b0ec84bdf4,"XInclude experimental prototype should only work with XML 1.0 for now.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319458 13f79535-47bb-0310-9956-ffa450edef68"
15be78a0402f5455808098549a5f40e274b4b010,"remove debug (fails to compile)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319459 13f79535-47bb-0310-9956-ffa450edef68"
1b5399838087209d0fdd33d0bcdda60eaf3cb205,"update KEYS file with public key as newly-signed by two other Apache-ites


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319460 13f79535-47bb-0310-9956-ffa450edef68"
b1763a7c62756fefc9d5360f8fc0d8513f22585c,"Fixing a bug: We should be checking value that is passed


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319461 13f79535-47bb-0310-9956-ffa450edef68"
0742de94d4f5316435fee000076f7d076522912d,"Fixing NPE: setXMLVersion can't accept null values


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319462 13f79535-47bb-0310-9956-ffa450edef68"
71f188a87af02b1443da35630abaf703fd737e8b,"Re-implement XML11Configuration:

1. Remove dependency on the configurations that were designed to handle only XML 1.0 documents.
Relying on those configurations might have caused several bugs in reset, configurePipeline.
2. Instead of having one vector of components, user 3 vectors: one for XML 1.0 components, one for
XML 1.1. components, and one vector for the components that do not depend on XML version, such as XMLEntityManager
3. Add a new internal feature ""internal/parser-settings"" that is set by the configuration to notify the components if anything in the configuration settings have been changed.

Make sure that components in the pipeline query ""internal/parser-settings"" feature to find out if they need to reset features and properties.
This change improves the performance for non-validating SAX parser by ~14%. It improves schema validation with grammar cashing by ~9%.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319463 13f79535-47bb-0310-9956-ffa450edef68"
0702a3bf283cca2d5f97e7f06c9755a43bf34f27,"PR:
Obtained from:
Submitted by:
Reviewed by:
Fixing NPE.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319464 13f79535-47bb-0310-9956-ffa450edef68"
1364f74152d8d077278caf43fe8107930a74d1e1,"PR:
Obtained from:
Submitted by:
Reviewed by:
Debug value got changed. changing it back to off.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319465 13f79535-47bb-0310-9956-ffa450edef68"
e300b3dd8cd98b8941e2558862f772780c6488b7,"Define parser-settings constant in the base class since it is used by all subclassing configurations


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319466 13f79535-47bb-0310-9956-ffa450edef68"
9abc68a8334892b4abf2e10b430650b084a4df8b,"Disallow setting interna/parser-settings feature by the user. This is a special feature
that only configuration is allowed to set. Improve a bit XML 1.1. parsing -- don't create
non-namespace aware scanners unless those are needed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319467 13f79535-47bb-0310-9956-ffa450edef68"
20d68861b0af7908b3f24ab17aba66a37fb1db1e,"Disallow setting interna/parser-settings feature by the user.
Make sure the interna/parser-settings feature is recognized by all configurations


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319468 13f79535-47bb-0310-9956-ffa450edef68"
88142b1bc7d00929ef0e755fa9f348e55349a00e,"Improve a bit performance of NonValidatingConfiguration -- so it recognizes the special
internal/parser-settings feature.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319469 13f79535-47bb-0310-9956-ffa450edef68"
676e8ddd1a2e01ed436aa4cd8d4dd86fa76b283e,"Re-use schema parser.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319470 13f79535-47bb-0310-9956-ffa450edef68"
06a32cb4356f1328d7941443b928b5bc6516c827,"Fixing a couple of bugs:

1) We were previously accepting strings starting with ':' as
valid QNames. Now checking that the first character
actually is a NCNameChar.

2) In XML11EntityScanner scanQName would accept
any NCNameChar where the NCNameStartChar was expected
in the local part. So illegal names like, 'bad:1' were slipping
through undetected.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319471 13f79535-47bb-0310-9956-ffa450edef68"
f3fcb8b564f33e0ae562dcf2d7a9946e113872a0,"Fixing Bug #22471. Patch submitted by Amit Kapoor.
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=22471

Allow Xerces to be built with Blackdown JDK 1.4.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319472 13f79535-47bb-0310-9956-ffa450edef68"
43ed6e4a4ecd358134f9220ed783a4af8b67ffe4,"Fixing Bug #22471. Patch submitted by Amit Kapoor.
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=22471

Allow Xerces to be built on Linux with Blackdown JDK 1.4.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319473 13f79535-47bb-0310-9956-ffa450edef68"
a2399e3eadddd7f32b2e42ed1d47b0d78348721b,"add one more key signature


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319474 13f79535-47bb-0310-9956-ffa450edef68"
25d087d7f94b7ae98d32c4ac4ff0991bd8bd96cf,"Fixed several  bugs with text inclusion.
Most notably we weren't reporting errors for invalid characters, nor were we using the encoding map to lookup java encoding names.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319475 13f79535-47bb-0310-9956-ffa450edef68"
15039bb63186718cd0762b92430b54bcf69fa2b2,"We weren't checking either of the UniqueNotationName or NoNotationOnEmptyElement VCs.
Thanks to Neil Delima for the patch for UniqueNotationName.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319476 13f79535-47bb-0310-9956-ffa450edef68"
b40d2ba5c055a5397ff0f495b723270763086a3d,"Added error messages for NoNotationOnEmptyElement
and UniqueNotationName validity constraints. Thanks
to Neil Delima for the patch for UniqueNotationName.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319477 13f79535-47bb-0310-9956-ffa450edef68"
ee98283c8d116b37afd71d1efb36a9506e53b1e0,"check for valid name/qualified name as per xml version.
more to be checked in.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319478 13f79535-47bb-0310-9956-ffa450edef68"
6c3cd50600c3effad62814367d9809753cbb016b,"Format code. Same has been done in previous checkin.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319479 13f79535-47bb-0310-9956-ffa450edef68"
0d6e9bbe403f3190f47625d4386651739bddbe80,"Description : Merging sources from  jaxp-1_3_0-04 tag in  main branch .


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319480 13f79535-47bb-0310-9956-ffa450edef68"
f1b40ca0c49c2f50a6489dc353ebf01a3e0aec30,"Added function to check if the document version was changed.. this would be useful for DOMNormalizer to optimize name rules checks
. We should be checking names only when the document version changed at some point.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319481 13f79535-47bb-0310-9956-ffa450edef68"
0182db303b2cda5a140f8a33b9ea4afa8a997458,"Committing the PSVI Writer patch propsed by Pete Lloyd. Thx Pete.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319482 13f79535-47bb-0310-9956-ffa450edef68"
50e63402f8041149d962cb2068686c4a65087c68,"Committing the PSVI Writer patch propsed by Pete Lloyd,
with minor modifications. Thx Pete.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319483 13f79535-47bb-0310-9956-ffa450edef68"
757d94a71aea72b27441d235ef4c1cbd6e8f3aa4,"We were using wrong some error codes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319484 13f79535-47bb-0310-9956-ffa450edef68"
6c6521e77bd727532a53bf79655540aa90f96bc2,"Fixing facet-related methods on simple type definition, to return correct values
for pattern and fractionDigits when the type is derived from NMTOKEN,
NAME,NCNAME, or integer.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319485 13f79535-47bb-0310-9956-ffa450edef68"
50f147e3bd7ccbdee0965bd237e42210132e69d3,"Make information about whether an attribute was declared by attaching this
information to its augmentations.
Absence of this property means that the attribute was not declared.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319486 13f79535-47bb-0310-9956-ffa450edef68"
63ec7b9907e8be1d1aad464083ad1ff25e3c8928,"For DOM Level 3 TypeInfo, if an attribute was not
declared in the DTD, its type name is null. Using new
augmentations property ""ATTRIBUTE_DECLARED""
to propogate this information to the DOM Attr.

http://www.w3.org/TR/2003/CR-DOM-Level-3-Core-20031107/core.html#TypeInfo-typeName


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319487 13f79535-47bb-0310-9956-ffa450edef68"
e9166324ffe742f0451e3c515767c1edd5334c9d,"I missed DefferredDOM on the last commit. Also, if the
attribute wasn't declared, then there's no reason to
lookup its type from XMLAttributes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319488 13f79535-47bb-0310-9956-ffa450edef68"
0f3d71ad7a40fd69ed409c97eaeb6d29be5e6e04,"More PSVI related fixes. We didn't have proper final/block values on
element and complex declarations.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319489 13f79535-47bb-0310-9956-ffa450edef68"
e784d8248e11a32cf3b2ed4d5b7375174a0091dd,"Thanks to Kohsuke Kawaguchi for the patch .


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319490 13f79535-47bb-0310-9956-ffa450edef68"
060d846ff49287186d86711ec83dd1e136cd66fa,"PSVI API changes. Step 1:
Move classes from packages org.apache.xerces.impl.xs.psvi and
org.apache.xercex.xni.psvi to org.apache.xerces.xs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319491 13f79535-47bb-0310-9956-ffa450edef68"
64302db91765fb8f53d6df18a0c14dbd4970e942,"Fixing some NPEs from the previous commit.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319492 13f79535-47bb-0310-9956-ffa450edef68"
ee02ba85bc60660c5eafb3f526ea75307b0b8132,"PSVI API changes. Step 2:
- Updated some doucmentation
- Added interfaces for loading XSModels
- Added methods to expose actual values and their types
- Implementation of the new methods


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319493 13f79535-47bb-0310-9956-ffa450edef68"
9ccdad386b5adc7017cbabd2fb0bd9e6c3678a16,"PSVI API changes. Step 3:
- Updated the PSVIWriter sample to reflect the API changes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319494 13f79535-47bb-0310-9956-ffa450edef68"
0efd54cf82be2b2beffa9d9d01c961f1d3f08c91,"Adding a schema which defines xml:base for tests.xsd, and enabling
test output comparison. Thanks to Dean Chalker for helping to locate
the problem. The old import URI was inaccessible..


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319495 13f79535-47bb-0310-9956-ffa450edef68"
47cf454e2f84609aa81549375ff1874a0e83809d,"Fixing Bug #24662. Some grammar errors reported
and corrected by George Cristian Bina.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319496 13f79535-47bb-0310-9956-ffa450edef68"
04c70496e2ff64849cf06a606d98fc475ff85f58,"Reenable XML11Configuration to be used in a pull parsing fashion.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319497 13f79535-47bb-0310-9956-ffa450edef68"
a74e0abc182e83a7c518d9b4708740d4da820e6a,"PR:
Obtained from:
Submitted by:
Reviewed by:

iFixing broke jnjars-dom3 target


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319498 13f79535-47bb-0310-9956-ffa450edef68"
21a8790b17d01d2d6efc530c0a18cd5941c0b1e2,"Adding support fowr  ell-formed featue. Still need  adddo more changes.r


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319499 13f79535-47bb-0310-9956-ffa450edef68"
d8db096e90c0de345ae957da67f23a25543e0eae,"Made necessary changes to align our XML 1.1 implementation with
the PR for XML 1.1: http://www.w3.org/TR/2003/PR-xml11-20031105/

The PR for XML 1.1 introduced the following changes: removal of some
characters from NameChar, allowing control characters to appear as
literals in internal entities, and disallowing NEL and LSEP from appearing
in XMLDecls or TextDecls.

Updated productions in XML11Char for NameChar.

Added new method called isInternalEntityContent to XML11Char which
returns whether or not a character can be interpreted as content in an 
internal entity.

Modified XML11EntityScanner so that it will accept control characters as
literals in internal entities.

Added a new method to XMLEntityScanner called skipDeclSpaces which
only skips characters that would match non-terminal S before end of line
normalization.

Modified XMLVersionDetector so that it always uses the XML 1.0 scanner.
Skips spaces using new skipDeclSpaces method.

Modified XMLScanner so that it skips spaces in an XMLDecl or 
TextDecl using new skipDeclSpaces method. This prevents NEL and
LSEP from being matched as S in XML 1.1 entities.

Removed scanXMLDeclorTextDecl method in XML11DocumentScannerImpl
which had bugs and furthermore was never called by the parser.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319500 13f79535-47bb-0310-9956-ffa450edef68"
b8bd3cb6a8c14b1c73450a4d3f7a5d1a957010da,"Updating the release doc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319501 13f79535-47bb-0310-9956-ffa450edef68"
6ea5647eaf9b4ddfa96ad6238657f67322329a37,"Changes to DOM Level 3 Core CR:

* TypeInfo.isDerivedFrom added [2].  Not complete, will need to revisit
to account for derivation constants.

* Added implementations for DOMStringList and
DOMConfiguration.getParameterNames().

* Renaming and other features:
renamed getDOMImplementations to getDOMImplementationList.
rename isWhitespaceInElementContent (isElementContentWhitespace)
Document: config (domConfig), actualEncoding (inputEncoding),
xmlStandalone, xmlEncoding, xmlVersion,
Entity: actualEncoding, xmlStandalone, xmlEncoding, xmlVersion

* Call a UserDataHandler for adoptNode

Patches from Neil Delima. Committed with minor modifications


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319502 13f79535-47bb-0310-9956-ffa450edef68"
fdf3326f7883f13d7c1f4b558cba6bf0046e6a13,"Added implementations for DOMStringList

Patches from Neil Delima.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319503 13f79535-47bb-0310-9956-ffa450edef68"
ec4c4a868e19a95d609e802678d772d13278377d,"Updated to DOM Level 3 Core CR. Patches from Neil Delima.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319504 13f79535-47bb-0310-9956-ffa450edef68"
48e763acecd6b2d111e597779431659381c6779d,"Fix tests according  to the DOM Level 3 Core CR. Patches from Neil Delima.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319505 13f79535-47bb-0310-9956-ffa450edef68"
5d497c76bc324ab4ba80d408dfb0713e2fdb9340,"Fix sample according  to the DOM Level 3 Core CR. Patches from Neil Delima.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319506 13f79535-47bb-0310-9956-ffa450edef68"
41f743dbe7dfe05ee1e7aa6db36371c858dacd13,"Updated build for DOM Level 3 CR changes. Patch from Neil Delima.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319507 13f79535-47bb-0310-9956-ffa450edef68"
14bb3a2024f0ca7857adcb320c2715e3130a4668,"In preparation for the release, update the version to 2.6.0.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319508 13f79535-47bb-0310-9956-ffa450edef68"
076fc21ab3634f9f5d7bbfb316600fd14ecb7bc0,"Update references to XML 1.1 from CR to PR.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319509 13f79535-47bb-0310-9956-ffa450edef68"
3e07780ed566ed98a1ac0e9ff8b5d91d58703351,"Fixing typo. infoseet -> infoset.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319510 13f79535-47bb-0310-9956-ffa450edef68"
8b4659e74dceb17161bfeb8c0e060d3fb8bee744,"Changed DOMNormalizer to reuse DOMErrorImpl. Patch submitted by kohosuke kawaguchi.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319511 13f79535-47bb-0310-9956-ffa450edef68"
859280917bdf3060fb5d542dca0ba2122d6306b2,"Generate the docs for the XML Schema API in the javadocs target.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319512 13f79535-47bb-0310-9956-ffa450edef68"
af8069f189a74fc27d55b48d2d0c9b792a347dcc,"Create a new section for the XML Schema API. Also add a link
to the Grammar interfaces in the XNI section.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319513 13f79535-47bb-0310-9956-ffa450edef68"
1610cc0bb6965ca66186476afdde0ce8979ac9df,"Committing schemaLocation patch  submitted by kohosuke kawaguchi.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319514 13f79535-47bb-0310-9956-ffa450edef68"
0f5614fc9a7b1f4861114182730e3894592019b7,"CleanUp.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319515 13f79535-47bb-0310-9956-ffa450edef68"
85ebbaf86aad03e63b21d4ca55bcb19c2fbca8df,"Allow to undeclare a prefix as per xml1.1 spec was error in xml1.0.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319516 13f79535-47bb-0310-9956-ffa450edef68"
310aec75ba4914f1e4755d2b16354599b681b151,"Fixing XNI Javadocs.

Documentation was missing in many classes.

The reason why some of the docs were missing 
is because the intended javadoc is either being 
wrapped in C++ style comments // or is missing
the leading /**, and there's also few places with 
unintended markup that was meant to be just 
character data.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319517 13f79535-47bb-0310-9956-ffa450edef68"
eb110ccfc5394137454214f1d910e96b9dcd58bb,"Everytime we change the default parser configuration
our documentation needs to be updated to reflect this.
References within in the docs have become badly out 
of date.

Adding two new entities which should be referred 
to within the docs to keeps them in synch each time 
the default config is changed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319518 13f79535-47bb-0310-9956-ffa450edef68"
a4eff0c0ab017a70f18a4f5545af3ecfe9dd4a4e,"Replace tokens for the default configuration in
entities.ent using two new properties. We could
come up with something fancier in the future which reads 
org/apache/xerces/parsers/org.apache.xerces.xni.parser.XMLParserConfiguration,
but at least for now when the default config changes, we only
have to change the value of the properties in the build file.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319519 13f79535-47bb-0310-9956-ffa450edef68"
17de1077304b40ace9c504ae7efab95c5b15f04f,"Update references to PSVI packages, and fix
reference to the default configuration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319520 13f79535-47bb-0310-9956-ffa450edef68"
e2acd4417a47adbbb93144ef559a945925c0b85a,"Add a section which explains that the XML Schema API
references some DOM Level 3 interfaces.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319521 13f79535-47bb-0310-9956-ffa450edef68"
e2aa2d8c2ced45c984c4347766a85a12bf108d4a,"Fix Java docs. Also remove setRecognizedVersions method -- the interface is read-only, the
method was added by mistake.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319522 13f79535-47bb-0310-9956-ffa450edef68"
bc974e6aa24b755883de9e146a3a9e0738f5a061,"Add implemenation of xs.XSLoader and xs.XSImplementation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319523 13f79535-47bb-0310-9956-ffa450edef68"
829f4d55998ec96b654ffb7829afff726faa999f,"Add sample file that shows how to load and query XML Schemas using XS API


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319524 13f79535-47bb-0310-9956-ffa450edef68"
ef4f86ead7681d8b6728d4f8bbea78204f4b9e76,"Fix build (after adding XSLoader implementation). Add QueryXS to test-dom3


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319525 13f79535-47bb-0310-9956-ffa450edef68"
5d7a454ca51a5a4b2d83da427336aaff2ce1bd72,"Fix reference to the default configuration and
improve FAQ on the validation behaviour of
the default configuration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319526 13f79535-47bb-0310-9956-ffa450edef68"
8fec56828da5ad7f4f43ecdc78b8aca513cda5dd,"Fix reference to the default configuration and
update the Overriding Default Parser FAQ so
that it mentions the xerces.properties file
in the serach path for a configuration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319527 13f79535-47bb-0310-9956-ffa450edef68"
323520e709510311f9e8d511a6108633dc03a4c8,"Update download link to the mirror page, and fix a few typos.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319528 13f79535-47bb-0310-9956-ffa450edef68"
93aa999c6a46504551fdb08c0b08590aba6d3a59,"Fix reference to default configuration and some typos.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319529 13f79535-47bb-0310-9956-ffa450edef68"
2e191fab0dc346eba8248922ee6c226133549ca6,"Added a new FAQ entry to explain where the PSVI interfaces
have been moved to.

Updated examples to use the new XML Schema API interfaces.

Fixed typos and improved the language in other sections.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319530 13f79535-47bb-0310-9956-ffa450edef68"
a9933e9a8b9edc55787db897566bcfeb6287cd3a,"Added an anchor to the XML Schema API documentation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319531 13f79535-47bb-0310-9956-ffa450edef68"
53ec54f2822c25f6815aa81b3b2eb8f46dd3caf5,"Fixing a bug in XML10 configurePipeline: we should always setup DTD pipeline (was only
setup if scanner has not been changed)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319532 13f79535-47bb-0310-9956-ffa450edef68"
e6fa818fe2ad3e3013e297aa7ec9529b2e749d81,"Allow XML 1.1. support in XInclude


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319533 13f79535-47bb-0310-9956-ffa450edef68"
8c476628130af6f28c319cf46c3bd00726aa0b88,"In case of an error -- output difference


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319534 13f79535-47bb-0310-9956-ffa450edef68"
6777150aba270ec371c9ced7290e45edfac3a26b,"Committing patches from Neil Delima ( DOM TYPE_MISMATCH_ERR)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319535 13f79535-47bb-0310-9956-ffa450edef68"
746c8fef463b3f8eae432dd0074393e236c93e8d,"A patch to report errors during normalizeDocument when an attribute is
encountered whose value contains a reference to an entity for which no
declaration has been read.
(patch from Neil Delima)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319536 13f79535-47bb-0310-9956-ffa450edef68"
f72756f39728b9a3ab03111bf982ab28fdcb2fc5,"Package new XS sample with xercesSamples.jar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319537 13f79535-47bb-0310-9956-ffa450edef68"
889766421612b0a1ea9e12ba56fedca9136a3280,"fix for bug 24692


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319538 13f79535-47bb-0310-9956-ffa450edef68"
2e403af28aa3da63d225137bc268dfc97de97090,"Adding support for XML 1.1 text inclusion.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319539 13f79535-47bb-0310-9956-ffa450edef68"
aa0310cfea1f341c25d0236d8f286b66940ff3ac,"Further changes for support of well-formed feature


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319540 13f79535-47bb-0310-9956-ffa450edef68"
0c5a3a1c4fb059b3f5da7d922ccb3084d5e89a37,"DOM3LS CR changes . Submitted by Ramesh Mandava
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319541 13f79535-47bb-0310-9956-ffa450edef68"
d3787c91dabf67f7f2f7ee5aee04c490c6f849b1,"DOM3 LS CR changes bug #24742 . Submitted by Ramesh Mandava


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319542 13f79535-47bb-0310-9956-ffa450edef68"
b7f101cf19b9aa0ece4862d202033dfc513fdf5e,"DOM3LS CR changes bug #24742 . Submitted by Ramesh Mandava


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319543 13f79535-47bb-0310-9956-ffa450edef68"
dcd088b22d65bcf15697272154b69d99baf9b3b0,"DOM3LS CR changes bug #24742 . Submitted by Ramesh Mandava


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319544 13f79535-47bb-0310-9956-ffa450edef68"
d637ecd185a79e1477e596c8d065c1214b9b9a87,"Adding further changes for well-formed feature support. Adding valid
xml character checks for CDATA and TEXT nodes. Added new function
checkInvaliXMLdCharactes to check valid XML characters as per the version of the document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319545 13f79535-47bb-0310-9956-ffa450edef68"
a50d30d710bc4e66dfe820abbed2f91c6e1381a4,"We should be checking the attribute names for valid XML characters


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319546 13f79535-47bb-0310-9956-ffa450edef68"
14a6c0b94b89ac441dda9ac3f3f20b76dbb05ebd,"Package XS samples with xercesSamples.jar when building DOM Level 3.
Also, resolved one of the issues with dtdjars.
The other problems still need to be fixed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319547 13f79535-47bb-0310-9956-ffa450edef68"
fc0b811e2d1070a419fa80a9efe41610145a605f,"Actually return the list of recognized versions instead of null.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319548 13f79535-47bb-0310-9956-ffa450edef68"
99eba14f8f87f529855a4ba55a1a38534f4ca178,"Add missing author and version info.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319549 13f79535-47bb-0310-9956-ffa450edef68"
5df1474ef886437ea38d32b063ce0c2b62ea6c92,"Update the release doc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319550 13f79535-47bb-0310-9956-ffa450edef68"
3d3220ca5a7eddf8119818f6e62e3a09152e1aed,"Update the release doc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319551 13f79535-47bb-0310-9956-ffa450edef68"
12d61e55c3e35be24902ac3c9080e1a8188efbec,"Added a sentence on ""being specific and providing enough 
information to reproduce a bug"".


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319552 13f79535-47bb-0310-9956-ffa450edef68"
ff47514b7618410354ca153153358edccba0dd56,"Patch to documentation concerning DOM Level 3.
Submitted by Neil Delima.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319553 13f79535-47bb-0310-9956-ffa450edef68"
c5f6190087a94ceea77af4389c585d338fe2d968,"remove an extra check for getBaseURI computation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319554 13f79535-47bb-0310-9956-ffa450edef68"
0fd1034a93a547c3eb2ec76dea43d960b3c26e9e,"Add tests for baseURI


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319555 13f79535-47bb-0310-9956-ffa450edef68"
bbf24ff4005840bb86c197472a405723f5f06fa5,"Update references to XML Schema API.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319556 13f79535-47bb-0310-9956-ffa450edef68"
ba469d74d57db378034aac0f37f44c44adb46fab,"Fixing several typos.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319557 13f79535-47bb-0310-9956-ffa450edef68"
d9c6c8e97aa03cae809aab27ecba9af8aaf3984a,"We've had support for UCS-2 and UCS-4 for a long time.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319558 13f79535-47bb-0310-9956-ffa450edef68"
4371b1268791e93dcd35a4826212264a602a2db8,"Add an FAQ about XSLoader.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319559 13f79535-47bb-0310-9956-ffa450edef68"
73ec60c33d82dcfed3001c5dc2d1205fc6addd1b,"Now applications can set the value of well-formedness feature to either true or fals
when normalizing document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319560 13f79535-47bb-0310-9956-ffa450edef68"
9d1f565ebda37969ab4f7deba43ea6ea49052029,"Fix for bug 24778. Patch submitted by ramesh mandava.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319561 13f79535-47bb-0310-9956-ffa450edef68"
ce2467368fc8ec675a5c90e5635f5ed152c56ece,"Fixing typo: cashing -> caching.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319562 13f79535-47bb-0310-9956-ffa450edef68"
e9d0bb42868b46115e2f8e036452f81ae81f431f,"Static mutability fix. Make character flag array private.
It should never have had public visibility.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319563 13f79535-47bb-0310-9956-ffa450edef68"
ae6579ae0f44cb023c3eabd412022e3e1e99b29c,"fix for typo in toString method; thanks to Jon Schewe for pointing this out


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319564 13f79535-47bb-0310-9956-ffa450edef68"
b138361fd63561b813541b4822a8d17950976a02,"Actually set flag which indicates that XML11 components have
been initialized. We were recreating them on every parse.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319565 13f79535-47bb-0310-9956-ffa450edef68"
bfc3bc925f82521625542b7e1d297c239b73f39e,"Cleanup. Remove extra call of init().


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319566 13f79535-47bb-0310-9956-ffa450edef68"
2b4be9a8f707891b49689a8c096602406b6a2c9c,"Cleanup: the XMLSchemaValidator should be only added to common components vector
(done in configure*Pipeline methods)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319567 13f79535-47bb-0310-9956-ffa450edef68"
dc4412740710d590b0a4bf7459a9acba9f380061,"Setting well-formed parameter to true is now supported.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319568 13f79535-47bb-0310-9956-ffa450edef68"
126247408f412f23c999b25d7a3bc872510cc7d6,"Patches for bugs #24795  ,#24797: Patches submitted by ramesh mandava.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319569 13f79535-47bb-0310-9956-ffa450edef68"
9d1dbf89c75cf6f564facc2b605dd9f2cf2dac4d,"no fixes , just code formatting.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319570 13f79535-47bb-0310-9956-ffa450edef68"
c79409ecff1e8cc01e8489bd13dfd911b959b694,"Fixing Bugs #897 & #19152. They're very different reports,
but they're both symptoms of the same bug. We were keeping a list
of all the readers opened during a parse and only closing them after
we finish. This means if a document contains millions of internal entity
references we'll have a list of millions of references to StringReader 
that cannot be garbage collected until we dump the list after the parse, 
and since we don't close the streams until we're done, the operating 
system may run out of file handles.

Solution: Once we've parsed an entity, close the reader and then
remove it from the list. If parsing halts for some reason, cleanup
the remaining readers as we already do.

http://nagoya.apache.org/bugzilla/show_bug.cgi?id=897
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=19152


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319571 13f79535-47bb-0310-9956-ffa450edef68"
1a2d86dad2bab9a2f7b2dd8105c2806f2f9358eb,"Fix to compareDocumentPosition:  when this is an attr and other is an ancestor node, ensure CONTAINS bit is set in return value


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319572 13f79535-47bb-0310-9956-ffa450edef68"
222b2b0d0ff715dee363016da2cbfc05bc2d7546,"Update the release doc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319573 13f79535-47bb-0310-9956-ffa450edef68"
54f4239946b55ff27db7627ac6740aff4949f966,"We need to escape CR during text normalization and TAB, CR, NL during attribute
value serialization to allow roundtripping [1], [2]. Similar escaping is done for XML11 serialization.

Also checking for ""unbound-prefix-in-entity-reference"" [2]. Many thanks to Neil Delima
who helped with providing this fix.
[1] http://www.w3.org/TR/xslt-xquery-serialization/#xml-output
[2] http://www.w3.org/TR/2003/CR-DOM-Level-3-LS-20031107/


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319574 13f79535-47bb-0310-9956-ffa450edef68"
4d0d5012fb2d8f434d0affd8393fab18c182e24d,"Upgrading to SAX 2.0.1. support


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319575 13f79535-47bb-0310-9956-ffa450edef68"
62d01e8443890386d25771d469a9f8e69176d66c,"Upgrading to SAX 2.0.1 support


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319576 13f79535-47bb-0310-9956-ffa450edef68"
559a1b7ea5d7a443746feccf4b18f96d0726f514,"Fixing dtdjar target -- should only rely on the xerces.xs interfaces not actual implementation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319577 13f79535-47bb-0310-9956-ffa450edef68"
98a9eab7c62768ac3adab64a6d6c2b0a1b5b0a30,"rename DOMInputList to LSInputList to be consistant with the DOM Level 3 LS CR.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319578 13f79535-47bb-0310-9956-ffa450edef68"
77684fad30a10906b46d3798c506cb60ae28044c,"Separate dom implementation source from XML Schema API and PSVI support.
Now DOMImplementationSourceImpl is only aware of Xerces DOM implementation.
DOMXSImplementationSourceImpl is aware of PSVI and xerces.xs implementations


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319579 13f79535-47bb-0310-9956-ffa450edef68"
f0937421c819101d6617e11025a4a419715a0aa0,"Reference DOMXSImplementationSourceImpl.java


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319580 13f79535-47bb-0310-9956-ffa450edef68"
93e46786e04e4255ef40f1767ac14c9c124d994f,"Fixing a bug related to busy -- was not resetting this field properly. Also abort() means that the parsing is stopped,
therefore we need to throw an exception.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319581 13f79535-47bb-0310-9956-ffa450edef68"
3891e9331891499ff9b808db77a3f7d3a9eb4bc1,"reference DOMXSImplementationSourceImpl


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319582 13f79535-47bb-0310-9956-ffa450edef68"
c10f1fb055eed8675eb11a8c39de05bfa37d8ea3,"fix dom3 target and dtd targets


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319583 13f79535-47bb-0310-9956-ffa450edef68"
8578eeb255bab5424b3dd36232fe95b59caf897a,"Added section on grammar caching. Modified section
which discusses performance of parser configurations.
XML11Configuration (the default) has similar performance
to the NonValidatingCongfiguration since Elena improved
reset.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319584 13f79535-47bb-0310-9956-ffa450edef68"
1088f2eadabeef4a381364e9ab17f8e65cef29e9,"Updating release notes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319585 13f79535-47bb-0310-9956-ffa450edef68"
f80cacec29216d95fab66a10dd2d79143d582b52,"Update the release doc, and improve the text
in some of the entries.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319586 13f79535-47bb-0310-9956-ffa450edef68"
3c637a14575e7d4a2c69f1a7a68a9a8c38beb699,"Improved language in the 'Parser Performance' FAQ.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319587 13f79535-47bb-0310-9956-ffa450edef68"
e23ed7893301eb5987166a6fa3da50bf679b951d,"Fixing dvjar target


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319588 13f79535-47bb-0310-9956-ffa450edef68"
6a234cb9063f2cd877e11ae1937a80db071fdf55,"Update XSLoader example to use DOMXSImplementationSourceImpl.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319589 13f79535-47bb-0310-9956-ffa450edef68"
d79abaca3e3d7be08f306039afbb5b2175ff3372,"Fixing a bug in XInclude -- DTD pipeline is not setup proparly. Thanks to Neeraj patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319590 13f79535-47bb-0310-9956-ffa450edef68"
950838c4c6da848885bed86c63fec1cf50ef321b,"update docs prior to the release


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319591 13f79535-47bb-0310-9956-ffa450edef68"
527a8b6f21b54bf9d21e44617c59cebae198bc07,"fixed minor doc bugs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319592 13f79535-47bb-0310-9956-ffa450edef68"
6c78607a62c0269140e85bf19c00cec82fea3d55,"update download page docs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319593 13f79535-47bb-0310-9956-ffa450edef68"
741cc7f1b37be5dfd31fa256e91afca6f15510ca,"make sure download.cgi is in the build for docs target


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319594 13f79535-47bb-0310-9956-ffa450edef68"
b1bd6d8a4dc7969f527882cadede3f43783d8e1a,"fixing error in the last commit: make sure download.cgi is in the build for docs target


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319595 13f79535-47bb-0310-9956-ffa450edef68"
d40e667e6c319d72e560df77bfd26bd0ee9235c6,"Add namespace-prefixes, load external DTD and dynamic
validation options to SAX samples.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319598 13f79535-47bb-0310-9956-ffa450edef68"
634740340939f772490b9be59ca1b9c4f8ee332a,"Update description of options for SAX samples.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319599 13f79535-47bb-0310-9956-ffa450edef68"
ec684edf24de259b5be5b45d8c9372186fabf2fe,"Add dynamic validation and load external DTD (added to Writer only) options to DOM samples.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319600 13f79535-47bb-0310-9956-ffa450edef68"
174df7c21d41e715bc0451f32f53ec352270a425,"Update description of options for DOM samples.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319601 13f79535-47bb-0310-9956-ffa450edef68"
eb6f8b0c87ffc8f7987c17f028b6872c0d4ff8ef,"Updating implementation to incorporate change to XInclude namespace
from latest WD: http://www.w3.org/TR/2003/WD-xinclude-20031110/


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319602 13f79535-47bb-0310-9956-ffa450edef68"
5cccc429af973d7ee96e397bedf4a91efa017571,"Updating messages to incorporate change to XInclude namespace
from latest WD: http://www.w3.org/TR/2003/WD-xinclude-20031110/


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319603 13f79535-47bb-0310-9956-ffa450edef68"
6a8571aa82559e55da6ae1b8927666d9df0951b3,"Updating tests to incorporate change to XInclude namespace
from latest WD: http://www.w3.org/TR/2003/WD-xinclude-20031110/


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319604 13f79535-47bb-0310-9956-ffa450edef68"
1992c2a22cbcec7d1d05de897df6b610b2d436fa,"Remove unused static member.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319605 13f79535-47bb-0310-9956-ffa450edef68"
242253f2ad552b2009a89eb8aa1e90c862aeddf0,"Fixing a couple reset bugs, including Bug #25043. We were overwriting
the user's configuration with default values when namespace support
was disabled.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319606 13f79535-47bb-0310-9956-ffa450edef68"
4f5026e5e6247990bc9856feef77ec4e06a82143,"Basic implementation of setting Accept, Accept-Charset,Accetp-Language as per [1].
Not yet complete.
[1]http://www.w3.org/TR/2003/WD-xinclude-20031110


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319607 13f79535-47bb-0310-9956-ffa450edef68"
e7f92c2e562e032b28fa4a9d1945c858c1349dea,"Fixing some typos.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319608 13f79535-47bb-0310-9956-ffa450edef68"
15364971e158d9e1e9675ea42e490f1fb0720fe0,"Issue a warning to users of the old http://www.w3.org/2001/XInclude namespace. 
See: http://www.w3.org/TR/2003/WD-xinclude-20031110/#syntax


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319609 13f79535-47bb-0310-9956-ffa450edef68"
d9f22e5fe8ef4c70b8149a7b5bac5ed706d6e287,"Fixing Bug #24318:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=24318

Comments and PIs from the DTD should be directed to the DTDHandler.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319610 13f79535-47bb-0310-9956-ffa450edef68"
5ba592aa9007de9e5392ebab7095bfd0cfa63824,"Partial fix for Bug #24992. Fix NPE which would occur if an 
include parent has no base URI.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319611 13f79535-47bb-0310-9956-ffa450edef68"
b5f15e9b0f7f662162feedb578f57ece5b55338d,"Allow user to specify a target directory for the output.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319612 13f79535-47bb-0310-9956-ffa450edef68"
b3566f74ef5c34d11421572ac56efc103db24eba,"Enable setting http properties.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319613 13f79535-47bb-0310-9956-ffa450edef68"
6bf2e83dd5b24e0f833ba572052400c11e0f8924,"check for xpointer as href is optional in latest spec.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319614 13f79535-47bb-0310-9956-ffa450edef68"
8fefcc9223993954204e919699790e02325682f3,"Add a new method in the XSGrammar interface, to convert an array of
schema grammers to an XSModel.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319615 13f79535-47bb-0310-9956-ffa450edef68"
6d4a09909b920964888e413887dbb6d9e55dc2c3,"Update manifest file.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319617 13f79535-47bb-0310-9956-ffa450edef68"
fb5dbf51fd9ec999365479fde3c67985b81a30f1,"Added a message  to print when href is missing.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319619 13f79535-47bb-0310-9956-ffa450edef68"
1160512aad3f82bd3839bcc2aaefbe28e813222f,"Fix for bug #24124. Thanks to Kohsuke.Kawaguchi@Sun.COM.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319625 13f79535-47bb-0310-9956-ffa450edef68"
4b68e53e7b7f31ae854984d8351a7c7b2626882c,"Fix for #25347. Thanks to kohsuke.kawaguchi@sun.com for identifying and fixing the same.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319629 13f79535-47bb-0310-9956-ffa450edef68"
4955afce1afc84d9239927f1d5d8196ac93eed8c,"The default values for HTML/XHTML system IDs and public IDs were
out of date (reported on xerces-j-dev by Michael Smith). The old
location for the XHTML DTD is actually a broken link.

Replacing these out of date system/public IDs with valid pairs. The
user has always been able to override them in the serializer and
they are still able to if they do not like the default values.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319632 13f79535-47bb-0310-9956-ffa450edef68"
13be097099d2ee0bddb0a07b9a38e6093011b89f,"Fixing Bug #6878:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=6878

The root element of an XHTML document is 'html' [1] and so the
DOCTYPE should be declared as such.

[1] http://www.w3.org/TR/xhtml1/#strict


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319633 13f79535-47bb-0310-9956-ffa450edef68"
7e478c6e89050435fb7ad89d9f1c09ead4703d2b,"Fixing a potential threading problem in schema duration data type.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319634 13f79535-47bb-0310-9956-ffa450edef68"
1608483832741a4f1751f83c33b178179ce9dddf,"Bad names used in my previous commit. Fixed now.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319635 13f79535-47bb-0310-9956-ffa450edef68"
120a1f1ea8b4b089ac93c0d400c1c45de62eb08f,"Fixing Bugs 24886, 25571, 25572 and 25573.

24886 - Names in XML 1.1 are now allowed to contain supplemental
characters. Support for this was missed from the implementation.
We need to check for surrogate character pairs in all names.
Reorganzied the order of checks in the dispatchers so that we do
checks for regular name characters early and then as a last check,
check for high surrogates of name chars. We should now be able
to determine the well-formedness and validity of names containing
supplemental characters. This should also fix some of the 1.1
support in DOM Level 3.

25571 - An internal buffer wasn't being cleared which caused
attribute values containing supplemental characters to become
corrupted.

25572 - Supplemental characters were being rejected in comments
in XML 1.0 and 1.1 documents.

25573 - Root elements whose names start with any 1.1
NameStartChar were being rejected. We didn't have the proper
hook in the base class for the 1.1 document scanner.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319636 13f79535-47bb-0310-9956-ffa450edef68"
61fe2fe5cd4f8a05c16ab3f715a1a7b0f225babb,"Fix for bug 25577. Thanks to Kohsuke for finding the bug and submitting the patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319637 13f79535-47bb-0310-9956-ffa450edef68"
d33815d2649ae574ed937934a83932490a23c1b3,"Fixing a bug in the last commit. When we're scanning a long
QName and we need to resize or copy down, we also need to
adjust the index of the ':' if we found one.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319641 13f79535-47bb-0310-9956-ffa450edef68"
d8be3b1b1e87113c5d1cf8b3558ca01a314428dc,"Fix DOM Level 3 Load and Save /Core implementation bugs, i.e. hasFeature, getParameterLists, make sure we pass
stringData from LSInput, etc.
Thanks to Neil Delima for fixing several of those bugs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319642 13f79535-47bb-0310-9956-ffa450edef68"
372ca2d50371b0bd3554593195503fce6e246c03,"Update copyright.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319643 13f79535-47bb-0310-9956-ffa450edef68"
a44946b2b85933bae3d868d0d2d23fc7cc5c4361,"Update copyright for documentation footer -> 1999-2004.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319644 13f79535-47bb-0310-9956-ffa450edef68"
b2b2a9504e8505243c60e06b4f2b506a7aa1695c,"Update copyright info for API docs, etc... Also fixing 'usage' target.
The 'parser.Name' variable was not being initialized.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319645 13f79535-47bb-0310-9956-ffa450edef68"
9d1ba084210426c72d0c963d330c90be54ee45c8,"Fixing an edge case. We should reject PIs at the start of an entity
whose targets are of the form 'xml:foo' when namespace support
is enabled.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319646 13f79535-47bb-0310-9956-ffa450edef68"
af61ded79b48c36065d761cdfeb18e044037bbb7,"Report unsupported-encoding error when unknown encoding is specified.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319647 13f79535-47bb-0310-9956-ffa450edef68"
f420dd512968f644cb4406263ea8becf1ddb72d1,"Chaning mailid of Gerv on his request.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319649 13f79535-47bb-0310-9956-ffa450edef68"
808ce3e26b89edf7ef9c8dd66885b8bc809a6398,"Fixing bug 25200.
We added 2 kinds of schema components, but we didn't update the array
in the XSModelImpl.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319650 13f79535-47bb-0310-9956-ffa450edef68"
168eecca4cc9ac786b6caa51f0d0c69eb7044b9a,"Fixing Bug #22395:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=22395

Thanks to Eric Friedman for pointing out the errors in the documentation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319651 13f79535-47bb-0310-9956-ffa450edef68"
85e053c5254f49f77471e666fbe3891fcf45e06d,"Fixing bug 25723.
Allow leading ""+"" for values of min/max/length facets and min/maxOccurs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319652 13f79535-47bb-0310-9956-ffa450edef68"
17accbfc1bcdc98554172179c4181c4593809a05,"Fixing Bug #23768:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=23768

With the standard-uri-conformant feature enabled, if the user
has provided an input source without a system id the entity
manager should not replace it with the current working 
directory.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319653 13f79535-47bb-0310-9956-ffa450edef68"
aa3f48798f9c68e83d9578680fd7ace41cc700a9,"Apply patch submitted by Neil Delima. See bug #24667


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319654 13f79535-47bb-0310-9956-ffa450edef68"
6d70091dbf543d36fc92a367bd2c7dcdd75f4576,"Fixing Bug #26198:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=26198

Supplemental characters are allowed to appear in XML 1.1 names.
We weren't checking for surrogates so we were rejecting any
names that contained them. Instead of looping over the strings,
use XMLChar and XML11Char to determine if a name is well-formed.
This is better anyways. Reimplementing these checks elsewhere
in the code is error prone.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319655 13f79535-47bb-0310-9956-ffa450edef68"
2638af709c5422b0f1383415da44ead5b52312a0,"Update LSParser filter  impl according to the latest spec:
1. ""The document element is never passed to the LSParserFilter methods, i.e. it is not possible to filter out the document element""
2. ""The child nodes of an EntityReference node are passed to the filter if the parameter ""entities"" is set to false""


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319656 13f79535-47bb-0310-9956-ffa450edef68"
a26709a5d76e7728504ccaec5e83419e7d07555c,"Fixing bug #21859


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319657 13f79535-47bb-0310-9956-ffa450edef68"
9b0b8697bbceee1c9919ee66a1a3e4a8bc3b7036,"Schema erratum E2-35 and bug [25724].
This erratum allows length to be specified along with min/maxLength,
as long as they are at different derivation steps, and
minLength <= length <= maxLength.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319658 13f79535-47bb-0310-9956-ffa450edef68"
f4580c4d3ffb72c9b48ffc81c31db43ee244a87d,"Committing patch from Kohsuke Kawaguchi. Bug http://nagoya.apache.org/bugzilla/show_bug.cgi?id=25346.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319659 13f79535-47bb-0310-9956-ffa450edef68"
cd47485784202b92e3677a871a208c919475b15d,"Fixing Bug #24753. Patch submitted by Alex Milowski.
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=24753

Allow Xerces to be built on Mac OS X with Apple JDK 1.4.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319660 13f79535-47bb-0310-9956-ffa450edef68"
3b909c6c7c5b7d06fa975731656b75bbe17f4b2c,"Improve performance of getType. To determine if we're looking
at an enumerated type it is sufficient to check that the first char
is a '('. If it is a '(' then it cannot be anything else.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319661 13f79535-47bb-0310-9956-ffa450edef68"
05ccddbdbfe73af4c411621a7512b290cd0d11ee,"Fixing the remainder of Bug #18785:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=18785

White space characters aren't allowed to be in front of the
scheme portion of a URI even if they are escaped.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319662 13f79535-47bb-0310-9956-ffa450edef68"
9e95faea247a513543daaa7480b36cdf7eb834ce,"For backwards compatibility, trim whitespace before passing a
system id to the URI class to read (when standard-uri-conformant
feature is false).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319663 13f79535-47bb-0310-9956-ffa450edef68"
c11d736f023db6edc6a0b33557c15dd95f4f0b38,"Fixing bug [24783]: an ArrayIndexOutOfBoundsException.
Wrong counter was used as the array index.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319664 13f79535-47bb-0310-9956-ffa450edef68"
03e52c1ce6a7884d84b5cbf80a9f80011c05fb65,"Fixing a bug in the schema anyURI implementation.
Now we accept special characters and non-ascii characters in anyURI values.
This partially fixes bug [18803].


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319665 13f79535-47bb-0310-9956-ffa450edef68"
1d264fc6b39a23ca149d9a437f68d164b5316f63,"Redistributing code for content negotation.

We were reading the URLConnection to early.  We cannot set 
those parameters in XIncludeHandler because we may lose some
information if we process the URLConnection and then open a stream.  

The parser needs a URLConnection to follow HTTP redirects and may 
also need this object in the future to read external 
encoding information which may be available in the Content-Type.
We may also need to read the URLConnection to determine
the encoding of a text include.

Also fixed a bug involving the case of the attributes on the include
element. Accept-Language -> accept-language.

REVISIT: If we're going to support content negotation for
parse=xml we need to find a clean way to propogate the
parameters to the child parser.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319666 13f79535-47bb-0310-9956-ffa450edef68"
19437fdcf2ebf7a8d6486ba3e74e80df38a7ef2e,"Update copyright and remove some unused imports.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319667 13f79535-47bb-0310-9956-ffa450edef68"
c46e235968c30c0ec20f046941bc6df0e6122b9c,"Update Xerces features and properties arrays. XInclude uses
these to copy the configuration to a child parser. It was
missing several of them.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319668 13f79535-47bb-0310-9956-ffa450edef68"
82df306acacb200b95d4c78961ff6733d7d9e2b8,"Fixing a few bugs. We weren't propogating the parent parser's
entity resolver or security manager to the child parser.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319669 13f79535-47bb-0310-9956-ffa450edef68"
a01f74ccb6198e71d3353e184ff19331c3bd6b67,"Fix possible security hole by propagating security features and properties that are
set on the parser to the XSDHandler.
Reorganize the code so that reset is done in a consistant maner independenly on how
the XMLSchemaLoader was created : it can be either created by a user or by XMLSchemaValidator.
Make sure that all properties (in particular entity-resolver) are passed correctly between
XMLSchemaLoader and XSDHandler.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319670 13f79535-47bb-0310-9956-ffa450edef68"
739a64a4b10c10c3079b362316ecc50636449355,"We're required to report ""http://www.w3.org/2001/XMLSchema"" as the type 
for XML schema as per the DOM L3 LS CR. Since we don't have a type field
on the resource identifier, we can check that the identifier is grammar
description and then get its type.

http://www.w3.org/TR/2003/CR-DOM-Level-3-LS-20031107/load-save.html#LS-LSResourceResolver


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319671 13f79535-47bb-0310-9956-ffa450edef68"
62fdc3ffd575d084199d48b6f86ae4d40e1ed9c3,"Putting the change for schema errata E1-16 back in.
publicId attribute is now optional on notation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319672 13f79535-47bb-0310-9956-ffa450edef68"
f18f52ac890b008077b60f43a48cd1c80a677a25,"Use equals() instead of reference comparison.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319673 13f79535-47bb-0310-9956-ffa450edef68"
6e9e5ee5e23b72625229b5fbc0124d9e01bf240b,"Adding @version field to some files which were missing it.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319674 13f79535-47bb-0310-9956-ffa450edef68"
a53d2fe07af45770b497413de7bedbc8ad724994,"Updating XInclude documentation. Added FAQs on content
negotation and the old 2001 namespace.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319675 13f79535-47bb-0310-9956-ffa450edef68"
07d6b419b3be45f762e303a01c04b0e739dba341,"Fixing some typos from the last commit.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319676 13f79535-47bb-0310-9956-ffa450edef68"
876563163d0ce4b43b966185cde53addc3236db8,"Fix minor bugs in well-formness implementation, e.g. report errors on '--' in comments.
Optimize well-formness checks for attribute values, cdata sections, text nodes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319677 13f79535-47bb-0310-9956-ffa450edef68"
9bfd13580068502444f6dc7a2cabd4898d0117a8,"Updating the release doc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319678 13f79535-47bb-0310-9956-ffa450edef68"
3257359080647ec870922bb585fd73f2247ec1b5,"Fixing Bug #24579:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=24579

XML 1.0 SE - E27. According to Unicode 3.1 conformant UTF-8
interpreters must reject non-shortest form byte sequences.
Some examples are C0 80 and E0 80 80, bothl corresponding
to codepoint 0.

Extra checks are required for all multi-byte sequences. Currently
this is done with anding the bytes with a mask. We should revisit
this code to check whether it would be faster to check the value
of the character after the bytes have been combined.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319679 13f79535-47bb-0310-9956-ffa450edef68"
6d3ee85efc7f1d08fc1b6f1f63880d05629459cd,"Performance improvement.

Tighten necessary bounds check for isSpace. Considering
that the highest character in S in is 0x20, if we tightened 
the bounds on these methods we could avoid doing a 
lookup in the table some of the time (and actually all of the 
time for XML 1.0 documents when we're not actually 
looking at a space). Note that in XML 1.0 all allowed 
characters <= 0x20 are spaces (TAB, LF, CR, SPACE). 
Everything else isn't well-formed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319680 13f79535-47bb-0310-9956-ffa450edef68"
b9997675026646bf47f628bbf48ed538942b597e,"XML Commons Resolver 1.1.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319681 13f79535-47bb-0310-9956-ffa450edef68"
73f3bbd4dbeb2e919dc1c886b283a3b311293117,"License for XML Commons Resolver.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319682 13f79535-47bb-0310-9956-ffa450edef68"
a55c19c90d195be5cbc462875dbbf08c5e555679,"Adding the resolver to the build.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319683 13f79535-47bb-0310-9956-ffa450edef68"
22874e6d694a5e7635eefe9527801d91939bc17a,"A resolver which supports OASIS XML Catalogs. It implements
both XNI and SAX entity resolvers and allows users to extend
the class to override the methods from these interfaces. This
class encapsualtes the XML Commons resolver.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319684 13f79535-47bb-0310-9956-ffa450edef68"
20cf720449f6d58d75086eff73756ec4881c840b,"Fixing up javadoc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319685 13f79535-47bb-0310-9956-ffa450edef68"
2fbeb759ec3e832cd82d82adb978711bd2f09cd5,"Fixing a javadoc warning. @version had no value.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319686 13f79535-47bb-0310-9956-ffa450edef68"
678f108f09b8357b9b45047ce243102ac3329984,"Some revisions... Reworded some of the text. Also
hrefs have changed from IURIs to IRIs in the latest WD.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319687 13f79535-47bb-0310-9956-ffa450edef68"
5c47a9fe6dbdb71d89292dae999e9056fd23efd0,"Fix a bug in full-schema checking. When validator loads the schema the full checking on the grammar
should not be done during loading, instead validator will do it. If schema pre-loaded (by user or via JAXP) the full checking
should be done.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319688 13f79535-47bb-0310-9956-ffa450edef68"
af6de985afa72e170861ed95e70ea2bcb4224bb1,"Update following the latest changes to the draft


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319689 13f79535-47bb-0310-9956-ffa450edef68"
f683e9c25ecf9d7b9047b06c806e82b7e21193d5,"Update following the latest changes to the LS draft


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319690 13f79535-47bb-0310-9956-ffa450edef68"
bc01e3dcf7f13f63a95b83801153271a48e0b07f,"Committing Neil Delima patch: http://nagoya.apache.org/bugzilla/show_bug.cgi?id=26385


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319691 13f79535-47bb-0310-9956-ffa450edef68"
4fa508149c6934325d5ebf5b8e8ffec9065579c6,"Fixing Bug #26157:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=26157

We were actually only processing system dependent file paths.
Now the serializer does something more correct though we
cannot yet handle file URIs containing %nn escape sequences
including %20 (space). Added support for writing to HTTP
URIs using PUT method as specified in DOM L3.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319692 13f79535-47bb-0310-9956-ffa450edef68"
12386a7c915db5c33d493a8f401cf00467317616,"Update copyright.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319693 13f79535-47bb-0310-9956-ffa450edef68"
39cfbdc68e787bf059e4bc3d13cafb1ddcf81934,"Fixing DOM tests. getConfig is now getDomConfig.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319694 13f79535-47bb-0310-9956-ffa450edef68"
31754fe1a24a724ea78442a7bc092765b00a9503,"Fixing DOM samples. getConfig -> getDomConfig.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319695 13f79535-47bb-0310-9956-ffa450edef68"
5c2a3558f3ec1bc26a6a04c8ffde242f7e9512f9,"Reducing creation of short lived objects. Many of the
check/get/set-feature/property methods call String.substring
creating objects are only used a few times to compare against
other strings.

Instead of creating substrings we call regionMatches
instead to match the feature/property suffixes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319696 13f79535-47bb-0310-9956-ffa450edef68"
aacbba39f5dbd01c43b10abf75b70f9b42cac473,"Fixing a bug in the last commit. If the suffix of the feature/property
id is longer than the suffix we're testing we'll accept it if the region
we're testing matches. We should only accept if it's truly equal.

Use endsWith instead and make sure the length of the suffix
actually equals the length of the suffix of the id.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319697 13f79535-47bb-0310-9956-ffa450edef68"
864d5de61a1be03c2eab61c9bea493a69750583a,"We need to use the EncodingMap to translate IANA to 
Java encoding names. Set a byte stream on the serializer
instead of trying to create an OutputStreamWriter. The
underlying serializer will do that for us and do the 
encoding map lookup.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319698 13f79535-47bb-0310-9956-ffa450edef68"
810d593e967c8be965de807891d28b7c9d1b8cf6,"Prepare for Xerces 2.6.1.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319699 13f79535-47bb-0310-9956-ffa450edef68"
415ed76d1e73dfedd5a4ca9e261dddfe557dc7ba,"Improve performance of attribute value normalization for XML 1.0
documents.

Check if each character is < 0x20 instead of calling XMLChar.isSpace.
This simple check against 0x20 is safe because at the point we 
normalize the attribute value we've determined that it is well formed, 
and therefore if we're looking at anything less then 0x20 it must be 
TAB, LF or CR. This would avoid a method call and table lookup and 
allow us to skip over 0x20 which doesn't require further normalization.

Since this doesn't work for XML 1.1 docs since control chars are
allowed in them add the old method to the 1.1 scanners.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319700 13f79535-47bb-0310-9956-ffa450edef68"
693912e4e252ca683150eb66fc8187a7109b6636,"Update installation document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319701 13f79535-47bb-0310-9956-ffa450edef68"
c6eeeb7820e18bc0dfa333711e707569fc74d4d4,"Fixing an NPE. See REVISIT comment.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319702 13f79535-47bb-0310-9956-ffa450edef68"
b144d750e2f82e2c412107b40783c13695d07903,"Add an FAQ for XML Catalogs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319703 13f79535-47bb-0310-9956-ffa450edef68"
836d020d63ddc525fe840b1573f1554d2d7fc0be,"Fixing some typos.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319704 13f79535-47bb-0310-9956-ffa450edef68"
33a3376224cf87100923d06f85e00f95ec994f50,"Improve language.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319705 13f79535-47bb-0310-9956-ffa450edef68"
32b4163b1b42f9f2012b1b34c573cb97eb0c7eda,"Refer consistently to the XML Schema API and reference
the specification posted on the W3C site.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319706 13f79535-47bb-0310-9956-ffa450edef68"
81638fc228893657cfa5e113061c9e6733f55457,"Updating the release doc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319707 13f79535-47bb-0310-9956-ffa450edef68"
59a2475571bdd723494bfa6d9311437d1045ff3b,"Add description for Xerces 2.6.1.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319708 13f79535-47bb-0310-9956-ffa450edef68"
f8964642091a9bc502bc09ed3dc84d41e3ca82eb,"Reducing creation of short lived objects. The debug print
method calls were creating instances of StringBuffer
and String which are never read.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319711 13f79535-47bb-0310-9956-ffa450edef68"
99d02f6bc52fed0461cf33e3e9360ffeb7470a9d,"Update readme.xml for Xerces 2.6.1.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319712 13f79535-47bb-0310-9956-ffa450edef68"
bd10f1fcfbe13e58a6af4e71872c1ae12257ed22,"Add a note which specifies that 2.6.1 will be the
last release to support JDK 1.1.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319713 13f79535-47bb-0310-9956-ffa450edef68"
c395422c3bfdf5821c24195f4ae1cb4076603211,"Add a new public key.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319714 13f79535-47bb-0310-9956-ffa450edef68"
988f21da73f21135e4409233a870c05d74d8548c,"Fixing a bug which caused the DOM parser to throw out
text preceeding a CDATA section when deferred DOM
is off and we're not creating CDATA nodes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319715 13f79535-47bb-0310-9956-ffa450edef68"
ab2675c1bb00888acf99cb484b674ca5dd25f0e3,"Fixing Bug #26472:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=26472

We cannot assume that fSawFallback, fSawInclude and 
fState are the same length. Their sizes are not synched
so it's possible on reset that we would throw an AIOOBE.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319716 13f79535-47bb-0310-9956-ffa450edef68"
6b7b1df74221600395b42150e617333aaf269987,"Schema errata E1-52, E1-53, E2-56.
The types of some attributes in schema documents were changed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319717 13f79535-47bb-0310-9956-ffa450edef68"
0230dd0b18ff73ed9e86febea6447632dcd1ecb4,"Fixing some broken tests.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319718 13f79535-47bb-0310-9956-ffa450edef68"
64925351e39ee879de95efefa51a3f9840fca16f,"Fixing build for DOM L3 for new tests


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319719 13f79535-47bb-0310-9956-ffa450edef68"
e34c30067792095949dfcda7c9d76402ebd78db8,"According to the DOM Spec Attr.setValue(..) method is not supposed to
raise any NamespaceErr exceptions.

The Element.setAttributeNS method clearly states the cases in which
namespace exception is thrown and null or empty string value for xmlns
declaration is clearly not suppose to trigger any exceptions:
[[
NAMESPACE_ERR: Raised if the qualifiedName is malformed per the
Namespaces in XML specification, if the qualifiedName has a prefix and
the namespaceURI is null, if the qualifiedName has a prefix that is ""xml""
and the namespaceURI is different from
""<http://www.w3.org/XML/1998/namespace>"", if the qualifiedName or
its prefix is ""xmlns"" and the namespaceURI is different from
""<http://www.w3.org/2000/xmlns/>"", or if the namespaceURI is
""<http://www.w3.org/2000/xmlns/>"" and neither the qualifiedName nor
its prefix is ""xmlns"".
]]


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319720 13f79535-47bb-0310-9956-ffa450edef68"
7c22291fb5328a6386fe8e7e4792ed69277141eb,"Support the 'infoset' parameter for the DOMConfiguration of
LSParser. By default the value of this parameter is true which
implies that all of (namespace-declarations, well-formed, 
element-content-whitespace, comments, namespaces) must
be true and all of (validate-if-schema, entities, 
datatype-normalization, cdata-sections) must be false. These
parameters must be set to these values when we create the
parser.

Some bug fixes:
- False was not supported for 'cdata-sections'
- canSetParameter was reporting that disallow-doctype
could not be set to false.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319721 13f79535-47bb-0310-9956-ffa450edef68"
44baa3a9784dd64f384a2e475c494425bd5fc958,"cleanup


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319722 13f79535-47bb-0310-9956-ffa450edef68"
6806d3cb195351286a0e3d3fdfdd57b34738f02c,"Add LSException per latest change to the draft


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319723 13f79535-47bb-0310-9956-ffa450edef68"
700224e38157688c227d4269376614e4f6c28ae7,"Cleanup


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319724 13f79535-47bb-0310-9956-ffa450edef68"
8426b47f0dfe8d885451934eac50ecc8e3b00c4b,"Let DOMMessageFormatter also support reporting XML messages (needed for well-formness check).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319725 13f79535-47bb-0310-9956-ffa450edef68"
fa99bbac3d24fae089366a2fcc9510ceef0cac0e,"Some cleanup as well as making methods for well-formness check public, to allow serializer to
access those methods (LSSerializer needs it for ""well-formed"" checking).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319726 13f79535-47bb-0310-9956-ffa450edef68"
546f416633ed944307d047af867715947693cfc1,"Adding support for ""well-formed"" and ""infoset"" features for serialization. Currently,
""well-formed"" features is implemented inefficiently -- we walk the tree twice, in the future
we should perform well-formness checking as we serialize the tree. Fixed some minor bugs
in hangling ""cdata-sections"" and ""entities"" features.
Reorganized code in DOMSerializerImpl on how to handle parameters. The code still needs more work:
we need to try consolidate different configurations impls (for serializer, parser, core normalizeDocument).
Added new LSException for write* methods.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319727 13f79535-47bb-0310-9956-ffa450edef68"
648be33a95ddaddace7d457bb858e7842538b40c,"Support 'infoset' parameter in DOM core. Also fixing a bug.
We don't currently support setting element-content-whitespace
to false so we should be reporting that it isn't supported.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319728 13f79535-47bb-0310-9956-ffa450edef68"
83675c59a5dc1dc082dad54397e3135281f6fc8a,"Fixing Bug #26437:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=26437.

When the schema loader is used for preparsing schemas we
weren't attaching a message formatter for the schema
domain. We also weren't using the user's error reporter.

Thanks to Lucian Holland for providing this patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319729 13f79535-47bb-0310-9956-ffa450edef68"
88917383671dfac57775a93a983ff99feb7f3eaf,"Update DOM L3 docs.

In core, true is supported for the infoset parameter.

whitespace-in-element-content is now element-content-whitespace.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319730 13f79535-47bb-0310-9956-ffa450edef68"
47b5876ae7e0c8484495726d4aa3ea28ffd0237d,"Get appropriate DOM implementation for PSVI implementation


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319731 13f79535-47bb-0310-9956-ffa450edef68"
fb70ae3dd9f7b1f1491d9881b4e7739a19468b03,"Add more information on XML Schema API


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319732 13f79535-47bb-0310-9956-ffa450edef68"
13510297d9f36b0b62209cb84f1933b9f22f1682,"Update dom docs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319733 13f79535-47bb-0310-9956-ffa450edef68"
efc716cf3eec91f6332b219d83443fa5dccc3fd9,"Fix some missed feature support


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319734 13f79535-47bb-0310-9956-ffa450edef68"
20759036a02a757921220fba75380032f3d31190,"Updated release docs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319735 13f79535-47bb-0310-9956-ffa450edef68"
11bf769fa0804e891e18695229879a305873857b,"Adding a note in the doc to indicate that we've deprecated the old form of
gMonth (which is --MM--) and will discontinue support for it in a future release.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319736 13f79535-47bb-0310-9956-ffa450edef68"
01327322ede41766d883fc4342b038329a448015,"Fixing some typos and formatting of code samples.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319737 13f79535-47bb-0310-9956-ffa450edef68"
2b8d7d9768c955d507a46209dffdedec85acc767,"Removing byte order mark.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319738 13f79535-47bb-0310-9956-ffa450edef68"
fbf89bda78d181964404bfe0c6be210e6bc6fd83,"Fixing a link.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319739 13f79535-47bb-0310-9956-ffa450edef68"
b9be0a0bd17efb24c8f878f17d8555bd6909b006,"Adding an anchor to FAQ about other catalog formats.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319740 13f79535-47bb-0310-9956-ffa450edef68"
cc0170043854b7e9c09eee8dfa48ba3624edae89,"Add well-formedness checking in LSSerializer to list of
changes from the previous release.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319741 13f79535-47bb-0310-9956-ffa450edef68"
a1918855a84ece0bd840e8db401e033f857f347e,"Fixing bug [26480]: when a child element matches a strict wildcard and there
is no corresponding global element decl for it, it's an error on the parent
element, not the sub-element itself.

Another bug is also fixed: when a sub-tree is skipped, for its root, we don't
need to push context for the xsi error reporter. No error will occur (because
it's skipped), and because we don't pop context at the end, push/pop won't
be in sync.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319743 13f79535-47bb-0310-9956-ffa450edef68"
65d90890417bcbc76140a48a09881cd6e541a2c0,"Expose more information from the implementation of XSModel:
1. Whether this XSModel contains any IDC.
2. To get the substitution group for a give element declaration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319744 13f79535-47bb-0310-9956-ffa450edef68"
df5f02d3094a70997c3d99b1716f4b3c1e466734,"Fixing a potential NPE.
When there exist empty particles, it's possible for other parts to get NPE when
they try to access such particles. Now all empty particles are removed from
the model group that contains it.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319745 13f79535-47bb-0310-9956-ffa450edef68"
3003603d73e93f221b0a9e37f37db1ac17f28ad8,"Improve performance of the initialization of the
character flag arrays for XMLChar and XML11Char. 
Although these arrays are always the same we were 
building them dynamically.

Created some new utility classes for generating a
more efficient initialization of these arrays. These
generators should be used again if XMLChar or
XML11Char need to be updated. The generated
code uses java.util.Arrays (from JDK 1.2) to
fill chunks of the array with the same value. This
is similar to the C library's memset.

This should significantly improve class initialization
for XMLChar and XML11Char which is important
for applications who care about faster startup and
it is also important if these classes are garbage 
collected and reloaded several times.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319746 13f79535-47bb-0310-9956-ffa450edef68"
554500937642686fa491a2eb5effce6a1e556712,"Fixing 2 bugs and improving performance.

Bug #1: With namespace support turned off the parser
emitted prefix mappings for the XML namespace 
http://www.w3.org/XML/1998/namespace and the 
XML namespace declaration namespace 
http://www.w3.org/2000/xmlns/ for every element. It
shouldn't emit these ever, especially when namespaces
are off. This had been broken since Xerces 2.3.0.

Bug #2: With namespace support turned off the SAX 
parser was removing attributes named 'xmlns' from an
attribute list even though this is just a regular attribute 
when namespace support is not enabled. It seems like
this bug was always been in Xerces2. Probably nobody's
noticed it because it's unwise to name a regular
attribute 'xmlns'.

Performance Fix: The parser always iterated over the list
of attributes on startElement to either remove all namespace 
declaration attributes, or remove their namespace URI and 
localname if the namespace-prefixes feature was on. This 
search even occurred when namespace support is off. We
now check whether there are local namespace declarations
by querying the namespace context to prevent looping over
the list if we don't have to.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319747 13f79535-47bb-0310-9956-ffa450edef68"
77c9bdb8d0dbdbaa749ee45d1b9be54fb1963294,"Add serialVersionUID to PSVI DOM classes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319748 13f79535-47bb-0310-9956-ffa450edef68"
8865f6eefd0e57badacc81f4afa1e022ac392f8b,"Some clean up:

- Access static method isXMLName in a static way.
- Removing unused import.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319749 13f79535-47bb-0310-9956-ffa450edef68"
3996e70edaae87a70e4af2b5aef18b1fd2c283ba,"Remove unused import.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319750 13f79535-47bb-0310-9956-ffa450edef68"
dc3a396326018a3b77271417f694a2817d950751,"Eliminate compiler warning. We shouldn't be appending char[] to a string.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319751 13f79535-47bb-0310-9956-ffa450edef68"
942742570e6cb3ca22e84a08eb5640561a75e458,"Remove unused import.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319752 13f79535-47bb-0310-9956-ffa450edef68"
4fb4ddda388153ba04985d5d1f3fc641e1dd9bf8,"At the moment we do not support object serialization
of grammars so a user cannot serialize a DOM
containing PSVI. Adding readObject/writeObject
methods which explicitly ban serialization of PSVI
DOM. These must be removed once we support
grammar serialization.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319753 13f79535-47bb-0310-9956-ffa450edef68"
48e3a0deccbbca7a9c63b75961e6111b9f36728c,"Finally... Localizing messages for SAX. Created a new
message formatter for SAX messages and replaced
all the clear text with message keys.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319754 13f79535-47bb-0310-9956-ffa450edef68"
d3e382395d06fbfb96d4c32ad60cb9afcee498cd,"fixed a bug in the XPath parser where it accepts malformed XPath. Also simplified the parser a bit


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319755 13f79535-47bb-0310-9956-ffa450edef68"
3d058ea225c52e596c917272de67daf0b341410a,"rolling back from 1.10 to 1.9


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319756 13f79535-47bb-0310-9956-ffa450edef68"
a5dc288f70829aba64591e8a5f77cb74f9b962bf,"fixed the regression problem reported in 1.9 by Elena


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319757 13f79535-47bb-0310-9956-ffa450edef68"
09ecdf64fb06f24c5d270805e3420ed0c16dbb7a,"fixed a problem in the XPath matcher where XPath like 'a/.' causes the matcher to fail to identify the match. I think the fundamental problem here is that the XPath class is unnecessarily generic, so we should probably cut it down so that it only handles the XML Schema subset of XPath.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319758 13f79535-47bb-0310-9956-ffa450edef68"
711678178b93933375c4d3bf3802b1efb555b7ab,"Reuse StringBuffer


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319759 13f79535-47bb-0310-9956-ffa450edef68"
a98db6ea80b4d7fed2468673a870d190f30918fc,"Commit the patch from Neil Delima:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=26812


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319760 13f79535-47bb-0310-9956-ffa450edef68"
1310bd59e9cd3ac5c4372b1578c7ebb2115b6f9b,"Localizing another message and fixing a few bugs. We were
looking up messages from the wrong message domain.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319761 13f79535-47bb-0310-9956-ffa450edef68"
678ddbafa4dd9b093dafafd5143ee8f655fc8e9d,"Localizing DocumentBuilder messages.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319762 13f79535-47bb-0310-9956-ffa450edef68"
53d5cbdc229c57eaaa12c06ac09ff8d0adf783a9,"fixed a bug in the identity constraint handling where the actual type of the element was ignored


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319763 13f79535-47bb-0310-9956-ffa450edef68"
a2cef263592e8909e79eb0b5fdd30e9182380a6b,"Performance: Replace some Vectors with unsynchronized
ArrayLists.  We don't require thread-safety in our
configurations so this should speed us up a bit on reset.

Revisit for replacing Hashtables with unsynch'd 
Hashmaps. Hashmaps allow null entries so we need to 
be careful in how we use them.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319764 13f79535-47bb-0310-9956-ffa450edef68"
a304303f19bf497b637a534aab2e9958be3c1f80,"Some cleanup.

Removing some unused parameters from the method
signature of scanAttributeValue.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319765 13f79535-47bb-0310-9956-ffa450edef68"
b7011c5f3399718a70d937643eb6dfbd8253b9d3,"Fixing a bug in XML Serializer -- CDATA sections were automatically 
converted to Text; entity references were expanded.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319768 13f79535-47bb-0310-9956-ffa450edef68"
d1f26283a6157e362eb876c0fc1fe0df3740ff29,"Per latest LS draft, attribute nodes must be passed to a filter.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319769 13f79535-47bb-0310-9956-ffa450edef68"
ef90b95db8144c59374ca52b8e5faf142fa696ec,"Fixing Bug #26893:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=26893

The infoset parameter was missing from the list of parameters
which can be set both to true and false. This is fixed now
thanks to the patch from Naela Nissar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319770 13f79535-47bb-0310-9956-ffa450edef68"
3a3160679c8fce68e652061dbc4bc70b987845d4,"Fixing behaviour for interrupts and abort. We were
throwing a RuntimeException to stop parsing but
this bubbled up to the user. Instead throw a
unique instance of RuntimeException and consume
it in the parse methods.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319771 13f79535-47bb-0310-9956-ffa450edef68"
f7be0894ce6b5f2859f3eee456c3f7d263b72764,"XML 1.1 has gone to rec, and DOM L3 has reached PR.
Updating the docs to reflect this.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319772 13f79535-47bb-0310-9956-ffa450edef68"
ca8514d5c9710017584511f6829684c8771c08b0,"DOM L3 CR -> PR. Updating references.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319773 13f79535-47bb-0310-9956-ffa450edef68"
4dbe7c61601e087e257a1a062bdbe681dec88d57,"Committing documentation patch from James Littlejohn.
Thanks James.

- Added a new SAX section
- Added a SAX FAQ
- Moved some FAQs into the SAX FAQ


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319774 13f79535-47bb-0310-9956-ffa450edef68"
f4771b347cb7e40804cc1cd145658520ecaa7ba7,"Some changes to the intro sections for SAX and DOM.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319775 13f79535-47bb-0310-9956-ffa450edef68"
6343b1afe25dfcc65f9c9b2eb81e7a2dc0b656cb,"Improving language in a few FAQs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319776 13f79535-47bb-0310-9956-ffa450edef68"
4e340bdfb908ac870a849f14d128a72437a82c83,"Preparing for Xerces 2.6.2.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319777 13f79535-47bb-0310-9956-ffa450edef68"
d6a5e41faa810ee459875e48e0ff7bbeb3c6779f,"Deprecating HTML/XHTML serializers. Also, fixing long standing Bug #2248. Have had this fixed locally for almost a year, might as well apply it.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319778 13f79535-47bb-0310-9956-ffa450edef68"
f6bfcc9fca4c73815749826a61a7de81bf5556be,"Fixing Bug #26960:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=26960

Applying (slightly modified) patch from Curt Arnold.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319779 13f79535-47bb-0310-9956-ffa450edef68"
79959206fd30798d61daa494bb554d2084c31c30,"Bug #26613. Making code consistent with startDocument by checking for default document class name.
This is the right thing to do since we load DocumentImpl statically.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319780 13f79535-47bb-0310-9956-ffa450edef68"
54415e5568c330be2b232d99d4914a449e9ac106,"We should be extending the default configuration: XML11Configuration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319781 13f79535-47bb-0310-9956-ffa450edef68"
4e3ef8ccbcadea845b9c29301951429cdb287d73,"Fix a bug in the documentation for the API (sync. up with implemenation of this API)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319782 13f79535-47bb-0310-9956-ffa450edef68"
89349914408b9f49a37c0249add6db45e6537061,"Aligning serialVersionUID with the hash from Xerces 2.0.0.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319783 13f79535-47bb-0310-9956-ffa450edef68"
ab05ac05f6ac010e031ba0593ee821fb269c9578,"Add FAQ on why the parser reports no namespace for xmlns attributes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319784 13f79535-47bb-0310-9956-ffa450edef68"
3b68c057cdc3b6519c87227c421a0344788d7fc6,"Some improvements. If the document class name is our PSVI
implementation don't go through ObjectFactory. Load it with
the current classloader like we do for DocumentImpl. Also,
made some minor performance fixes. If we're loading some
other Document implementation only lookup the classloader
once instead of three times.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319785 13f79535-47bb-0310-9956-ffa450edef68"
7f1b7db3a3a7342292635bd2e98d20a7039ea9f4,"PR:
Obtained from:
Submitted by:
Reviewed by:
ObjectFactory was designed to be package private. Putting copy of ObjectFactory and related classes in the sub packages. This class
  exposes class loaders and other sensitive data directly which is security concern. directly which is security concern.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319786 13f79535-47bb-0310-9956-ffa450edef68"
162fde9ced81237ff93f17ae56427bc6b226e531,"Add an FAQ which describes all of our available parser configurations.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319789 13f79535-47bb-0310-9956-ffa450edef68"
c75f90a1fe9e5785153da8c0ff76291cf39a3c9a,"Small doc fix. This class extends XML11Configuration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319790 13f79535-47bb-0310-9956-ffa450edef68"
dbf055262ba85fcdedfa75fbc9357f0da51a0788,"Add FAQ on JDK compatibility.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319791 13f79535-47bb-0310-9956-ffa450edef68"
a60ec647553464ab2989ca2a8223c48ddd3b27fa,"Fixing Bug #27087:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=27087

Andy noticed we were reporting null for an empty string
prefix in endElement. We weren't updating the prefix
for the QName on the element stack.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319792 13f79535-47bb-0310-9956-ffa450edef68"
867ae56c8897e5c26b2d900817940e29c729f384,"Adding FAQ on Java Object Serialization.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319793 13f79535-47bb-0310-9956-ffa450edef68"
6e2ae441eef4f4f53f469b3463deae55b6f760dd,"Adding FAQ on ignorableWhitespace and XML Schemas.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319794 13f79535-47bb-0310-9956-ffa450edef68"
b3425634e906004309ab981b3938d2797720d650,"Update release doc for Xerces 2.6.2. Adding Lucian to 2.6.1 
release notes for fixing bug #26437.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319796 13f79535-47bb-0310-9956-ffa450edef68"
1238a36312265f4ed107f3994b95bd6efd2bc144,"Updating readme for Xerces 2.6.2.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319797 13f79535-47bb-0310-9956-ffa450edef68"
77833c6440c3b8f74e2d9c7a68c146b34d118304,"Add FAQ on Xerces serializers and classloaders


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319798 13f79535-47bb-0310-9956-ffa450edef68"
2374aaf76c2a7dd2301a0ef06d673a0a9a400cbc,"Explain documentation fix for XML Schema API


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319799 13f79535-47bb-0310-9956-ffa450edef68"
c588e448badcf6782846e898188e3623348486b8,"Fixed some typos. Also we should be using link instead of jump
for internal references.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319800 13f79535-47bb-0310-9956-ffa450edef68"
63b08025facf90635cf225b6cc11f453f057b54c,"Fixing Bug #27081:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=27081

Fixing a reset bug.

When the parser scans sequences of ']'
in character data it appends them to a buffer before reporting
them in case the section contains an illegal ']]>'. While in this
section a boolean is set indicating that content is being
scanned in case the current entity ends. This makes it possible
to flush the buffer to a characters call before calling endEntity.

If an exception occured in this section, this state was not being
reset on a new parse. The buffer to scan content is also used
to scan comments and a few other structures. While in this
broken state the parser would report anything currently in the
buffer as characters at the end of any general entity as well
as the document entity.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319802 13f79535-47bb-0310-9956-ffa450edef68"
0ee852910f1cd52acf6a14517a47a0d8e40596ca,"New Apache 2.0 license update.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319803 13f79535-47bb-0310-9956-ffa450edef68"
f7911a5aad69d0396becb3341198ed1c4b826446,"New Apache 2.0 license update.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319804 13f79535-47bb-0310-9956-ffa450edef68"
369d579d98a4ce5d2781e3d169b6b3ef991ec9c8,"New Apache 2.0 license update.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319806 13f79535-47bb-0310-9956-ffa450edef68"
5cc4cb32dc4535f6a54b7a8a138ef729f92d3bd7,"New Apache 2.0 license update.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319807 13f79535-47bb-0310-9956-ffa450edef68"
f736b04f0eedab7eaf0727d9738c74002fd4f301,"New Apache 2.0 license update.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319808 13f79535-47bb-0310-9956-ffa450edef68"
55eb42057bc02ca2de2d38ffe775f9eaa28425d2,"New Apache 2.0 license update.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319809 13f79535-47bb-0310-9956-ffa450edef68"
b581d1de17760bd791bea2d6b73b7bd29839c531,"Adding Apache 2.0 ""top level"" license.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319810 13f79535-47bb-0310-9956-ffa450edef68"
847ae99989b0950602ba224faed96d696b331351,"Link to 2.0 license. Also fixing a few typos.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319811 13f79535-47bb-0310-9956-ffa450edef68"
06698df7c95e0b82b8f1f6cd5c4e91e1ceb0825c,"Source files for documentation should include a license [1]. Adding
boilerplate copyright notice for Apache License, Version 2.0 to
all documentation source files with appropriate copyright dates.

[1] http://www.apache.org/dev/apply-license.html


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319812 13f79535-47bb-0310-9956-ffa450edef68"
86e91dfdf9006e7d736d2b222898b41f705f1432,"Adding license to some more files we distribute.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319813 13f79535-47bb-0310-9956-ffa450edef68"
0f77e10365070ddc62e7ef5649a804fabee8a4f5,"New Apache 2.0 license update.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319814 13f79535-47bb-0310-9956-ffa450edef68"
57a041c84bc2f968c3b85afce42b64fe12d1ba71,"removing a try-catch block that was masking RuntimeException in the user's code


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319815 13f79535-47bb-0310-9956-ffa450edef68"
32ab05dd74a3c72fb3823ccf717fb455a74be98e,"Fixing Bug #27264:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=27264

When the 'datatype-normalization' parameter is set to true, DOM
L3 core states that the 'validate' parameter is also set to true. We
weren't setting 'validate'. This is fixed now thanks to the patch 
from Naela Nissar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319816 13f79535-47bb-0310-9956-ffa450edef68"
281a05bdd6019a3252e41e8457ac6279b6754244,"Fixing a bug in getLexicalPattern. Many thx to Mike Boos for the patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319817 13f79535-47bb-0310-9956-ffa450edef68"
9db44759b3fd1acc5076eadbebb1c29799893118,"Adding a NOTICE file. Currently contains minimal text. It needs
to be filled in with attributions.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319818 13f79535-47bb-0310-9956-ffa450edef68"
58ea3f13b5cbd36ae002b476668d332fae610756,"Include NOTICE file in source and binary distributions.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319819 13f79535-47bb-0310-9956-ffa450edef68"
ad4c20668fd5f231bd836acae74c9538a97be7bc,"Adding NOTICE file to package descriptions.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319820 13f79535-47bb-0310-9956-ffa450edef68"
c142befb61e52fe4cf95c40bd1466d0d99b41900,"Fixing Bug #26685:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=26685

SAX requires that when an entity is skipped that it be reported
to ContentHandler.skippedEntity.

From the API spec for ContentHandler:
""The Parser will invoke this method each time the entity is skipped. 
Non-validating processors may skip entities if they have not seen 
the declarations (because, for example, the entity was declared in 
an external DTD subset). All processors may skip external entities, 
depending on the values of the 
http://xml.org/sax/features/external-general-entities and
the http://xml.org/sax/features/external-parameter-entities 
properties.""

XNI (which isn't going to change) has no built-in method for 
communicating skipped entities. XMLEntityManager needed
some method to communicate that an entity has been
skipped so I've added Augmentations to our internal
interface XMLEntityHandler. This is consistent with
interfaces in XNI.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319821 13f79535-47bb-0310-9956-ffa450edef68"
2de2e3d5bbdfb7f62041de463203979957d27699,"Pass augs to endEntity.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319822 13f79535-47bb-0310-9956-ffa450edef68"
f00018a29b68d07b04fbc24df9c69aaca3f6bfc4,"Fixing Bug #27303:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=27303

DOM Level 3 core states that: ""The parameter names used 
by the DOMConfiguration object are defined throughout 
the DOM Level 3 specifications. Names are case-insensitive.""

We were only accepting the lower case cannonical names.
This is now fixed thanks to the patch by Naela Nissar plus
some additional equalsIgnoreCase checks for some
Xerces specific parameters.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319823 13f79535-47bb-0310-9956-ffa450edef68"
d4c49d336c803f8d75d23f7251cd1f0eaa8a7fa3,"Fixing Bugs 26964 & 27350:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=26964
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=27350

In both cases we were raising the wrong exception because
getOwnerDocument for a Document node returns null. Thanks
to Curt Arnold and Naela Nissar for locating these bugs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319824 13f79535-47bb-0310-9956-ffa450edef68"
d987c4aa71a35f4c21eaa0b12d1adc03dd677ffb,"DOM Level 3 core states that: ""The parameter names used 
by the DOMConfiguration object are defined throughout 
the DOM Level 3 specifications. Names are case-insensitive.""

We were only accepting the lower case cannonical names
in the DOMConfiguration for LSParser.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319825 13f79535-47bb-0310-9956-ffa450edef68"
ba4971c45a0a0d734619b31b6feb8b78d754ff03,"DOM Level 3 core states that: ""The parameter names used 
by the DOMConfiguration object are defined throughout 
the DOM Level 3 specifications. Names are case-insensitive.""

We were only accepting the lower case cannonical names
in the DOMConfiguration for LSSerializer.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319826 13f79535-47bb-0310-9956-ffa450edef68"
c10c1b2ecdb0c2fdbdb136652edc2f015938d90d,"Fixing Bug #26994:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=26994

If a replace operation on a Document node would result
in multiple DocumentType or document elements existing
in the DOM a HEIRARCHY_REQUEST_ERR must be raised.

Fixed thanks to the modified patch from Curt Arnold
which was reviewed and fixed up by Naela Nissar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319827 13f79535-47bb-0310-9956-ffa450edef68"
86d577ff476fb65073fe6fc2d9dd35a4e62a8d93,"In anticipation of SAX2 extensions 1.1, implement the
isDeclared and isSpecified methods of Attributes2
on AttributesProxy.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319828 13f79535-47bb-0310-9956-ffa450edef68"
bf4beb5600baa842da2892395d48352b76c486e9,"Fixing Bug #27421:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=27421

getFeature was throwing a NullPointerException when the
version passed into the method was null. This is fixed
thanks to the patch from Naela Nissar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319829 13f79535-47bb-0310-9956-ffa450edef68"
64777c0d0675eedfe50ed24388a3a351430a5388,"As a first step towards fixing Bug #27083 and #27422
modify our internal readers so that they throw a new
exception class which exposes the necessary fields
required for generating localized error messages. This
allows these exceptions to be caught where appropriate
so that the error which occured may be reported to
an error reporter.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319830 13f79535-47bb-0310-9956-ffa450edef68"
114ba23b2fea61ae99929d471df453213adcb465,"Partial fix for Bug #27422:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=27422

Report a fatal error for malformed byte sequences in a
given encoding, specifically UTF-8 and US-ASCII.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319831 13f79535-47bb-0310-9956-ffa450edef68"
cf65eb6d6fef8b6c3b4529fd2987a85e86901de0,"Fixing Bug #27083 & #27422:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=27083
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=27422

Malformed UTF-8 and US-ASCII byte sequences encountered
while parsing a document are well-formedness errors. Report
them to the error reporter like every other well-formedness
violation instead of letting the IOException propogate the
user.

This fixes a bug in XInclude processing where the processor
would treat an IOException thrown because one of our
readers detected a bad byte sequence as a ResourceError,
causing the XInclude processor to look for a fallback to
parse instead of failing. The result of this would be a
malformed stream of events.

For ASCII, we were only using our built-in reader if the 
encoding specified was the canonical name US-ASCII. For
aliases the Java InputStreamReader was being picked up
which doesn't seem to report bad ASCII bytes. Now we
look into the EncodingMap so that we cover all of ASCII's
aliases.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319832 13f79535-47bb-0310-9956-ffa450edef68"
11319b9024be6443fcc9054fde869e1872e13936,"Update references to XML Schema API.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319833 13f79535-47bb-0310-9956-ffa450edef68"
6442a0ea881acfd77939054fbc3d41af3d256ce9,"Fixing a typo.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319834 13f79535-47bb-0310-9956-ffa450edef68"
dff601b04987099a78bcf959fa52150d59483b27,"Fixing a thread-safety problem regarding identity constraints. Fields
which are contained in a SchemaGrammar were mutable; keeping the
state of whether a field is permitted to match a value in order to
detect whether there is more than one match for a field in a given
scope. This caused spurious errors about duplicate field matches
when a grammar with identity constraints was shared across 
parsers on different threads. Applying a similar fix to the one
that Khaled made to Xerces-C++ to make this portion of the grammar
stateless.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319835 13f79535-47bb-0310-9956-ffa450edef68"
880163ff7d05cf1fd5106e2a05ee7d30ebd5e206,"Some cleanup from the last commit.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319836 13f79535-47bb-0310-9956-ffa450edef68"
ab751ed6abf6705ed79a1886898ded45f05aff2e,"Further fixes for Bugs #27083 & #27422:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=27083
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=27422

Report illegal byte sequences for other encodings than UTF-8
and US-ASCII as fatal errors. Added a generic message for
other encodings stating that illegal sequences in a given
encoding are not allowed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319837 13f79535-47bb-0310-9956-ffa450edef68"
bf7369822acb2f7b81e9f3811918172c4a717caf,"Fixing Bug #27452:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=27452

In some cases we were not firing NODE_RENAMED to a
registered UserDataHandler when an element or attribute
node is renamed. This is now fixed thanks to the patch
from Naela Nissar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319838 13f79535-47bb-0310-9956-ffa450edef68"
d263b29f987e984909b885ef50571ff532a4007c,"Performance: to read the service provider name from a jar
we use a BufferedReader and read the first line from the
file. BufferedReader's default buffer size is 8K chars. Since
we're only reading one line this is pretty excessive. Reducing
this size significantly.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319839 13f79535-47bb-0310-9956-ffa450edef68"
8a2ca9ce0c387fe03d18a3cca9f1346f4e40962f,"Fixing a bug.
Pass the package name not the class name to check package.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319840 13f79535-47bb-0310-9956-ffa450edef68"
8e00d2891c52081963aa25b4fe4012c14b82692a,"Fixing Bug #27585:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=27585

Applying patch by Naela Nissar. Now we report the related
node for some errors detected in normalizeNode and
namespaceFixUp.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319841 13f79535-47bb-0310-9956-ffa450edef68"
8103abe84a6b8acb119013f294b6be0f993baa7a,"Fixing Bug #27716:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=27716

LSParser must recognize ''split-cdata-sections' parameter.
Thanks to Naela Nissar for the patch.

Also made a partial fix for Bug #27685. Parameter names
are case-insensitive.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319842 13f79535-47bb-0310-9956-ffa450edef68"
358006206ca6b902218a54852270955add0c6c4f,"Preparing for SAX2 Extensions 1.1. As first step towards supporting
EntityResolver2, create a new interface which extends
XMLResourceIdentifier that communicates the name of an entity
in addition to its location. This is required to support 
EntityResolver2.resolveEntity() whose first parameter
is the name of the entity.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319843 13f79535-47bb-0310-9956-ffa450edef68"
45f9993a6302df82bc8a5893c2e2daec0d722591,"fixed a typo I introduced in the error message IDs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319844 13f79535-47bb-0310-9956-ffa450edef68"
bbfd57c0e398696f3c23c2d804fec36c5248c104,"Improving language in some of our schema
messages thanks to this patch by Neil Delima.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319845 13f79535-47bb-0310-9956-ffa450edef68"
94f51f8fadc148ad69a36ce12b1b4ff2d4f5a873,"Check made as per 3.12.1 section n http://www.w3.org/TR/xmlschema-1/


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319846 13f79535-47bb-0310-9956-ffa450edef68"
5eb05de3f67f045b5098499af0800f52ee7d3991,"check made if errorChecking is enabled.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319847 13f79535-47bb-0310-9956-ffa450edef68"
ea3ac51b4a55ba2e32302762877a0ef298b8e39c,"Adding ANSI_X3.4-1968 to the IANA map. This is better known
as US-ASCII which is the preferred MIME name but is actually an
alias.

See: http://www.iana.org/assignments/character-sets


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319848 13f79535-47bb-0310-9956-ffa450edef68"
1605bc8903b4162fe2a142710c571c976c281c19,"Use a more meaningful error code for schema erratum E1-16.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319849 13f79535-47bb-0310-9956-ffa450edef68"
2912981a61447717ef5618399add8fb67095362d,"Fixing Bug #27750:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=27750

Setting 'error-handler' and 'resource-resolver' to null is
supposed to unset them in both DOM L3 Core and Load/Save.
We were raising a TYPE_MISMATCH_ERR instead. This is
now fixed thanks to the patch from Naela Nissar.

Also modifying DOMErrorHandlerWrapper so that it handles
null DOMErrorHandlers.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319850 13f79535-47bb-0310-9956-ffa450edef68"
00eece492fd2728477801d7ea273f3ade571652c,"Fixing Bug #27792:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=27792

DOMError.relatedData for the warning ""cdata-sections-splitted""
must be the first CDATASection node in document order
resulting from the split. DOMNormalizer was reporting the
second one. This is fixed thanks to the patch by Naela Nissar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319851 13f79535-47bb-0310-9956-ffa450edef68"
d659c2493903e9f60ca40258e47c7ff66db8d5a9,"Fixing a typo.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319852 13f79535-47bb-0310-9956-ffa450edef68"
0de60ba7b7596dff2f3271af13ede1ca9e87453e,"Support the SAX feature: lexical-handler/parameter-entities.
This should now complete support for all features defined
for SAX 2.0.

This particular feature controls whether the beginning and
end of parameter entities will be reported to the LexicalHandler.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319853 13f79535-47bb-0310-9956-ffa450edef68"
1101d615d6d2b549765a80b4371353308001caf0,"Adding support for DOM L3 LSResourceResolvers.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319854 13f79535-47bb-0310-9956-ffa450edef68"
b77834b09ccbc167737abb17c2b19d8be9678c06,"Refine javadoc for resolveResource.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319855 13f79535-47bb-0310-9956-ffa450edef68"
cd808e0cf1cc2721ce42d4e484d128a415492625,"Adding LSResourceResolver to list of interfaces XMLCatalogResolver
implements. Replacing CDATA sections with entity references.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319856 13f79535-47bb-0310-9956-ffa450edef68"
efe62e6238397bf6ed2395b852e41322e6f46c6c,"Adding http://xml.org/sax/features/lexical-handler/parameter-entities
from SAX2 Extensions 1.0 to list of supported SAX features.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319857 13f79535-47bb-0310-9956-ffa450edef68"
6946314ae52ed2d115473fbff45939731f416a62,"Adding a FAQ on the scoping of the startElement Attributes parameter.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319858 13f79535-47bb-0310-9956-ffa450edef68"
e2e3a567f9bbb3e0754031d4243fe6738c6c048c,"Fixing javadoc. It wasn't being generated for the methods
because we were using the wrong style of comments.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319859 13f79535-47bb-0310-9956-ffa450edef68"
b744b228261f390a09b5f36f3ad320abde93109a,"proposal for 2.7.0 release


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319860 13f79535-47bb-0310-9956-ffa450edef68"
677ec9e56bbf0f15c73f9ad259894ff4a072cd88,"Remove extraneous comments.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319861 13f79535-47bb-0310-9956-ffa450edef68"
744b67f6f91b755ec5b128f5ec8b43c71922580e,"Preparing for SAX2 Extensions 1.1:

Adding a new interface to support resolution of an external subset
for documents which do not explicitly provide one, including those
which do not have DOCTYPE declarations.

This is for EntityResolver2.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319862 13f79535-47bb-0310-9956-ffa450edef68"
3256f11ee4dfe8a7c8fe1cf0242b8db68a1300c6,"Fixing Bug #27872:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=27872

The LSParser was not using the given order:

1. LSInput.characterStream 
2. LSInput.byteStream 
3. LSInput.stringData 
4. LSInput.systemId 
5. LSInput.publicId 

for determining which input will be used. Also, we weren't
raising a DOMError if all the inputs are null (or empty strings
where applicable).

Fixed thanks to the patch from Naela Nissar; slightly modified
to check for empty strings for the following fields: stringData, 
systemId and publicId.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319863 13f79535-47bb-0310-9956-ffa450edef68"
c681014cea0c2c727526f5392cf65e19a2ec6be9,"Fixing many javadoc warnings.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319864 13f79535-47bb-0310-9956-ffa450edef68"
2382a0ad6ed4938176a48b09c43f002d4c217d9a,"Performance: Use String.hashCode() instead of using our own
hash method. The keys stored in instances of these hashtables
are interned strings (also in the SymbolTable) so we get the
hashcode for free since it is cached after it has been computed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319865 13f79535-47bb-0310-9956-ffa450edef68"
f048eabea5e4539b805c74ecd679a24de199a9e7,"Removing an obsolete comment.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319866 13f79535-47bb-0310-9956-ffa450edef68"
aa7731a75eefd1135fe442ebd01ab9effc13446d,"Performance: Reducing the number of characters visited while
scanning a URI. A URI has a scheme if it contains a ':' which is
not preceeded by a '?', '/', '#'.  If a ':' has been found in the
string, we need only search to the left of it instead of over
the entire string.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319867 13f79535-47bb-0310-9956-ffa450edef68"
46c57eb5a5a62c25df4094ae57f9ff2ffc79a450,"Performance: Reducing object creation.

To support E15.2 from the XML 1.0 second edition
errata we added an augmentation to communicate to the
validator whether a character was included using a character
reference. This is pretty expensive since a new instance of
AugmentationsImpl was created for each character reference.

Now only report this augmentation if the document is being
validated and only if the character reference is of a probable
white space character (ch <= 0x20). When parsing a
document from disk containing over 1200 char refs with 
SAX (no validation) I saw a 20% improvement.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319868 13f79535-47bb-0310-9956-ffa450edef68"
62aeba59424ca9e3c7361ed14962671ad7e32373,"Filling in NOTICE file.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319869 13f79535-47bb-0310-9956-ffa450edef68"
a856625204c1fdef49ef685cf81ff73121705dbf,"Fixing Bug #27924:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=27924

Entity reference nodes with no children should always be
serialized even if the 'entities' parameter is set to false. We
were breaking out of serializeNode without writing anything
for such nodes.

The attribute actualEncoding was renamed inputEncoding
on the Document interface. We never updated this in the
serializer and since the method is being called through
reflection, it was failing silently at runtime. Once DOM Level 3
goes to REC all the reflective calls on Document should be
replaced with static ones.

These two bugs are fixed thanks to the patch from Naela Nissar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319870 13f79535-47bb-0310-9956-ffa450edef68"
07a9de4fb3df10bd7f51c97e9b2d2ac9076e3379,"Fixing Bug #27995:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=27995

Report output encoding as UTF-16 when a node is written
with LSSerializer.writeToString.

Patch thanks to Naela Nissar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319871 13f79535-47bb-0310-9956-ffa450edef68"
215db2e697a349eb9188e1220ed84513ddc5d043,"Fixing Bug #28022:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=28022

We keep a static pool of schema validators for use by DOM
normalizer. If a validator had been previously used and it had
an error-handler registered and another document later gets
this validator but it offers no error-handler then XSDHandler
would throw a NPE when trying to set the error handler to
null on the schema parser.

Set the DefaultErrorHandler on the schema parser to unregister
the old error handler (if there was one). Thanks to Neil Delima
for investigating this bug and verifying the fix.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319872 13f79535-47bb-0310-9956-ffa450edef68"
4f1f37879b7a561e45b03a1fb1c1cc450534cf35,"Fixing Bug #28022:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=28022

Fixing a NPE in DOMNormalizer which manifests when expanding
an entity reference with no children. This is fixed thanks to the
patch from Neil Delima.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319873 13f79535-47bb-0310-9956-ffa450edef68"
6e43d2c09f5b1c8383c5f3892fd1e45a4ec9db2d,"Include up to date W3C software and document licenses.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319874 13f79535-47bb-0310-9956-ffa450edef68"
cb8e49c10e0440eb70af6d70768d0825edc443e0,"Package W3C software and documentation licenses in 
the source and binary distributions.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319875 13f79535-47bb-0310-9956-ffa450edef68"
94998a3f1dfbcbb9b1366057f7167b1bd0dc04d0,"List SAX and DOM licenses among files included in the
source and binary distributions.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319876 13f79535-47bb-0310-9956-ffa450edef68"
2c9cff0cc1a0671f1e5a246e925b474173fd64c3,"Fixing a bug.

Back out preformance improvement made in Xerces 2.6.2 to
prevent the iterative search over an attribute list for
namespace attributes when no namespaces have been
declared in the current context. Testing if there are no
declared prefixes doesn't work in the case where an instance
document contains the declaration 
xmlns:xml='http://www.w3.org/XML/1998/namespace' on an
element with no other namespace declarations. Since we don't
report this mapping to the namespace context such declarations
would be missed and then appear in the SAX event stream in
error.

Since the strings of a QName are always interned, use reference
comparison instead of equals to buy a little performance back.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319877 13f79535-47bb-0310-9956-ffa450edef68"
5846060722ccc5d1a1b47182834caa718a3fa65b,"Infrastructure work in the scanners to support the SAX2 Extensions 1.1
interface EntityResolver2, specifically getExternalSubset which
allows an application to provide an external subset for a document
which doesn't otherwise have one.

The scanners are now able to handle all three cases where a resolver
may be queried for external subset:

1) Neither an external or internal subset exist.
2) Only an internal subset exists.
3) No DOCTYPE declaration in the document.

In the third case, scanning of the root element is broken up into
three segments:

1) Scan the root element QName.
2) Query the resolver with the root name and base URI, if it 
locates an external subset then read it.
3) Scan the remainder of the start tag.

If an external subset is located the public id and system id
from the XMLInputSource returned from the resolver are
reported to doctypeDecl. This is what SAX expects.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319878 13f79535-47bb-0310-9956-ffa450edef68"
41ad82c91d65cd350427ad97bcf1253b29ac4227,"Committing Mike Boos' PSVI writer patches to fix various problems.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319879 13f79535-47bb-0310-9956-ffa450edef68"
9c3f4ce1f597af7606753b19efac074e1bada87c,"Fixing bug [28304]: we should check whether the number of particles before trying to access the array.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319880 13f79535-47bb-0310-9956-ffa450edef68"
586edf74fe51d7771ea829e592f25a614f82f607,"Replace HashTables with unsynchronized HashMaps. This is done
for performance reasons because we don't require thread-safety
here. Also, it allows setting of null entries which is useful for our
LSParser's DOMConfiguration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319881 13f79535-47bb-0310-9956-ffa450edef68"
15406c720d59c90541440253e1fb032da4e93fd4,"Fixing Bug #28288:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=28288

Fixing W3C LS test case failure: noinputspecified01. DOMParserImpl
was throwing a NullPointerException. Should be calling handleError
on the DOMErrorHandler enclosed by the wrapper. This is fixed
thanks to the patch by Naela Nissar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319882 13f79535-47bb-0310-9956-ffa450edef68"
c5b96e95131b830a2622250edc2dda9e642276e7,"Fixing Bug #28064:
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=28064

Attribute nodes were not being shown to the LSSerializerFilter when
the namespaces parameter was set to false. Also, attributes defaulted
from the DTD were not being discarded if discard-default-content was
set to true.  This is now fixed thanks to the patch by Naela Nissar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319883 13f79535-47bb-0310-9956-ffa450edef68"
f39a9b632e22e1d53b9bb927a29a1ad3f6c81017,"Committing Mike Boos' PSVI writer patches to fix various problems.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319884 13f79535-47bb-0310-9956-ffa450edef68"
5e5b2891d24f85de9ffde06b48a60ba3df49c95c,"Fixing Jira Bug #944:
http://nagoya.apache.org/jira/browse/XERCESJ-944

Allow 'schema-location' and 'schema-type' parameters to be
unset, plus fixup canSetParameter to accept null values and
some additional clean up. This is fixed thanks to the patch
(slightly modified) from Naela Nissar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319885 13f79535-47bb-0310-9956-ffa450edef68"
7480233d743dc9bc7ffded6a0bbf801de9a511f9,"Updating implementation to incorporate change to XInclude namespace
from the latest draft: http://www.w3.org/TR/2004/CR-xinclude-20040413/

The namespace has been restored to http://www.w3.org/2001/XInclude,
replacing the namespace http://www.w3.org/2003/XInclude. Also, 
removing the diagnostic for the 2001 namespace specified in the working
draft.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319886 13f79535-47bb-0310-9956-ffa450edef68"
b99b93500d8dae1e3be3218bca46d7775474d62a,"Updating tests to incorporate change to XInclude namespace
from the latest draft: http://www.w3.org/TR/2004/CR-xinclude-20040413/

The namespace has been restored to http://www.w3.org/2001/XInclude,
replacing the namespace http://www.w3.org/2003/XInclude.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319887 13f79535-47bb-0310-9956-ffa450edef68"
47cdede6c568251b7d1735133babf197f370813d,"Updates for changes in latest draft: 
http://www.w3.org/TR/2004/CR-xinclude-20040413/

Remove code supporting 'accept-charset' attribute.

Report fatal error if 'accept' or 'accept-language' attribute values
contain characters outside of the range 0x20 to 0x7E.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319888 13f79535-47bb-0310-9956-ffa450edef68"
79ce2dd4c5809d2bbf7987c2866a9eb895dc0876,"Update docs on bug reporting to reflect recent
migration from Bugzilla to Jira.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319889 13f79535-47bb-0310-9956-ffa450edef68"
547c1ab374dfbb93c591854228c625ddd798ceb6,"Fixing Jira Bug #923:
http://nagoya.apache.org/jira/browse/XERCESJ-923

PSVIDocumentImpl did not override cloneNode so an instance of
its parent DocumentImpl was returned from this method instead
of a new instance of PSVIDocumentImpl. This is now fixed thanks
to the patch by Neil Delima.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319890 13f79535-47bb-0310-9956-ffa450edef68"
b40b800d03ae4543d7a4cd6b054f2731a06e5abb,"Updating 2.7.0 release plan:

- NOTICE file complete.
- DOM L3 Text.replaceWholeText started.
- XInclude 1.0 CR changes sized and started.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319891 13f79535-47bb-0310-9956-ffa450edef68"
93e2e49a865a027bb9b8ed7f56cc7170b79b1247,"Updated to DOM Level 3 Core REC:
http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/

Next step is to move the API into xml-commons once we're ready
to build DOM Level 3 with the standard distribution.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319892 13f79535-47bb-0310-9956-ffa450edef68"
1fa0d9942e6ed419963971aca6c3365eb53e30cd,"Updated to DOM Level 3 LS REC:
http://www.w3.org/TR/2004/REC-DOM-Level-3-LS-20040407/

Next step is to move the API into xml-commons once we're ready
to build DOM Level 3 with the standard distribution.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319893 13f79535-47bb-0310-9956-ffa450edef68"
82adaadf3e9c9c7705874891d284dfa5ac18d582,"Fixing Jira Bug #948:
http://nagoya.apache.org/jira/browse/XERCESJ-948

In DOMNormailzer and DOMSerializerImpl DOMLocator.relatedNode
and DOMError.relatedData were not being reported correctly in
many instances. Patched thanks to Naela Nissar.

Also fixed a bug in DOMSerializerImpl where the well-formedness
of an element name was checked over and over again instead of
checking the well-formedness of the names of its attributes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319894 13f79535-47bb-0310-9956-ffa450edef68"
fe21d54618d0315b7fb321e4f37ba984ecb6dcbe,"Fixing Jira Bug #949:
http://nagoya.apache.org/jira/browse/XERCESJ-949

DOM Level 3 defines error types for well-formedness errors
such as 'wf-invalid-character-in-node-name'. The parser was
reporting it's own internal error code instead of what the API
expects.

Applying patch from Naela Nissar with some modifications.
This introduces a new class which represents the parser's
internal error codes. These internal codes are mapped
to DOM error types. This structure might be useful in the
future if SAX ever standardizes exception identifiers.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319895 13f79535-47bb-0310-9956-ffa450edef68"
45006567ba9ce68ec09e631898b63699c93690de,"Fixing Jira Bug #944:
http://nagoya.apache.org/jira/browse/XERCESJ-944

Add 'split-cdata-sections' to the list of parameter names supported
by the DOMConfiguration for LSParser. Patched thanks to Naela
Nissar to fix failure of DOM LS test LSParserConfig2.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319896 13f79535-47bb-0310-9956-ffa450edef68"
81a6f53305a269ff3683a58fe3c602b5b79e2dd0,"Fix indentation in getParameterNames method.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319897 13f79535-47bb-0310-9956-ffa450edef68"
a724063dfc98658344606bb2b021bb65a728a462,"Patches for DOMImplementationList and DOMImplementationSource.
DOMImplementationListImpl is not part of the bootstrap package, so
provide our own implementation. Thanks to Neil Delima.

Also adding org.w3c.dom.DOMImplementationSourceList for 
META-INF/services.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319898 13f79535-47bb-0310-9956-ffa450edef68"
8238b5d1368b0738e49a36ba78b92882b2816cfc,"Copy org.w3c.dom.DOMImplementationSourceList to META-INF/services.

Enable DOM L3 build to work with new DOMImplementationListImpl class.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319899 13f79535-47bb-0310-9956-ffa450edef68"
014fb86658421b6480b9920fae825cd3c43175b4,"Adding constants for SAX 2.0.2 and SAX2 Extensions 1.1.
8 new features and 1 new property.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319900 13f79535-47bb-0310-9956-ffa450edef68"
f957aaff7a8f7b9e3d6b5729fcbc5bb77a66075b,"A new XNI entity resolver for wrapping SAX2 Extensions 1.1's
EntityResolver2. Using an EntityResolver2 like interface until
the real one is available.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319901 13f79535-47bb-0310-9956-ffa450edef68"
6e13fb843fb0bd188267a208d03fdd802a611599,"Change some comments.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319902 13f79535-47bb-0310-9956-ffa450edef68"
2d467a8509540b0bee5a685a7ab3c283b1e59752,"Cleanup unused imports.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319903 13f79535-47bb-0310-9956-ffa450edef68"
2cb7d1ecb92f205137aa4386969857ba014432ce,"Modified patch submitted for bug XERCESJ-947 by neil dilema il dilema, also fixed the problem
incase of importNode.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319904 13f79535-47bb-0310-9956-ffa450edef68"
74d4504b4a7b7b4e0124a88d876812ecf35c5a24,"Fixing a NPE which occured for any schema containing a CDATA
section outside of an annotation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319905 13f79535-47bb-0310-9956-ffa450edef68"
7da389c54e46628c18cb2d2bc0f4822b9f2c2e67,"If the disallow-doctype-decl feature is set to true, do not
query a user's ExternalSubsetResolver if there was no
DOCTYPE in the document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319906 13f79535-47bb-0310-9956-ffa450edef68"
84dae4b7b442a4c8c5faf323f55b782570ed9bdc,"Fixing Jira Bug #954:
http://nagoya.apache.org/jira/browse/XERCESJ-954

A DOMError of type ""pi-base-uri-not-preserved"" and severity
[warning] was not being raised in LSParser while parsing an 
XML document when a processing instruction is encountered 
in a location where the base URI of the processing instruction
can not be preserved.

W3C DOM test entities07 was failing because the error type 
reported is ""infoset-baseURI"" instead of ""pi-base-uri-not-preserved"". 
This is fixed thanks to the patch by Neil Delima. Also fixed up
handling of deferred DOM.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319908 13f79535-47bb-0310-9956-ffa450edef68"
7b7c362fa639469a72f14f51239e1955bbab2629,"Update schedule with sizing for implementing [false] for the
namespace-declarations parameter in DOM Level 3.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319909 13f79535-47bb-0310-9956-ffa450edef68"
f90edf1f6cbcce36b4caa27febeb48f6eb1425aa,"Contributed by Neil Delima:

Implementation of the namespace-declarations parameter for
DOM Level 3 Core, LSParser and LSSerializer.  This discards
namespace declaration attributes when it is set to false.
Updating each DOMConfiguration and including the
namespace-declarations parameter in the computaiton of infoset.

See: http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#DOMConfiguration


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319910 13f79535-47bb-0310-9956-ffa450edef68"
4554e7e3488bdf1a07a014356e5d11122cbe8164,"Premature commit of this file. Undoing change to debug variables.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319911 13f79535-47bb-0310-9956-ffa450edef68"
c95b1584e9d8b6d532998517688d92236b4eb109,"DOM L3 namespace-declarations=false is complete.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319912 13f79535-47bb-0310-9956-ffa450edef68"
c2c212883a88e60703f91947ccfca86c606e965f,"Feature/Property Support for SAX2 Extensions 1.1 & SAX 2.0.2.

SAX2 Extensions 1.1:
- is-standalone
- resolve-dtd-uris
- use-attributes2
- use-locator2
- use-entity-resolver2

SAX 2.0.2:
- unicode-normalization-checking
- xmlns-uris
- xml-1.1
- document-xml-version (property)

Still need to link with the SAX 2.0.2 API. Until then, returning false
for use-attributes2 and use-locator2. Getting and setting of
use-entity-resolver2 currently commented out.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319913 13f79535-47bb-0310-9956-ffa450edef68"
042c3c0d546125125f889b8db9293f23d4216ac4,"Update the release plan. The SAX 2.0.2 work is near completion.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319914 13f79535-47bb-0310-9956-ffa450edef68"
35f37f2fc90276b6e3ba3bfb29a7adf6a176cab5,"Some schema messages contained incorrectly escaped curly braces
and single quotes. Fixed, thanks to the patch from Neil Delima.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319915 13f79535-47bb-0310-9956-ffa450edef68"
4cce988f0b26f5dd30537c421abe519a3f4e7d26,"Fixing Jira Bug #961:
http://nagoya.apache.org/jira/browse/XERCESJ-961

When 'split-cdata-sections' is false, unrepresentable 
characters in a CDATAsection should be reported as 
""wf-invalid-character"" errors if the parameter 
""well-formed"" is set to true. The error is not recoverable.

We were not reporting the correct error type nor was
the serializer being unconditionally halted. It was not
throwing the expected LSException. This is fixed thanks
to the patch by Jonathan Au.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319916 13f79535-47bb-0310-9956-ffa450edef68"
245daf4990c2ab4cf71d2493b6d5b39d6d77cad8,"If an LSException was thrown to the LSSerializer rethrow it.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319917 13f79535-47bb-0310-9956-ffa450edef68"
2eedae92c5d746cba5d41ee6aed85b95a91068a4,"Do not call EntityResolver2.resolveEntity if both the
pubic and system identifiers are null.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319918 13f79535-47bb-0310-9956-ffa450edef68"
c214be038f8de5aee6e67a913b352c9e96842383,"Fixing Jira Bug #960:
http://nagoya.apache.org/jira/browse/XERCESJ-960

Two new kinds of components (XSFacet & XSMultiValueFacet)
were added to the XML Schema API some time ago, but the 
array in SchemaGrammar was't updated to reflect such change.

Fixing another bug where we returned null where an empty
XSNamedMap is expected for getComponents and 
getComponentsByNamespace. This wasn't updated when
the spec changed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319919 13f79535-47bb-0310-9956-ffa450edef68"
02680df93afb2b3e6e33e3582967a93229df7768,"XSSimpleTypeDefinition [1] specifies that empty lists (XSObjectList & StringList)
are returned when no list for a requested item exists. Our implementation got
out of synch with the spec. We were returning null instead. This is now fixed.

[1] http://www.w3.org/Submission/2004/SUBM-xmlschema-api-20040309/xml-schema-api.html#Interface-XSSimpleType


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319920 13f79535-47bb-0310-9956-ffa450edef68"
d1d474a79efd2754c436e3cc919711cfc426e505,"Fixing bug [XERCESJ-962]. Should use the base type to convert from lexical
values to actual values for min/maxIn/Exclusive facets, so that the ""pattern""
facet specified at the same level isn't picked up.

http://nagoya.apache.org/jira/browse/XERCESJ-962


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319921 13f79535-47bb-0310-9956-ffa450edef68"
296729aa6b9317eb54898b6806511c04bce747e1,"Fixing Jira Bug #892:
http://nagoya.apache.org/jira/browse/XERCESJ-892

The DOM spec specifies that null should be returned from
NodeList.item() if it is not a valid index. The spec defines
the index as an unsigned int, but clearly negative indicies
are not valid. Now return null for negative indicies. This
is fixed thanks to the patch by Jonathan Au.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319922 13f79535-47bb-0310-9956-ffa450edef68"
60697c3db7e640a090be94027b7b5e35be8de0e4,"Fixing Jira Bug #968:
http://nagoya.apache.org/jira/browse/XERCESJ-968

If no annotations exist for a SchemaGrammar the array
of annotations is never created. For such schema docs
we were passing null to System.arrayCopy which caused
a NullPointerException to be thrown. This is now fixed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319923 13f79535-47bb-0310-9956-ffa450edef68"
5c3cd2e1a390c78e3744a0b8e07e070771fa1c99,"Fixing a bug in DOMEntityResolverWrapper. The DOM Level 3 LS
REC states that inputs specified in a LSInput are look at by a LSParser 
in the following order to determine which will be used:

1) LSInput.characterStream 
2) LSInput.byteStream 
3) LSInput.stringData 
4) LSInput.systemId 
5) LSInput.publicId

String data was taking higher precedence over byte and character
streams. Should be fixed now.

Also patching XSLoader's implementation so that it's behaviour when
reading an LSInput is consistent with what is required of a LSParser.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319924 13f79535-47bb-0310-9956-ffa450edef68"
1c6625eb7e63824d5c6875ab877fc3a44f896911,"Fixing a couple warnings for Javadoc and a deprecated Ant feature.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319925 13f79535-47bb-0310-9956-ffa450edef68"
3cfc52017281c1a85e28897cf20c1e0c238d0ecc,"Fixing Jira Bug #966:
http://nagoya.apache.org/jira/browse/XERCESJ-966

We weren't checking if the nodeValue for the text node
is null during execution of Node.normalize(). Thanks to
Antonio Arena and Neil Delima for pointing out these 
problems. This fixes some potential NPEs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319926 13f79535-47bb-0310-9956-ffa450edef68"
7b4aadeb8dd10d37db29b72f3fd378a2399e1470,"Fixing Jira Bug #967:
http://nagoya.apache.org/jira/browse/XERCESJ-967

LSSerializer.writeToString should throw a LSException if a node
is passed in other than Document, DocumentFragment or Element.
Null was being returned instead. This is fixed thanks to the patch
by Jonathan Au, modified so that it also reports the error to a
registered error-handler.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319927 13f79535-47bb-0310-9956-ffa450edef68"
05feac5e32cfeffca16de3a42e48f164d1b75990,"Adding a serialVersionUID.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319928 13f79535-47bb-0310-9956-ffa450edef68"
4c1206905ebe89e63e89bbe0c95846f048839107,"Fixing Jira Bug #525:
http://nagoya.apache.org/jira/browse/XERCESJ-525

Instances of some of the classes in the HTML DOM implementation
have a reference to a HTMLCollection. When these nodes are
cloned the reference to the old collection was being kept, so
methods which return a collection were referring to nodes in the
old subtree instead of the newly cloned subtree. This is fixed
thanks to the patch by Aaron Kardell.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319929 13f79535-47bb-0310-9956-ffa450edef68"
e3c6d1cb2f832604635afca303a9632a03668768,"Fix for  http://issues.apache.org/jira/browse/XERCESJ-971


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319930 13f79535-47bb-0310-9956-ffa450edef68"
8a5e04c5c6d5eabfd6bef5c6bd23b854a343ce2f,"Fixing Jira Bug #974:
http://nagoya.apache.org/jira/browse/XERCESJ-974

The code samples in the DOM documentation attempt to
retrieve an instance of DOMImplementationLS with the
""LS-Load"" feature.  This was changed to ""LS"". Fixed
thanks to the patch by Jonathan Au.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319931 13f79535-47bb-0310-9956-ffa450edef68"
62ff0b1ea22ede1cc93dc9edd3e951deb24eeb27,"Fixing a bug reported to xerces-j-user by Robert Houben:
http://marc.theaimsgroup.com/?l=xerces-j-user&m=108587697229050&w=2

We were performing reference comparison with the namespace name
passed into getComponentsByNamespace. The XML Schema API does not
constrict users to using internalized strings so we must use equals.

Should also be returning an empty map when a grammar does not exist
for a given namespace instead of null.

Both of these problems are now fixed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319932 13f79535-47bb-0310-9956-ffa450edef68"
0ded4fbecb62ebe6f18f3d63622e4897734071e8,"Some cleanup, minor performance improvements.

1) Reuse XMLDTDDescription object instead of creating a new one every time.
2) Marking fields of reusable temp objects as final as they are never reassigned.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319933 13f79535-47bb-0310-9956-ffa450edef68"
1582a443588f8eb1d5e8a68db7dc40f07049a8c6,"Grammar Caching and SAX's EntityResolver2:

Do not bother checking the grammar pool if no public or system identifier was provided. 
Since so many different DTDs have roots in common, using only a root name as the 
key may cause the wrong grammar to be retrieved from the grammar pool. This scenario
would occur when an ExternalSubsetResolver has been queried and the
XMLInputSource returned contains an input stream but no external identifier.
This can never happen when the instance document specified a DOCTYPE.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319934 13f79535-47bb-0310-9956-ffa450edef68"
62d8519350071f4284a29fa274819b397e0d0137,"Add a note to the description of the input-buffer-size
property to clarify that the size of the parser's internal
buffers may need to be increased beyond the size
of the input buffer.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319935 13f79535-47bb-0310-9956-ffa450edef68"
490546c9d79f54e7d132991d7c48580e01cbf133,"Removing out of date W3C DOM license. Replaced with the up to date licenses
LICENSE.DOM-documentation.html and LICENSE.DOM-software.html.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319936 13f79535-47bb-0310-9956-ffa450edef68"
fa4b836414485b42afa143e3d15a605095c30dd8,"Fixing a potential memory leak. The reader used to read
the service provider is never closed if an IOException is
thrown while reading from it.  Adding a finally block so
that the reader will always be closed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319937 13f79535-47bb-0310-9956-ffa450edef68"
e820933e8d07a73c48556dd162e9a5381534e44c,"Fixing another potential memory leak. The input stream
used for loading properties may never be closed if an
IOException is thrown while reading from it. Adding
finally blocks so that the input stream will always
be closed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319938 13f79535-47bb-0310-9956-ffa450edef68"
a5043b8f87c4d7113b374520bce8f74275c836e6,"fixed bug XERCESJ-980


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319939 13f79535-47bb-0310-9956-ffa450edef68"
62b65e27622f6a1657e2e6a6c0776c95151c9dd0,"The XML Schema API [1] states that the DOMConfiguration of an XSLoader may
allow setting of a resource-resolver (LSResourceResolver). Supporting this
parameter so that applications may use their own resolver to locate
schema imports and includes.

[1] http://www.w3.org/Submission/2004/SUBM-xmlschema-api-20040309/xml-schema-api.html#Interface-Loader


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319940 13f79535-47bb-0310-9956-ffa450edef68"
2478d364337717d16feeb20682cad9beb3622430,"The DOM normalizer was rejecting supplemental characters in
text, comments and CDATA sections. We should now be
correctly handling surrogate character pairs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319941 13f79535-47bb-0310-9956-ffa450edef68"
0987533ad4cd8f9c16674b79b1d0f8c7ce855afc,"Updating XInclude documentation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319942 13f79535-47bb-0310-9956-ffa450edef68"
9eedc2daad2e3d23c11b8bb94b4db0453de4912a,"DOM Level 3 adoptNode fix that returns null while attempting to adopt nodes between different DOMImplementaitons.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319943 13f79535-47bb-0310-9956-ffa450edef68"
7fe426bbdad3eddfee2e0d96776f7f310f0badc4,"Update implementation according to the errata: http://www.w3.org/2001/05/xmlschema-errata#e2-54


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319944 13f79535-47bb-0310-9956-ffa450edef68"
049571af9fb217357ecec1e497e856e3bb513fca,"An anonymous class DTDGrammar$1.class seems to come
from an argument to the init method of ChildrenList. This class
has been declared to be 'private static' and does not declare 
any constructors so a default constructor is implicitily provided.
According to the Java Language Specification [1], this default 
constructor will be private.  DTDGrammar calls this private 
constructor to create a ChildrenList.

DTDGrammar$1.class which is generated by the compiler
appearently violates the VM spec [2]. Adding a public
no args constructor to ChildrenList to eliminate this
anonymous class.

[1] http://java.sun.com/docs/books/jls/second_edition/html/classes.doc.html#16823
[2] https://bugs.eclipse.org/bugs/show_bug.cgi?id=67600


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319945 13f79535-47bb-0310-9956-ffa450edef68"
435143ac0a5597c4182ed6ef65ce617c3837080d,"Fixes problems with DOMImplementation.getFeature and hasFeature, Node.getFeature and isSupported and support for Xalan's DOM XPath implementation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319946 13f79535-47bb-0310-9956-ffa450edef68"
a676dedd7e337410ed06cbf28cf740ba48782cfa,"Fixing up file indentation as well as license and version info.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319947 13f79535-47bb-0310-9956-ffa450edef68"
09f1a784cb058ee7ecf9a63cfe7a825b89d84541,"Updating the release doc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319948 13f79535-47bb-0310-9956-ffa450edef68"
b4c6ce4185a77c274a16b2da40e86f43455c1d70,"As discussed on the xerces-j-dev and xerces-j-user [1] lists
eliminate the redundant xmlParserAPIs.jar file from the distribution.

[1] http://marc.theaimsgroup.com/?l=xerces-j-user&m=108632129410563&w=2


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319949 13f79535-47bb-0310-9956-ffa450edef68"
96b171235989559f8e2ff6fbf767344c1d54c408,"Remove reference to xmlParserAPIs.jar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319950 13f79535-47bb-0310-9956-ffa450edef68"
7fd7c8132b5c05b26b8207afebd3f55f74754da4,"Fixing Jira Bug #981:
http://nagoya.apache.org/jira/browse/XERCESJ-981

In the annotation string we were incorrectly escaping '<' and '&'.
Thanks to (iasandcb@tmax.co.kr) for pointing this out and
providing a patch. Modified the patch as well as making sure
we escape all characters which would require escaping in
content and in attribute values.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319951 13f79535-47bb-0310-9956-ffa450edef68"
f859da8433c196bb8e5b8e72410bb56b3ce4f027,"Fixing Jira Bug #470:
http://nagoya.apache.org/jira/browse/XERCESJ-470

The call to a private super constructor in BuiltinSchemaGrammar
seems to violate VM specifications. An anonymous class:
SchemaGrammar$1.class seems to be related to a private
constructor declared on SchemaGrammar which is implicitly called
from a constructor in the static nested class BuiltinSchemaGrammar
(which extends SchemaGrammar). This class appears to be
malformed [1].

Changing the access modifier from private to protected on the
no arguments constructor of SchemaGrammar to eliminate this
anonymous class.

[1] https://bugs.eclipse.org/bugs/show_bug.cgi?id=67600


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319952 13f79535-47bb-0310-9956-ffa450edef68"
64263e7ffdcdf3d73a10f4c6927135bf0098f8c8,"Update the release plan. The changes from DOM L3 PR to REC
have appearently been complete for a while now.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319953 13f79535-47bb-0310-9956-ffa450edef68"
9882f01c61524b3b3948d795b02237535a2ed6ec,"Schema location hints specified as relative URIs should be relative
to the actual URI of the schema document rather than the specified
URI. When available use the actual document URI as the base URI
for resolving imports and includes.

This is consistent with what the XML 1.0 3E says: ""... it (the base URI)
is the URI of the resource retrieved after all redirection has occurred."" [1]

[1] http://www.w3.org/TR/2004/REC-xml-20040204/#sec-external-ent


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319954 13f79535-47bb-0310-9956-ffa450edef68"
f5c00918590500b6868cd161e70f83c9ca71b463,"Fixing Jira Bug #984:
http://nagoya.apache.org/jira/browse/XERCESJ-984

The FACET_* constants are defined by XSSimpleTypeDefinition,
not XSConstants. Thanks to (iasandcb@tmax.co.kr) for catching
this problem in XSMultiValueFacet. This was a problem in two
other places.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319955 13f79535-47bb-0310-9956-ffa450edef68"
20e6cc5f9fa4cac69fda365154663fdece0ce4aa,"Eliminate some new compiler warnings emitted when compiling with
J2SE 1.5.0 beta2. java.lang.Class.getMethod() and
java.lang.reflect.Method.invoke() now take a varargs parameter.

Casting null to Class[] and Object[] to suppress these warnings
as the compiler suggests in order to make it explicitly clear that these
are non-varargs calls.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319956 13f79535-47bb-0310-9956-ffa450edef68"
685c0458619a5b8b1f1ababd4f29e46205034f60,"Eliminate some new compiler warnings emitted when compiling with
J2SE 1.5.0 beta2. java.lang.Class.getMethod() and
java.lang.reflect.Method.invoke() now take a varargs parameter.

Casting null to Object[] to suppress these warnings
as the compiler suggests in order to make it explicitly clear that these
are non-varargs calls.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319957 13f79535-47bb-0310-9956-ffa450edef68"
407cd798adcd9d583934b4cf808e79cf3bd8c92e,"Patch to fix problems with replaceWholeText.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319958 13f79535-47bb-0310-9956-ffa450edef68"
4cf406e88f7dbbb5c9ae228d02f2fdaede33565a,"Update the release plan. replaceWholeText is complete.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319959 13f79535-47bb-0310-9956-ffa450edef68"
7f1cffd04006d2044cb22f644a1c90b959a39265,"Patch for defect http://nagoya.apache.org/jira/browse/XERCESJ-987.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319960 13f79535-47bb-0310-9956-ffa450edef68"
8ba9ac8b96ec54bcacbe0d554f3ddb7de698ac81,"Fixed the replaceWholeText dom3.Test failure and other problems.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319961 13f79535-47bb-0310-9956-ffa450edef68"
5fa54eb541f06080d3511cd3e9549abb48a18224,"Fixing Jira Bug #949:
http://nagoya.apache.org/jira/browse/XERCESJ-949

Thanks to the patch by Jonathan Au, more mappings
have been added to DOM error type table used
for converting internal error codes to DOM error types.

Also moved the table into a private inner class to avoid
initializing it unless it is explicitly referenced. Should buy
a bit of memory if the parser never encounters an
ill-formed document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319962 13f79535-47bb-0310-9956-ffa450edef68"
84a5095082be9582d924c1e8360e75c657a4a162,"Fixing Jira Bug #949:
http://nagoya.apache.org/jira/browse/XERCESJ-949

Adding a couple new error messages for DOM error
types. Patch thanks to Jonathan Au.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319963 13f79535-47bb-0310-9956-ffa450edef68"
3140d309cfc513d2ea146fcb04420ad6704d3c84,"Improve formatting of content model representation
reported in schema messages. For instance when
there's no namespace, report foo instead of """":foo.

Patch [1] thanks to Jonathan Au.

[1] http://nagoya.apache.org/eyebrowse/ReadMsg?listName=xerces-j-dev@xml.apache.org&msgNo=4420


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319964 13f79535-47bb-0310-9956-ffa450edef68"
eba1a510226768b1349d16218e68fea4c7be5daa,"Minor performance improvements to use
of StringBuffer when building string
description of an element description.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319965 13f79535-47bb-0310-9956-ffa450edef68"
45ec51a61e14e22e6560098070c726fd8fdf1b56,"Fixing Jira Bug #926:
http://nagoya.apache.org/jira/browse/XERCESJ-926

If an element node specified an xml:base attribute
whose value is a relative URI, calling getBaseURI()
on such a node would always return null, because
we weren't resolving it against the base URI of the
parent.

Committing the patch from Lucian Holland with some
modifications to avoid searching up the parent
chain unless the URI is relative.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319966 13f79535-47bb-0310-9956-ffa450edef68"
f2388489731fd5cf4b9050425bd39492251e8974,"Although the escaped path for the user.dir system property
is cached we were creating the URI it represents over and
over again.

Thanks to the patch by Ankit Pasricha, now caching the URI,
improving performance in the scenario when the system id 
is a relative URI and the user.dir property is unchanged.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319967 13f79535-47bb-0310-9956-ffa450edef68"
aae682d9b194fe933388519c2a21dbeb697709ef,"Performance fix: Replace building of strings 
using concatenation in while loops with StringBuffers.

Thanks to Dave Brosius for the patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319968 13f79535-47bb-0310-9956-ffa450edef68"
ccde4234290d47942c055fecfbfaf146e80ba355,"Performance fix: Replace building of strings 
using concatenation in while loops with StringBuffers.

Thanks to Dave Brosius for the patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319969 13f79535-47bb-0310-9956-ffa450edef68"
fb1ae1f834d5cd271d139ceaa2a9de1d477a20c5,"Clean-up unused imports.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319970 13f79535-47bb-0310-9956-ffa450edef68"
ea2ae97cec2c021ca5835d6194a7ffa689e91ad0,"Prevent reading property files every time,also added locale support.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319971 13f79535-47bb-0310-9956-ffa450edef68"
101cb5d09fcd669e76704ea240165c5632fe36d8,"Fixing a bug in schema particle derivation: we didn't report an error when
the base type has empty content and a restriction has non-empty content.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319972 13f79535-47bb-0310-9956-ffa450edef68"
956ea63fc45d8b69a6f72665eb12854a53acbe09,"If the exception thrown is an XMLParseException
we've already reported the error to the user's
error-handler. We were reporting fatal errors
twice. On the second time without an error type
set.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319973 13f79535-47bb-0310-9956-ffa450edef68"
aa612d25b3b6b34d5a0e57546c3e3b2129e39c2a,"Fixing Jira Bug #950:
http://nagoya.apache.org/jira/browse/XERCESJ-950

Eliminating the check to see what the value of 'schema-type'
is before setting schema-location is needed since the order in
which they are set does not matter. schema-location should
be ""ignored"" if schema-type has not been set, but it still must
be allowed to be set. Patch thanks to Naela Nissar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319974 13f79535-47bb-0310-9956-ffa450edef68"
3fdd5f0310fdd5b6abaa42ac4c3418798d62ed35,"Changes w.r.t fix for bug 973.
PR:
Obtained from:
Submitted by:
Reviewed by:


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319975 13f79535-47bb-0310-9956-ffa450edef68"
fd229c3fada060828d9f08117ae8bdbe060288eb,"Changes w.r.t bug 973.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319976 13f79535-47bb-0310-9956-ffa450edef68"
bc14ad37e2ff6953609b0f0efdb52f8d85c7e7cd,"Some cleanup.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319977 13f79535-47bb-0310-9956-ffa450edef68"
2aa01a8a1dad87e91354b39a2395d9d84983426e,"Jira Issue #990:
http://nagoya.apache.org/jira/browse/XERCESJ-990

Adding support org.xml.sax.ext.EntityResolver2 to
XMLCatalogResolver as convenience for users. Thanks
to John Kim for this contribution.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319978 13f79535-47bb-0310-9956-ffa450edef68"
c26051d40c2c98446d1b5edd508889390c511649,"fixed a bug ,where wrong property file was being used for domain XML and SERIALIZER.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319979 13f79535-47bb-0310-9956-ffa450edef68"
aebdd24305965963118dc4bde23ea0c22d70aeba,"For LSResourceResolver, resolve the system identifier against
the base URI if the user prefers that the expanded system
identifier be used when doing a lookup on the catalog. Also
doing a bit of cleanup.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319980 13f79535-47bb-0310-9956-ffa450edef68"
18e6e2ae128d2d703250b8081328f6a42849c09e,"Performance fix. Getting the length of a node list causes
the traveral of a linked list. Walk the child/sibling chain
instead of by index with node lists.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319981 13f79535-47bb-0310-9956-ffa450edef68"
65ef539df8ade1a2b52a7e7c87585c75d403672b,"Several updates to the Xerces 2.7.0 plan.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319982 13f79535-47bb-0310-9956-ffa450edef68"
1552e9208acffc10a22c109ac32f436314d46a6f,"Updating the release doc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319983 13f79535-47bb-0310-9956-ffa450edef68"
ade5503bf2cdc0143d0da30ee8c95bcda951b554,"Adding a 'since' field for features and properties
to identify in which release a given feature or 
property was added.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319984 13f79535-47bb-0310-9956-ffa450edef68"
295b4f887c78f824f5dbbdcdcf9d6909deb6a96b,"Adding documentation for most of the SAX 2.0.2 and
SAX2 Extensions 1.1 features and properties.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319985 13f79535-47bb-0310-9956-ffa450edef68"
98c8a4817ab55722aced5ae1a03840f4e7161556,"Fix for defect http://nagoya.apache.org/jira/browse/XERCESJ-969.  Thanks for Jonathan Au for the patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319986 13f79535-47bb-0310-9956-ffa450edef68"
03687903ce8195dff2cbe5fdf17837118f9242a3,"In writeToURI, escapes in URIs such
as: file:///D:/My%20Documents/file.xml were not being
decoded. On Windows, we were writing to
""D:\My%20Documents\file.xml"" instead of
""D:\My Documents\file.xml"".

Thanks to the patch by Ankit Pasricha, now decoding
URI escape sequences.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319987 13f79535-47bb-0310-9956-ffa450edef68"
2db20914ce415c12e7befdbf0dae098f8fc226ff,"JIRA Issue #992:
http://nagoya.apache.org/jira/browse/XERCESJ-992

The parse method of XIncludeTextReader was reading
from the input stream one character at a time, accumulating
all the characters in a buffer before reporting them down the
pipeline. This would be a space hog for large text includes.
It's more efficient to read and report multiple chunks.

Applying the patch from Ankit Pasricha with some modifications
and additions. Now reading chunks from the stream and making
multiple callbacks to characters() instead of accumulating all the
text in the buffer. Modified XIncludeTextReader so that it is
reusable. Reusing XIncludeTextReader in XIncludeHandler.
Also using input-buffer-size property to determine the size 
of the internal buffer used for processing text includes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319988 13f79535-47bb-0310-9956-ffa450edef68"
fbe6887ce5c9be77296ac2d394966241c634d173,"Bug Fixes:
- must escape '<' in attribute values
- must process attribute values on annotation root
  since they may have characters which need escaping
- fixed bugs in namespace fixup on annotation root

Performance Fix:
- if an attribute value doesn't contain any characters
  which need to be escaped, avoid creating a new string


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319989 13f79535-47bb-0310-9956-ffa450edef68"
8c89c529bbbf68ca1bfa0e356b1aa7f081a8f85b,"Fixing Jira Bug #950:
http://nagoya.apache.org/jira/browse/XERCESJ-950

Eliminating the check to see what the value of 'schema-type'
is before setting schema-location is needed since the order in
which they are set does not matter. schema-location should
be ""ignored"" if schema-type has not been set, but it still must
be allowed to be set. Patch thanks to Naela Nissar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319990 13f79535-47bb-0310-9956-ffa450edef68"
3e3e368cd1185abddc2fe36b14d83e2dd8d34d64,"Fixing Jira Bug #843:
http://nagoya.apache.org/jira/browse/XERCESJ-843

To ensure that only the aggregate document is schema validated, the 
XInclude handler sets the schema feature to false to keep the child 
pipeline it creates from containing a schema validator. This will activate 
the DTD validator on the child pipeline if the validation feature was set 
to true, causing the include to be validate against a (probably
non-existent) DTD.

This should now be fixed. In addition to turning the schema validation
feature off, turn off other related validation features.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319991 13f79535-47bb-0310-9956-ffa450edef68"
2fa2dd8f75311d178650709b0a0973606cf9856e,"Fixing an AIOOBE which may occur when an xi:include
element appears as the top-level document element.
Since no members of the array were marked as valid
we were running off the front of the array. Now, if
we reach the root we always stop.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319992 13f79535-47bb-0310-9956-ffa450edef68"
3f28717c14b2b6e2e502887c546b39558d280add,"Updating test document. Must unbind namespace on
'child4' element. An xi:fallback element must not
contain any elements from the XInclude namespace
other than xi:include.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319993 13f79535-47bb-0310-9956-ffa450edef68"
d262ca33bd4a179fa5efdb7459d90d442efb74b8,"Applying a few bug fixes.

An xi:include element must not contain any elements from
the XInclude namespace other than xi:fallback.

An xi:fallback element must not contain any elements from
the XInclude namespace other than xi:include.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319994 13f79535-47bb-0310-9956-ffa450edef68"
3c46143f0b077e27563b08e4d0d5e54fabb06f12,"Adding an error message for elements other than xi:include
from the XInclude namespace which appear on xi:fallback.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319995 13f79535-47bb-0310-9956-ffa450edef68"
535a9412049dbcbaac95517c9b8856a0c7c4c60d,"Adding an interface to allow parser configurations which aren't
subclasses of XML11Configuration to be recognized as
supporting XML 1.1 by the SAX parser.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319996 13f79535-47bb-0310-9956-ffa450edef68"
0f9d23fe115e859ffb13d61d495726e2d41a66d4,"JIRA Issue #995:
http://nagoya.apache.org/jira/browse/XERCESJ-995

Adding two new parser configurations analogous to
DTDConfiguration and NonValidatingConfiguration
which also support XML 1.1. Thanks to John Kim
for these contributions.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319997 13f79535-47bb-0310-9956-ffa450edef68"
0024a1fb04e15c24511514185459302560ccc3f9,"Allow the SAXParser to recognize these configurations as
supporting XML 1.1. Also some identation cleanup.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319998 13f79535-47bb-0310-9956-ffa450edef68"
fcb7c29ea98c5b4173e43be407922373374eb1ae,"Fix broken dtd target.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@319999 13f79535-47bb-0310-9956-ffa450edef68"
824513f9279b62485bd5e7ef6236029f1a49e949,"Fixing Jira bug [XERCESJ-991].
Sometimes, due to some schema errors, we try to remove a particle from
another particle which is empty. We didn't check for this case, and got an NPE.
Note that this commit includes many accidental whitespace changes.
The really changes are between lines 1655 and 1665.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320000 13f79535-47bb-0310-9956-ffa450edef68"
4ca6988eb738c86b9512fb9896b4f5d437a7c9e9,"Formatting changes: Converting leading tabs to 4 spaces. They look really
ugly in some editors.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320001 13f79535-47bb-0310-9956-ffa450edef68"
96c8f4fd23973eb58c14fde7c07233e7d0db6f5e,"Fixing Jira bug [XERCESJ-994].
When the values for features/properties don't change between parses,
we don't bother getting those values again in ""reset"".
The parser has a list of external schema locations, which is cleared in ""reset"".
We need to re-parse the external schema location properties in ""reset"" to
rebuild such list, regardless of whether the values of the properties changed.

Also removing an unused variable, whose resetting algorithm looks suspecious
too.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320002 13f79535-47bb-0310-9956-ffa450edef68"
e036d10deff4170f7a875bb74ec78974f611d459,"JIRA Issue #998:
http://nagoya.apache.org/jira/browse/XERCESJ-998

Improve the performance of the symbol table by
dynamically resizing it and rehashing it once it
reaches some threshold. Previously the SymbolTable
did not scale well, since the size of the table was
fixed.  Neeraj had started looking at this a couple
years ago.  Thanks to John Kim for contributing
this performance improvement.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320003 13f79535-47bb-0310-9956-ffa450edef68"
6c7a16c3202d0e50e4cd05449e9a5a9963f80e1b,"Fixing Jira Bug #997:
http://nagoya.apache.org/jira/browse/XERCESJ-997

Fixing an NPE which may occur in the hashCode method
when either the localpart or rawname fields are null. This
seems to only be a problem for external users of this class.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320004 13f79535-47bb-0310-9956-ffa450edef68"
52b81b9cabee119eba69d819b01a53ec1f24871f,"Add documentation on XML11DTDConfiguration and XML11NonValidatingConfiguration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320005 13f79535-47bb-0310-9956-ffa450edef68"
2a507f88df5a5e9deacf5771dac4543ef9019ad0,"Updating the release doc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320006 13f79535-47bb-0310-9956-ffa450edef68"
182d6f7f341ca6df4fe79a7225383866b3bde0c8,"Several updates to the Xerces 2.7.0 plan.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320007 13f79535-47bb-0310-9956-ffa450edef68"
8ad988f82fecd97293adb2ca676d8e7df38a5cc8,"DOM Ranges Fix:  If one boundary-point of a Range is set to have a root container other than the current one for the Range, the Range should be collapsed to the new position.
This enforces the restriction that both boundary-points of a Range must have the same root container.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320008 13f79535-47bb-0310-9956-ffa450edef68"
d995a7c935ea5f5ed32a4e3e576b9037dcbfa73f,"DOM Ranges Fix:  The start position of a Range is guaranteed to never be after the end position. To enforce this restriction, if the start is set to be at a position after the end, the Range is collapsed to that position. Similarly, if the end is set to be at a position before the start, the Range is collapsed to that position.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320009 13f79535-47bb-0310-9956-ffa450edef68"
5b454a7cdb6951ca342e667a032aabc41aff5404,"Bug fix: The method detach () should raise an INVALID_STATE_ERR: Raised if detach() has already been invoked on this object.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320010 13f79535-47bb-0310-9956-ffa450edef68"
ba5163c426941dc3c7f20b510796107fd9491547,"compareBoundaryPoints should raise a WRONG_DOCUMENT_ERR if the two Ranges are not in the same Document or DocumentFragment.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320011 13f79535-47bb-0310-9956-ffa450edef68"
89002e740c6e9ec7f4eff9a19e564a1171203a84,"Avoid creating a new Augmentations object for every probable whitespace character reference.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320012 13f79535-47bb-0310-9956-ffa450edef68"
149ca5bdf2b3f2fe064663f934686911454c4a13,"Allow EntityResolver to be unset. Don't need DefaultHandler to set
ErrorHandler to null. The wrapper on the DOMParser checks for
null.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320013 13f79535-47bb-0310-9956-ffa450edef68"
8eca4bb009200eb36684528431cce06cadd3a881,"Adding support for EntityResolver2.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320014 13f79535-47bb-0310-9956-ffa450edef68"
e7b8ee718be399454bd444231224e65afb563999,"Fixing a bug reported on xerces-j-user:
http://marc.theaimsgroup.com/?l=xerces-j-dev&m=109169885816999&w=2

The schema validator was incorrectly handling multi-field keys. When checking
whether there's a corresponding key for a keyref it was not treating the keys
as ordered sets.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320015 13f79535-47bb-0310-9956-ffa450edef68"
218f5846430598bb7062d853caa23b3bcb17d43d,"Fixing a potential NPE and some cleanup.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320016 13f79535-47bb-0310-9956-ffa450edef68"
81dc09869ef5a6ec347f93d7ce58a2a5e04f94ce,"Update the release plan.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320017 13f79535-47bb-0310-9956-ffa450edef68"
77828b82e196de4a8ae36da406862d41ab373179,"cloneContents and extractContents should raise the DOMException HIERARCHY_REQUEST_ERR when a DocumentType node
is cloned/extracted into the new DocumentFragment instead of the RangeException INVALID_NODE_TYPE_ERR.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320018 13f79535-47bb-0310-9956-ffa450edef68"
867902c7fc63436b34806f03bed64ca2b0285e43,"JIRA Issue #1001:
http://nagoya.apache.org/jira/browse/XERCESJ-1001

When processing attributes in the scanner we store both the
non-normalized and normalized values of an attribute. Attribute
value normalization as specified by the XML 1.0 specification
replaces tabs and line breaks with spaces and performs entity
expansion, if any entity references exist in the attribute values.

In the vast number of real world documents both the
non-normalized and normalized values are the same, however we
were creating a new string for both values. Thanks to the
patch by John Kim, we only create two strings if the non-normalized
and normalized value are different.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320019 13f79535-47bb-0310-9956-ffa450edef68"
7320b3973bd3fddbbba7bbed704a7d4b12f17b62,"Performance: If the scanner stopped on the closing quote
that means we've scanned the entire attribute value. If
this value does not contain any TABs, CRs or LFs then it
would be unchanged by normalization. Now checking
this common condition to test whether both the normalized
and non-normalized values are equal.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320020 13f79535-47bb-0310-9956-ffa450edef68"
1fd73c5efa369bf142b2c60d1a79e58ca96a34e9,"Adding an implementation for language fixup as specified in
the XInclude 1.0 CR (April, 2004). Also, renaming some
fields to conform to the project's naming conventions.

[1] http://www.w3.org/TR/2004/CR-xinclude-20040413/#language


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320021 13f79535-47bb-0310-9956-ffa450edef68"
35274f855b1d18377ed807fffc8ae99457bd3761,"Fixing a bug introduced in a previous commit. Should be
calling startElement() instead of emptyElement().


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320022 13f79535-47bb-0310-9956-ffa450edef68"
dfcab83fe92a599e47a7cf77ff44f0687e14d65f,"Update the release plan.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320023 13f79535-47bb-0310-9956-ffa450edef68"
598feebf06856d01dd1488d625aff8f66d025a2c,"Sharing the symbol table with child pipelines. Also, SAX is expecting
internalized strings for all XML names since the string-interning
feature is always on. We weren't doing that for attributes added
during fixup: xml:base, xml:lang and xmlns:*. This should now be fixed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320024 13f79535-47bb-0310-9956-ffa450edef68"
a70aa8a813f7ef3285827aa145aaa0da7509aa9e,"Fixing a number of bugs regarding namespace fixup:

1) When adding an attribute for the default namespace
we were reporting that the prefix was 'xmlns' instead of null.

2) When adding a namespace declaration which unbinds
a namespace we were reporting null as the value of this
attribute instead of the empty string.

3) Start and end prefix mappings were not being reported
in SAX because the prefix was not being declared in the
current context.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320025 13f79535-47bb-0310-9956-ffa450edef68"
f71f2b241b3432d5d6e95d5184af47665ecab7f4,"Fixing a bug in RangeImpl related to the effect of DOM mutations (insertions) on Ranges.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320026 13f79535-47bb-0310-9956-ffa450edef68"
283606ab859c95f3a4ab9069331c91b732ba01ad,"All classes which extend java.lang.Throwable implement
java.io.Serializable.  Adding serialVersionUIDs to all
Exception and Error classes which didn't have them.

When not explicitly specified, the serialVersionUID is
computed using a variety of properties of the class.
Making a compatible change such as adding a new method
would change this generated ID.  Explicitly specifying them
now should help us avoid possible interoperability problems
in the future.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320027 13f79535-47bb-0310-9956-ffa450edef68"
5694f514299f7627cd08f74e6d111829a2608e10,"The XInclude 1.0 CR [1] states that: ""It is a fatal error to attempt to
replace an xi:include element appearing as the document (top-level)
element in the source infoset with something other than a list of zero
or more comments, zero or more processing instructions, and one
element.""

We were allowing merged infosets with multiple or no root elements
to pass through as well as those containing non-whitespace
characters and unexpanded entity references outside of the root.
This should be fixed for now except for an edge case involving
text includes.

[1] http://www.w3.org/TR/xinclude/#creating-result


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320028 13f79535-47bb-0310-9956-ffa450edef68"
602e768afec64ffaf7fcf470cae1f33e658699cb,"Propagate buffer size to child pipelines.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320029 13f79535-47bb-0310-9956-ffa450edef68"
90fc8abc49019de38bf85b34dbc613a109beaa28,"Adding back some methods which were renamed between
DOM Level 3 drafts for compatibility with older applications
which were early adopters of this API.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320030 13f79535-47bb-0310-9956-ffa450edef68"
96e4ba9cd6c0c097ee65e643fdd1a1432be219da,"Once we've created an XPathEvaluator, cache it to avoid
looking it up again and creating it using reflection.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320031 13f79535-47bb-0310-9956-ffa450edef68"
b0895c11a47db0e3dd3b4b1d5ff010ae6a59364b,"Updating the XJavac task to better future proof it against
later versions of Ant which are aware of JDK versions
beyond 1.4. For instance, Ant 1.6.1 started detecting
JDK 1.5 but XJavac was only checking for JDK 1.4.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320032 13f79535-47bb-0310-9956-ffa450edef68"
7569f1e56b929395f70c2717a33b9ea5e6583d7a,"Fixing bug [XERCESJ-919]
http://nagoya.apache.org/jira/browse/XERCESJ-919
We used to ignore leading zeros in the fractional part of date/time ""second"" values;
we used to retain trailing zeros in the fractional part of data/time ""second"" values.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320033 13f79535-47bb-0310-9956-ffa450edef68"
8ca9122d1a9390f46c7278c08c759252f48cd104,"Fix for defect http://nagoya.apache.org/jira/browse/XERCESJ-864 so that Node.getBaseURI consistently returns null if the URI to return is malformed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320034 13f79535-47bb-0310-9956-ffa450edef68"
0b72971657560903615cf5c0949d1c7c0e3b3e69,"A fix to prevent the field fDocumentURI from being overwritten when getBaseURI is invoked.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320035 13f79535-47bb-0310-9956-ffa450edef68"
7edaaec4398fa3586495511a069e903b43d9a7f9,"Making XNI changes as per discussion on xerces-j-dev:

1) Add a getCharacterOffset method to XMLLocator which returns 
the character offset for the current entity. 

2) Add a getVersion method to XMLLocator which returns the XML
version of the current entity. 

3) Add a getCharacterOffset method to XMLParseException to 
expose the offset from the XMLLocator.

Also preventing an NPE in case of a null locator passed to the
constructor. This had been fixed ages ago for the other
constructor.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320036 13f79535-47bb-0310-9956-ffa450edef68"
64538884f8e1bd47f411cc07fa98b0895443bb20,"Updating the implementation to work with the changes
to XNI's XMLLocator. Implemented getXMLVersion in
XMLEntityScanner and XMLEntityManager, propogating
this to the SAX parser. Also removed some setter methods
which have long been removed from the XMLLocator
interface.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320037 13f79535-47bb-0310-9956-ffa450edef68"
442fb786e74e217eef5450c8d77212b886249892,"Avoid overwriting baseURI field each time getBaseURI is called.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320038 13f79535-47bb-0310-9956-ffa450edef68"
a838e0a8239b45699d996c2a0052f9f1506a5682,"Updating toString() method to print out character offset.
Removing redundant printing of public identifier. We were
writing it to the buffer twice.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320039 13f79535-47bb-0310-9956-ffa450edef68"
a31687c9e922dfb054be9b51683cb61201ab7ed5,"Adding support for computing character offsets to the scanner.
Exposing this information to the XNI and DOM locators. Thanks
to Ankit Pasricha for this contribution.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320040 13f79535-47bb-0310-9956-ffa450edef68"
4180a0cf57eb213e3594f9d38bb7fccb94be39f6,"Fixing JIRA Bug #1006:
http://nagoya.apache.org/jira/browse/XERCESJ-1006

We can't assume that the DOM we're serializing is from Xerces.
The LSSerializer should work with any DOM Level 3 core implementation.
Getting rid of casts to implementation classes which caused a
ClassCastException to be thrown when attempting to check the
well-formedness of attribute values.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320041 13f79535-47bb-0310-9956-ffa450edef68"
8e8a4e6838165cae6d50281cdf6040d2293b8c14,"Adding some information on the deprecation of
HTMLSerializer and XHTMLSerializer.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320042 13f79535-47bb-0310-9956-ffa450edef68"
4849d13c81cf5e72394a49911195da4af57cefa1,"Initial support for XML Schema 1.1. Adding datatype validators
for the two new duration types as well as some interfaces for
actual values: List, Double, Float, HexBinary, Base64. Thanks
to Ankit Pasricha for this contribution.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320043 13f79535-47bb-0310-9956-ffa450edef68"
b7a9c7ef0da5df6a4a65c3a23c6e76f10d729e0d,"Build infrastructure for XML Schema 1.1. Thanks to Ankit Pasricha.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320044 13f79535-47bb-0310-9956-ffa450edef68"
918bd6d91525850c95b15d083a793d36768dca26,"Fixing up indentation in ListDV$ListData.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320045 13f79535-47bb-0310-9956-ffa450edef68"
e7ab2dde6780890d62637d81a2e66bc58319cbc0,"Fixup license information.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320046 13f79535-47bb-0310-9956-ffa450edef68"
e327329007f8c687e931023a739116abbeaa503b,"Fixing dvjar build target.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320047 13f79535-47bb-0310-9956-ffa450edef68"
34b5d15922104f4621293d9577c4ee857ff497b7,"For now make XML Schema 1.1 datatype validators package private.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320048 13f79535-47bb-0310-9956-ffa450edef68"
ba1b625d63769eda5416aff1b69f62310d14f9c2,"Add manifest to jar for XML Schema 1.1. Also adding info to the
usage target about the new schema targets.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320049 13f79535-47bb-0310-9956-ffa450edef68"
1d2452e8c30f5bff7da639d15d1ac365961ec395,"Clearly mark datatype interfaces as being experimental and likely to change.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320050 13f79535-47bb-0310-9956-ffa450edef68"
3f3a6d14c74de1148dabfa8787c97f515fea70d8,"Updating the release document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320051 13f79535-47bb-0310-9956-ffa450edef68"
6703c08a9cb22377242a612a656787e03aa98496,"Updating the release document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320052 13f79535-47bb-0310-9956-ffa450edef68"
a75650e8efdfc9c8ec4ca74b44fdd040cf43ae96,"Added FAQ for language fixup.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320053 13f79535-47bb-0310-9956-ffa450edef68"
3a47b671b1826377f16bfd955e093fb3263348c8,"Adding a new initialization method which has a parameter that
controls whether an exception is thrown if the URI specified
is relative. Also factoring the URI resolution code into an
absolutize method as well as a method which returns whether
the URI is absolute. This will enable us to avoid throwing an
exception for relative URIs, but allow us to detect a relative
URI so that we can absolutize it against a base.

This contribution is a slighty modified patch from John Kim, IBM.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320054 13f79535-47bb-0310-9956-ffa450edef68"
65ff598b9306de596ed05bdd600b999524e09f60,"Fixing bug XERCESJ-1010 (http://issues.apache.org/jira/browse/XERCESJ-1010)
There is a list of complex types for which we need to check UPA.
Somehow the entry for the ""root"" type was overwritten by the ""test"" type,
so we were not checking UPA for the ""root"" type.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320055 13f79535-47bb-0310-9956-ffa450edef68"
b23337c8086dfb4d93e7fd607889d224f334dd3c,"XML Schema 1.1 - RQ-123: Allow year 0000 in date-related types.
Thanks to Naela Nissar, now checking for year 0000.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320056 13f79535-47bb-0310-9956-ffa450edef68"
49b2ab6407154752aed47b96a1bd51ef7b71fd06,"Handle December 31st, 24:00:00 year -1 == January 1st, 00:00:00 year 0
which is 1 BCE in the first WD for XML Schema 1.1. Thanks to Ankit Pasricha
for catching this.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320057 13f79535-47bb-0310-9956-ffa450edef68"
5d3b8c9ddfa8ae9377750494941de72353e1c8b1,"Updating the release document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320058 13f79535-47bb-0310-9956-ffa450edef68"
511e7c3d77e1828801b0cd91317a23788a7cf8cc,"Replace references to Bugzilla with JIRA.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320059 13f79535-47bb-0310-9956-ffa450edef68"
974a19a0aae0d886d5c65484d3878d4a5b932baa,"Some additional changes for new initialization and absolutize methods.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320060 13f79535-47bb-0310-9956-ffa450edef68"
729d8e223c43d8ab53239f155151d2e319b45399,"Performance: Reduce MalformedURIExceptions thrown while
expanding system ids. The URI class previously only accepted
absolute URIs so at least one exception was always being
thrown for relative URIs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320061 13f79535-47bb-0310-9956-ffa450edef68"
71a74e9c13e51cbe53a58889a482134f9b020a1a,"Fixing JIRA Bug #816:
http://nagoya.apache.org/jira/browse/XERCESJ-816

This had only been partially fixed. A value for the encoding
attribute specified on an LSInput is authoritative, meaning
it will override any encoding in an XML or Text declaration.
Should be covering all of these cases now. Renamed some
methods in XMLEntityManager.ScannedEntity so that their
names are more descriptive of what they actually do.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320062 13f79535-47bb-0310-9956-ffa450edef68"
53c7d2f71fe51d9a0358ecebc82ed29d8a2a3c2a,"Adding a convenience method for other classes which
wish to resolve URIs against the current user dir.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320063 13f79535-47bb-0310-9956-ffa450edef68"
3f9f1fd1f215e05caf3cfadf175f184329f414b3,"Patch for the implementation of TypeInfo.isDerivedFrom from the DOM Level 3 Core Recommendation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320064 13f79535-47bb-0310-9956-ffa450edef68"
84954d5a4f20951e5805e590c25980080354b269,"Add references to XML application performance articles
to the performance FAQ.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320065 13f79535-47bb-0310-9956-ffa450edef68"
528680d1601e5b0133c7efe2efeed7cf21983c8c,"Update badly out of date FAQ on how to instruct the parser
to validate against XML schema only. This has been possible
for a long time with JAXP 1.2. Added some examples which
demonstrate how to set the schema language property.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320066 13f79535-47bb-0310-9956-ffa450edef68"
100563c2febe416ea06ba376cd7db97c69123ec3,"Cleanup ClassCastException FAQ:
- expanding acronyms
- fixing some typos


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320067 13f79535-47bb-0310-9956-ffa450edef68"
d6d956c1a04dd6590389e23792efc40abf90fb1f,"Update features and properties docs. We should be
showing examples which use JAXP rather than ones
which use org.apache.xerces.parsers.DOMParser
directly.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320068 13f79535-47bb-0310-9956-ffa450edef68"
c380bf3077081cba3b736ee21b1eb054f5580364,"Committing a patch from Ankit Pasricha to retain timezone information
after normalization.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320069 13f79535-47bb-0310-9956-ffa450edef68"
53f949c94da5310306778147e6797d4cdcaaebd2,"XInclude: Support content negotation for parse='xml'.
Restructured interaction between XIncludeTextReader
and XIncludeHandler for accept and accept-language
attributes. Created new HTTPInputSource class which
glues it all together.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320070 13f79535-47bb-0310-9956-ffa450edef68"
00c0d2bf0a535b2ee3858aa470876ad410cf6109,"Update the release plan.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320071 13f79535-47bb-0310-9956-ffa450edef68"
9389c953b4114a2708b24c4ea6aea9bb6a87ffe5,"Adding version tag to several classes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320072 13f79535-47bb-0310-9956-ffa450edef68"
67e50d888e2d674c958ff10b0354515725fbeab8,"Call setInstanceFollowRedirects by reflection since this
method doesn't exist in some earlier JDKs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320073 13f79535-47bb-0310-9956-ffa450edef68"
fd38b6398088cf324927ca4ec85fc3fa2e39ac60,"XML Schema 1.1: Adding a type validator for anyAtomicType
as described in the 07/16/2004 draft [1].

Thanks to Ankit Pasricha for this contribution.

[1] http://www.w3.org/TR/2004/WD-xmlschema11-2-20040716


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320074 13f79535-47bb-0310-9956-ffa450edef68"
e16d69116c14fcef9b5873a9ed0e724dc9bfc7ef,"XML Schema 1.1: Adding a type validator for precisionDecimal
as described in the 07/16/2004 draft [1].

Thanks to Ankit Pasricha for this contribution.

[1] http://www.w3.org/TR/2004/WD-xmlschema11-2-20040716/#precisionDecimal


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320075 13f79535-47bb-0310-9956-ffa450edef68"
25170183c9141ab6a18c8099f39f77a7cce7e288,"XML Schema 1.1: Various changes for new datatypes.

- added constants for anyAtomicType and precisionDecimal
- added anyAtomicType to the type heirarchy
- return duration for primitive kind of yearMonthDuration and dayTimeDuration

Thanks to Ankit Pasricha for this contribution.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320076 13f79535-47bb-0310-9956-ffa450edef68"
6141ecc3e0e583e6481bb349274bff168c2e1ac0,"If the continue after fatal error feature is enabled we
don't want to send out a request with malformed
request properties. Nulling them if they're bad so we
don't use them later.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320077 13f79535-47bb-0310-9956-ffa450edef68"
90df782594c5419bfebb4fe521a6eb5e67b98a3c,"XML Schema 1.1 makes a distinction between equality [1] and identity [2].
For instance 0.0 is equal but not identical to -0.0 for the float and double
datatypes. Also for date/time datatypes, two values representing the
same moment in time in different timezones are equal but not identical.
For many datatypes, the identity relation is the equality relation.

Thanks to the patch by Naela Nissar we now make the distinction between
identity and equality for datatypes.

[1] http://www.w3.org/TR/2004/WD-xmlschema11-2-20040716/#equality
[2] http://www.w3.org/TR/2004/WD-xmlschema11-2-20040716/#identity


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320078 13f79535-47bb-0310-9956-ffa450edef68"
acb195f3c9e604608c33377119d3a4a7b7310b36,"Updates for changes in PR draft:
http://www.w3.org/TR/2004/PR-xinclude-20040930/

Report a fatal error if the value of the href attribute [1]
contains a fragment identifier or after escaping has
been applied results in a syntactically invalid URI or IRI.

Apply the escaping rules described in section 4.1.1 [2]
when processing href attributes.

[1] http://www.w3.org/TR/2004/PR-xinclude-20040930/#include_element
[2] http://www.w3.org/TR/2004/PR-xinclude-20040930/#IRIs


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320079 13f79535-47bb-0310-9956-ffa450edef68"
a88d00ca1c9be7a8f474e84829e543c0ae167d4d,"Avoid creating objects when testing whether two
doubles or floats are identical. We can determine
whether two 0.0' values are identical by examining
their bits.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320080 13f79535-47bb-0310-9956-ffa450edef68"
7acce45c54f263b919b697e4b31c83fbfae727cf,"Update XNI version to 1.2 to reflect recent changes
made to XMLLocator and XMLParseException.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320081 13f79535-47bb-0310-9956-ffa450edef68"
527da50d24859db37da0e8e3dd78911edaa309c8,"Some documentation updates for XInclude 1.0 PR.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320082 13f79535-47bb-0310-9956-ffa450edef68"
8249c467a12749c49207d0e08cecc1eb04e145d3,"Update the release doc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320083 13f79535-47bb-0310-9956-ffa450edef68"
c977f808409ac754486ae69c8d94cc07d03385c6,"Fixing some Javadoc warnings.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320084 13f79535-47bb-0310-9956-ffa450edef68"
7af97460456e1a9e3d94d361ea6c5fdabbf635fe,"Fixing some Javadoc warnings.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320085 13f79535-47bb-0310-9956-ffa450edef68"
6889a288c842d6a4d7e7402ae04d5dd3ddf7d742,"Fixing Javadoc warnings.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320086 13f79535-47bb-0310-9956-ffa450edef68"
c18829ab11e7012a2232a7fa255b343be69a2ff2,"Provide support for two custom taglets for javadocs in xerces:
@xerces.internal and @xerces.experimental. These tags should
be applied to any xerces classes/interfaces or methods that are
internal (not to be used by end users) or experimental (highly 
likely to change or deleted) in the same way as @deprecated is used.

Thanks very much to Ankit Pasricha for this contribution.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320087 13f79535-47bb-0310-9956-ffa450edef68"
87597bd9b5a54c999169a363ca407c1937c022ec,"Updates to support new taglets for @xerces.internal
and @xerces.experimental. Thanks to Ankit Pasricha
for this contribution.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320088 13f79535-47bb-0310-9956-ffa450edef68"
09450b5edf0850167be6acfc71b3206dbc6f40ae,"Marking several classes as internal with the @xerces.internal tag.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320089 13f79535-47bb-0310-9956-ffa450edef68"
7e2e895c20500b947b005ece1c86d9d8a75516dc,"Marking several classes as internal with the @xerces.internal tag.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320090 13f79535-47bb-0310-9956-ffa450edef68"
ef292316ca20044141fa7d31264cf90b4730b82a,"Marking several classes as internal with the @xerces.internal tag.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320091 13f79535-47bb-0310-9956-ffa450edef68"
0490776e1a1589f4053467f57fa1abb9d5873d73,"Marking several classes as internal with the @xerces.internal tag.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320092 13f79535-47bb-0310-9956-ffa450edef68"
f8427cae2b14f3fa258f067a6daf2a33778976a5,"Marking several classes as internal with the @xerces.internal tag.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320093 13f79535-47bb-0310-9956-ffa450edef68"
d66dcea8b2a7043d00df8494dfdee9aecfca8476,"Fixing a typo.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320094 13f79535-47bb-0310-9956-ffa450edef68"
8877a5c86684c8f88e1b0d2c596aa3dfa3f74f20,"Adding documentation for use-attributes2, 
use-entity-resolver2 and use-locator2.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320095 13f79535-47bb-0310-9956-ffa450edef68"
35fe25471bce2c61a8f9cee73b2849d9fa3a4b17,"Marking several classes as internal with the @xerces.internal tag.
Patch thanks to Ankit Pasricha.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320096 13f79535-47bb-0310-9956-ffa450edef68"
0885cd5b2d8d56aa714eb193d187360a4bd85c05,"Marking several classes as internal with the @xerces.internal tag.
Patch thanks to Ankit Pasricha.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320097 13f79535-47bb-0310-9956-ffa450edef68"
28fc8d4605b4b2b086b2fb0249d12ef26726fd7d,"Marking several classes as internal with the @xerces.internal tag.
Patch thanks to Ankit Pasricha.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320098 13f79535-47bb-0310-9956-ffa450edef68"
e0604b224eb93a9ec377e174471680dfe30843bd,"Marking several classes as internal with the @xerces.internal tag.
Patch thanks to Ankit Pasricha.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320099 13f79535-47bb-0310-9956-ffa450edef68"
addd1807ceef2262319185ba52811f5f72116e9c,"Fixing an AIOOBE. When validating content declared
to be hexBinary we were throwing the exception if
the value contained characters U+255 and above.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320100 13f79535-47bb-0310-9956-ffa450edef68"
e140b237a9c0230ffd7a7e165b6d1dbdf6acc107,"Fixing an AIOOBE. When validating content declared
to be base64Binary we were throwing the exception if
the lexical value contained characters U+255 and above.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320101 13f79535-47bb-0310-9956-ffa450edef68"
4d19ef4f1a9a0a293a94da79b4b9b636bb3bbcd3,"Some cleanup.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320102 13f79535-47bb-0310-9956-ffa450edef68"
ecf8c5298351bad8362e1c844ecd37bf5e4440ac,"Make ObjectList consistent with other object lists
in the XML Schema API by returning null instead
of throwing an exception when the index specified
is invalid.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320103 13f79535-47bb-0310-9956-ffa450edef68"
7699e8a7a723ada2a19a8b0fb938bf0be94a8ec3,"For QNames, NOTATIONs and types derived from them you
cannot determine actual values from the lexical form alone.

Adding a method for retrieving actual enumeration values.
This was previously impossible to derive from the current
XSModel.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320104 13f79535-47bb-0310-9956-ffa450edef68"
325d41149ba1142c65ca5b66d80429c1a94f45a8,"Remove a couple unused variables.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320105 13f79535-47bb-0310-9956-ffa450edef68"
c1c7c929a109a53046b72cc6ddc7d288fdf4bda1,"In environments where taglets are not supported such
as in JDK 1.3 and lower, provide another method with
replacing the @xerces.internal and @xerces.experimental
tags. This patch is thanks to Ankit Pasricha.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320106 13f79535-47bb-0310-9956-ffa450edef68"
6a9e33e8895292e5c75081e912e354963b05de7a,"Some fixes to allow replacement of @xerces.internal and
@xerces.experimental to work on JDK 1.3 or lower. This
patch is thanks to Ankit Pasricha.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320107 13f79535-47bb-0310-9956-ffa450edef68"
0cd752517655dfb46a831683426c5d08216c3bf5,"Reduce memory used by lookup tables.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320108 13f79535-47bb-0310-9956-ffa450edef68"
dee8920789da64bcb469519f9a6030ddd14caccc,"Reduce object creation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320109 13f79535-47bb-0310-9956-ffa450edef68"
5365543c197779dfe8db73e71f69ea31239d1017,"Reduce overhead of creating a ScannedEntity by reusing
character buffers. This is accomplished with a buffer pool.
Buffers are returned to the pool once scanning of the
entity is complete. Also reducing the internal entity buffer
size to 512 from 1024.

XMLEntityManager$ScannedEntity creation time: 
Xerces 2.6.2 :  0.8 sec for 674 invocations (avg) 
New              :  0.02 sec for 674 invocations (avg) 

That translates to a 7-9% improvement in the overall
speed of parsing. This performance improvement is
thanks to the patch by Ankit Pasricha.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320110 13f79535-47bb-0310-9956-ffa450edef68"
b98b83060e13672ad49242ff55cfecac2d8533bd,"Patch that fixes some DOM Level 2 events problems such as:
- Dispatching of events to a subtree was being stopped from reaching descendants when a higher node in the tree did not have a registered listener.
- Sibling of the target node and its descendants were receiving events during dispatch to the target node's subtree.
- During replaceData, only one event to mark the replacement rather than two for insert and delete is fired.
- DOMAttrModified was not being fired when the text node child of an attribute was modified.
- Adds a total field to LCount to tell whether any listeners are registered rather than checking captures + bubbles + default

Thanks to Nalea for her contribution [1].

[1] http://nagoya.apache.org/eyebrowse/ReadMsg?listName=xerces-j-dev@xml.apache.org&msgNo=4662


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320111 13f79535-47bb-0310-9956-ffa450edef68"
76aa6562a5c5d042d95f1211b28ad18e6c67e47d,"Update the release doc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320112 13f79535-47bb-0310-9956-ffa450edef68"
76d3e42bf13d51baa2d64904f1815445ba3a8706,"Fixing JIRA Bug #1023:
http://nagoya.apache.org/jira/browse/XERCESJ-1023

The previous fix masked the real bug here. If the root node
being serialized has no children we were walking up the tree
instead of stopping immediately. The old fix just prevented
the NullPointerException but didn't stop well-formedness
checking of the root node's following siblings and following
siblings of its ancestors.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320113 13f79535-47bb-0310-9956-ffa450edef68"
87e00f7f4c9c94e12a14df2c3a4f31d7f19a3429,"Fixing JIRA Bug #1016:
http://nagoya.apache.org/jira/browse/XERCESJ-1016

Before scanning data we assert that the number of characters
left in the current entity is at least as long as the end
delimiter for the structure. Previously if the number of
characters left in the entity was equal to the delimeter
length we incorrectly flagged this as an error.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320114 13f79535-47bb-0310-9956-ffa450edef68"
861425231c227748d09576154f5eb8aa63a2d648,"Fixing JIRA Bug #1025:
http://issues.apache.org/jira/browse/XERCESJ-1025

Fixes compilation problems on JDK 1.2.2. Also making
a number of fields private which were package private
since they're not referenced by other classes in the
package.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320115 13f79535-47bb-0310-9956-ffa450edef68"
06acbe51f898cfd20bceba9ae8cbd0ca61904aee,"Fixing JIRA Bug #1025:
http://issues.apache.org/jira/browse/XERCESJ-1025

Fixes compilation problems on JDK 1.2.2.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320116 13f79535-47bb-0310-9956-ffa450edef68"
cdd0ea79f8921d0e50af6b79fb6c935dcf24209a,"Decode %nn escapes in write() as we do for writeToURI().


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320117 13f79535-47bb-0310-9956-ffa450edef68"
4c90d617990062bca6ffa45d0630d85068763e34,"When an annotation has no <documentation> or <appinfo> children we were
completely losing the annotation component. This is because the schema DOM
stores the textual representation of the annotation on the first child of the
current parent. When <annotation> has element content, that's its first
child. When <annotation> has no element content, that's its parent's first
child. The latter is problematic because only if the annotation is the first
child of its parent will we find the text node there. We need to store the
string representation in a consistent place so it can be reliably retrieved,
perhaps as user data.  In the mean time we look for a text child on
annotation if it has no element content. This works for a large number of
cases but not all of them.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320118 13f79535-47bb-0310-9956-ffa450edef68"
7980f8504117a06e4cd1fadb4cb4cee9361ba500,"Schema erratum E1-8 allows non-schema namespace attributes on appinfo and documentation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320119 13f79535-47bb-0310-9956-ffa450edef68"
ef27fd31182e35abfe258c52d3105d5d03c67a8e,"Adding a utility method for retrieving prefixes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320120 13f79535-47bb-0310-9956-ffa450edef68"
5ef118a2807d7cca6e5b0bb953edeb200c519e00,"Both <schema> and <documentation> may have an xml:lang attribute of type language.
We need to check that when these attributes appear in a schema document on these
elements that their value is valid with respect to the language type. Also fixed a couple
bugs where we were incorrectly processing xml* and xmlns* attributes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320121 13f79535-47bb-0310-9956-ffa450edef68"
43da2130f1bd23663fd443134eafe2cc81f709cd,"DOM Level 3 specifies an attribute called strictErrorChecking [1] which when set to false
allows an implementation to not test every possible error case. Reducing the amount
of checking performed when strictErrorChecking is false. This patch is thanks to
Naela Nissar.

[1] http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#Document3-strictErrorChecking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320122 13f79535-47bb-0310-9956-ffa450edef68"
ed9dd34ec41de6724aceed0bc3e312a69ba4039f,"Fixing indentation from last commit.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320123 13f79535-47bb-0310-9956-ffa450edef68"
8d796ccbe927d2d9f390708e15b1a1d943705ff1,"DOM Level 3 specifies an attribute called strictErrorChecking [1] which when set to false
allows an implementation to not test every possible error case. Reducing the amount
of checking performed when strictErrorChecking is false. This patch is thanks to
Naela Nissar.

[1] http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#Document3-strictErrorChecking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320124 13f79535-47bb-0310-9956-ffa450edef68"
ef2ee94a4d5388f3d6a370a5a69b335eb39d8a38,"DOM Level 3 specifies an attribute called strictErrorChecking [1] which when set to false
allows an implementation to not test every possible error case. Reducing the amount
of checking performed when strictErrorChecking is false. This patch is thanks to
Naela Nissar.

[1] http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#Document3-strictErrorChecking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320125 13f79535-47bb-0310-9956-ffa450edef68"
414da891fec1b3a6c520696d3dd315ab22608d58,"DOM Level 3 specifies an attribute called strictErrorChecking [1] which when set to false
allows an implementation to not test every possible error case. Reducing the amount
of checking performed when strictErrorChecking is false. This patch is thanks to
Naela Nissar.

[1] http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#Document3-strictErrorChecking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320126 13f79535-47bb-0310-9956-ffa450edef68"
8d7b130fa1fb1859180c602788c4023113e586ea,"DOM Level 3 specifies an attribute called strictErrorChecking [1] which when set to false
allows an implementation to not test every possible error case. Reducing the amount
of checking performed when strictErrorChecking is false. This patch is thanks to
Naela Nissar.

[1] http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#Document3-strictErrorChecking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320127 13f79535-47bb-0310-9956-ffa450edef68"
7f734e130552bea3e730d01769efd7e14eaf96e6,"DOM Level 3 specifies an attribute called strictErrorChecking [1] which when set to false
allows an implementation to not test every possible error case. Reducing the amount
of checking performed when strictErrorChecking is false. This patch is thanks to
Naela Nissar.

[1] http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#Document3-strictErrorChecking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320128 13f79535-47bb-0310-9956-ffa450edef68"
7d5e2eec35b4da0f2a1aeaef939050bfdc4721ab,"DOM Level 3 specifies an attribute called strictErrorChecking [1] which when set to false
allows an implementation to not test every possible error case. Reducing the amount
of checking performed when strictErrorChecking is false. This patch is thanks to
Naela Nissar.

[1] http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#Document3-strictErrorChecking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320129 13f79535-47bb-0310-9956-ffa450edef68"
199236d0d28f85d96774b9fcf7ee9271f0bcaa1e,"DOM Level 3 specifies an attribute called strictErrorChecking [1] which when set to false
allows an implementation to not test every possible error case. Reducing the amount
of checking performed when strictErrorChecking is false. This patch is thanks to
Naela Nissar.

[1] http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#Document3-strictErrorChecking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320130 13f79535-47bb-0310-9956-ffa450edef68"
93c209843c960fca0f01ce05ec42eee14631f5e7,"DOM Level 3 specifies an attribute called strictErrorChecking [1] which when set to false
allows an implementation to not test every possible error case. Reducing the amount
of checking performed when strictErrorChecking is false. This patch is thanks to
Naela Nissar.

[1] http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#Document3-strictErrorChecking


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320131 13f79535-47bb-0310-9956-ffa450edef68"
1512fef8fa5b8edcc8c588ffb30699ae8f150385,"Applying patches for getWholeText[1] and replaceWholeText[2] submitted by Naela Nissar with minor modifications.  Also fixing a bad getWholeText test (dom.dom3.Test) that was broken by the fix.

[1] http://nagoya.apache.org/eyebrowse/ReadMsg?listName=xerces-j-dev@xml.apache.org&msgNo=4736
[2] http://nagoya.apache.org/eyebrowse/ReadMsg?listName=xerces-j-dev@xml.apache.org&msgNo=4737


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320132 13f79535-47bb-0310-9956-ffa450edef68"
8cab1924e68bafbbbc715f11bf89fc25b9e0d096,"Adding public key to KEYS file


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320133 13f79535-47bb-0310-9956-ffa450edef68"
de2de457e11ecbfb62309297c61419c9481c16c7,"Added a schema grammar implementation which synthesizes the portion of the schema for
schemas relevant to annotations. This partial schema for schemas will allow Xerces to laxly
validate annotations during schema processing.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320134 13f79535-47bb-0310-9956-ffa450edef68"
84e323705416d2bb097f7bf674d2f52cbc6e01b2,"Some clean-up from previous commit. Also, changed the size of the SymbolHash
so that all of the element declarations hash to unique locations.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320135 13f79535-47bb-0310-9956-ffa450edef68"
1eb0c4a753d3312a310a414cb70ca84d47cec0d5,"Update release plan.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320136 13f79535-47bb-0310-9956-ffa450edef68"
badf0af2d5f376c435ab706206fe1dd48a57b447,"remove reference to taglet options file


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320137 13f79535-47bb-0310-9956-ffa450edef68"
093e42e8444804d861c4db80c933207c9e0a43fa,"removed need for this file


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320138 13f79535-47bb-0310-9956-ffa450edef68"
5fe3f831a3ba297291ee038501deaf9a596bbc49,"Update URL for location of nightly GUMP builds.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320139 13f79535-47bb-0310-9956-ffa450edef68"
14e53fe4004abf98c130c620840118349302e68f,"expose date-time information through an interface.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320140 13f79535-47bb-0310-9956-ffa450edef68"
7d131bcf7dcf92f1956fe84655dd472f4f814eb1,"Fixing JIRA Bug #701:
http://nagoya.apache.org/jira/browse/XERCESJ-701

RFC 2396 allows one character schema names. They were being rejected.
This behaviour was there to help flag DOS file names, but it makes it
impossible for users who literally mean to specify URIs with one character
scheme names. To maintain backwards compatibility will update
XMLEntityManager.expandSystemId so that it catches such URIs when
strict mode is off. This is the only context where we attempt to fix URIs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320141 13f79535-47bb-0310-9956-ffa450edef68"
7a7b74251c79e8969d2a1e5ae21f8fee95da4f64,"Modifying expandSystemId to reject one character scheme names
when strict mode is off. The URI class used to this work. We do
this here so that we flag likely DOS file names and then fix them up.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320142 13f79535-47bb-0310-9956-ffa450edef68"
05e95ac7440e65d6b973f7f203c001097577e52f,"When fixing up windows file names transform C:blah into file:///C:/blah
instead of /C:/blah.  The latter is a relative URI with an absolute path.
This is later resolved against the base URI. If the base URI didn't look
like file:///blah/blah/blah then you'd get unexpected results. For instance
if the base URI were http://www.abc.com we'd get http://www.abc.com/C:/blah
instead of file:///C:/blah.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320143 13f79535-47bb-0310-9956-ffa450edef68"
be673530398e4cee249ba28979c6df5af6fe8326,"Fix indentation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320144 13f79535-47bb-0310-9956-ffa450edef68"
a2f90e1f5d9621ed2deb2ec9d91ee26f9d756631,"Fix indentation. Convert tabs to 4 spaces.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320145 13f79535-47bb-0310-9956-ffa450edef68"
72f8638e032192f3e127a3c7f8969667e2cc4b99,"constant for generate-annotations feature


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320146 13f79535-47bb-0310-9956-ffa450edef68"
5ccad056fa983f0878f55e02837fcc4d8e8ae96e,"bug fixes for toString methods


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320147 13f79535-47bb-0310-9956-ffa450edef68"
383d406312cb5d69cad581070697ef31278cf03e,"fix bug causing incorrect comparison of date/time related types


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320148 13f79535-47bb-0310-9956-ffa450edef68"
ad7ef87f929c91d82af2bdd652188b8652f413c6,"Cleaning up SecuritySupport. We no longer need both SecuritySupport and SecuritySupport12
because Xerces now only compiles and runs on J2SE 1.2 or higher. This allows us to tighten up
this class even more.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320149 13f79535-47bb-0310-9956-ffa450edef68"
07f9f986a8e9900f5c5a2964d7992f30e4450681,"Removing SecuritySupport12. Since Xerces only supports J2SE 1.2 or higher this class is no longer needed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320150 13f79535-47bb-0310-9956-ffa450edef68"
c6f2aec7b22437c8d6b404289d394d57514d2d34,"Cleaning up SecuritySupport. We no longer need both SecuritySupport and SecuritySupport12
because Xerces now only compiles and runs on J2SE 1.2 or higher. This allows us to tighten up
this class even more.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320151 13f79535-47bb-0310-9956-ffa450edef68"
94ffd12e2b043fb108436469de8f90e18e264808,"fixes for date/time comparisons


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320152 13f79535-47bb-0310-9956-ffa450edef68"
e5ad5ec27f3a789b1c326b2bac6dbc02a69e231b,"fixes for date/time comparisons


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320153 13f79535-47bb-0310-9956-ffa450edef68"
3653197ade444f9d8403bf2b4de0dd16846b91bb,"Final field ""DEFAULT_SIZE"" is initialized with a constant expression.
Making this static to save some memory per instance of this class.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320154 13f79535-47bb-0310-9956-ffa450edef68"
c00f76848437e0282c90fa367175211c76cb4741,"- expose timezone info
- access to enumeration type info


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320155 13f79535-47bb-0310-9956-ffa450edef68"
96e3421b51ef5e64f0c9d5279c7c854da196b937,"correct indentation
changes to date/time interface


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320156 13f79535-47bb-0310-9956-ffa450edef68"
4132e2991870e69f66d4a98af8993132f626a21a,"Potential NPEs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320157 13f79535-47bb-0310-9956-ffa450edef68"
c8c8e2c7234e2696193e3a7a9d585c7fe4faad61,"When XSLoader is asked to create an XSModel from multiple sources it's possible that
we process the same schema several times. So that we don't get duplicate components
in an XSModel, creating a new implementation of XSLoader which wraps XMLSchemaLoader
and registers a grammar pool on it.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320158 13f79535-47bb-0310-9956-ffa450edef68"
8da006f0ca5ba96c43c99b5d873607c3de9f3f2c,"Fixing a potential NPE.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320159 13f79535-47bb-0310-9956-ffa450edef68"
4c9a754fc39a20b604fd9b2ee83b8929e9919261,"Added a specialized grammar pool which knows how to merge
two schema grammars with the same target namespace.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320160 13f79535-47bb-0310-9956-ffa450edef68"
bb44e7191de3df06d8b35c8996312c94cbfeebbf,"Adding version field to the class' javadoc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320161 13f79535-47bb-0310-9956-ffa450edef68"
13892ec89f2b5203650caf1d7b5355df433dacfd,"Fixing a few minor bugs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320162 13f79535-47bb-0310-9956-ffa450edef68"
2ee2bff876b42fb608089364dbf8b5553e101c79,"provide access to item type info (for LIST and LISTOFUNION types) for enumeration values.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320163 13f79535-47bb-0310-9956-ffa450edef68"
a9cc7455a5fd2415036e8b60ecf1f613065963b2,"no message


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320164 13f79535-47bb-0310-9956-ffa450edef68"
de716fd2a4c59e0afab867634f6aa7c4ada7932f,"Fixing potential NPE with enumeration types.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320165 13f79535-47bb-0310-9956-ffa450edef68"
b98899aca7037a34022ab26250e9daaef72e8c99,"Adding constant for validate-annotations feature.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320166 13f79535-47bb-0310-9956-ffa450edef68"
73a42fae7604059b0ffa8189e805a506acf23a80,"Initial cut at support for validating annotations. This is controlled under
a new feature: http://apache.org/xml/features/validate-annotations.
When this feature is enabled during schema processing, all of the
annotations from the root schema document and its subordinates
will be validated once they've been fully traversed against all of the
available schema grammars, including a partial schema for schemas
containing the relevant declarations for annotations.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320167 13f79535-47bb-0310-9956-ffa450edef68"
b7b0f1be6028d3791922eb2a99ecda78b4f8b2a8,"Eliminating try/catch blocks which caught and rethrew the same SecurityException.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320168 13f79535-47bb-0310-9956-ffa450edef68"
a497503c63d1e8a13fbea65540b246b051709105,"Add validate-annotations option to SAX samples.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320169 13f79535-47bb-0310-9956-ffa450edef68"
66cd69724d430d550fb2f36b65cdf1c7547879f3,"Add validate-annotations option to DOM samples.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320170 13f79535-47bb-0310-9956-ffa450edef68"
e62842a0605599f61bfb50eed2218f2c7a7f5e8d,"Update description of options for SAX samples.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320171 13f79535-47bb-0310-9956-ffa450edef68"
c6bbc23a8e44c4138e613201db64ad13488bc9e4,"Update description of options for DOM samples.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320172 13f79535-47bb-0310-9956-ffa450edef68"
71b9377b96beabf3b533033f18e7a0848abb8b1e,"Update the release document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320173 13f79535-47bb-0310-9956-ffa450edef68"
c1163753d6717a69cdb68001c75961fb1db3ea7a,"fix roll over of year when schema 1.1 is not activated


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320174 13f79535-47bb-0310-9956-ffa450edef68"
998012dd9dd1d54455b1054c51bd0d0c6e73bce5,"Initial check in for support of synthetic annotations generation.
This is controlled with: http://apache.org/xml/features/generate-synthetic-annotations.
Turning this on will cause annotations to be generated for elements containing non-schema
attributes and not containing an annotation element already.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320175 13f79535-47bb-0310-9956-ffa450edef68"
82d32b2db75dd47b411f945f185d2735252d3c7d,"Fixing a build failure on JDK 1.2. Boolean.valueOf(boolean b) was
being invoked, a method that has only existed since JDK 1.4.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320176 13f79535-47bb-0310-9956-ffa450edef68"
602dd7619f5186b5f6451fb4d64c2407299df6c7,"Adding validate-annotations feature to list of DOM paramater names.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320177 13f79535-47bb-0310-9956-ffa450edef68"
28e58d94760bdb491016f72260c753af0a96d22b,"Some cleanup from previous commit.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320178 13f79535-47bb-0310-9956-ffa450edef68"
0901f0dfe3ec2ace227cd7615974ede5eed0e6ef,"Updating the release document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320179 13f79535-47bb-0310-9956-ffa450edef68"
d5a37c177cca69b65b3d24b70a7e60a0262d05c1,"expose lexical value for date-time related data types
provide access to (min/max) Exclusive/Inclusive objects


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320180 13f79535-47bb-0310-9956-ffa450edef68"
dff54f1e6f7fc130c07c22c137b1f4149336c2ab,"Fixing an NPE and a bug with detecting non-schema attributes related
to the new generate-synthetic-annotations feature. On an empty
element we need to check that we're not currently processing an
annotation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320181 13f79535-47bb-0310-9956-ffa450edef68"
e1c73bca64885c11cbfa1303407089c153cda319,"Fixing a potential memory leak. Clear the stacks used to support the generate-synthetic annotations
feature at the start of each document. If there was a failure on the previous usage, we might not
be at depth 0. Also now using a specialized boolean stack for better performance.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320182 13f79535-47bb-0310-9956-ffa450edef68"
9a56b755c61cf9281bb6a2b6df47f8a108324bcd,"Enable validation of synthetic annotations. When both features: ""http://apache.org/xml/features/validate-annotations""
and ""http://apache.org/xml/features/generate-synthetic-annotations"" are true then synthetic annotations will be validated.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320183 13f79535-47bb-0310-9956-ffa450edef68"
812d073e95a53c665a765b57e340feebf434c2cf,"Recognize generate-sytnethic-annotations feature in parser configurations and propogate to schema parser.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320184 13f79535-47bb-0310-9956-ffa450edef68"
457118c9bd970d14ce03cef6b7761df9d3d0898e,"Update release plan.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320185 13f79535-47bb-0310-9956-ffa450edef68"
66a70aef676a5ed636cb6da735458bbff8d39053,"Update copyright info for API docs, etc...


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320186 13f79535-47bb-0310-9956-ffa450edef68"
3f58f8e5cf1ff1d90a175cb176aba42d4d008167,"Update copyright for documentation footer -> 1999-2005.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320187 13f79535-47bb-0310-9956-ffa450edef68"
b82ad47c4a9a61404bf550089f3953692499acda,"add generate-synthetic-annotations option to samples


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320188 13f79535-47bb-0310-9956-ffa450edef68"
07e35f1994d963063d4d20b8086b3442ac1b6089,"Updating copyright dates.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320189 13f79535-47bb-0310-9956-ffa450edef68"
32d3baba576971392f6e4ae2f57b2a03febf3652,"Update description of options for DOM samples.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320190 13f79535-47bb-0310-9956-ffa450edef68"
c4fe0e7b03bc82454622c351ba8b0735d9b777a9,"Update description of options for SAX samples.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320191 13f79535-47bb-0310-9956-ffa450edef68"
f3930e63099d99479688245ddceaa8a8ae6038d4,"Updating copyright dates.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320192 13f79535-47bb-0310-9956-ffa450edef68"
5fa5e58d5e9a48b8bbabbe5433874161e1244b98,"Adding documentation for generate-synthetic-annotations and validate-annotations.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320193 13f79535-47bb-0310-9956-ffa450edef68"
27f88abcdcfdd8d09e8fc4c0a4b2cce585a6f08a,"Thanks to Naela Nissar, adding an interface for exposing decimal values.
Editorial changes were made to the javadoc from the original patch.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320194 13f79535-47bb-0310-9956-ffa450edef68"
156a58673c88d28d9ef9d9e83c2932a11bc0bc01,"Implementing the new XSDecimal interface. Committing a patch from Naela Nissar with some modifications.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320195 13f79535-47bb-0310-9956-ffa450edef68"
f0fa8daa8597764f982335d2abf0e9b6bff832f3,"Updating copyright date.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320196 13f79535-47bb-0310-9956-ffa450edef68"
ce6a9ade0787468de8dcda17ca4d32d6fe069caf,"Clean-up unused imports.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320198 13f79535-47bb-0310-9956-ffa450edef68"
a24287b78455c282e4d2a3773641c9230a991f00,"Fixing potential memory leaks. If there's a failure the language stacks never get reset. Making sure this always happens on reset.
Changing Vectors for notations and unparsed entities to ArrayLists and reusing them.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320199 13f79535-47bb-0310-9956-ffa450edef68"
871b50a42da9608ce29f3230ecab85ee1f1f0b13,"Performance: Reduce reset cost by not reading features/properties from
the parser configuration when it has not changed between parses.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320200 13f79535-47bb-0310-9956-ffa450edef68"
83964683852add4b6559583247966b6757106de5,"Fixing copyrights in XInclude source. The files were first contributed in 2003.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320201 13f79535-47bb-0310-9956-ffa450edef68"
3b0cae149add86f4a705a6e54d457bc6f7948330,"Updating copyright. Missed this on last commit.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320202 13f79535-47bb-0310-9956-ffa450edef68"
0e039e7c5039d906ddeadd1c016a9a2d90a9dc59,"Updating copyright. Missed this on last commit.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320203 13f79535-47bb-0310-9956-ffa450edef68"
698d3a5e41eec318e3021aba45a68479a4baf2ab,"Performance: Only copy features to child configuration when they've changed.
This not only saves copying but allows the child config to avoid reading its
parser configuration on reset.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320204 13f79535-47bb-0310-9956-ffa450edef68"
fcdd7b4861ec7bd3afd6d43f41de79b449c9cf36,"Rewording the message for RootElementRequired.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320205 13f79535-47bb-0310-9956-ffa450edef68"
c2c0427f707c633b634dc70990f1f17a84782126,"bug fixes for 'generate synthetic annotations'


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320206 13f79535-47bb-0310-9956-ffa450edef68"
0a90dbec5595f0321f85fef0d6c318cca1759ac1,"Changing all references of nagoya.apache.org to issues.apache.org.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320207 13f79535-47bb-0310-9956-ffa450edef68"
0e178ab2403d6a6e87aee1723fee4b9db7f9fed4,"Updating copyright notice.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320208 13f79535-47bb-0310-9956-ffa450edef68"
b94164bf31ac778f756a6a7d74d3e41885b20ce8,"Updating copyrights for 2005.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320209 13f79535-47bb-0310-9956-ffa450edef68"
b5185639a02f1e9f9b8bb6b2abb2d1cdfd0249e8,"Fixing JIRA Bug #1039:
http://issues.apache.org/jira/browse/XERCESJ-1039

To validate an anyURI we apply the escaping rules from XLink to make it a URI
that we then validate with Xerces' URI class.  We were returning the escaped
value instead of the original as the actual value. i.e. ""http://www.exa mple.com""
was being returned as ""http://www.exa%20mple.com"".


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320210 13f79535-47bb-0310-9956-ffa450edef68"
cfb42411edb83fbbcab0fb6b1eaf9d6e1f683ebb,"Updating copyright to 2005.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320211 13f79535-47bb-0310-9956-ffa450edef68"
e9fdb613ec3adaf05cc9513a796bd2e45e7c660b,"Allow properties to be set to null on the schema loader. Previously we could not
set null values on the configuration because it was backed by a java.util.Hashtable.
We now use a HashMap. This allows properties such as the SecurityManager to
be removed by the user.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320212 13f79535-47bb-0310-9956-ffa450edef68"
c7c7140fbc0baf115a90871a337515ebc33c7265,"Fixing a bug. The systemId passed to EntityResolver2.resolveEntity may be an absolute or relative URI.
That is it should be the literal system identifier, not the expanded one which resolved from the base URI.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320213 13f79535-47bb-0310-9956-ffa450edef68"
8f8cdfef52cc8032064aa813bba51c7d90135b2e,"Should take ""block=substitution"" into account when computing
the substitution group for an element.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320214 13f79535-47bb-0310-9956-ffa450edef68"
59512e0feb6c55a538c81bd511ca32dc28d95914,"The pattern for ""integer"" type was different from what schema 2E says.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320215 13f79535-47bb-0310-9956-ffa450edef68"
55b575977a367bdbcfd3681c6dbc84a799dfd1b2,"Updating copyright to 2005.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320216 13f79535-47bb-0310-9956-ffa450edef68"
709e2dcf2f186e32797d5c8e0b3995ce68c989db,"allow imports of multiple schema docs. under the same namespace to be resolved.
This is under feature control:http://apache.org/xml/features/handle-multiple-imports.
By default, the value is 'false' so the original Xerces behaviour is preserved.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320217 13f79535-47bb-0310-9956-ffa450edef68"
75dac4228d4a7ede213d6c1306863027eda32512,"refactoring. changing feature to: http://apache.org/xml/features/honour-all-schemaLocations


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320218 13f79535-47bb-0310-9956-ffa450edef68"
ddedda0bcceda462b11403d3fe861eedb2d24296,"If an instance document contains many errors we could be spending a great deal of time
resizing the vector which stores error codes.  Allow this vector to manage its size better.
Also, we only read the vector when we're augmenting PSVI so we can avoid the
addElement calls if this feature is off.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320219 13f79535-47bb-0310-9956-ffa450edef68"
4e11453e19d58d4481d2367028b0cb86c0deafeb,"Fixing JIRA Bug #1043:
http://issues.apache.org/jira/browse/XERCESJ-1043

Looking up a namespace URI from a NamespaceContext requires that we pass in the interned
String from the SymbolTable as the prefix. We were failing to do that when checking for unbound
prefixes. Should be fixed now.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320220 13f79535-47bb-0310-9956-ffa450edef68"
8f6c85e2cd483f63918486fedcf0b1cf472ea3f6,"Updating copyright to 2005.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320221 13f79535-47bb-0310-9956-ffa450edef68"
4c9663b1155ce9ac57d288734d34a59176212da3,"Fixing typos. ""underyling"" should have be ""underlying"".


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320222 13f79535-47bb-0310-9956-ffa450edef68"
de628cb47aace1c71d2bf95246449f3437dbed0a,"minor changes to interfaces


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320223 13f79535-47bb-0310-9956-ffa450edef68"
7ccf2989d89b8d4ccf2eb4e9bb5bd29364d8b5d4,"minor fixes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320224 13f79535-47bb-0310-9956-ffa450edef68"
6a5085650eeb9aa9ac331238cfed242fe601b763,"Making a couple of inner classes static. Neither Notation nor UnparsedEntity referenced any fields from the enclosing class.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320225 13f79535-47bb-0310-9956-ffa450edef68"
85d2cf2921622c2f0c5e969a989a43d097786a84,"Fixing JIRA Bug #1044:
http://issues.apache.org/jira/browse/XERCESJ-1044

Namespace lookup was incorrectly using the index into the context array rather
than the member of that array, causing the processor to report that mappings
don't exist when in fact they do exist. This bug is fixed thanks to the patch
by Eric Isakson. There were three other methods where this was also a
problem.  I've fixed those as well.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320226 13f79535-47bb-0310-9956-ffa450edef68"
f31e8d43486d87e58f02e2b49c1dd7905e998ed7,"Adding three new feature URIs for XInclude processing.

Enable XInclude procssing: http://apache.org/xml/features/xinclude (default: false)
Enable base URI fixup: http://apache.org/xml/features/xinclude/fixup-base-uris (default: true)
Enable language fixup: http://apache.org/xml/features/xinclude/fixup-language (default: true)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320227 13f79535-47bb-0310-9956-ffa450edef68"
3d879b76010f982b9746bd9521bae9c0d581c671,"Added support for two new features which control whether base URI fixup or language fixup is performed.

Enable base URI fixup: http://apache.org/xml/features/xinclude/fixup-base-uris (default: true)
Enable language fixup: http://apache.org/xml/features/xinclude/fixup-language (default: true)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320228 13f79535-47bb-0310-9956-ffa450edef68"
da6c5313c8c34fe790725c9e79bfb34483ea6516,"Update Xerces features array. The XIncludeHandler uses
these to copy the configuration to a child parser.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320229 13f79535-47bb-0310-9956-ffa450edef68"
02c6e53f55273d0ad3dea41b5d17182583bdde61,"Added support for two new features which control whether base URI fixup or language fixup is performed.

Enable base URI fixup: http://apache.org/xml/features/xinclude/fixup-base-uris (default: true)
Enable language fixup: http://apache.org/xml/features/xinclude/fixup-language (default: true)


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320230 13f79535-47bb-0310-9956-ffa450edef68"
24eef7b7d44d185da19d09408c0cbc0916c494a5,"Updating copyright to 2005.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320231 13f79535-47bb-0310-9956-ffa450edef68"
5431e9599511ab685ff890b2fb5c88ae2569efc1,"fixes to interfaces


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320232 13f79535-47bb-0310-9956-ffa450edef68"
4faf10537129ab631f73d5c0bded5f66bc147937,"Fixing a typo in the javadoc.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320233 13f79535-47bb-0310-9956-ffa450edef68"
b3530fffbb47d1dc2dab5e538c013f388b4e142f,"Fixing a bug reported by Ritu Raj Tiwari on xerces-j-dev. When resolving
an external subset if there's already a DTD in the grammar pool do not
read the input source.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320234 13f79535-47bb-0310-9956-ffa450edef68"
33d9cd906479d47afc45a75ef8b8ba913b1fc4b7,"Adding a comment.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320235 13f79535-47bb-0310-9956-ffa450edef68"
09974283a1a9c5964067596cd1b00318ca6fe551,"Updating copyright to 2005.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320236 13f79535-47bb-0310-9956-ffa450edef68"
7880451e90e617dfa9e270a975be181ef964a3c3,"When the type of an element is a union, the [member type definition] will not be available
until the end of the element (the exception being if the element is empty). This is required
for TypeInfo [1] though we weren't picking it up in endElement. Should be fixed now.

Still keeping the code which sets the type in startElement since its possible the user
has registered a filter which determines whether to accept or reject nodes based on
type information.

[1] http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#TypeInfo


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320237 13f79535-47bb-0310-9956-ffa450edef68"
1dfcc8a450bddfe3d44e2503bddd7737c68080a0,"minor fixes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320238 13f79535-47bb-0310-9956-ffa450edef68"
d81bc5ac5a88ad3a068b04d12383a606055168b5,"not allow second value to equal 60


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320239 13f79535-47bb-0310-9956-ffa450edef68"
931cbeb2a5bc6578d89a31f10dff000001f9e84a,"JIRA Issue #1045:
http://issues.apache.org/jira/browse/XERCESJ-1045

Cleaning up superfluous code. Patch thanks to Dave Brosius.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320240 13f79535-47bb-0310-9956-ffa450edef68"
81624851df9f856591355a9c3ec81fc2b38cbcc0,"Update copyright for 2005.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320241 13f79535-47bb-0310-9956-ffa450edef68"
0fc2f46516927e3a30c9e6271ef94765a11d433a,"JIRA Issue #1046:
http://issues.apache.org/jira/browse/XERCESJ-1046

Cleaning up usage of toString() in miscellaneous places in the code. Patch thanks to Dave Brosius.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320242 13f79535-47bb-0310-9956-ffa450edef68"
0ba71eebe47db2239b15ffb71f4781b02d33ead7,"minor actual value interface changes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320243 13f79535-47bb-0310-9956-ffa450edef68"
bba0f1c4b610ada06a296b47f33e59b7ddf4ab76,"Improve performance of SymbolTable.addSymbol(String). In many instances the strings
we pass into this method are already internalized. In such cases calling String.hashCode()
will yield better performance than calculating a hash code ourselves. Updated hash(char[], int, int)
so that it will yield the same result as String.hashCode().


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320244 13f79535-47bb-0310-9956-ffa450edef68"
1edc4df079d9d326f59b5b8a32f2a418c8561763,"Fixing a bug in the code snippet that shows how to access PSVI with SAX.
The XMLReader is castable to PSVIProvider not the JAXP SAXParser.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320245 13f79535-47bb-0310-9956-ffa450edef68"
02cfd499ff39927129448d055e3d37775ab8925d,"changing where un-normalized values are saved.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320246 13f79535-47bb-0310-9956-ffa450edef68"
3a665c58550446d2e0af7086974b53b854652559,"Accessing static fields in a static way.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320247 13f79535-47bb-0310-9956-ffa450edef68"
df43017c29103e3ffa45d015399e772e7a598eb1,"Adding serialVersionUIDs to a serializable classes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320248 13f79535-47bb-0310-9956-ffa450edef68"
20d5a9cdbb20dd12d932e3f317fd6be1b0d94dee,"Adding a serialVersionUID to a serializable class.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320249 13f79535-47bb-0310-9956-ffa450edef68"
8b5cea61636dcd410c918b076952015cf03d9294,"Updating copyright to 2005.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320250 13f79535-47bb-0310-9956-ffa450edef68"
43c9cc252a6c5c8e423e21ffcf6ada63b3a0f755,"Adding serialVersionUIDs to a serializable classes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320251 13f79535-47bb-0310-9956-ffa450edef68"
87494df877b3813a19e6339096f9bde0b3df7a2b,"Adding serialVersionUIDs to serializable classes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320252 13f79535-47bb-0310-9956-ffa450edef68"
ce27bc209f9c855c5ee47b60d8899740c84dc941,"Updating copyright to 2005.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320253 13f79535-47bb-0310-9956-ffa450edef68"
cbc00a4cb6097b3189e3483711df91380befa140,"Cleanup unused imports.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320254 13f79535-47bb-0310-9956-ffa450edef68"
9799fa207055f26db3bb179173fbd8e5e841570c,"Updated serialVersionUID.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320255 13f79535-47bb-0310-9956-ffa450edef68"
18bd0b7fd8446e06ec121fb6c633e9a87235b084,"Adding a serialVersionUID to a serializable class.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320256 13f79535-47bb-0310-9956-ffa450edef68"
978731bd6151c020581d61c8c8a76b52c476fabf,"Adding a replace to allow DOM Level 3 target to compile again.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320257 13f79535-47bb-0310-9956-ffa450edef68"
ee4ac5fa6eb8d234a728aa2ba5b029161a493aa0,"Moving @xerces.internal before @author.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320258 13f79535-47bb-0310-9956-ffa450edef68"
bcd5cec6a3083f7313f774c21673acc251a8579d,"Adding documentation for honour-all-schemaLocations and three new XInclude features.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320259 13f79535-47bb-0310-9956-ffa450edef68"
e05257e5c71dfa8b98b875e70aecabfff1655839,"Improve description of XInclude features.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320260 13f79535-47bb-0310-9956-ffa450edef68"
cd5595b5197627e72bd2aa01af57a61f91377e90,"Mention new XInclude features as an option for disabling base URI and language fixup.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320261 13f79535-47bb-0310-9956-ffa450edef68"
ff00cf0c5a99cdc8d5b476194f117b1e802f2e09,"Updating the release document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320262 13f79535-47bb-0310-9956-ffa450edef68"
a609aa639fbaf819eb07ff43586a5a0a66fc22e0,"Updating copyright to 2005.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320263 13f79535-47bb-0310-9956-ffa450edef68"
bbb7cc060835a1bd47d56e7f87280307fb952844,"Updating a couple FAQs for SAX 2.0.2.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320264 13f79535-47bb-0310-9956-ffa450edef68"
a86b06f1a9791af723901e70d194711c26a9402a,"Minor update.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320265 13f79535-47bb-0310-9956-ffa450edef68"
f9ba9eef71124c4f08c5a4f56127c12b65c1c2ac,"Rewording text used for @xerces.internal and @xerces.experimental tags.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320266 13f79535-47bb-0310-9956-ffa450edef68"
480cd27884fd390d9f9128547587f0106a7d6dbd,"Updating text generated by taglets for @xerces.internal and @xerces.experimental.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320267 13f79535-47bb-0310-9956-ffa450edef68"
6abafd28baf33281f23ebbc0e470055c6597e5b6,"Updating the taglets jar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320268 13f79535-47bb-0310-9956-ffa450edef68"
b93997ed9f84693e3be17862c4863ce6c7336aaf,"fix unreported warning


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320269 13f79535-47bb-0310-9956-ffa450edef68"
acdb5a61a9c577543b503b24fb8e90f64f7f14c3,"fix time comparison


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320270 13f79535-47bb-0310-9956-ffa450edef68"
9b89dd33df9ed5eb66827731f070f30ae1dfe379,"Allow Xerces to be built with HP JDKs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320271 13f79535-47bb-0310-9956-ffa450edef68"
1258ff7d32ec943744a9ca1426e3de9f1bb3fe74,"Fixing a bug. In schema documents, namespace declarations on local element
declarations were not recognized when referred to.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320272 13f79535-47bb-0310-9956-ffa450edef68"
18ac925f5ddc7de17ec1f150d79724f2542a30a5,"Updating copyright for 2005.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320273 13f79535-47bb-0310-9956-ffa450edef68"
6bdcc196f4a041df674c4120df204a914e500e59,"Fixing a bugs related to JIRA Issue #1059:
http://issues.apache.org/jira/browse/XERCESJ-1059

In a few implementations of ValidationContext we were returning null from getSymbol().
This method is not allowed to return null. It must return a unique string equal to the one
passed in. We use String.intern() to accomplish this.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320274 13f79535-47bb-0310-9956-ffa450edef68"
b391c3958de8d2a769ca9e027480571526e0bdce,"Eliminating some control characters that found their way into this file.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320275 13f79535-47bb-0310-9956-ffa450edef68"
55fd52d4f6affc01f72930373209532ca1a896d7,"Only report a warning if input was provided.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320276 13f79535-47bb-0310-9956-ffa450edef68"
3792a4726a46411424371f2068735daf7edb275d,"Fixing JIRA Issue #1062:
http://issues.apache.org/jira/browse/XERCESJ-1062

At the end of an element we should be clearing the sawInclude array
at the current depth instead of depth + 1. This was causing XIncludeHandler
to report an error when an xi:include element was the immediate descendant
of a sibling of another xi:include element.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320277 13f79535-47bb-0310-9956-ffa450edef68"
33e30021151840975f2883739b99f2d9f2b3d732,"The XInclude spec says that children of include elements which are
elements not in the XInclude namespace and descendants of these
elements are to be ignored.  We were not ignoring all such content.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320278 13f79535-47bb-0310-9956-ffa450edef68"
a0ba982304fe9f3700209293da4d2533e292e5d2,"Adding serialVersionUID to serializable classes, in the process also fixed formatting.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320279 13f79535-47bb-0310-9956-ffa450edef68"
08909f7499a8e31cabb8ff25cf3109a2cecb9926,"Adding serialVersionUID to serializable classes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320280 13f79535-47bb-0310-9956-ffa450edef68"
4c446166b8f604b0e207bbc8b21abc4e5da15a08,"Adding serialVersionUID to serializable classes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320281 13f79535-47bb-0310-9956-ffa450edef68"
4dd89a54892d0374e1a6af65678652c186189757,"Adding serialVersionUID to serializable classes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320282 13f79535-47bb-0310-9956-ffa450edef68"
f5d35c85972f7d600b94eba30ad71719bea2e265,"Update list addresses in the documentation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320283 13f79535-47bb-0310-9956-ffa450edef68"
7fb34e885316cf6a91ff91c78c9eb63557e2b500,"Update list addresses in the documentation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320284 13f79535-47bb-0310-9956-ffa450edef68"
e5fbb688aa668e9cef471635d852a4c6c7e6be67,"Make ObjectFactory classes final.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320285 13f79535-47bb-0310-9956-ffa450edef68"
8c697588d504e83afb97f89939b8de078f4e52a7,"Fixing JIRA Issue #1063:
http://issues.apache.org/jira/browse/XERCESJ-1063

When start >= length a fatal error was emitted for surrogate characters.
Since length is decremented on each loop and since start is an offset which
doesn't necessarily start from zero this comparison isn't valid. Should be
fixed now.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320286 13f79535-47bb-0310-9956-ffa450edef68"
73e30aa6de221da3e94a9ad509446092e31cae2c,"Update copyright for 2005.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320287 13f79535-47bb-0310-9956-ffa450edef68"
aa793edc3b4b668e6c4aa0da8287408167bac8f6,"Fixing a bug. In the loop handling a CDATA section we should be
comparing the current position against the end offset, not the length.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320288 13f79535-47bb-0310-9956-ffa450edef68"
43d78eb3c3e37e61d6aec63276f96f76d1b3c759,"Fixing JIRA Issue #815:
http://issues.apache.org/jira/browse/XERCESJ-815

To work around a problem with the byte to char converter for UTF-16,
detect the byte order in setupCurrentEntity() to determine whether the encoding
can be considered to be UTF-16BE or UTF-16LE and then create a reader using
those encodings rather than UTF-16.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320289 13f79535-47bb-0310-9956-ffa450edef68"
903230f2ef9d675ef9c9a4324ccac7395301dbb1,"Fixing JIRA Issue #1065:
http://issues.apache.org/jira/browse/XERCESJ-1065

There's boolean which tracks whether a complex type is abstract.
We were only setting it to true, so if a type is not abstract but
this field's value was already set to true during another
call of traverseComplexTypeDecl we were treating the type
as abstract. Should be fixed now.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320290 13f79535-47bb-0310-9956-ffa450edef68"
850c34a5c65cf63c11a0981284cceb4a48d97e49,"Updating the release plan.  Setting June 24th as the tentative release date for Xerces 2.7.0.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320291 13f79535-47bb-0310-9956-ffa450edef68"
255887a76fae24201bab256584a6a4bb2cf3220f,"Adding in stubs for getFeature/setFeature so that the code compiles with JAXP 1.3.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320292 13f79535-47bb-0310-9956-ffa450edef68"
d279a36a3c947cf4b798474cd4ff244bfad8b9ca,"Moving SAX support up to SAX 2.0.2.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320293 13f79535-47bb-0310-9956-ffa450edef68"
01ddb30072a744a3ea4fc9428c329f25ad3f713c,"Moving DOM support up to DOM Level 3.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320294 13f79535-47bb-0310-9956-ffa450edef68"
c492dc876fe73cfd12435e8be82242f11d31acd2,"Moving DOM support up to DOM Level 3.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320295 13f79535-47bb-0310-9956-ffa450edef68"
fd82ca8b6e8f3f6087e6f215dbf10234f9b69563,"Removing a comment that is no longer relevant.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320296 13f79535-47bb-0310-9956-ffa450edef68"
7ad1c870ba63efa3097014a22b67a055c748879f,"Updating samples so that they compile with DOM Level 3.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320297 13f79535-47bb-0310-9956-ffa450edef68"
9a2125e4273e85a0e931de1546450da5fcbf32af,"Updating tests so that they compile with DOM Level 3.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320298 13f79535-47bb-0310-9956-ffa450edef68"
c0e5a622b7c7f0fd4570aac21ca48ca9c7a68332,"Upgrading to JAXP 1.3. This jar was built from xml-commons HEAD today.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320299 13f79535-47bb-0310-9956-ffa450edef68"
96762d13e6a01f6dbf91b4aa8b5ba73e1a1a8f9a,"Removing DOM Level 3 interfaces from Xerces source tree. We now get this support from xml-commons through JAXP 1.3.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320300 13f79535-47bb-0310-9956-ffa450edef68"
24f319e8521f781a9707debf3379fd1aa4de8d20,"Removing org.w3c.dom.xpath interfaces from Xerces source tree.
These belong in xml-commons and will become part of xml-apis.jar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320301 13f79535-47bb-0310-9956-ffa450edef68"
7791a58edc9dee46fca3ea78ffb10d33be708dbe,"Moving XMLSerializer and XML11Serializer up to DOM Level 3.  I missed these two yesterday.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320302 13f79535-47bb-0310-9956-ffa450edef68"
294ab1cfbbdf9c0d138e57bb11e4bc555d89c093,"Update release plan.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320303 13f79535-47bb-0310-9956-ffa450edef68"
9af59dcde0d8e72246f108e1a397122cdcf55480,"Adding a method to allow subclasses to bypass getFeature() on this class.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320304 13f79535-47bb-0310-9956-ffa450edef68"
d648bd5fc0009b8f4de012ae724dddb51b0bc612,"Adding a new parser configuration for XInclude. JAXP 1.3 supports XInclude so the
default configuration must also support it. We leave the existing XIncludeParserConfiguration
as is since it is useful for the XInclude processor to have a hard wired config available. The new config
differs from XIncludeParserConfiguration in that XInclude processing can be toggled on and off,
XIncludeHandler is only added as a component if XInclude processing is enabled and XInclude
namespace support is only used when XInclude processing is on.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320305 13f79535-47bb-0310-9956-ffa450edef68"
de45af7f412722750db068c74fe71cb2a60063b2,"Upgrade default parser configuration to XIncludeAwareParserConfiguration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320306 13f79535-47bb-0310-9956-ffa450edef68"
289067179a52ba6c90c067a7c88802cff9c7eb45,"Upgrade default parser configuration to XIncludeAwareParserConfiguration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320307 13f79535-47bb-0310-9956-ffa450edef68"
aa24e8f47e557c812ab299f316075212303ccac0,"Upgrade default parser configuration to XIncludeAwareParserConfiguration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320308 13f79535-47bb-0310-9956-ffa450edef68"
0c47fbdd488522c8fc887ab66511c0340469481b,"When href is absent and parse=""text"" the source infoset should be included as text.
We had been reporting a fatal error for missing an xpointer which isn't even allowed
when parse=""text"".


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320309 13f79535-47bb-0310-9956-ffa450edef68"
a74c5a6fda650f0c73ba36d728cb3654e47157c8,"actual value interface changes for JAXP 1.3


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320310 13f79535-47bb-0310-9956-ffa450edef68"
c53fe4a2d02e022c8b6aabe38c79ded24bda73d4,"message formatter used by JAXP 1.3 datatype impl


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320311 13f79535-47bb-0310-9956-ffa450edef68"
aa6e9386dbebcef2ca3955dc3f078c0e7c3ea9df,"The license should be Apache v2.0 though the RI contribution had the
old v1.1 license, for some reason containing dates earlier than JAXP 1.3.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320312 13f79535-47bb-0310-9956-ffa450edef68"
9a7b063a51495807ef62d9a6fa560b0951301a7d,"Adding a license to this file.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320313 13f79535-47bb-0310-9956-ffa450edef68"
8416f7d6d0261d4b1c6ba95179c2ba25614529a4,"datatype message file


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320314 13f79535-47bb-0310-9956-ffa450edef68"
4fa7231a193ba64edb906b606ae9ec82b4e1610f,"bug fixes
- reset on XMLGregorianCalendar
- compare duration
- gMonth lexical value fix


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320315 13f79535-47bb-0310-9956-ffa450edef68"
d151df115ffe78dc44beeba4f82a8f842488d790,"Fixing a problem with UTF-16. The text reader was stripping
off the byte order mark making it impossible for the decoder
to determine the byte order causing garbage data to be
sent as character events.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320316 13f79535-47bb-0310-9956-ffa450edef68"
27ba33f7a83557794d1a99b5071779e722516929,"Adding a new error message for same document references.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320317 13f79535-47bb-0310-9956-ffa450edef68"
1a36c93d0a9dc246b214a6f48cec1cfa96de362c,"Report a resource error when parse=""xml"", href="""" and an xpointer has been specified.
This is a same document reference which this processor cannot handle because of its
streaming nature.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320318 13f79535-47bb-0310-9956-ffa450edef68"
13fbe77b4d9fddf0d0f47b0f07d4230944cf3592,"Adding a META-INF/services file for the DatatypeFactory.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320319 13f79535-47bb-0310-9956-ffa450edef68"
56fcece637122afce6ef9c68ebf9b6715c6ca1c3,"Miscellaneous updates for JAXP 1.3 including META-INF/services file for the DatatypeFactory.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320320 13f79535-47bb-0310-9956-ffa450edef68"
6e83bd4a8230f457cc0c1f0fd815d964c421a27e,"Updating SAX samples for XInclude features.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320321 13f79535-47bb-0310-9956-ffa450edef68"
18a85d2f9513b5555de4337906bde7d76969b95a,"Updating DOM samples for XInclude features.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320322 13f79535-47bb-0310-9956-ffa450edef68"
6b191f9c7124b4641060c8ccc9f7c050acd45a1b,"Miscellaneous cleanup to DOM samples.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320323 13f79535-47bb-0310-9956-ffa450edef68"
46fe449cf80fda945b78eec83f2ad181c270dff8,"Abstract schemas have been deprecated for several releases. Removing the sample to discourage new usage.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320324 13f79535-47bb-0310-9956-ffa450edef68"
185d5ab98c69635008c9489ebfbf5ab720435445,"Adding serialVersionUID to serializable classes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320325 13f79535-47bb-0310-9956-ffa450edef68"
4aa0b2916cb99b32462d4cb9c17ed31cc75e49b3,"Cleaning up imports.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320326 13f79535-47bb-0310-9956-ffa450edef68"
86dd45ecca08d8dfa4cc68df991db658c2b607d7,"Adding serialVersionUID to serializable classes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320327 13f79535-47bb-0310-9956-ffa450edef68"
2d0d87c584ca8010a158de052e01814936e4a281,"Cleaning up many warnings.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320328 13f79535-47bb-0310-9956-ffa450edef68"
6be8963307188beef1506354033e680c7dcde328,"Miscellaneous cleanup to DOM Level 3 tests.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320329 13f79535-47bb-0310-9956-ffa450edef68"
dfd0449c8c375b24df56401aaaa1105c18ca279d,"Cleaning up imports.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320330 13f79535-47bb-0310-9956-ffa450edef68"
ec8dcf473f17f70373f86b4eb51e0dc4a5e7ead9,"Cleanup DOM ID test.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320331 13f79535-47bb-0310-9956-ffa450edef68"
c98ff55e33e44e28d6bb10c979357b8ceb6b3527,"Cleanup DOM memory test.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320332 13f79535-47bb-0310-9956-ffa450edef68"
7cdcc7a47cccff4b99b0953fbecf52c411a58a10,"Cleanup DOM range tests.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320333 13f79535-47bb-0310-9956-ffa450edef68"
4298398ebcd1b746da5599d6cca6cbee2b2cb2cc,"Cleanup more DOM tests.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320334 13f79535-47bb-0310-9956-ffa450edef68"
ac7169a1ff24ca18e64b720f2fb6acfe98d6d4bd,"Cleanup of more parser tests.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320335 13f79535-47bb-0310-9956-ffa450edef68"
3893a210786fea6e8236c54214287515c5333708,"Fixing a bug. It was possible that the XIncludeHandler could be used without being properly reset.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320336 13f79535-47bb-0310-9956-ffa450edef68"
fae4903cf810f3d34be6720a2de070c8b630568b,"Updating documentation for SAX and DOM samples.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320337 13f79535-47bb-0310-9956-ffa450edef68"
8c5999b54a9c4337ca12993a9db2f7b045c0fa05,"XIncludeAwareParserConfiguration is now the default parser configuration. Updating the docs accordingly.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320338 13f79535-47bb-0310-9956-ffa450edef68"
6be43dbaa5d955dc26f274b16337f9866e7b3a69,"Updating installation document for JAXP 1.3.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320339 13f79535-47bb-0310-9956-ffa450edef68"
da62e7ecc374c76689a63aa1e3312105a3b3fb18,"Jira Bug#946 Fix: org.w3c.dom.ls.LSParser.abort() throws unexpected RuntimeException


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320340 13f79535-47bb-0310-9956-ffa450edef68"
57d42d116f41d8c8f8ff71c5945bd9194659c09a,"bug fix


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320341 13f79535-47bb-0310-9956-ffa450edef68"
aab72ad1e0cd1ce425357b999202db28461953b8,"Jira Bug#993 Fix:Identity-constraint validation on cross datatypes is incorrect


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320342 13f79535-47bb-0310-9956-ffa450edef68"
b7176568679c25c76aac5d963443e2564ba4d4ce,"Access static methods in a static way.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320343 13f79535-47bb-0310-9956-ffa450edef68"
f389cbf2835c4d2fd4d9dc50c80eba7fb7eb66c0,"bug fixes


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320344 13f79535-47bb-0310-9956-ffa450edef68"
20c07094cb13688e298c3a6f2aa7d1050dcfcd12,"The XInclude spec says that children of include elements which are
elements not in the XInclude namespace and descendants of these
elements are to be ignored.  We were not ignoring all such content.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320345 13f79535-47bb-0310-9956-ffa450edef68"
5aeea16e09b3ba99e2e6e66d15874be5448bcbb5,"Fixing a typo.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320346 13f79535-47bb-0310-9956-ffa450edef68"
aeb5879fecb8d75cc21f4302da8b336e5de4deb9,"The XInclude 1.0 REC [1] states that: ""It is a fatal error to attempt to
replace an xi:include element appearing as the document (top-level)
element in the source infoset with something other than a list of zero
or more comments, zero or more processing instructions, and one
element.""

The processor was erroneously reporting a fatal error for a missing
root element in some cases and in others failed to report a fatal
error for multiple root elements. This should be fixed now as well
as a few other problems.

[1] http://www.w3.org/TR/2004/REC-xinclude-20041220/#creating-result


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320347 13f79535-47bb-0310-9956-ffa450edef68"
781e667880e69fdff70813be06c158f2821fc10f,"Fixing a bug. In endElement() we should be decrementing the
result depth regardless of whether the XIncludeHandler has
a document handler.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320348 13f79535-47bb-0310-9956-ffa450edef68"
4f736e27af8995a21384de552585966225edd43e,"actual value interface sample


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320349 13f79535-47bb-0310-9956-ffa450edef68"
aa7cd40aa337332b1d7166b83d9a9ac27b6b2687,"jaxp 1.3 datatype API sample


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320350 13f79535-47bb-0310-9956-ffa450edef68"
acb37e01d014ee3fe90ca38dd68885342e868150,"update


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320351 13f79535-47bb-0310-9956-ffa450edef68"
7d1c436c5ea1798c6cce8859ea00ac18832ac4d4,"update


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320352 13f79535-47bb-0310-9956-ffa450edef68"
77e5dfcb1bce51a9d050ed33f27a8f3e7f678d6e,"Adding a license to the file.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320353 13f79535-47bb-0310-9956-ffa450edef68"
a13272bf102f13d5b2a00f5f2f8a83c060ffd5e7,"Beginning of Validation API integration. DraconianErrorHandler was
in org.apache.xerces.util in the RI. Moving it into
org.apache.xerces.jaxp.validation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320354 13f79535-47bb-0310-9956-ffa450edef68"
a56cac1261fa28d926376afa1073693a11d53da1,"Access singleton with static accessor rather than directly.
Added a few comments to the code.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320355 13f79535-47bb-0310-9956-ffa450edef68"
d018c114156bfa3c32fecbb92c2520e5bf6c9852,"Merging in ReadOnlyGrammarPool from the RI.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320356 13f79535-47bb-0310-9956-ffa450edef68"
53412258b5249df59d89f2a53350febf03f2f05b,"Adding a new interface for supporting multiple Schema implementations.
This exposes a grammar pool and whether to ignore schema locations;
the same information exposed by SchemaImpl in the RI.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320357 13f79535-47bb-0310-9956-ffa450edef68"
79612a69cdcd68af2fcf452e545feb5016fa4320,"A memory sensitive grammar pool implementation. Grammars stored in this
pool are softly reachable and may be cleared by the garbage collector
in response to memory demand. Grammar equality is determined using
both the target namespace for the schema and the schema location, so
this grammar pool is suitable for the Schema object created from
SchemaFactory.newSchema().


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320358 13f79535-47bb-0310-9956-ffa450edef68"
1608ddfa9f5f5bb9a3538f29ec807f3d8a5cdfbe,"The RI had one concrete implementation of Schema, creating 4 concrete
implementations in Xerces to handle different scenarios.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320359 13f79535-47bb-0310-9956-ffa450edef68"
aff4a5268be4e058ec81aa1ab5fa45196f7a2f19,"Merging in the Util class from the RI.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320360 13f79535-47bb-0310-9956-ffa450edef68"
fd9219611ecca1cd724963cc5bb3b2c36ae9513c,"Fixing a typo.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320361 13f79535-47bb-0310-9956-ffa450edef68"
448024d81054c9f22da973e33bbe97a111cac3fe,"An XMLInputSource analogue to javax.xml.transform.dom.DOMSource,
useful for transfering contents of a DOMSource down to the schema
loader. Also allows an XNI entity resolver to return DOM input for
schema includes and imports.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320362 13f79535-47bb-0310-9956-ffa450edef68"
490930f30f4cceb13f3ecd833313058909b902fb,"Correct indentation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320363 13f79535-47bb-0310-9956-ffa450edef68"
5553273bbf5fa76c7c5abdba2a50c7f86a18278b,"An XMLInputSource analogue to javax.xml.transform.sax.SAXSource,
useful for transfering contents of a SAXSource down to the schema
loader. Also allows an XNI entity resolver to return SAX input for
schema includes and imports.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320364 13f79535-47bb-0310-9956-ffa450edef68"
c1848f9f70aeaaff0115eea3ad1b6d59a0b8c40e,"Making a couple classes final.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320365 13f79535-47bb-0310-9956-ffa450edef68"
2a84c00c086d3d709e873b7fdfda6fc86d8479e3,"Making this class final and package private. It's only used within this package by DOMErrorHandlerWrapper.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320366 13f79535-47bb-0310-9956-ffa450edef68"
d93dfa338ec2dc4a6c0c847d5cd8693b996ca51b,"A message formatter for JAXP Validation API error messages.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320367 13f79535-47bb-0310-9956-ffa450edef68"
15d59073a319622968502245eeea70b683a3f486,"Remove experimental warning from datatype interfaces. They're final now.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320368 13f79535-47bb-0310-9956-ffa450edef68"
2dd76de656667859c32ce97b3f90e1f1a691dd9d,"Minor javadoc change.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320369 13f79535-47bb-0310-9956-ffa450edef68"
8ae181e2d51e2dcff7599645e64ad307342add8b,"Updating the release plan.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320370 13f79535-47bb-0310-9956-ffa450edef68"
341059b0b334bd535ecebf5e4be1ee4d69ecb5ec,"Some cleanup.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320371 13f79535-47bb-0310-9956-ffa450edef68"
473030de5c27953cdbb25dc00a492220001eb3f7,"Initial check-in of the SchemaFactory. Merging this code in from the RI.
Instead of passing Source objects directly to the schema loader
we repackage them in XMLInputSource objects.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320372 13f79535-47bb-0310-9956-ffa450edef68"
54efe5d506910b2f0e36aebc54c4fbe8ec48a4e1,"Rename fields to conform to project coding standards.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320373 13f79535-47bb-0310-9956-ffa450edef68"
b87f7d9ccafc4d859b796f9a0bda50e6e6028764,"Reuse DOMEntityResolverWrapper.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320374 13f79535-47bb-0310-9956-ffa450edef68"
61ac59700f98afdee1a74e4912e89d5a02f91326,"Make schema factory configurable. Allow all features and properties to be set that
are supported by the schema loader. If a SecurityManager has been set treat that
as if the secure processing feature has been set.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320375 13f79535-47bb-0310-9956-ffa450edef68"
181ef10c9b3e4bb74302f3fb9a01c6dacb0c1573,"Fixing a bug. We test equality of ShortLists in XSSimpleTypeDecl,
however since there was no equals() method on this class, we
were falling back to Object.equals() which compares by reference.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320376 13f79535-47bb-0310-9956-ffa450edef68"
cc8e5328252999dfa16086ef6146297bdc713de1,"As suggested in JIRA Issue 1077:
http://issues.apache.org/jira/browse/XERCESJ-1077

Making SAXParserImpl an implementer of PSVIProvider. This allows
applicaitons to cast SAXParser's directly to PSVIProvider without
first having to retrieve the underlying XMLReader.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320377 13f79535-47bb-0310-9956-ffa450edef68"
3c06b2c1c7bff4a27bea654194645758b720dce3,"Make Duration and XMLGregorianCalendar implementations package private.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320378 13f79535-47bb-0310-9956-ffa450edef68"
76d5c68b40349e3bd8e9635428fe81a47833e9d7,"Fixing a typo.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320379 13f79535-47bb-0310-9956-ffa450edef68"
58bd177f3c1fd4d3a536e760240c702a956cb049,"Check for duplicates using the expanded system identifier rather
than comparing the base URIs and system identifiers. The XInclude
REC allows this. The processor was missing duplicate
notations/unparsed entities which had equivalent expanded
system identifiers.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320380 13f79535-47bb-0310-9956-ffa450edef68"
d24713a1a7a9da0b450b3e767432a9fefdc86b0f,"Add a description for the sample.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320381 13f79535-47bb-0310-9956-ffa450edef68"
586de9cf87b62c6e5ee3e6cfbc3b5a4b5236f518,"Fixing JIRA Bug #735:
http://issues.apache.org/jira/browse/XERCESJ-735

sun.io.CharToByteConverter doesn't exist in some JDKs. There's a strong
possibility sun.io.CharToByteConverter won't exist at all in J2SE 6.0. Use
java.nio.charset.CharsetEncoder by reflection if it's available. This should
work on JDK 1.4 an above and be portable.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320382 13f79535-47bb-0310-9956-ffa450edef68"
99386208986f1b46650ed21ff05909447ae1d250,"Adding an internal feature which restricts the schema validator
to only using the schema components provided from a grammar
pool. This has similar semantics to the ignore schema location
hints feature in the JAXP 1.3 RI.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320383 13f79535-47bb-0310-9956-ffa450edef68"
ab616c50722649a811cd9150e06bad70bccdafd4,"A component manager for the validator. Unlike the one in the
JAXP 1.3 RI, this one allows the application to get and set the
features and properties supported by the components used by
the validator.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320384 13f79535-47bb-0310-9956-ffa450edef68"
2148479d096e01cd9d39f01806eaabb68a6bea1a,"A helper interface for SAX, DOM and stream input into the Validator.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320385 13f79535-47bb-0310-9956-ffa450edef68"
b1b69690aee334ea6c9353aec8bdd981cbc0625a,"DOM validation support.

In the RI this was achieved using identity transformers.
Here we go directly from DOM to XNI and back
instead of the intermediate SAX step. In addition to eliminating
the dependency on a transformer this gives us better performance.
We do a non-recursive walk of the DOM to prevent a stack overflow
for DOM's with high depth.

It should also be noted that the result builder will fill in PSVI and
DOM TypeInfo if the result node comes from the Xerces' DOM
implementation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320386 13f79535-47bb-0310-9956-ffa450edef68"
b8689e1c7c0cb2555938c0af16d495fb679db5cf,"Support for stream validation. Rather than going through SAX
use XNI since there's no event consumer. After creating
the parser configuration, we cache it in a SoftReference for
future use.  If there's memory demand the garbage collector
should clear it to reclaim some memory.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320387 13f79535-47bb-0310-9956-ffa450edef68"
c3802c0cb30bdbb12a0bbdf57b909ae688bb87e9,"Merging in ValidatorImpl from the RI with many modifications.
Use native support for DOM and stream validation rather
than identity transformers and SAX. Manage the configuration
with a component manager rather than the ValidatorHandler.
Re-implemented reset so that it interacts with the component
manager rather than the validator handler.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320388 13f79535-47bb-0310-9956-ffa450edef68"
2fc9967f80aba69a9f7f02601448ba555d8efb95,"Hooking in ValidatorImpl.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320389 13f79535-47bb-0310-9956-ffa450edef68"
e7041f38b07cb664cacf2062af891017ef70587a,"Use WeakReferenceXMLSchema for SchemaFactory.newSchema().


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320390 13f79535-47bb-0310-9956-ffa450edef68"
bcd3f2180e827febdb8dd06f5384faf23bcb2302,"- Use ErrorHandlerWrapper for SAX ErrorHandler.
- Fixing a bug in isSchemaLanguageSupported; this SchemaFactory only supports the W3C XML Schema standard.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320391 13f79535-47bb-0310-9956-ffa450edef68"
4aab949f95b05d2a96dfd334774084af825a49e7,"Message file for JAXP 1.3 Validation API errors.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320392 13f79535-47bb-0310-9956-ffa450edef68"
300fb368c7f7a6d85b55f5177de26a5ce7d8e36d,"Adding a META-INF/services file for the SchemaFactory.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320393 13f79535-47bb-0310-9956-ffa450edef68"
ba4592760d29030a7146eef559748db175be0011,"Created a grammar pool wrapper to avoid setting a grammar pool on the
configuration each time newSchema() is called. This will cut down on the
reset time if the configuration is never changed.  Hooking in the other
two schema implementations: SimpleXMLSchema and EmptyXMLSchema.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320394 13f79535-47bb-0310-9956-ffa450edef68"
7d172b336a182256e3af86fa8e1208fca056c9ea,"Hooking in META-INF/services file for the SchemaFactory and fixing a build failure.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320395 13f79535-47bb-0310-9956-ffa450edef68"
5d91dc4961c2a2dd523010e6b2d727daa4b0ed55,"Deprecating several static methods that mutate the encoding map.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320396 13f79535-47bb-0310-9956-ffa450edef68"
9c96450950923725292c5c56d386eca75cbd76c0,"For every IDC value we create a new Integer for the type and store
it in a vector. To avoid this unnecessary object creation we use a
specialized vector for short values.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320397 13f79535-47bb-0310-9956-ffa450edef68"
60eea5441d2c842344c3b3c9b4248a445e07d690,"In clear(), clear all of the vectors.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320398 13f79535-47bb-0310-9956-ffa450edef68"
357321f3117eeaa6f5438734cf2d90892fcd7450,"Avoid more object creation. Do not create or use the vectors
for value types unless nececessary. Usually each element in
these vectors is the same value. If they're all equal just
use a single field to store and access the value.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320399 13f79535-47bb-0310-9956-ffa450edef68"
c8876a376701489895385f334594dd57f16e2d2d,"Fill in built-in kind field in setRestrictionValues(), setListValues() and setUnionValues().

When a declaration pool has been set on the SchemaDVFactory the methods which
fill in the XSSimpleTypeDecl never set the built-in kind. This causes validation of
enumerations to fail since we now compare the type of the value to the type of each
enumeration member.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320400 13f79535-47bb-0310-9956-ffa450edef68"
40ac1510d224e8d926e9b285e8a7161ee2faecb7,"Performance:

Eliminate switch block in convertToPrimitiveKind(short). Bias checks towards primitive types.
In convertToPrimitiveKind(ShortList) avoid creating a new list if all the items in the original
list are primitive types already.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320401 13f79535-47bb-0310-9956-ffa450edef68"
54a2313c719edb04037852968b4a1e46303a2aa6,"Avoid object creation. When a substitution group contains no members,
use the empty list singleton instead of creating a new one.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320402 13f79535-47bb-0310-9956-ffa450edef68"
4f41e887f1ac97abc70eb0c3319229688da74f20,"Recover some more performance in the schema validator by deferring creation
of the XSModel. Only create the XSModel in the PSVI if the application requests it.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320403 13f79535-47bb-0310-9956-ffa450edef68"
392f972e374249896f356b182f3263893bd4a272,"Set system identifier on the locator. This is not only useful for
errors but also provides a base URI for any schema location hints
in the document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320404 13f79535-47bb-0310-9956-ffa450edef68"
51371adc49beafda72a16f3f76dfd53c4dc12cd9,"If the validation root is not the document element we must go up
the ancestor chain to generate the namespace context. Created
a namespace context which will walk up the ancestor chain of the
DOMSource. It will only read the ancestor chain if there is no
namespace/prefix mapping in the main namespace context.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320405 13f79535-47bb-0310-9956-ffa450edef68"
e150cd779902b17591dc80d16a5883a02186fbee,"In traverseLocal should be checking that the XSSimpleType is an instanceof
XSSimpleTypeDecl before casting to it. Problem caught by Dave Brosius
on j-dev@xerces.apache.org.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320406 13f79535-47bb-0310-9956-ffa450edef68"
19526ea9302267db78beb25ed77b9bfd1b272039,"Eliminate unused import.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320407 13f79535-47bb-0310-9956-ffa450edef68"
efd09a56f2c28fb6c29888a491f2a6697ebb725e,"Making inner classes package private.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320408 13f79535-47bb-0310-9956-ffa450edef68"
36d5f7eaafa6ffc930ba243aa241dc4d42d21fe0,"Support for SAX input into the schema loader. Much thanks to Jack Z. Wang who co-authored this class with me.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320409 13f79535-47bb-0310-9956-ffa450edef68"
7ab071a531b7c0072dcdcd3cf0ae941385ceac5c,"A SAX wrapper around an XNI locator. The new SchemaContentHandler requires this.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320410 13f79535-47bb-0310-9956-ffa450edef68"
854833347e1b4d1e625c4fa4429559791e4c8c01,"Adding version information.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320411 13f79535-47bb-0310-9956-ffa450edef68"
dd769bfa167efbdf38cf293a52bbe553f595ab9e,"Support DOM input into the schema loader. Many modifications were made
to XSDHandler in order to support direct usage of arbitrary DOM implementations.
Since the input could be an Element node (i.e. the root of an inline schema) we
now keep track of the schema root rather than the document that owns it.
Much thanks to Jack Z. Wang for providing large portions of this support
and Sandy Gao for reviewing the changes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320412 13f79535-47bb-0310-9956-ffa450edef68"
d0691e5ebd80ba3c7fee0347bb99d3fe1c382ad4,"Created 3 new samples which demonstrate usage of the JAXP 1.3 Validation API:
SchemaFactory, Schema, Validator, ValidatorHandler and TypeInfoProvider.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320413 13f79535-47bb-0310-9956-ffa450edef68"
bbfb19db30542e1c1a7d16db5688d5a1ce32b14a,"Include JAXP samples in xercesSamples.jar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320414 13f79535-47bb-0310-9956-ffa450edef68"
699565707df7b0da4da9be93932968b5c894f740,"Renaming DatatypeAPITest to DatatypeAPIUsage plus some minor formatting changes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320415 13f79535-47bb-0310-9956-ffa450edef68"
552db2dbf92b902116b858526454c725fe2c20d8,"DatatypeAPITest was renamed to DatatypeAPIUsage.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320416 13f79535-47bb-0310-9956-ffa450edef68"
634341df8363aac0a72c29f2218f5aa2926d31fc,"Updating xml-apis.jar with the latest fixes from xml-commons.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320417 13f79535-47bb-0310-9956-ffa450edef68"
7c6172de4e81c791fc2b7cca1c970ecc3c7590da,"Upgrading to Apache 2.0 license.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320418 13f79535-47bb-0310-9956-ffa450edef68"
1828bb046b5fa67cd2820750002901da9ef516cd,"A sample which demonstrates usage of the JAXP 1.3 Parser API.
Much thanks to Ankit Pasricha for writing large portions of this sample.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320419 13f79535-47bb-0310-9956-ffa450edef68"
492334bf01b5fb95a211d3a55c6e73450051ab9c,"Adding a new page for JAXP samples.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320420 13f79535-47bb-0310-9956-ffa450edef68"
5364c4e74b7d0b72934f4abf36bd2e3d2c6c95d9,"Hooking JAXP samples page into the documentation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320421 13f79535-47bb-0310-9956-ffa450edef68"
b3ae4afd22b1eadac0f0001e08b68df5adadf775,"Marking a few methods as final.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320422 13f79535-47bb-0310-9956-ffa450edef68"
70c63ce31c6e67c516ed1ac386e9b3eb71bdaff8,"Mark message formatter as final.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320423 13f79535-47bb-0310-9956-ffa450edef68"
373c889b5f7fa55131ceef091c8c7c25e8613255,"Marking Util class as final.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320424 13f79535-47bb-0310-9956-ffa450edef68"
1e5c7e03dc118944d8e4be6f48281eb4d0c78c3c,"Minor documentation fix.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320425 13f79535-47bb-0310-9956-ffa450edef68"
0504db6974790851ebed227758c9fed6e1ff0bed,"Upgrading source to JAXP 1.3.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320426 13f79535-47bb-0310-9956-ffa450edef68"
0876bfac414cf409e466598da351de4c20cf8aa0,"Use new source package and build javadocs for new JAXP 1.3 packages.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320427 13f79535-47bb-0310-9956-ffa450edef68"
05c7959b06d4fa32a3156142cafaba29f835d320,"Remove separate DOM Level 3 API docs. These are now grouped with the regular API docs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320428 13f79535-47bb-0310-9956-ffa450edef68"
a5e0067ced7e8027f964978f18264e2335cccacf,"Javadoc fix.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320429 13f79535-47bb-0310-9956-ffa450edef68"
529e080994bc3d7ecace490b6f3c49d35709c2ad,"Updates for JAXP 1.3.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320430 13f79535-47bb-0310-9956-ffa450edef68"
04bf03f259ccd2e1398e0207b5eeae47af9bb357,"Update xerces.properties sample so that it points to the current default parser configuration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320431 13f79535-47bb-0310-9956-ffa450edef68"
e478f4a07093267a935f7b7ee6f4dbddfd0226b0,"Fixing JIRA Issue #1082:
http://issues.apache.org/jira/browse/XERCESJ-1082

When checking whether the value of an element is equal to
a value constraint we must check that their types are within
the same value space.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320432 13f79535-47bb-0310-9956-ffa450edef68"
ec492baa31293836b79cd621c9e3373c0e015f77,"Fixing JIRA Issue #1082:
http://issues.apache.org/jira/browse/XERCESJ-1082

When checking whether the value of an attribute is equal to
a value constraint we must check that their types are within
the same value space.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320433 13f79535-47bb-0310-9956-ffa450edef68"
f645be58d4c8ea8fb38af01ac0894cd26fc7aa62,"Removing an unused method and cleaning up unused imports.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320434 13f79535-47bb-0310-9956-ffa450edef68"
8de0a309d07b3d70d519dc5a3e173be1fa413d33,"Should be checking that finalSet is equal to DERIVATION_NONE.
Problem caught by Dave Brosius on j-dev@xerces.apache.org.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320435 13f79535-47bb-0310-9956-ffa450edef68"
523c28d57af042082e5f24db4de86af65ccf533c,"Merging in schema and XInclude methods from the RI.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320436 13f79535-47bb-0310-9956-ffa450edef68"
598c343687cb225b7176c6286b6cda561fa410f4,"Integrating support for XInclude and getSchema(), plus some code reorganization.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320437 13f79535-47bb-0310-9956-ffa450edef68"
a4dc290301658070551133f4f199dfce3280985b,"Adding support for the secure processing feature. In the JAXP 1.3
RI it's stored in the feature Hashtable which requires special
handling not to propogate the feature to the underlying parser.
To simplify the logic here we just pass the feature to the parser
constructors as a boolean.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320438 13f79535-47bb-0310-9956-ffa450edef68"
fff398d00e7e317fcca23248560555d931a9d2f1,"Adding an option for toggling on/off secure processing.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320439 13f79535-47bb-0310-9956-ffa450edef68"
24459a1474075950d8afa1d697c45ac1aeae6595,"Fixing a typo.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320440 13f79535-47bb-0310-9956-ffa450edef68"
2282f8af390392d9af44e7623dbf45af101ba03e,"Updating usage information for Parser API sample.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320441 13f79535-47bb-0310-9956-ffa450edef68"
276edcfbd3f6117bce58c400aadfaddc515303f9,"Schema bug: namespace declarations on local attribute declarations were not recognized. should pop the namespace stack *after* we process the attribute declaration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320442 13f79535-47bb-0310-9956-ffa450edef68"
603c61761da63b338fafabd8fd1be6fd4c6c763e,"Updating xml-apis.jar and xml-commons-external-src.zip with the latest source from xml-commons.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320443 13f79535-47bb-0310-9956-ffa450edef68"
0517d697cbac916cee012bd74ca8ebeed8ef9592,"Generate Javadocs for org.w3c.dom.xpath.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320444 13f79535-47bb-0310-9956-ffa450edef68"
bd75ced32a2f062474a7fd1fc94bd7dac7818bbb,"Adding org.w3c.dom.xpath to the API page.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320445 13f79535-47bb-0310-9956-ffa450edef68"
5c880c542f6e83cf46b5e1e6321c048a412ca189,"Fixing a bug from a previous commit.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320446 13f79535-47bb-0310-9956-ffa450edef68"
d0b8e73aa055bc57800561569154b8c0a287a678,"Fixing JIRA Issue #1070:
http://issues.apache.org/jira/browse/XERCESJ-1070

The error message for maxNodeOccurs limit was misleading in
that it related the limit to the maxOccurs attribute in the
schema. It really is a limit on the number of nodes which may
be created for representing the content model of a given type.
This should be clearer now.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320447 13f79535-47bb-0310-9956-ffa450edef68"
e9d1a98f6430d8d88bf109a61558da46dc3ef28c,"Fixing incompatible change made to XSConstants for XML Schema 1.1 support.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320448 13f79535-47bb-0310-9956-ffa450edef68"
9f500fc5252656a2278c6a25668c24d22ff2af51,"Manifest updates for JAXP 1.3.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320449 13f79535-47bb-0310-9956-ffa450edef68"
21cc1d4f1a805ab6ba9896ecdb793db7707e1cf8,"Merging in AttributesProxy from the JAXP 1.3 RI and added Attributes2 methods.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320450 13f79535-47bb-0310-9956-ffa450edef68"
fc6590095f492b910dbfe1f52da293210398f409,"This class should implement Attributes2 not Attributes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320451 13f79535-47bb-0310-9956-ffa450edef68"
6e42974ecb5f16a890939d6471a914398b42ef13,"Merging in changes from the JAXP 1.3. Make XSComplexTypeDecl an implementer of org.w3c.dom.TypeInfo.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320452 13f79535-47bb-0310-9956-ffa450edef68"
eba0a7c083c6662e96d951b0338e687efcd38f18,"Merging in changes from the JAXP 1.3 RI. Make XSSimpleTypeDecl an implementer of org.w3c.dom.TypeInfo.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320453 13f79535-47bb-0310-9956-ffa450edef68"
bd5d49c9f3520dfc90bbe6e264e794d7d4a00b9d,"Fix to allow adoption of nodes between deferred and non-deferred Xerces DOM Documents.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320454 13f79535-47bb-0310-9956-ffa450edef68"
1ae0cc3a6b18565e655c688137f9a14d8eac39d7,"Additional updates to DOMConfiguration in support of the DOMNormalizer bug fix
http://cvs.apache.org/viewcvs.cgi/xml-xerces/java/src/org/apache/xerces/dom/DOMNormalizer.java?r1=1.60&r2=1.61&diff_format=h


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320455 13f79535-47bb-0310-9956-ffa450edef68"
2abfd83cd04c6220dfd1036b8fcbe6020b774b06,"Merging in ValidatorHandlerImpl from the JAXP 1.3 RI with the following fixes, enhancements and other changes:
- made the class an implementer of PSVIProvider; PSVI provided by the TypeInfoProvider
- made the class an implementer of DTDHandler and EntityState to support the xs:ENTITY type
- made the class an implementer of ValidatorHelper to support SAX input from a Validator
- made the class an implementer of XMLDocumentHandler; receives events directly from the schema validator rather than going through XNI2SAX
- delegate all set/getFeature set/getProperty calls to a component manager which supports all features and properties supported by the schema validator
- if an instance of Attributes2 is passed to startElement store specified/declared in XMLAttributes
- to provide base URI to LSResourceResolver make ResolutionForwarder implement EntityResolver2
- if SAXSource is empty and we create a SAXParser attempt to set a security manager if one was installed on the ValidatorHandler
- performance: avoid creating QName and XMLString objects for each XNI call which takes these parameters
- performance: avoid symbol table lookups when we know the strings have already been internalized
- performance: send startPrefixMapping/endPrefixMapping calls directly to the content handler rather than iterating over the NamespaceContext later
- bug fix: skippedEntity should call the method on the ContentHandler not itself
- bug fix: startPrefixMapping/endPrefixMapping, prefix and URI must be passed to the SymbolTable


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320456 13f79535-47bb-0310-9956-ffa450edef68"
555ea6bb819f6761c59f0365b62cad483171873e,"Delegate to ValidatorHandlerImpl for SAX validation.
Make this class an implementer of PSVIProvider to allow
applications to access PSVI during a SAX validation
episode.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320457 13f79535-47bb-0310-9956-ffa450edef68"
774b4d4bcd78aef580c04969f8cfe1f91559a50d,"Hooking in ValidatorHandlerImpl.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320458 13f79535-47bb-0310-9956-ffa450edef68"
b8f55d6a0bb8104edf575aca174caeea2a27a0ae,"PR: http://issues.apache.org/jira/browse/XERCESJ-916
Submitted by:	Naela Nissar / nnissar@ca.ibm.com


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320459 13f79535-47bb-0310-9956-ffa450edef68"
001327573548632df8006b28b04473229d78eef6,"Adding an error message for TypeInfoProvider.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320460 13f79535-47bb-0310-9956-ffa450edef68"
bc85acfa4f1e5fe96712673e41ea08dfb19a8cb3,"Provide error message for TypeInfoProvider illegal state.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320461 13f79535-47bb-0310-9956-ffa450edef68"
7514cf82a6a64a039f4c04de5b7dd36830d6fb05,"Merge in ignore-schema-location-hints feature from the JAXP 1.3 RI.
Renamed it use-grammar-pool-only so it covers other cases beyond
just ignoring schema location hints.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320462 13f79535-47bb-0310-9956-ffa450edef68"
315a1d388e7248c487145a5c1193e31a2573319b,"Fix for defect http://issues.apache.org/jira/browse/XERCESJ-865


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320463 13f79535-47bb-0310-9956-ffa450edef68"
8b5295565d8ab43920659732488b88b65d7b1e86,"Fix formatting of schema error messages.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320464 13f79535-47bb-0310-9956-ffa450edef68"
d8dbdcdfae56c8fddc00f006c4805058e14e5dc5,"Adding an FAQ on accessing PSVI with the JAXP 1.3 Validation API.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320465 13f79535-47bb-0310-9956-ffa450edef68"
4963078a62904dc0a292a995d65571baf7f7bc05,"Removing an unused static field.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320466 13f79535-47bb-0310-9956-ffa450edef68"
5f8cea55e0156e1a3d9f2827332a3cad300b6b28,"Remove META-INF/services/org.apache.xerces.xni.parser.XMLParserConfiguration from xercesImpl.jar.
xercesImpl.jar should not contain a META-INF/services entry indicating which configuration the parser
should use. It prevents applications further down the classpath from overriding the parser's default
and may also cause an incompatible mix of classes to be loaded leading to a failure such
as a NoSuchMethodError.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320467 13f79535-47bb-0310-9956-ffa450edef68"
6230baf802859ffc25e92f1116dc84562bb65142,"Include javax.xml.xpath on API docs page.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320468 13f79535-47bb-0310-9956-ffa450edef68"
52dc86560fbc3a21140f97b7517885f3da891ee5,"Update XNI samples to use the new default configuration: XIncludeAwareParserConfiguration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320469 13f79535-47bb-0310-9956-ffa450edef68"
a7a5396409bce386d2e5933133c15764e28803d2,"Make PSVIConfiguration extend XIncludeAwareParserConfiguration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320470 13f79535-47bb-0310-9956-ffa450edef68"
088733522b83dba18f32d1fcf7ef8c85f7fa9ab7,"Making anySimpleType comparable with string.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320471 13f79535-47bb-0310-9956-ffa450edef68"
6e0e72fc18cfe1ed1a8fe9c427a16c8bb24ed956,"Remove META-INF/services file for the parser configuration from copy of Xerces used by build.xml.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320472 13f79535-47bb-0310-9956-ffa450edef68"
b6e3001548db4767c58751bebd16f42e2d4be888,"Call isXIncludeAware and getSchema methods on the factory implementations
directly rather than making virtual method calls on the abstract base
factory classes. This will prevent a failure at runtime on a JDK 1.4 environment.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320473 13f79535-47bb-0310-9956-ffa450edef68"
098f646a2c85d661ec903b19c0b00ba17e727d02,"Added an FAQ on usage of JAXP 1.3 on JDK 1.4.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320474 13f79535-47bb-0310-9956-ffa450edef68"
546b98c0f9e25784ec4fb40a61a598923ea99a0d,"Fixing dvcompile target.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320475 13f79535-47bb-0310-9956-ffa450edef68"
4e9e8c2acb9703125488571aea2f7297180916ba,"Documentation updates for DOM Level 3.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320476 13f79535-47bb-0310-9956-ffa450edef68"
0d805b14d1531b807cfebc0c1dd3f7038a8663b6,"Fixing a typo.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320477 13f79535-47bb-0310-9956-ffa450edef68"
e6979d270f936553e7abc8c6008735a258d06d84,"Completing the integration of JAXP 1.3 XInclude support.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320478 13f79535-47bb-0310-9956-ffa450edef68"
2d82fb8047f5843c434b9eb7066d267d55ed2741,"- Updating description on several message files.
- A few were missing the BadMessageKey and FormatFailed messages. Adding the two messages to files which did not have them.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320479 13f79535-47bb-0310-9956-ffa450edef68"
553acbc47cf0cc2577c1227e1b19e9b0f10f3225,"Some minor improvements.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320480 13f79535-47bb-0310-9956-ffa450edef68"
3be83008bd4f37a290105c19ea6de496a1bc8b83,"Minor documentation improvements.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320481 13f79535-47bb-0310-9956-ffa450edef68"
84cc98e68bbfeedf24700decae76518bdc31dc0c,"Updating the release plan.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320482 13f79535-47bb-0310-9956-ffa450edef68"
0dc1609d2d77693ee702d558a9fe143a2718e3f9,"Updating the release document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320483 13f79535-47bb-0310-9956-ffa450edef68"
c33a28c64823d2f2dc6e8c785ec9d6a1e2458b61,"Updating SAX information and fixing some broken links.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320484 13f79535-47bb-0310-9956-ffa450edef68"
6abaa402710bf8a1f396ceb09c604d3461974408,"Added an import for XMLSchemaValidator.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320485 13f79535-47bb-0310-9956-ffa450edef68"
8e0ad24ff9fe1bec1307b638aa7fbf5f5f74643b,"Implementing reset for the DocumentBuilder.
Restore the initial error handler and entity resolver.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320486 13f79535-47bb-0310-9956-ffa450edef68"
dfa8c4cb7cab23bbe2573af015277c4595c0437a,"Phase #1 of SAXParser reset. Restore initial handlers.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320487 13f79535-47bb-0310-9956-ffa450edef68"
11e6ed4442381e25d560d2c6810294421bb6bceb,"Completing the implementation of reset.

Created an extension of org.apache.xerces.parsers.SAXParser
which tracks changes to features and properties. This allows
us to reset the parser to its initial state without having to
dig deep into the parser configuration which in general isn't
possible. On reset we only restore the features and properties
which changed since the last reset.

Also added support for setting the secure processing
feature directly on the XMLReader.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320488 13f79535-47bb-0310-9956-ffa450edef68"
20501407fc9cc553ae6ccb48d5d60c6b941f3a83,"Adding a new error message.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320489 13f79535-47bb-0310-9956-ffa450edef68"
6eb61874fdc1d61042b26dd4b9fec4e8e6c8bba0,"Making the JAXPSAXParser constructor package private to eliminate a generated anonymous class.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320490 13f79535-47bb-0310-9956-ffa450edef68"
566d122380d79c9a282f305afea239a63f10d640,"Support DocumentBuilderFactory.setFeature/getFeature for all existing Xerces features.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320491 13f79535-47bb-0310-9956-ffa450edef68"
045b3820c03bc750bed9e3798775ad12c2b34fb4,"Formatting error messages provided for SAXNotRecognizedException and SAXNotSupportedException.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320492 13f79535-47bb-0310-9956-ffa450edef68"
368abbce5b09a3f68194cfbdd6fe0119676040df,"JAXP 1.3 added a setFeature method to DocumentBuilderFactory.
Document this method as the preferred way for setting features
on a DocumentBuilderFactory.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320493 13f79535-47bb-0310-9956-ffa450edef68"
e455b2c24124db8ae3106992f5b624912022c427,"Initial support for SAXParserFactory.setSchema() and DocumentBuilderFactory.setSchema().


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320494 13f79535-47bb-0310-9956-ffa450edef68"
4f27a51af24a9f1d2ebbe38b6db66e02d24349ac,"Getting rid of DOM Level 3 targets as these are now part of the standard build.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320495 13f79535-47bb-0310-9956-ffa450edef68"
6a8a66cd4209711145c22196f586701c745fbc26,"Modifying dom.dom3.Test to set the schema-type on the DOMNormalizer to XML Schema""http://www.w3.org/2001/XMLSchema"".


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320496 13f79535-47bb-0310-9956-ffa450edef68"
6bd6337ff46960e85807927a56fb9dce1e6e3b61,"Echo the names of the DOM Level 3 test classes before they run.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320497 13f79535-47bb-0310-9956-ffa450edef68"
08055d2bd5d1d887c0c78847f8a1bf1a7b080a88,"Merging in LocatorProxy from the JAXP 1.3 RI.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320498 13f79535-47bb-0310-9956-ffa450edef68"
894a1fdb84230e6c18665a5683fecb77aae723fb,"Merging in ErrorHandlerProxy from the JAXP 1.3 RI.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320499 13f79535-47bb-0310-9956-ffa450edef68"
8301519e0389cb3d96e9c08ce61e208bed9c8d23,"Merging in from the JAXP 1.3 RI.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320500 13f79535-47bb-0310-9956-ffa450edef68"
7a6a29a6fd6917e095fbc1c5de43d64971e592d1,"Fixing a bug. It was possible that the error handler would report the same error twice.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320501 13f79535-47bb-0310-9956-ffa450edef68"
a7bb5d3c058a8d3f6215825f94f39af1394c7469,"Plugging in JAXPValidatorComponent to support validation with third party Schema implementations.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320502 13f79535-47bb-0310-9956-ffa450edef68"
b7cf3c745fb8d0080893c0a43e09e8415a2ff4e6,"Use XMLEntityManager for entity resolution.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320503 13f79535-47bb-0310-9956-ffa450edef68"
2524e1871c24485d5e73f4a6e99f2e1587742936,"Updating xml-apis.jar and xml-commons-external-src.zip with the latest source from xml-commons.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320504 13f79535-47bb-0310-9956-ffa450edef68"
0a6ba0de0e9d3d38e846ac848c49cfe02971b9b7,"Updating the release plan.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320505 13f79535-47bb-0310-9956-ffa450edef68"
da546c9af9d2934164feb7aca85dd1b57418d4e3,"In features/properties examples encourage setting of namespace awareness.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320506 13f79535-47bb-0310-9956-ffa450edef68"
1ba12ea0412846a0a6e2604622fd58f23651a21c,"In XInclude example encourage setting of namespace awareness.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320507 13f79535-47bb-0310-9956-ffa450edef68"
c12fd694626841e15a23993537a61d1ef75260c4,"A TypeInfo.getTypeName(...) bug fix.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320508 13f79535-47bb-0310-9956-ffa450edef68"
1053418f95034f098e876012709e9f1547e53a99,"When creating a DocumentBuilder, check that if a Schema has been specified that neither of the schema properties have been set.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320509 13f79535-47bb-0310-9956-ffa450edef68"
96f5c611122b69407c15d47b38f678ab57b69d8c,"Clean-up unused imports introduced in the last commit.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320510 13f79535-47bb-0310-9956-ffa450edef68"
52265dfd01732473b7ef2de4ce850ce96aea8de2,"An XMLDTDHandler which records the names of unparsed entites in the DTD.
We need this component in order to support the xs:ENTITY type.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320511 13f79535-47bb-0310-9956-ffa450edef68"
bab6fe5b1e630f99bdd9eb36750a31b5c534e496,"Adding a version tag to several classes.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320512 13f79535-47bb-0310-9956-ffa450edef68"
727257f5afd5baf9e0f8b8941647e601650175f7,"Supporting validation of xs:ENTITY and also fixing a bug.
We need to use a different ValidationManager than the
one in the configuration so that the validators in the pipeline
don't interfere with the one for the Schema.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320513 13f79535-47bb-0310-9956-ffa450edef68"
15ec01bdecd822f07bcb8dfc42d13dbc78c6aaf7,"Clear the map of unparsed entities before reuse.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320514 13f79535-47bb-0310-9956-ffa450edef68"
fc1373bba571cce2a3c7984f464e57d08fba4280,"Upgrading to xml-commons-external-1_3_01.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320515 13f79535-47bb-0310-9956-ffa450edef68"
dd7feaea73d0884de8313b3501a0867ec9d66673,"Mark xml-commons work as complete.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320516 13f79535-47bb-0310-9956-ffa450edef68"
5a1e552d7f8611562a5a6ae47d5f331068d27a7e,"Marking several classes as final.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320517 13f79535-47bb-0310-9956-ffa450edef68"
aa5788094ba9b53b5f5a412d1a0164439767af0d,"Refreshing xml-commons-external-1_3_01.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320518 13f79535-47bb-0310-9956-ffa450edef68"
bbd33f7ee5bf50d399e33d54cc56840d4085da93,"Adding a version tag.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320519 13f79535-47bb-0310-9956-ffa450edef68"
a938108c3f76527083985948d0bd528e40e81d7d,"Like Xerces-C++, adding the project charter to the documentation:
http://svn.apache.org/viewcvs.cgi/xerces/c/trunk/doc/charter.xml?view=markup


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320520 13f79535-47bb-0310-9956-ffa450edef68"
f5d45971ff5300f15ba9748c964f1fb359df38ea,"Updating the release doc and adding a description of Xerces-J 2.7.0.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320521 13f79535-47bb-0310-9956-ffa450edef68"
33b2bb963817ddd1de1cb550aebed0f6eb18200f,"Fixing a couple bugs with respect to managing the NamespaceContext during DOM validation.

1) When a namespace is unbound the URI in the NamespaceContext
should be stored as null instead of the empty string.

2) If a namespace was unbound in the scope of the validation root,
we must not look at the ancestors for a binding.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320522 13f79535-47bb-0310-9956-ffa450edef68"
dca0edabd6ee694d1d03f0f8250b6a2e44260623,"Update copyright for 2005.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320523 13f79535-47bb-0310-9956-ffa450edef68"
e529fd488d55b50d38ca50ee68875cbe70d0c73e,"Implementing first edition erratum E2-67:
http://www.w3.org/2001/05/xmlschema-errata#e2-67

This reallows character ranges which look like [-+] and [+-].
The XHTML schema [1] makes use of such character ranges
and was rejected by Xerces 2.6.2. We're now able to
process it.

Thanks to Ankit Pasricha for providing this patch.

[1] http://www.w3.org/2002/08/xhtml/xhtml1-strict.xsd


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320524 13f79535-47bb-0310-9956-ffa450edef68"
53ec8ba9993dc4072e467f98c2dad5094622f745,"Make the home link point to xerces.apache.org.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320525 13f79535-47bb-0310-9956-ffa450edef68"
9231cb3a3675ca5bbd7fbbca689bf7b0fa258ee1,"Fixing JIRA Issue #1083:
http://issues.apache.org/jira/browse/XERCESJ-1083

Fixing a possible NPE found by Alex Milowski.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320526 13f79535-47bb-0310-9956-ffa450edef68"
090ea682991fbb4df8f1e997f4a521d39c9cb3f6,"Fixing JIRA Issue #1078:
http://issues.apache.org/jira/browse/XERCESJ-1078

Fixing a possible NPE discovered by Kurt Riede.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320527 13f79535-47bb-0310-9956-ffa450edef68"
5607854a23b9005214c759e798e87b7b021d0af6,"Fixing JIRA Issue #1080:
http://issues.apache.org/jira/browse/XERCESJ-1080

Fixing a possible NPE discovered by Kurt Riede.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320528 13f79535-47bb-0310-9956-ffa450edef68"
537c8bd133507ed2cf47c1cc952bbb365399ca89,"Fixing JIRA Issue #1047:
http://issues.apache.org/jira/browse/XERCESJ-1047

Fixing the computation of relative URIs when the scheme
and/or authority component differ between the two URIs.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320529 13f79535-47bb-0310-9956-ffa450edef68"
90e2d35c820c6f4568dcd2393c180d77b7c6bea4,"Fixing JIRA Issue #1073:
http://issues.apache.org/jira/browse/XERCESJ-1073

Adding UTF-16 to the UNICODE_ENCODINGS array. Due to
a change in the EncodingMap we were querying the charset
encoder to check if a character is printable for all characters
higher than 0x7F. This restores the last printable character
value to 0xFFFF.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320530 13f79535-47bb-0310-9956-ffa450edef68"
caf98da7c32542d3a976e555127e62b9cd71013d,"Performance: Every time parse is invoked on the JAXP SAXParser
it sets the entity resolver and error handler which causes the
underlying configuration to change. This forces components
to read the whole config on every parse when they could
otherwise break after examining the PARSER_SETTINGS feature.
Instead of creating a new XMLEntityResolver or XMLErrorHandler
each time setEntityResolver and setErrorHandler is called, set
the entity resolver or error handler on the existing XMLEntityResolver
or XMLErrorHandler.

Applying the same performance fix to the DOMParser.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320531 13f79535-47bb-0310-9956-ffa450edef68"
6bca4e973a7bceb763f3ad0159389aff65468f1b,"Bug fix: When checking enumerations, two values are comparable if they're in the same value space.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320532 13f79535-47bb-0310-9956-ffa450edef68"
9ee823b76f40c7c7c1da11fa689b8c24fc9fe302,"Adding a link for xerces.apache.org.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320533 13f79535-47bb-0310-9956-ffa450edef68"
3e20fe47af23230a0e5042bffb7947f097723e19,"In anticipation of Xerces-J's move to SVN, change the 'CVS Repository' label to 'Source Repository'.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320534 13f79535-47bb-0310-9956-ffa450edef68"
27c8b1cabd776258b03f81b38a967b27cddf3ac8,"Making menu consistent with Xerces-C++ (where it makes sense). Added links to the mailing list archives.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320535 13f79535-47bb-0310-9956-ffa450edef68"
c89d914be961a8a35f7c69d17737186142ae72f6,"Move computation of primitive type outside of the loop.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320536 13f79535-47bb-0310-9956-ffa450edef68"
b83672fd3afdc71dbf6ceb725a04769c8b3f12bf,"Fixing a bug. When a SAXSource has been specified as
an input to the schema loader we weren't setting an
error handler on the XMLReader.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320537 13f79535-47bb-0310-9956-ffa450edef68"
f75c5bfdf49a6b339d89c83fcfa5f2a9eefcec3f,"Remove info about getting access to DOM Level 3 functionality. DOM Level 3 is part of the standard distribution now.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320538 13f79535-47bb-0310-9956-ffa450edef68"
7b5ef9ebbcc0cafe6e88875c3c9887cc90aabf93,"Added info on how to create and set a javax.xml.validation.Schema on a parser.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320539 13f79535-47bb-0310-9956-ffa450edef68"
2d0063d98c0264ac128f285e0b134664eb63d7f5,"Adding a new PGP key for myself to the KEYS file.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320540 13f79535-47bb-0310-9956-ffa450edef68"
ee691c0e0fd64a8c510b10bd35e3243497c49db7,"Fixing a static mutability issue. Clone the recognized
features/properites arrays before returning them to
the caller.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320542 13f79535-47bb-0310-9956-ffa450edef68"
84a3ae31d49077fba7af385af2bed272b8139438,"Fixing a bug with validation of float and double values. We delegate to Java's Float.parseFloat() and
Double.parseDouble() methods when validating float and double values. These methods particularly
in Java 5.0 allow lexical forms which are not allowed by the schema spec including: Infinity, -Infinity,
+NaN, 0.2f, 0.7d and 0x1234.abcdP123. We now pre-screen the string for valid characters before
passing it to the library methods.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320543 13f79535-47bb-0310-9956-ffa450edef68"
f1bc48142fb252afb6f335b456bc9bd790b6514c,"Fixing a bug affecting the following types: date, gDay, gMonthDay, gMonth and gYearMonth.
We were accepting garbage immediately before the time zone, so a value such as
""1111-11-11 some arbitrary text -05:00"" was passing through without an error being flagged.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320544 13f79535-47bb-0310-9956-ffa450edef68"
61a699515d5914cb3e3b2efa9c1139657980990f,"The error message for invalid date values was reporting
that the value is an invalid dateTime value. We weren't
overriding getActualValue(String, ValidationContext) from
DateTimeDV.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320545 13f79535-47bb-0310-9956-ffa450edef68"
a86130bca3f0ef10726590cae473074cd1f55c7a,"xml-apis.jar now contains JAXP 1.3. Updating the docs to reflect that.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320546 13f79535-47bb-0310-9956-ffa450edef68"
00feeda338b940cbe69de3b40d7e5fbc7f115760,"Note that Xerces-J also supports javax.xml.datatype and javax.xml.validation.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320547 13f79535-47bb-0310-9956-ffa450edef68"
c707c2efcd4d660339e0680e7135174b48fff26d,"Prepare for Xerces-J 2.7.1.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320548 13f79535-47bb-0310-9956-ffa450edef68"
8391b5ffc62b39ceb2fc9604276498ecd0720915,"Upgrading to xml-commons-external-1_3_02.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320549 13f79535-47bb-0310-9956-ffa450edef68"
ea2f0156ef8b614da4c9c3e0360961f3bdf232b0,"Fixing JIRA Issue #1088:
http://issues.apache.org/jira/browse/XERCESJ-1088

An NPE was being thrown from processAttValue for a null namespace URI.
Should be fixed now. We now pass in the empty string if the URI is null.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320550 13f79535-47bb-0310-9956-ffa450edef68"
52937e0039e38bd60dc0d8ca36076ceb79426380,"Fixing JIRA Issue #1090:
http://issues.apache.org/jira/browse/XERCESJ-1090

Clause 2.1 of Section 3.4.4 of Part 1: Structures says:  ""If the {content type} is empty,
then the element information item has no character or element information item [children]"".

Section 3.1.4 says: ""... comments and processing instructions, even in the
midst of text, are ignored for all validation purposes"".

The schema validator was reporting an error if a comment or processing instruction was
present as a child of an element declared to have empty content. This behaviour
was introduced in CVS v1.28 when it was thought that errors should be reported for
such content.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320551 13f79535-47bb-0310-9956-ffa450edef68"
52ea83a881c9c625ee4e95fb963625a5f9c631f3,"If the validator is reading from a StreamSource the messages
for well-formedness errors weren't being formatted correctly.
We need to register a message formatter. Should be fixed now.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320552 13f79535-47bb-0310-9956-ffa450edef68"
b4780aa757772ed9e105225cb9ea1bd7ab3d3733,"Register an error handler with the DocumentBuilder.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320553 13f79535-47bb-0310-9956-ffa450edef68"
0a6bd04d207bdc8461f04ac43a2030952c850ae5,"When schema validation is enabled using DOM Level 3 the parser
should be checking all schema constraints including UPA, so the
schema-full-checking feature should also be turned on.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320554 13f79535-47bb-0310-9956-ffa450edef68"
9721110e5f39aad361366a587e69de076e43959c,"Fixing a bug. When the JAXP schema location property is set,
schema full checking errors were being reported to a local
error reporter which from a parsing context didn't contain the
application's error handler. Errors reported in this context
would always be reported using the default error handler
which writes to the console.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320555 13f79535-47bb-0310-9956-ffa450edef68"
083f42dfd2bf001b5bc054094b693d40666f2aa5,"Fixing JIRA Issue #1089:
http://issues.apache.org/jira/browse/XERCESJ-1089

When both the schema validation and validation features have been
turned on, to be consistent with what occurs on the main pipeline,
DTD validation should occur if the document being processed on the
child pipeline has a DOCTYPE. If no DOCTYPE is present then no
errors should be reported. This is controlled by turning on the
dynamic validation feature.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320556 13f79535-47bb-0310-9956-ffa450edef68"
41c04714d9e6937bcbe1c60adebe5a4fbbfa5b2d,"Updating the JAR manifest to reflect that v1.3.02 of xml-commons external is now in use.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320557 13f79535-47bb-0310-9956-ffa450edef68"
3a4fef86c73400b11023e97dd38021f149b33fc0,"Improve the description of the schema validation feature by emphasizing
that schema-full-checking must be enabled in order for Xerces to perform
expensive schema checks such as UPA.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320558 13f79535-47bb-0310-9956-ffa450edef68"
2f9ddb3699218db86441918a7cc2d05c249a1015,"Adding three new FAQs for questions recently raised on the j-users/j-dev lists.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320559 13f79535-47bb-0310-9956-ffa450edef68"
06093d85718c0a8f307d4910e4e131a78ccb5ca1,"Updating the release doc for Xerces-J 2.7.1.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320560 13f79535-47bb-0310-9956-ffa450edef68"
9477f2cc2efd1ec08d4da5599cf9f47872995375,"Updating the changes section for Xerces-J 2.7.1.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320561 13f79535-47bb-0310-9956-ffa450edef68"
5f7ea79bef6b219c15d37f82a7902ec0b054f87a,"Adding a note about what happened to the org.apache.xerces.dom3 package.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320562 13f79535-47bb-0310-9956-ffa450edef68"
111798bd854d8b99edd597414a84dc2655e10b67,"Fixing a typo introduced in the previous commit.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320563 13f79535-47bb-0310-9956-ffa450edef68"
bcbcb082feff842bfc2aa84a8f6b4239e6134ab1,"Fixing a broken link to GUMP.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320565 13f79535-47bb-0310-9956-ffa450edef68"
7080576431608079ed5191e1af2553cd1a17db1e,"Fixing JIRA Issue #1094:
http://issues.apache.org/jira/browse/XERCESJ-1094

Fixing an infinite loop which occured when an XML 1.1 document contained an
unescaped C0 or C1 control character in an attribute value. We were calling
the wrong method in scanAttributeValue().


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320566 13f79535-47bb-0310-9956-ffa450edef68"
4df56f2fe7b9183d40fe3c383cc339898f5af123,"Attempting to fix JIRA Issues #1054 & #1076:
http://issues.apache.org/jira/browse/XERCESJ-1054
http://issues.apache.org/jira/browse/XERCESJ-1076

The first time match() is called on a RangeToken, a map is created for
fast lookups. There was a race condition which made it possible for
the map to be refill while another thread was reading from it. Though
I've never been able to reproduce either JIRA issue, it looks like
this could have been the problem. Now we assign the map only
once it's been filled.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320567 13f79535-47bb-0310-9956-ffa450edef68"
dedff1ea68e1501e18e09aa9351dd6a78e09c684,"Fixing a typo in the charter.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320568 13f79535-47bb-0310-9956-ffa450edef68"
23ee1afb4b705875459062eb78afb787a7390b05,"Fixing a bug. It was possible to append a second root element or DocumentType node to a
deferred DOM if the children of the deferred node have never been synchronized.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320569 13f79535-47bb-0310-9956-ffa450edef68"
ba95a067185a05be96e93ad19f1db5e942f154d3,"Fixing JIRA Issue #1097:
http://issues.apache.org/jira/browse/XERCESJ-1097

Because of a change in behaviour to BigDecimal.toString() in J2SE 5.0 we cannot
rely on it to correctly generate the lexical form of XMLGregorianCalendar. Copying
over the BigDecimal formatting code from DurationImpl which will work regardless
of the JDK level.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320570 13f79535-47bb-0310-9956-ffa450edef68"
c56bca22f70440df3f576a54e548866709e58161,"Fixing a bug. When the schema root provided is not the document element
there may be namespace bindings in effect from ancestors of the schema
root.  If we cannot find a URI mapping for a prefix in the context of the
schema root we must look at the ancestors for a binding.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320571 13f79535-47bb-0310-9956-ffa450edef68"
4ca479646a9312cbec5f9432c28232715f7120c4,"Fixing a bug. When the schema root provided is not the document element
there may be namespace bindings in effect from ancestors of the schema
root.  If we cannot find a URI mapping for a prefix in the context of the
schema root we must look at the ancestors for a binding.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320572 13f79535-47bb-0310-9956-ffa450edef68"
e168accfbf79df6a13913388e145cc7ed6c35d2c,"Updating copyright.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320573 13f79535-47bb-0310-9956-ffa450edef68"
5a20aefbdfcaa6e3e856ef0c40f398237055469c,"Fixing a bug. Xerces' SAX parser implements both the Parser and XMLReader
interfaces. If an application uses an instance both as a SAX1 and SAX2 parser
it was possible that a document handler or a content handler from a previous
parse would never be cleared.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320574 13f79535-47bb-0310-9956-ffa450edef68"
f1699c1e9f004e89d4cc79e36183ac5d4c39a844,"If a LexicalHandler has been specified on the SAXResult forward
lexical events from the parser to the application's LexicalHandler.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320575 13f79535-47bb-0310-9956-ffa450edef68"
5cbac3b700502d7f1ddd34f9d0fae05695817aa3,"Fixing a bug. If the start document event has been seen on the child pipeline it
means the resource was successfully opened and we started reporting document
events. If an IOException is thrown after the start document event we had a
failure midstream and cannot recover. We were treating this condition as a resource
error and allowing a malformed stream of events to be reported by the parser.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320576 13f79535-47bb-0310-9956-ffa450edef68"
429b7c42ae5744ca2cdb15f90ea71c2a6d491f94,"Expanding on the previous fix. If parse=""text"" and an IOException has
been thrown after we start reporting content we cannot recover from
this error.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320577 13f79535-47bb-0310-9956-ffa450edef68"
b635a9585ed3d6079ea404c0451e6b65e32cb3dc,"Fixing a typo.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320578 13f79535-47bb-0310-9956-ffa450edef68"
bb51c50d2f44c2575d1e1bcc1c4b4cc187042e80,"Fixing a bug. An ArrayIndexOutOfBoundsException could be thrown when
processing a document with a DTD with schema validation enabled. In such
a case the schema validator removes itself from the pipeline if no schema
is found for the document. These updates weren't being propogated to the
child pipelines. Should be fixed now.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320579 13f79535-47bb-0310-9956-ffa450edef68"
4a25f6357a3beb4e007eb8bd67c11f230b4eb520,"Reverting part of the previous commit. DTD events from the
child pipelines should never be propogated to the main one.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320580 13f79535-47bb-0310-9956-ffa450edef68"
bb92d4d79198f376fce74aa2081b9ac92e090135,"Fixing a bug. When an annotation has no <documentation> or <appinfo> children
a text child containing the annotation text was stored on the first child of its parent.
Only if the annotation is the first child will we find the text node there, otherwise it is
lost. We now store the annotation text in a field on the <annotation> element node
where it will always be found.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320581 13f79535-47bb-0310-9956-ffa450edef68"
112416cc0372faf6d1e07075ab188eb37bf2d7a5,"Updating copyright for 2005.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320582 13f79535-47bb-0310-9956-ffa450edef68"
edc069a601006894eb4bc3ec7dc63e053b7d0f11,"Restore serialization compatiblity with Xerces 2.6.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320583 13f79535-47bb-0310-9956-ffa450edef68"
96146065a792cc0cea1079bb3db05efeedfd41d7,"Restore serialization compatiblity with Xerces 2.6.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320584 13f79535-47bb-0310-9956-ffa450edef68"
d10e678ea4b9346953e6a40574cc91c69a205cac,"Restore serialization compatibility with Xerces 2.6.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320585 13f79535-47bb-0310-9956-ffa450edef68"
9c79a00a929951aff8b74855f0e6ecd991b9e7c3,"Fixing JIRA Issue #1101:
http://issues.apache.org/jira/browse/XERCESJ-1101

When the schema loader is reset we need to set the flag which
controls whether JAXP sources have been processed to false.
This reset bug has been lurking around for awhile but only
surfaced after a performance improvement made to the
DOM parser.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320586 13f79535-47bb-0310-9956-ffa450edef68"
50b49c2cb7c6443aacc65aa4defba616c8453bcd,"Creating a version of DTD grammar which balances syntax trees.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320587 13f79535-47bb-0310-9956-ffa450edef68"
d8371f2ae884a6d2e7700cad9a163c837e6addfc,"Added a protected method for use by BalancedDTDGrammar.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320588 13f79535-47bb-0310-9956-ffa450edef68"
474233ba1a3f15dc71a7259ae1751216adb237d1,"Fixing a typo from the previous commit.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320589 13f79535-47bb-0310-9956-ffa450edef68"
748ae95b975566eb112dfa737ce3ea494270e1a6,"Adding a feature which controls whether the syntax trees generated
while parsing a DTD are balanced. Turning on this feature prevents
deep recursion for large content models. We could extend this to the
schema syntax trees in the future.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320590 13f79535-47bb-0310-9956-ffa450edef68"
7dc48012b024656d1a710fb27695fc3e3ba437d7,"Fixing a typo.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320591 13f79535-47bb-0310-9956-ffa450edef68"
4f270ddbb887084333e3936bc05b01c180a9162b,"Include the new balance-syntax-trees feature in the Xerces features array.
The XIncludeHandler uses this array to copy the features of a parser
configuration to a child pipeline.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320592 13f79535-47bb-0310-9956-ffa450edef68"
4100c7b518087020a4336901e8c4f95842d99e5a,"The NOTICE file is ASCII not binary.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320593 13f79535-47bb-0310-9956-ffa450edef68"
96eb3d3016fdf0bdddc8bbe8e3c07e3664c4a643,"We've moved from CVS to SVN. Updating the link to the source repository.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320614 13f79535-47bb-0310-9956-ffa450edef68"
fa950a154e4db7b2b9396630bc42242c2681b7b3,"Replace all references to CVS with SVN.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320639 13f79535-47bb-0310-9956-ffa450edef68"
d01ba7155e80c939a8af4a17497eac82d5368897,"Updating XJavac task to support compilation on IBM J2SE 5.0.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320661 13f79535-47bb-0310-9956-ffa450edef68"
7c6fb012ac6f28aebf8e095945241c73b5163bde,"Implementation-Vendor and Implementation-URL are supposed to specify which
organization maintains the implementation and where it can be downloaded, in
this case the ASF.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@320886 13f79535-47bb-0310-9956-ffa450edef68"
a3a18d00a9f58dc64535277a6b359eaeaa7cc8cd,"JIRA Issue #1105:
http://issues.apache.org/jira/browse/XERCESJ-1105

Use short circuiting logic. Patch thanks to Dave Brosius.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@327077 13f79535-47bb-0310-9956-ffa450edef68"
e3a0e511eb3540f075d2f7166d7b73a50c5596b6,"Fixing JIRA Issue #1106:
http://issues.apache.org/jira/browse/XERCESJ-1106

Before adopting a node from a deferred DOM to a non-deferred DOM
we first undefer the children of the node. We accomplish this by
doing a non-recursive walk over the child/sibling chains but missed
synchronizing attribute nodes since they are not children of elements.
Should be fixed now.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@327081 13f79535-47bb-0310-9956-ffa450edef68"
0611fbb89e429221ff50e1c6fa460a666a695d96,"Adding documentation for the validation/balance-syntax-trees feature.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@327926 13f79535-47bb-0310-9956-ffa450edef68"
b4004bb1ac108af468591c4a8b93448ffcac893e,"JIRA Issue #1107:
http://issues.apache.org/jira/browse/XERCESJ-1107

Improving usage of StringBuffers throughout the code. Patch thanks to Dave Brosius.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@327940 13f79535-47bb-0310-9956-ffa450edef68"
7b1831a95fab3c188abdd3e26ae0a092c01fbdf7,"Restore serialization compatibility with Xerces 2.6.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@329261 13f79535-47bb-0310-9956-ffa450edef68"
8279b01fe7d2d372904d81e464d2105a71573175,"Removing an unused local variable.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@329262 13f79535-47bb-0310-9956-ffa450edef68"
1420ac48886d3660cb8bf204b5bb9d0ddd4bbba7,"Restore serialization compatibility with Xerces 2.6.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@329271 13f79535-47bb-0310-9956-ffa450edef68"
b34ee186f808a76f3bf1ebc7e84ee0c465898c07,"JIRA Issue #1110:
http://issues.apache.org/jira/browse/XERCESJ-1110

Use System.arraycopy() instead of doing inefficient loop copying. Patch thanks to Dave Brosius.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@329519 13f79535-47bb-0310-9956-ffa450edef68"
92a0c1d8878e4df82d20c52f441953aafc7c659b,"Add honour-all-schemaLocations option to SAX samples.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@329521 13f79535-47bb-0310-9956-ffa450edef68"
fbfaa3644763a97c5d6640acdcac223c66168f2d,"Add honour-all-schemaLocations option to DOM samples.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@329525 13f79535-47bb-0310-9956-ffa450edef68"
2c8329e82eda65c9d66aa9ab4f07ee26d7f86db5,"Update description of options for SAX samples.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@329530 13f79535-47bb-0310-9956-ffa450edef68"
ca0353ffb017710476b47ce6b02855f825679eaa,"Update description of options for DOM samples.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@329535 13f79535-47bb-0310-9956-ffa450edef68"
400fb31d18246586a1adc1c9b1b179f046074997,"Fixing an AIOOBE.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@329625 13f79535-47bb-0310-9956-ffa450edef68"
aa75aed356f772be8896a26364d7789bd4c8eeea,"Adding option to select schema language to validation samples.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@329638 13f79535-47bb-0310-9956-ffa450edef68"
38c2bf234c8f2d832929c575cec77c13bdb988c7,"Update description of options for JAXP samples.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@329641 13f79535-47bb-0310-9956-ffa450edef68"
4fae975f80a4fba5b50cb4ccd0c8b0fd5cb47ac2,"The field in which we store annotations while building the complex type is
never cleared when we start a new type. This is only a problem when we
must traverse another complex type to complete the one we were traversing.
This occurs when we haven't yet processed the base type. The base type
was inheriting annotations from the sub type. Should be fixed now.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@330189 13f79535-47bb-0310-9956-ffa450edef68"
bdc72ee602bc857fefd08c63bef461b3a7bbdcd1,"Fixing JIRA Issue #1111:
http://issues.apache.org/jira/browse/XERCESJ-1111

When default attributes are added to the document while executing
Document.normalizeDocument() the owner element was never set and mutation
events were not being fired for the newly added nodes. Both of these bugs
should be fixed now.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@330486 13f79535-47bb-0310-9956-ffa450edef68"
267163239b6363bb49ba036ca8ff73a4aefaa560,"Fixing a bug which caused an NPE to be thrown from the scanner
when the continue-after-fatal-error feature is enabled. If the
document being parsed is empty, the version detector reports
the error at which point we should stop parsing because there's
no input.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@331696 13f79535-47bb-0310-9956-ffa450edef68"
4424d92395c41c3ea22a3cfc408f49647a7ddddc,"Removing an unused field.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@331702 13f79535-47bb-0310-9956-ffa450edef68"
afe85178060d733c7f6e50d8de84031351a22d23,"Cleanup imports.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@331703 13f79535-47bb-0310-9956-ffa450edef68"
67c7a45c4317ae24a9a323284999dac82427bb7a,"Fixing JIRA Issue #682:
http://issues.apache.org/jira/browse/XERCESJ-682

When a selector matches, only key IDCs are required to match all of their fields.
Unique and keyref IDCs which only match some of their fields are not members of the
""qualified node set"" however this is not an error and we shouldn't be reporting one.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@345572 13f79535-47bb-0310-9956-ffa450edef68"
42042fe22cac10e6b776bd999725696451c1c420,"Add honour-all-schemaLocations option to XNI samples.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@345598 13f79535-47bb-0310-9956-ffa450edef68"
f31adcbe24fc96ea0db8c85dccc262a84c0d3540,"Removing an unused variable.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@345599 13f79535-47bb-0310-9956-ffa450edef68"
13a1c7c4fbb77d94f91ff4c6ab13e996f3b3a057,"Minor cleanup.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@345600 13f79535-47bb-0310-9956-ffa450edef68"
46b15064aba7019d51a34c2dbaa5812f3edb8027,"IntegratedParserConfiguration hasn't been the default parser configuration for a long time.
When no parser configuration has been specified use XIncludeAwareParserConfiguration which
is the current default.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@345834 13f79535-47bb-0310-9956-ffa450edef68"
e87d046d2c716689101b52b6ac69a97a6b5b7b89,"Adding honour-all-schemaLocations option to xni.XMLGrammarBuilder sample.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@345842 13f79535-47bb-0310-9956-ffa450edef68"
7d37a9e3f8a530604cc61d040b05f11aa95ad72d,"Update description of options for XNI samples.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@345846 13f79535-47bb-0310-9956-ffa450edef68"
4672f105770d152ec787f211278cdd876c595c37,"Reverting a questionable performance ""improvement"" made for resuing
StringBuffers. A reference to a StringBuffer was added to ChildNode
which noticably increased the footprint of the entire DOM since
just about every node had this field. This was not a good tradeoff
and it's possible it didn't help performance at all since setting
the length of StringBuffer to zero causes a new char array to be
created internally. Thanks to Ken Geis who pointed out this problem
on j-dev@xerces.apache.org.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@345851 13f79535-47bb-0310-9956-ffa450edef68"
9fa022111ed16e0eb543e71a662f03779a871253,"XML Schema errata E2-66.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@348754 13f79535-47bb-0310-9956-ffa450edef68"
90894abe4f5c201877013980b50175b4574a394f,"Updating copyright.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@348781 13f79535-47bb-0310-9956-ffa450edef68"
f22b6c5efe7fe35411652d2b6a3d8b2b1b17a724,"Fixing a StackOverflowError which can occur when an element type declaration has mixed content.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@348807 13f79535-47bb-0310-9956-ffa450edef68"
41d1faaf8a9388995bd5cb90d2c04a295ea9ed86,"Minor fix.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@348824 13f79535-47bb-0310-9956-ffa450edef68"
a9c02c8e913d95132e794e768989e0fa1bd47f47,"Only consult xsi:schemaLocation attribute and external schema location
properties when it's the first time we resolve a location for a namespace.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@348829 13f79535-47bb-0310-9956-ffa450edef68"
23fd21d10e71512da57f83e2f14f9b5181461415,"Small performance improvement when loading schemas.
Given that now all elements in schema documents allow foreign
attributes, we no longer need to keep a flag to indicate
whether foreign attributes are allowed.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@348859 13f79535-47bb-0310-9956-ffa450edef68"
4e25e947f250c55eca84bdd8e007e1b401a2057e,"Fixing JIRA Issue #1115:
http://issues.apache.org/jira/browse/XERCESJ-1115

Correcting a typo in one of the messages.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@348870 13f79535-47bb-0310-9956-ffa450edef68"
97033b9bcdb0ebcdfc9a24df498cab2d12790b44,"Improvement for writing annotations:
- IntegratedParserConfiguration is ancient and slow. Use the better performing XML11Configuration.
- Parser instances use quite a bit of memory. Store them in SoftReferences so they can be
  reclaimed if there is high demand for memory.
- Use adopt node when possible to avoid creating a copy of the DOM before attaching it to the target.
- Turn off the deferred DOM feature. There's no benefit to having it on since the target 
  is another document. We would end up traversing the entire DOM even when calling adoptNode.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@348887 13f79535-47bb-0310-9956-ffa450edef68"
3f1389e8bac661c733f8d6aa7352ccfb4fd6beca,"Minor improvement to the previous commit.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@349355 13f79535-47bb-0310-9956-ffa450edef68"
43722c71851d3fba144f141b2ff080297affd646,"The DTDValidator calls getQName() to get the name of an attribute but
was always receiving null because this method in XMLAttributesProxy
wasn't implemented. This caused spurious errors to be reported about
missing required attributes and attributes named ""null"" which aren't
declared. Implementing getQName() to fix this problem. Also implemented
getURI(), getLocalName() and getPrefix() in case they're ever needed.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@349392 13f79535-47bb-0310-9956-ffa450edef68"
72fe498da46fc42f2a1dc1a983bace0b4384e6b3,"Eliminating the separate DTD validator. It was being used even with validation off for
any DOM containing a DocumentType node which is just a waste of cycles. Simply having
a DocumentType node in a DOM was leading to the DTD being processed every time
Document.normalizeDocument() is called even if DTD validation isn't turned on. This
could be extremely slow especially if the system id in the DOCTYPE points to a resource
somewhere on the internet.

Now we treat DTD validation like schema validation, that is we retrieve a validation 
handler from the DOMImplementation, setup up the validation handler and then invoke 
the XMLDocumentHandler on the validation handler as we walk the DOM tree. We now also 
call comment() and processingInstruction() on the validation handler so that a DTD 
validatior can determine whether a comment or PI appears in EMPTY content.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@349818 13f79535-47bb-0310-9956-ffa450edef68"
1fb3491e7e6879b6ac8654fdc305fb8b92682dfa,"Explicitly set the schema-type on the DOMConfiguration to ""http://www.w3.org/2001/XMLSchema"".

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@349874 13f79535-47bb-0310-9956-ffa450edef68"
293e8dd2fcbdc0315f392850282258557c35bd25,"Addressing JIRA Issues #1118, #1119 and #1120:
http://issues.apache.org/jira/browse/XERCESJ-1118
http://issues.apache.org/jira/browse/XERCESJ-1119
http://issues.apache.org/jira/browse/XERCESJ-1120

Added a classpath to the typedef for xjavac task so that the build.xml
can be used without having to invoke build.bat/build.sh and made some
other minor improvements.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@349877 13f79535-47bb-0310-9956-ffa450edef68"
ad9d18090b02142ec7ad77a61ec390f202a63a4b,"If the version of the document is XML 1.1 we need an instance of XML11DTDValidator.
Added a version parameter to the CoreDOMImplementationImpl.getValidator/releaseValidator
methods to facilitate this. Also made several identation fixes.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@349888 13f79535-47bb-0310-9956-ffa450edef68"
13e76b34562d9697fa8e05b7dfece180ba34093e,"Since we use CoreDOMImplementationImpl as a singleton the pool of validators
will never be garbage collected. It's possible these pools will contain many
large objects which could otherwise be reclaimed when there's memory demand.
To reduce the likelihood a VM could run out of memory because of this static
pool, we now store the validators in SoftReferences.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@350008 13f79535-47bb-0310-9956-ffa450edef68"
9dbdb081629d3b28bc167a6c3cd01d7779130dad,"Since we release validators back to a static pool we have to be careful
not to pull in references to objects which aren't necessary. The DOMNormalizer
is registered as the document handler on the validator handler. Since the
DOMNormalizer has a reference to the DOM tree we were actually caching a DOM
in the pool along with the validator. We now remove the document handler
before returning the validator handler to the pool. If there was an exception
thrown during normalization we now ensure that the validator is released if
there was one.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@350035 13f79535-47bb-0310-9956-ffa450edef68"
23f80ef90fc385de85d5c6443496b1a304994de8,"Adding several features and properties to the list of ones recognized
by this configuration. Without these in the list, exceptions were being
quietly thrown during reset in both the DTD and schema validator.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@350065 13f79535-47bb-0310-9956-ffa450edef68"
481e2b5a597ecbec4e0496110b14a20b6ece2db7,"Always return true when the ""internal/parser-settings"" feature is queried.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@350143 13f79535-47bb-0310-9956-ffa450edef68"
114c1bcde46f1d3664c080da7a647e54e443443c,"Fixing a couple copy and paste errors introduced in the previous commit.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@354088 13f79535-47bb-0310-9956-ffa450edef68"
92993f1ca6c23ece7f76d32190077c8ac1eaad15,"Fixing validation support for XML 1.1 documents. The XML11DTDValidator requires
the XML11DTDDVFactory in order to function correctly. It also requires that the
DTD_VALIDATOR_PROPERTY be recognized.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@354522 13f79535-47bb-0310-9956-ffa450edef68"
8cfb63aa4d782cf85b4f6b1f2eb4207a98fd224b,"Removing several unused fields.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@354532 13f79535-47bb-0310-9956-ffa450edef68"
0df3420f80e52ee8d81accc200763a9fd7276eeb,"Removing an unused field.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@354533 13f79535-47bb-0310-9956-ffa450edef68"
a80b29aa3a463ad2fcd6f693d9ef1be1b893928a,"Added a method to the DTD loader to make it possible to fill an existing
DTD grammar owned by a validator with a specified internal subset and
external subset. The DOM normalizer requires such a method. Previously
the DOM normalizer was creating a grammar pool and tried to load the 
internal subset and external subset with separate calls to loadGrammar().
This approach doesn't work since it generates two DTDGrammar objects and
it also has the potential to overwrite the application's grammar pool
which was registered with the DOMConfiguration.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@354893 13f79535-47bb-0310-9956-ffa450edef68"
2a1d4a4044b0609791215eaeb85d770c88929d88,"Creating a pool of DTD loaders for the DOM normalizer.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@354991 13f79535-47bb-0310-9956-ffa450edef68"
96cdaf12146249876e0452b2a791e631cccd2b0e,"Fixing DTD loading support. Previously the DOM normalizer was creating
a grammar pool and tried to load the internal subset and external subset 
with separate calls to preparseGrammar(). This approach doesn't work since
it generates two DTDGrammar objects (the second overwrites the first) and 
it also has the potential to overwrite the application's grammar pool which 
was registered with the DOMConfiguration.

We now call loadGrammarWithContext() on the DTD loader to fill the DTDGrammar
owned by the validator with the internal and/or external subset specified
by the DOM.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@355001 13f79535-47bb-0310-9956-ffa450edef68"
a1f83056e31eade8edc407e3a5eaa34b2682aa2a,"Minor documentation fix.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@355167 13f79535-47bb-0310-9956-ffa450edef68"
52dd60c95ea4dd90a66ea45a8f8139fb7fdcf415,"Let adoptNode return null instead of having a special case for the PSVI DOM.
There may be other incompatible DOM implementations in the future so the 
instanceof check for PSVIDocumentImpl may eventually look like a hack.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@355621 13f79535-47bb-0310-9956-ffa450edef68"
f057d012717cd941271bda00dccbd5c83e0811c3,"Adding a version tag.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@355624 13f79535-47bb-0310-9956-ffa450edef68"
2c865164ce8c6343a670342cb10eccb3ce9d6fa4,"Proposal for 2.8.0 release.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@357892 13f79535-47bb-0310-9956-ffa450edef68"
b0c96559121e1fff7cca6fbe7e25e68fc5401a61,"Update version and copyright info for packages, API docs, etc...


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@367188 13f79535-47bb-0310-9956-ffa450edef68"
b6d351c738a3a83a1157233eda7524dfd37c4251,"Adding hashCode methods to several value classes. These need to be defined
if we're going to be storing instances of these classes in hashtables.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@367193 13f79535-47bb-0310-9956-ffa450edef68"
35f514240c8ff8975ea6cc1625d5a37b07d62517,"JIRA Issue #1092:
https://issues.apache.org/jira/browse/XERCESJ-1092

Improvements to identity constraint error message reporting. Patch thanks to George Cristian Bina.
I made some modifications to the original patch, mostly to the text of the error messages. I've
also removed a couple messages which are no longer in use.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@367212 13f79535-47bb-0310-9956-ffa450edef68"
aa09f74ac97bdb874ccc68c876b15e6ea2594027,"Updating the release plan.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@367223 13f79535-47bb-0310-9956-ffa450edef68"
f44b74b4e04da267dde87316b0cc2ced3edb7dc8,"Upgrade to JUnit 3.8.1 (released 2002-09-04)

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@369293 13f79535-47bb-0310-9956-ffa450edef68"
3361098bfff658b5b1e4a9ce221eea7eab7c5185,"The assert(boolean) method was removed in JUnit 3.8.1 so the current
code no longer compiles. Changing assert(boolean) to assertTrue(boolean) 
as per Nathan Beyer's suggestion on j-dev@xerces.apache.org.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@369294 13f79535-47bb-0310-9956-ffa450edef68"
bfd50a726f6abd0aa1750f4f42d2667979aabf0b,"JUnit 3.8.1 is licensed under the CPL v1.0.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@369296 13f79535-47bb-0310-9956-ffa450edef68"
ef1b8c6f9c38e1f7b8915efb4d1bb07f15d2fcb3,"Upgrade to Ant 1.6.5.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@369339 13f79535-47bb-0310-9956-ffa450edef68"
dd7d43d0705626efa5026191afdc710d6dd40590,"Updating build.bat and build.sh for Ant 1.6.5.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@369340 13f79535-47bb-0310-9956-ffa450edef68"
978866bdee197405ffe869ba41c07e332b9f6f65,"License and NOTICE for ant-nodeps.jar.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@369341 13f79535-47bb-0310-9956-ffa450edef68"
7c10c22f8da518ee52641bee65a2371624274796,"Removing optional.jar which no longer exists in Ant 1.6.5.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@369343 13f79535-47bb-0310-9956-ffa450edef68"
1ba9e1ae21de8f7fe35e0c8b6104dcbd09685b6f,"Fixing JIRA Bug #1128:
https://issues.apache.org/jira/browse/XERCESJ-1128

The variables which track full/none validation attempted depth are updated together
which can lead to the {validation attempted} property of an element to be reported
as partial when it should have been full or none. Fixed thanks to the patch by
Peter McCracken.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@369542 13f79535-47bb-0310-9956-ffa450edef68"
0ab34d99523bf627b29a904f0d70cb8ca256701f,"Adding an extension to ValidationState which can be configured to turn 
off checking for ID/IDREF errors and unparsed entity errors. This is
need to support the http://apache.org/xml/features/validation/id-idref-checking
and http://apache.org/xml/features/validation/unparsed-entity-checking.

Patch thanks to Peter McCracken. See http://issues.apache.org/jira/browse/XERCESJ-1131.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@371571 13f79535-47bb-0310-9956-ffa450edef68"
e998a576a6e97ceb2b9c83b8e3caef7b54864fe5,"This class isn't intended for further extension so making it final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@371573 13f79535-47bb-0310-9956-ffa450edef68"
b8610ce7f814e7920e6f62bf54c4377aab2a5eb2,"Addressing JIRA Issue #618:
http://issues.apache.org/jira/browse/XERCESJ-618

Adding a method for retrieving the content spec index for an element declaration.
This has been requested by several members of the community over the years since
there is no other way to get this information aside from hacking up a local copy
of the class.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@371577 13f79535-47bb-0310-9956-ffa450edef68"
863eb06a32a782b717a263ec6e3d588bb489a097,"Fixing JIRA Bug #1127:
http://issues.apache.org/jira/browse/XERCESJ-1127

TreeWalker can be used with DOM implementations other than Xerces. If the nodes
in the DOM implementation are proxies they are only be comparable using isSameNode().
If the DOM implemenation supports DOM Level 3 and isn't the Xerces implementation
we now call isSameNode() to support such a scenario.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@371588 13f79535-47bb-0310-9956-ffa450edef68"
33063bfcb102fac65a186ccedfc05d59967120c8,"Committing patch from Peter McCracken for supporting the following items in the Xerces 2.8.0 release plan:

- Feature: http://apache.org/xml/features/validation/schema/ignore-xsi-type-until-elemdecl
- Feature: http://apache.org/xml/features/validation/id-idref-checking
- Feature: http://apache.org/xml/features/validation/identity-constraint-checking
- Feature: http://apache.org/xml/features/validation/unparsed-entity-checking
- Property: http://apache.org/xml/properties/validation/schema/root-type-definition
- Enhancements to SchemaFactory.newSchema(Source[])

See http://issues.apache.org/jira/browse/XERCESJ-1131.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@371617 13f79535-47bb-0310-9956-ffa450edef68"
fef57eb93c394fc2116a9ba3b0499c3cfd0b4adf,"Updating the release plan. Peter McCracken has completed all of his items.
Nathan Beyer has volunteered to fix bugs in xml-commons and has already
provided patches which are pending review.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@371618 13f79535-47bb-0310-9956-ffa450edef68"
75f8536dc513d3eb1714524c7355bc657b366ce7,"Adding JUnit tests contributed by Peter McCracken for: http://issues.apache.org/jira/browse/XERCESJ-1131.
I've made a few minor modifications (renaming files, packages, etc...) but otherwise it's the same as what
was posted.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@371982 13f79535-47bb-0310-9956-ffa450edef68"
5ebc9c5e59e432394c4cd7386ca5864bd8ba685a,"Adding schema.config tests to the 'test' target. Patch thanks to Peter McCracken.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@371999 13f79535-47bb-0310-9956-ffa450edef68"
36a00eccad119a8f94221489a99a530e19c98076,"Adding documentation for the id-idref-checking, identity-constraint-checking and unparsed-entity-checking features.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@373423 13f79535-47bb-0310-9956-ffa450edef68"
9b7f036fbb9768b7f9aed481fbbad1cab9b3621a,"Fixing JIRA Bug #506:
http://issues.apache.org/jira/browse/XERCESJ-506

Repairing the warn-on-undeclared-elemdef feature which has been broken for
many releases. When this feature is enabled, a warning is reported if an
element referenced in a content model is not declared.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@373451 13f79535-47bb-0310-9956-ffa450edef68"
3faf7230ffa7304caba6df6c60947113428feef3,"Updating the release plan.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@373452 13f79535-47bb-0310-9956-ffa450edef68"
b23b90432763872d07b931251896abce3e1e90e6,"Fixing a minor bug. The InputSource returned from the resolution forwarder should 
contain the system identifier returned from the application's LSResourceResolver 
not the one which was passed to the resolveEntity() method.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@374971 13f79535-47bb-0310-9956-ffa450edef68"
68cf0f6d491f140b63b0f45e056428bca7753f54,"A read-only XNI wrapper for a JAXP NamespaceContext.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@375181 13f79535-47bb-0310-9956-ffa450edef68"
f10f805a2c876c07aa9c9695eebafd2b3397fb1e,"Update SVN properties.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@375182 13f79535-47bb-0310-9956-ffa450edef68"
ba1f77ba13323201a902636a41c98bb67fb0e11d,"Update SVN properties.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@375192 13f79535-47bb-0310-9956-ffa450edef68"
87429a2d364048f352a8cb6924ca2718713914fd,"Update SVN properties.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@375197 13f79535-47bb-0310-9956-ffa450edef68"
c5970d77cc43222744896fbcc9ae886b09797053,"Update SVN properties.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@375200 13f79535-47bb-0310-9956-ffa450edef68"
a2a49c7f469aa9f182c6d57fe6c84194cfc9ea43,"Fixing a bug. The DOM parser sets the input encoding on the document during the startDocument 
event. The problem is that this occurs before the XML declaration has been read so the encoding
stored in the DOM may be the auto-detected encoding and not the actual encoding of the document.

For a document such as:
<?xml version=""1.0"" encoding=""US-ASCII""?>
<root/>

the actual encoding was being reported as UTF-8 instead of US-ASCII.

The actual encoding of the document may not be determined by the scanner until after the xmlDecl 
event has been reported down the pipeline. To get the ""final"" encoding we now read the locator in 
endDocument() and set the encoding it returns on the document.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@377247 13f79535-47bb-0310-9956-ffa450edef68"
654e40a9f07893c9bec87c258f5f3e9be788179a,"Fixing JIRA Bug #1135:
http://issues.apache.org/jira/browse/XERCESJ-1135

If the document ends abruptly in the middle of the DOCTYPE declaration the XMLEntityManager
will call endEntity() on XMLDTDScannerImpl. This was causing an AIOOBE to be thrown because
it was assumed that any entity not named [dtd] must be a parameter entity. The end of the
document was being reported down the pipeline as the end of a parameter entity. Reorganized
the code a bit so that this no longer happens.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@377620 13f79535-47bb-0310-9956-ffa450edef68"
5a77a932a807c7fa9384031ab518624f715590dd,"JIRA Issue #1117:
http://issues.apache.org/jira/browse/XERCESJ-1117

When an LSException is created from another exception it should be set as
the cause on J2SE 1.4 and above. This improvement is based on the patch
from Matej Kraus. I've moved all of the reflection code into DOMUtil.
Instead of looking up the initCause() method each time, we only try once.
There were several other places in the code which create an LSException
from another exception which weren't covered by Matej's patch. I've applied
this change to all of those places.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@377643 13f79535-47bb-0310-9956-ffa450edef68"
3308f1c0f08d48353ab569ec4a263d69d1e88658,"Minor doc fix.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@377647 13f79535-47bb-0310-9956-ffa450edef68"
f7e69c87ec3dde197b515e60f7a844122926420c,"JIRA Issue #1116:
https://issues.apache.org/jira/browse/XERCESJ-1116

Support setting the format-pretty-print parameter to true. Patch thanks
to Matej Kraus. So that the value is set correctly when the XML 1.1
serializer is used I moved the call to setIndenting() down into
prepareForSerialization().


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@378849 13f79535-47bb-0310-9956-ffa450edef68"
a7e9cdfdc9fb9b6771f35d9cbc8558ceba7cfb92,"Setting format-pretty-print to true on the LSSerializer is now supported.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@378850 13f79535-47bb-0310-9956-ffa450edef68"
9d27e286096e9e452dffb548a038a887d3f0b204,"Update the release plan.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@378851 13f79535-47bb-0310-9956-ffa450edef68"
8ded7bb88efdd6f65fb2e57aa0a076b5a2be1f28,"Updating copyright year in the documentation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@378852 13f79535-47bb-0310-9956-ffa450edef68"
962564ff9af52f2561b55bcf3fc5f3f21e1f43e9,"Committing code and unit tests for the following line items from the Xerces 2.8.0 release plan:
- Expose annotations in XSAttributeUse and XSParticle
- Support lists of annotations for other XSObjects 

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@379204 13f79535-47bb-0310-9956-ffa450edef68"
c033a4ff28f061f431e3271d5f57e243bebca8f1,"Update the release plan.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@379206 13f79535-47bb-0310-9956-ffa450edef68"
e9045127c48a94c399b0f0cca37fb10078054966,"Deleting personal.xsd already exists under data.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@379210 13f79535-47bb-0310-9956-ffa450edef68"
430a3ad422165ad849dcfb6146a8d8e9c237bb1a,"Added support for getDeclaredPrefixCount()/getDeclaredPrefixAt(int).

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@379351 13f79535-47bb-0310-9956-ffa450edef68"
157d0da91baa248f0ab412e014a373efd732502f,"Miscellaneous clean-up and update of SVN properties.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@379699 13f79535-47bb-0310-9956-ffa450edef68"
6d2d8db20e908b3a53877df99de64e0a6922eaaa,"JIRA Issue #1133:
https://issues.apache.org/jira/browse/XERCESJ-1133

Increasing visibility of DOM setOwnerDocument() methods from package private to protected.
Increasing visibility of HTMLElementImpl constructor from package private to public.

These changes have been made on request from Jacob Kjome.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@380041 13f79535-47bb-0310-9956-ffa450edef68"
be65fde661055f1bbddbbd769fc1362efafd3d48,"JIRA Issue #1125:
http://issues.apache.org/jira/browse/XERCESJ-1125

Miscellaneous enhancements to the DOM code thanks to the patch from Nathan Beyer.
I made one small modification to the instanceof improvement so that it checks
for null. This makes the change equivalent to the cast and catch of the
ClassCastException which was there before.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@380043 13f79535-47bb-0310-9956-ffa450edef68"
4c84ea7a3f6988565771e89503f8706a4a5a853f,"Update the release plan.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@380223 13f79535-47bb-0310-9956-ffa450edef68"
b883183127b6889bee08bcc826b4ed25fa615a6a,"Upgrading to xml-commons-external-1_3_03.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@380945 13f79535-47bb-0310-9956-ffa450edef68"
45eb7d5be2e5cb34de424296e35b71e15c6bf757,"Update the release plan.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@380972 13f79535-47bb-0310-9956-ffa450edef68"
940eaaec4a363f43660762956c14046fdea893a3,"Use the http://apache.org/xml/properties/dom/current-element-node property to 
expose the current element node being processed by the validator. This property
can be queried from an ErrorHandler to determine the approximate location of
the error in the DOM.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@380997 13f79535-47bb-0310-9956-ffa450edef68"
51931887df8df91b7e114f40bd923a2bd86c94e0,"Update the release plan.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381000 13f79535-47bb-0310-9956-ffa450edef68"
e74f616e3c54c2753d4bd7a8f6bbcb261b278051,"Fixing JIRA Bug #1141:
http://issues.apache.org/jira/browse/XERCESJ-1141

The ""root-type-definition"" property was not read by the schema validator during reset.
If the schema validator is not in the pipeline when the property is set the schema
validator will never read the value from the configuration. This bug is fixed thanks
to the patch from Peter McCracken.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381004 13f79535-47bb-0310-9956-ffa450edef68"
4cf02411a703c5771dfc4304dfda33c1eb105536,"JIRA Bug #1141:
http://issues.apache.org/jira/browse/XERCESJ-1141

Adding an additional test for the ""root-type-definition"" property. Patch thanks to Peter McCracken.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381005 13f79535-47bb-0310-9956-ffa450edef68"
6b402e3878f8ceb3a45e9cda82cf51a08cb33e63,"Adding documentation for the root-type-definition property.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381017 13f79535-47bb-0310-9956-ffa450edef68"
17154883a3761f7b05ed1a84258fea3989009770,"Adding documentation for the ignore-xsi-type-until-elemdecl feature.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381030 13f79535-47bb-0310-9956-ffa450edef68"
c1d05c7382caafa4c3558071ef3733cba31d0e28,"JIRA Issue #1143:
http://issues.apache.org/jira/browse/XERCESJ-1143

JAXP 1.4 clarifies that features set on the SchemaFactory should be propogated
to the Schemas created from the factory and in turn ValidatorHandlers and
Validators constructed from those Schema objects. Feature propogation is now
supported thanks to the patch by Peter McCracken which I've modified slightly
so that the secure processing feature is set correctly.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381134 13f79535-47bb-0310-9956-ffa450edef68"
11da702252779e7c25395ba8b329e876e5b06f79,"JIRA Issue #1143:
http://issues.apache.org/jira/browse/XERCESJ-1143

Adding tests for JAXP Validation API feature propagation. Patch thanks to Peter McCracken.
I added an additional test for the secure processing feature.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381142 13f79535-47bb-0310-9956-ffa450edef68"
b92635d12223662232ce54728fb5c366ac21c860,"Update SVN properties.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381145 13f79535-47bb-0310-9956-ffa450edef68"
6ee2e49cece3ca7892bea23fd3032ea365038dfb,"The non-namespace aware setAttributeNode() was being called when building 
the DOM result which could cause attributes to be overwritten if they have 
the same nodeName. To fix this problem we now call setAttributeNodeNS().

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381159 13f79535-47bb-0310-9956-ffa450edef68"
1c08afbf15e404af3a69c7fa60ef5e771ce9317b,"If the use grammar pool only feature is set to true do not perform schema full checking.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381165 13f79535-47bb-0310-9956-ffa450edef68"
4d8f332c872086f30212678914585fc7d5e81373,"Updating FAQ on DOM revalidation. In memory validation against a DTD is supported.
The schema-type must be set to ""http://www.w3.org/2001/XMLSchema"" in order to enable
XML schema validation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381172 13f79535-47bb-0310-9956-ffa450edef68"
c8aa2e5dba611b14ed1aa3830ff24d3a8e6ad188,"Fixing JIRA Bug #1007:
http://issues.apache.org/jira/browse/XERCESJ-1007

When serializing a DOM which only implements DOM Level 2 calling getXmlVersion(), etc...
by reflection will cause a AbstractMethodError to be thrown. The Error was not being
caught. This is fixed thanks to the patch by Nathan Beyer. I've enhanced it a bit
so that the methods are only looked up once and made sure that ThreadDeath is 
re-thrown if it's caught.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381247 13f79535-47bb-0310-9956-ffa450edef68"
5df930f52ae90f7332cb05378bae4ba4b2abfc3a,"Minor documentation fix.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381248 13f79535-47bb-0310-9956-ffa450edef68"
7c5a37c9c4706696d90fdc6471cd5608ad682b9d,"JIRA Issue #1068:
http://issues.apache.org/jira/browse/XERCESJ-1068

Instead of interning namespace parameters and using ""=="", just use equals().
I'm not convinced that there was a bug here but this does make the code a bit safer.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381260 13f79535-47bb-0310-9956-ffa450edef68"
e66759b310f8d6f9a50ce0f3cf1c0adfea998a9c,"A small improvement to the isEqual() method.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381269 13f79535-47bb-0310-9956-ffa450edef68"
025f78e7713c7461438518b67e297f57ced5a69a,"Fixing JIRA Bug #1137:
http://issues.apache.org/jira/browse/XERCESJ-1137

The code which corrects field XPaths so that they start with ""./"" did not
handle a union of XPath expressions. Only the first XPath in the union was 
being fixed up. I've fixed that problem though the code should probably
be replaced with a more efficient solution since it could generate many
temporary objects.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381279 13f79535-47bb-0310-9956-ffa450edef68"
9e22b58e247a22ab909e9660cd98e244969dc9ad,"Re-implementing the XPath fixup routine so that it doesn't create temporary objects.
Since we no longer call trim(), this also fixes a bug in the white space processing.
trim() trims off characters which are not XML spaces.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381385 13f79535-47bb-0310-9956-ffa450edef68"
9ae4045690e17ba1997b0979b6baaa5984bc271a,"Remove hard reference to the XML11DTDProcessor to allow this class to be compiled without XML 1.1 support.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381413 13f79535-47bb-0310-9956-ffa450edef68"
ad55d1cba0e68fbe75fa4f79c53f376aad5bd5ca,"JIRA Bug #1121:
http://issues.apache.org/jira/browse/XERCESJ-1121

Starting to fix the broken dtdjar target. So far I've got it down to 23 compile errors from 100s of compile errors.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381431 13f79535-47bb-0310-9956-ffa450edef68"
b8182c4dfbfb6aa2b6d12209fc87550d119e6912,"Cleanup unused imports.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381441 13f79535-47bb-0310-9956-ffa450edef68"
78482e882db817da3be3b0ac2f17ff66d5295937,"Some minor performance improvements. Avoid creating temporary 
String objects when appending character data to a StringBuffer.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381533 13f79535-47bb-0310-9956-ffa450edef68"
a8dc2f3a0c66147dee419b0d822c165ae6ee37ff,"Updating the JAR manifest to reflect that v1.3.03 of xml-commons external is now in use.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381536 13f79535-47bb-0310-9956-ffa450edef68"
f3c92de82817eba74ab5545516c6c62d82ff0dac,"Fixing JIRA Bug #1121:
http://issues.apache.org/jira/browse/XERCESJ-1121

It took about 50 or so hacks but the dtdjars target is working again.
Unfortuately it's likely it will break again in the future. Sigh...

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381557 13f79535-47bb-0310-9956-ffa450edef68"
490b83f0c4bbba27c44f3de81aa8ff2384a7ff3c,"Update the release plan.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381558 13f79535-47bb-0310-9956-ffa450edef68"
c5c323b260abd954460ef07e1858ff1ccd66fe96,"Fixing indentation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381559 13f79535-47bb-0310-9956-ffa450edef68"
9b7dc99121693c6513854572bafc516b3f61f507,"Updating the release doc for Xerces-J 2.8.0.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381576 13f79535-47bb-0310-9956-ffa450edef68"
5bb765f4986dfedc2827bfec87f587aba254f36e,"Updating the release doc and adding a description of Xerces-J 2.8.0.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381767 13f79535-47bb-0310-9956-ffa450edef68"
d0e5d15522e665c90db751bba4087d1c947daefb,"Minor language improvement.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381770 13f79535-47bb-0310-9956-ffa450edef68"
a33d7da68dde033f6a3257c993e7969aeeb8b2e6,"Updating the changes section for Xerces-J 2.8.0.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381771 13f79535-47bb-0310-9956-ffa450edef68"
0ad3af9e4867fd1a2ff1665dfbd4d036df19d190,"Update the release plan.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381774 13f79535-47bb-0310-9956-ffa450edef68"
b3e6f86f8c9f35db7d2ac734d3692af5359df50d,"Fixing NPEs which can occur when the char array in the XMLString is null.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@381830 13f79535-47bb-0310-9956-ffa450edef68"
3bc56cef7fe7a4bb2c05e30f8088189544209fd5,"Fix for a ModelGroup getAnnotation/getAnnotations bug when traversing ComplexTypes with ComplexContents.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@383214 13f79535-47bb-0310-9956-ffa450edef68"
a7a963cba78abd2f27e7acb2d8e76d555e549acf,"Updating the URL for the Xerces2 website. It moved to xerces.apache.org awhile ago.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@386384 13f79535-47bb-0310-9956-ffa450edef68"
6ed743d80264b90432b52a29c26fb1e6cbd4d261,"Fixing JIRA Issue #1149:
http://issues.apache.org/jira/browse/XERCESJ-1149

The enhancements made to the annotation support in Xerces 2.8.0 made
it possible for NPEs to be thrown from the various XSObjects when a 
component has no annotations. In all getAnnotation() methods we now 
check if the list is null before accessing it.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@388853 13f79535-47bb-0310-9956-ffa450edef68"
fee9c9158218599d81a80579a5cdec3b2041e7db,"JIRA Issue #1148:
http://issues.apache.org/jira/browse/XERCESJ-1148

Use non-synchronized collections where possible. Patch thanks to Dave Brosius.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@388860 13f79535-47bb-0310-9956-ffa450edef68"
0221ded829ce9008da18e512a1ad1327eef14862,"Fixing copyright used in Javadoc footer.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@390939 13f79535-47bb-0310-9956-ffa450edef68"
7fa5bc4315a8d5f6fdb1a2b225b5e9f0df6a5301,"In SAX usage example encourage setting of namespace awareness.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@390940 13f79535-47bb-0310-9956-ffa450edef68"
beff038be0ca05f595f6c2c0088f90e0974c854a,"Reduce SAX parser reset cost. Time was being wasted looking up
the value of the namespace-prefixes feature during reset. We
always know its value.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@390944 13f79535-47bb-0310-9956-ffa450edef68"
5c5e0e9fb837cd1864ab6e3222399c069b46128f,"Fixing a bug where Test 24 failed when there are spaces in the path to the user directory.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@392306 13f79535-47bb-0310-9956-ffa450edef68"
f0bef0d6e4bfe9d7c6ad397979edfcd1bc83068e,"Changed the processing of the root-type-definition property to account for built-in types.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@392309 13f79535-47bb-0310-9956-ffa450edef68"
ea8e1e1df54b7b58b002da8a077532df956cd22c,"Adding tests to verify that the root-type-definition property works with built-in types.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@392310 13f79535-47bb-0310-9956-ffa450edef68"
73cadf4ffa2ed513e2122aad5e99c60ae2e5e287,"Modified code to search for recursive includes.  Adds a fallback to the href attribute of the include element, if the system id is not available.  This also fixes a bug where and NPE would be thrown when the XMLLocator passed to the searchForRecursiveIncludes() method had no system id or expanded system id.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@392315 13f79535-47bb-0310-9956-ffa450edef68"
96da7cc9cdb222467b7e71fe7c27a3a97707db9c,"Update SVN properties.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@392896 13f79535-47bb-0310-9956-ffa450edef68"
7e34be5c1d2c4d53e0e5d4b46265a3b144e1bc8d,"Static mutability fix. Make static QName fields private.
They should never have had public visibility.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@392897 13f79535-47bb-0310-9956-ffa450edef68"
84925f43c06cd9d66671c6f8b6fb5619c2810e61,"Changed == to .equals() for determining if the root type definition is a built-in type.  Also updated the unit test to confirm this works.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@393314 13f79535-47bb-0310-9956-ffa450edef68"
467d4d24ee1ef2bae65566fe9169deed8fe1befd,"Fix typo in method name.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@396161 13f79535-47bb-0310-9956-ffa450edef68"
6fb9cca6c4fdccd6ea0d322df6984d6a21ad71ba,"Fixing a bug. In a simple type derived by restriction facet annotations
were being lost if the derived type has no additional facets. In such a
case applyFacets() is never called so we must copy the annotations from
the base in the constructor.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@396167 13f79535-47bb-0310-9956-ffa450edef68"
9a6ab106fb81dd43744a0ccc0ecd6a669186d55c,"Fixing JIRA Issue #1159:
http://issues.apache.org/jira/browse/XERCESJ-1159

An NPE was being thrown when copying annotations from the base
type to a pattern facet with no annotations. Should be fixed now.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@396203 13f79535-47bb-0310-9956-ffa450edef68"
c3157fd52a64519db6261a014cf29434b68079e7,"Return an empty ShortList from XSSimpleTypeDecl.getEnumerationTypeList() instead of null.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@396205 13f79535-47bb-0310-9956-ffa450edef68"
164e39290e2b5cc76d8dc7882afbc5539914b663,"Use permanent links for the XML namespaces REC and various DOM Level 2 RECs.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@404924 13f79535-47bb-0310-9956-ffa450edef68"
a088d5cd1493fc4e7fa0f0fb0496dec1ac77a1c3,"Fixing a bug. When printing surrogate character pairs within an attribute 
or entity value we must ensure that content() isn't called. This method 
assumes that the serializer is writing character content and will write 
a '>' character to the stream if it believes the start tag hasn't been 
closed. And it hasn't been closed yet if we're writing an attribute value.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@405847 13f79535-47bb-0310-9956-ffa450edef68"
d4ff153ece99421f717457f07d1399f4158feca6,"Documentation fix. org.w3c.dom.ls.DOMInputSource was renamed to org.w3c.dom.ls.LSInput a long time ago.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@406145 13f79535-47bb-0310-9956-ffa450edef68"
87df61faa58cb11c9ed0bf018d7b08d1165e2e17,"Changed Test.java to not output error messages.  Also regenerated the expected output to not have error messages.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@407092 13f79535-47bb-0310-9956-ffa450edef68"
1f0dd2f5000bf478d59b08c15a0b03f88b924106,"Attempting to fix a bug where a schema document is loaded 
multiple times if it is both included and redefined. Depending 
on the ordering, Xerces may overwrite the redefined components 
with the original ones.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@407624 13f79535-47bb-0310-9956-ffa450edef68"
2e7bb59132d370d5195e0962d8ebdf348f475e87,"Allow PSVIConfiguration to be used with XML 1.1 documents.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@408773 13f79535-47bb-0310-9956-ffa450edef68"
e232be7430f72e0fdef887c1870e29d3f24d3d3b,"The PSVI writer should be set as the document source.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@408782 13f79535-47bb-0310-9956-ffa450edef68"
786c31343bd50edb57dd5db185ca7dec9cf836fe,"Fixing a couple of typos.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@408789 13f79535-47bb-0310-9956-ffa450edef68"
8e6fe2eba82cecc526381a047e045e96cca1ffa3,"We shouldn't be catching and ignoring OutOfMemoryErrors and StackOverflowErrors. Re-throw them.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@409928 13f79535-47bb-0310-9956-ffa450edef68"
90cc79626b6adcca5e2be2dc02c3aec4691528d6,"Fixing a bug. If the LSSerializer fails in the middle of serialization
we must ensure that its internal state is cleared so that it can be
reused. If this isn't done, the serializer may throw an exception
which complains that the serializer is already in use.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@410017 13f79535-47bb-0310-9956-ffa450edef68"
c6ffa0907a510038beeb2b32cdf518e7e59df490,"Updating several links in the documentation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@412265 13f79535-47bb-0310-9956-ffa450edef68"
c1f51820c433192b4b899d7043721e66b73e8ece,"Fixing JIRA Bug #1167: 
http://issues.apache.org/jira/browse/XERCESJ-1167

Allow Xerces to built with Sable VM and Kaffe.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@414889 13f79535-47bb-0310-9956-ffa450edef68"
200e5fa8375c52c0f4e2939e6f6612d176b60055,"Fixing JIRA Bug #1123:
http://issues.apache.org/jira/browse/XERCESJ-1123

We need to take special care of schema defaulted attributes. Calling the non-namespace 
aware setAttributeNode() method could overwrite another attribute with the same 
local name. Since we know all of the attributes in the document which were not defaulted
from the schema will have unique qualified names and that all of the schema defaults will
be at the end of the list we can add them to the element with setAttributeNode(). Schema
defaults are added with setAttributeNodeNS(). Normally its unwise to mix these methods but
the implementation of setAttributeNode() in Xerces is much more efficient [O(log n) instead 
of O(n)] than setAttributeNodeNS(), it would hurt performance if we switched over in all
cases.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@415211 13f79535-47bb-0310-9956-ffa450edef68"
6e0dbe8cd1178ae4fa01168a9697301ba6279402,"Marking several fields final in the native readers.
They're assigned in the constructor and never re-assigned later.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@415418 13f79535-47bb-0310-9956-ffa450edef68"
0116e0a22e4fcaf52d5d9e12d779a55d46aa4758,"Adding native support for the ISO-8859-1 encoding.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@415425 13f79535-47bb-0310-9956-ffa450edef68"
5864e9cfe21b7df4a0b7dc2e4bc450c790c7ab6b,"Update SVN properties.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@415429 13f79535-47bb-0310-9956-ffa450edef68"
6cf658836b026c5289ad375a295e6608c2671948,"Use ISO-8859-1 reader in an XInclude context.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@415439 13f79535-47bb-0310-9956-ffa450edef68"
c8a74a3626a8d79af8162d8cfd61b80fb638e02d,"Update the copyright year.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@415440 13f79535-47bb-0310-9956-ffa450edef68"
d774c421d54f2ab6f3abc44f8420b008be651b9f,"Fixing JIRA Bug #1126:
http://issues.apache.org/jira/browse/XERCESJ-1126

In non-XML schema the wrong first character optimization was being used
for regular expressions starting with '.'. This is fixed thanks to the
patch from Kent Tamura.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@415788 13f79535-47bb-0310-9956-ffa450edef68"
61370c8cd1f67817077ae8b356b0f69747471746,"Fixing JIRA Bug #1134: http://issues.apache.org/jira/browse/XERCESJ-1134

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@415823 13f79535-47bb-0310-9956-ffa450edef68"
0ffce6ebe9e22ff0a7baca1d5f04ff83be86c959,"Adding an error message for src-import.1.2.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@417122 13f79535-47bb-0310-9956-ffa450edef68"
8ace8bfb595c3e4f01312d16d44af179fd7c0784,"Report src-import.1.2 when no namespace is specified on an 
import and the enclosing schema has no target namespace.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@417123 13f79535-47bb-0310-9956-ffa450edef68"
213d5582940b2a10d4584c38f161195e6c70e24c,"Fixing JIRA Bug #1169:
http://issues.apache.org/jira/browse/XERCESJ-1169

If grammar caching is enabled and a document has both an internal and
external DTD subset endDTD() was never being called. This was causing
the DOM builder to drop all of the text in the document. This should
now be fixed as well as another bug which could lead to an NPE if
the validation feature is enabled but the load external DTD feature
is disabled.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@418359 13f79535-47bb-0310-9956-ffa450edef68"
0dde63af37b11224e5bc46928596405440cd0107,"Fixing JIRA Bug #1021:
http://issues.apache.org/jira/browse/XERCESJ-1021

DocumentType nodes cannot be imported. Instead of attempting to loop
over the children of the Document node we should delegate to the
cloneNode(CoreDocumentImpl,boolean) method on DocumentImpl which
knows how to do the right thing. This should also fix ID assignment
and possibly other things.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@418366 13f79535-47bb-0310-9956-ffa450edef68"
ba5bdbf66ec3d879e52bf59c374be1929b651036,"Clean-up unused imports.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@418367 13f79535-47bb-0310-9956-ffa450edef68"
6e168cd9aa4b3799640d50ae59577a9e5d2c5ff8,"Remove extra spaces added to comments in the internal subset.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@418431 13f79535-47bb-0310-9956-ffa450edef68"
3452001fbd3f2a3d45004aeed7bc76f7b039a1cc,"Fixing a bug in the processing of default attributes. If two or more defaulted attributes
have the same local name it was possible for them to overwrite each other.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@418433 13f79535-47bb-0310-9956-ffa450edef68"
ec441667b8ce576b62705424774e5d4107a05a82,"Fixing an edge case not covered by the fix for XERCESJ-1123.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@418434 13f79535-47bb-0310-9956-ffa450edef68"
5f2ae3790fa0de8c2d821a41363b6d045c939bde,"Eliminate creation of temporary Boolean objects.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@422544 13f79535-47bb-0310-9956-ffa450edef68"
8fc0c767e63c8ed6d7c5a2192dc81f38cdb18d9f,"Eliminate creation of temporary Boolean objects.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@422545 13f79535-47bb-0310-9956-ffa450edef68"
155a81674e5718dde532db8ce7c42ee5bea2a859,"Eliminate creation of temporary Boolean objects.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@422546 13f79535-47bb-0310-9956-ffa450edef68"
dd47d3bde08d27db1c0a9dee7fec1555ba81b395,"Adding constructors which allow a byte array to be passed directly to each of Xerces' Reader classes.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@422572 13f79535-47bb-0310-9956-ffa450edef68"
8badca494c969da84a43ad71ba4ffdb02dba5265,"Always use an AccessController when getting system properties.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@423220 13f79535-47bb-0310-9956-ffa450edef68"
e0f965f162a75e775aeab6498d877c5699e3df3f,"JIRA Issue #1174
http://issues.apache.org/jira/browse/XERCESJ-1174

The [nil] property was never being set on the element node 
so getNil() was always returning false. Should be fixed now.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@423592 13f79535-47bb-0310-9956-ffa450edef68"
094122bf4cad41a13231bdb521ada9ab9e779c24,"Include org.w3c.dom.bootstrap in the Javadocs. It was previously missing.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@425593 13f79535-47bb-0310-9956-ffa450edef68"
ff3e3de8cc2bf8f88736aed9837072ae3bd31330,"Add org.w3c.dom.bootstrap to the API docs page.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@425594 13f79535-47bb-0310-9956-ffa450edef68"
ad9487d968790f2175fd71747b7e0b765662861d,"Expose the [nil] property in the PSVI reported on start element. It was always available.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@425602 13f79535-47bb-0310-9956-ffa450edef68"
667a49df3730e229eaca3925d311ece17a865b2d,"Minor performance improvement. If we know the encoding is UTF-8 return
the optimized UTF-8 reader immediately. The same goes for ISO-8859-1.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@425603 13f79535-47bb-0310-9956-ffa450edef68"
c19a388769e0cf2798528fef0449eb91f39d39fb,"Fixing a bug. If an IDC field matches a strict or lax element wildcard
and no element declaration is found for the element we were always 
reporting an error. This is because we weren't passing the actual type
(which would be specified with xsi:type) to the XPath matcher.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@426369 13f79535-47bb-0310-9956-ffa450edef68"
33284eac6b69f384c58ff0764140d3bb56323037,"Exposing a method on XSModel which returns the substitution group
for a given element declaration. The implementation had already
been in place for several releases.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@427010 13f79535-47bb-0310-9956-ffa450edef68"
ff038d57875e223914900bfb2004911de0c34d5a,"Fixing indentation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@429930 13f79535-47bb-0310-9956-ffa450edef68"
55a9a85804d997af5baa3aa5e939b5abd349b6c4,"Javadoc fix. An end tag for code was missing.
<code>EncodingInfo<code> --> <code>EncodingInfo</code>

This caused the Javadoc for the methods following the getEncodingInfo()
method to be formatted entirely in the ""code"" format.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@429961 13f79535-47bb-0310-9956-ffa450edef68"
7dd5ec93ee0fcc8ddc3219934730c546f2d72213,"Improving the grammar in the description of the getAttributes() method.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@429963 13f79535-47bb-0310-9956-ffa450edef68"
b8f55e5553c4cb1e4b70296844f7b17f306deb39,"Refer to isElementContentWhitespace() from DOM L3 instead of the Xerces specific method.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@429964 13f79535-47bb-0310-9956-ffa450edef68"
87b836e1247b6f1cf348735269cd3459139d439a,"Documentation updates for XML 1.0 4E, XML 1.1 SE, Namespaces in XML 1.0 SE 
and Namespaces in XML 1.1 SE and a few other minor updates.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@432482 13f79535-47bb-0310-9956-ffa450edef68"
41fc9f47ad72ada0a52048b8766222b19a6dacea,"Fixing JIRA Bug #1180: 
http://issues.apache.org/jira/browse/XERCESJ-1180

When an element node is materialized we were assuming that it must be the
document element if (docElement == null). It's possible for this field to
be null when other elements are created, for instance if the children of the
document element are expanded after the document element has been removed
from the tree. In such a case one of the child element nodes was being
blindly assigned as the document node. This should be fixed now. Note that
DeferredDocumentImpl.synchronizeChildren() handles assignment of the
document element so the code that I'm removing was always redundant.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@437729 13f79535-47bb-0310-9956-ffa450edef68"
6828f79a91cc689345ee7a5c1ea0aa8f629f7a18,"Fixing JIRA Bug #1181: 
http://issues.apache.org/jira/browse/XERCESJ-1181

When an entire Document is cloned the internal subset from the DocumentType 
node was not being copied into the cloned DocumentType. This is fixed thanks
to the patch from Jacob Kjome.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@437770 13f79535-47bb-0310-9956-ffa450edef68"
c570cf804a9a70a94c315030dc2493d8a3d7590a,"Fixing a bug. When an error is detected in an internal entity the locator reports
the current location in the closest external entity. This wasn't working for the
document entity.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@438577 13f79535-47bb-0310-9956-ffa450edef68"
2149baaf8799321731b6f93c86122167ff19c914,"It was possible for an application to set features on the SAXParserFactory
which have values that are inconsistent with the factory built-in settings.
This might mean the value they set gets ignored because the other instance
of the setting overwrites the first when the SAXParser is initially
configured. The features and built-in settings are now kept in synch. This
may also improve performance for some applications since we're not always
creating a new parser to test whether a feature is recognized by the factory.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@439017 13f79535-47bb-0310-9956-ffa450edef68"
2eb04264648629532c8fd8a088ed1b963c0d50d4,"It was possible for an application to set features on the DocumentBuilderFactory
which have values that are inconsistent with the factory built-in settings.
This might mean the value they set gets ignored because the other instance
of the setting overwrites the first when the DocumentBuilder is initially
configured. The features and built-in settings are now kept in synch. This
may also improve performance for some applications since we're not always
creating a new parser to test whether a feature is recognized by the factory.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@439173 13f79535-47bb-0310-9956-ffa450edef68"
0ec8131ca698c11591bc0cbbd33fc2a60a638b5a,"Call UserDataHandlers registered on the HTMLDocument node. In order to make this
work the visibility of callUserDataHandlers() in CoreDocumentImpl was changed to 
protected (which just happens to satisfy a request made by Jacob Kjome on the
j-users mailing list).

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@439176 13f79535-47bb-0310-9956-ffa450edef68"
632b1b6880eeb5869af044b225bbf80fabd708b2,"Prepare for Xerces-J 2.8.1.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@441600 13f79535-47bb-0310-9956-ffa450edef68"
08358b39668c24f824d0eac8d021cf652f933a27,"Fixing JIRA Bug #1176:
http://issues.apache.org/jira/browse/XERCESJ-1176

The entries for Cp1140 to Cp1149 in the the Java to IANA map were incorrect.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@441623 13f79535-47bb-0310-9956-ffa450edef68"
0414900df065f25d451157d2c0f4d9ed5079d3a8,"Fixing JIRA Bug #1114:
http://issues.apache.org/jira/browse/XERCESJ-1114

If a parameter entity is skipped the parameter entity reference 
should be written into the internal subset string.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@441668 13f79535-47bb-0310-9956-ffa450edef68"
f7ab422d93d3a80047dcca10e13d8ca760334fc8,"JIRA Issue #1184:
http://issues.apache.org/jira/browse/XERCESJ-1184

Eliminating an unnecessary array allocation. Patch thanks to Dave Brosius.





git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@441882 13f79535-47bb-0310-9956-ffa450edef68"
4c6766d960d56679fb39a1408b132e676c9aac19,"JIRA Issue #1185:
http://issues.apache.org/jira/browse/XERCESJ-1185

Removing a redundant line of code. We were calling getElementsByTagName() 
twice to get the TITLE. Patch thanks to Dave Brosius.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@441883 13f79535-47bb-0310-9956-ffa450edef68"
0bd7a0c355cc94ba3ff4d7b1639e3d156ac40a26,"Removing an unused local variable.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@441999 13f79535-47bb-0310-9956-ffa450edef68"
c69cf9b0be438a77411bf5b3244ba11aa96f9954,"Use the SymbolTable instead of calling String.intern() directly.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@442002 13f79535-47bb-0310-9956-ffa450edef68"
e5b62d7f9da58c6ec29b9f67ff7fcac0c806d03b,"Bug Fixes:
- '<' must always be escaped in a well-formed attribute value
- 0x09, 0x0A and 0x0D must be escaped in attribute values so 
  that they may be round-tripped. They would otherwise be 
  transformed to 0x20 during attribute value normalization.

Performance Fix:
- if an attribute value doesn't contain any characters
  which need to be escaped avoid creating a new string

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@442081 13f79535-47bb-0310-9956-ffa450edef68"
5cc20b5306ff18c4acb7dfab617c79f61174bb17,"Fixing a couple bugs. Synthetic annotations weren't 
being generated for element ref and group ref particles.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@442099 13f79535-47bb-0310-9956-ffa450edef68"
bf34bc39d1156d2511cab977d48ad43244fe4bbc,"Fixing JIRA Bug #1187:
http://issues.apache.org/jira/browse/XERCESJ-1187

We were checking whether a tag name equals ""tbody"". Given that the HTML DOM
uses upper-case element names this string should be ""TBODY"". Patch thanks
to Jacob Kjome.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@442427 13f79535-47bb-0310-9956-ffa450edef68"
14f499edc46b045a63abad80f32e087b84e91420,"Fixing JIRA Bug #1147:
http://issues.apache.org/jira/browse/XERCESJ-1147

Some applications like Saxon are casting Xerces' DOM nodes directly
to a NodeList. Because this bypasses the synchronizeChildren() call 
in ParentNode.getChildNodes() the children may not be expanded yet
if getLength() or item() are called on the NodeList. We now check
if the children are synchronized before obtaining the NodeListCache.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@442591 13f79535-47bb-0310-9956-ffa450edef68"
f4674035ecdbe17480068c69c25cafe25ae3d162,"Once the DOMParser has completed building the DOM drop all internal references
to the completed Document object. If the application is pooling parsers this
will allow the garbage collector to reclaim the Document and all of its nodes
if the application no longer has any references to it.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@443059 13f79535-47bb-0310-9956-ffa450edef68"
b72f36a100e3798211fe49c41e8283c7a0c7e0f6,"Adding a small pool of byte buffers for the Readers created by the XMLEntityManager.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@443089 13f79535-47bb-0310-9956-ffa450edef68"
61a00c791e190406cb1eefe644c6031bdda7b2e9,"Reduce the overhead of creating a ScannedEntity by reusing byte buffers.
This is similar to the improvement introduced in Rev 320110.

See: http://svn.apache.org/viewvc?view=rev&revision=320110

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@443115 13f79535-47bb-0310-9956-ffa450edef68"
435b649d633f744df96674c9f686695d3cb696ee,"Minor revision to the previous commit. Pass the byte buffer to ScannedEntity's constructor directly.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@443118 13f79535-47bb-0310-9956-ffa450edef68"
ff617ad532705ca3e4ee36cd1724e6b4915cb6c8,"Updating the release doc for Xerces-J 2.8.1.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@443175 13f79535-47bb-0310-9956-ffa450edef68"
902151d9d92416ca933224d534455f9c01c2a272,"More updates to the release doc for Xerces-J 2.8.1.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@443177 13f79535-47bb-0310-9956-ffa450edef68"
84d37810da517c8b0ce9a07f4da2b3ac10004296,"Link to the Apache Mail Archives instead of the MARC ones which 
are not correctly archiving the j-users or j-dev lists.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@443179 13f79535-47bb-0310-9956-ffa450edef68"
4d58bf6d34f9354ab10f4789baff874c59ac9dc2,"Updating the changes section for Xerces-J 2.8.1.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@443180 13f79535-47bb-0310-9956-ffa450edef68"
eda7d508e37bfcf334c395a568783db51ad90430,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@446716 13f79535-47bb-0310-9956-ffa450edef68"
0a60c70f2baf2cedd099a92e79951b8003cc8551,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@446717 13f79535-47bb-0310-9956-ffa450edef68"
9d0379ec224a5cf0e4268674d9c1185c68520441,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@446719 13f79535-47bb-0310-9956-ffa450edef68"
19459445e2e82e6f84ad9d89e30ca263f7dfb8f8,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@446721 13f79535-47bb-0310-9956-ffa450edef68"
9da01ed71b1d75e37b29f741688e07de532f5f12,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@446723 13f79535-47bb-0310-9956-ffa450edef68"
93fdfffb8a10996ce94548ce6c11d5afbcaf9003,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@446725 13f79535-47bb-0310-9956-ffa450edef68"
f7f9b4b7ef6e0d7fce8784a8bc5069d58648e572,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@446728 13f79535-47bb-0310-9956-ffa450edef68"
6967d76419a2ef6d41a130398f339144be83a345,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@446729 13f79535-47bb-0310-9956-ffa450edef68"
750a98342bd29a9c4aa52c9de238c6d9a6c240a0,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@446732 13f79535-47bb-0310-9956-ffa450edef68"
2336bf1a3054dc977370e4d364351244ad4072d0,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@446734 13f79535-47bb-0310-9956-ffa450edef68"
fb1c1f1f52dffcb3455c9a24fd4e3453bfb439e0,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@446745 13f79535-47bb-0310-9956-ffa450edef68"
52375bdf91162da588b74aea483e5f5a86e86626,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@446747 13f79535-47bb-0310-9956-ffa450edef68"
58fd5d8366474e652097f0dee635be36bb475abb,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@446749 13f79535-47bb-0310-9956-ffa450edef68"
eb9060e87f7148ccfc9062961a3f5b48ef329492,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@446751 13f79535-47bb-0310-9956-ffa450edef68"
86718c044bd4f5ce5c126e680b86ff0ad50fc961,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@446752 13f79535-47bb-0310-9956-ffa450edef68"
18d9403ad39eef40a21368917dd983778fc970db,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@446755 13f79535-47bb-0310-9956-ffa450edef68"
9783552bff0cd4da3006e0635ecf953c21838e10,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@446761 13f79535-47bb-0310-9956-ffa450edef68"
480275784b4ec5891e13e7244eab445bd62ea7ad,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447235 13f79535-47bb-0310-9956-ffa450edef68"
68557a4e116ee1cd96bf4b3b711513cf94313c88,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447236 13f79535-47bb-0310-9956-ffa450edef68"
95d0649c8b34b043c2dcf08a37444bee5697ef2e,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447237 13f79535-47bb-0310-9956-ffa450edef68"
857c3881beef6191b1d8d56388a7b6db9494c0aa,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447239 13f79535-47bb-0310-9956-ffa450edef68"
faea10a26e965c3dff4cfd23af9629c99ea6d28e,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447241 13f79535-47bb-0310-9956-ffa450edef68"
5b226064ed99534a04fc8cdb48a481dc4987c5b5,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447243 13f79535-47bb-0310-9956-ffa450edef68"
6d9a6b77c846f9fef0608251a0107f93585da229,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447244 13f79535-47bb-0310-9956-ffa450edef68"
6d5e583e4ed0165b8cd7f928a320961a7104601b,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447245 13f79535-47bb-0310-9956-ffa450edef68"
265f4cd0db9ea67f9860e6ba999e0d00366d8dc0,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447247 13f79535-47bb-0310-9956-ffa450edef68"
3691745ff326a114935c04ed01bc8849d0fbfd15,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447248 13f79535-47bb-0310-9956-ffa450edef68"
647c25ef6d47078c3e4d3c9644da7910d5631e1f,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447250 13f79535-47bb-0310-9956-ffa450edef68"
7346054fd31422e869e781e42c64d365c75b5b27,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447252 13f79535-47bb-0310-9956-ffa450edef68"
23d7f19f01bc1c9de023f64ba13d916f1ba5121d,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447253 13f79535-47bb-0310-9956-ffa450edef68"
660739e27d15126a4c7c13c861e9e9444a5095c2,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447255 13f79535-47bb-0310-9956-ffa450edef68"
cc4cfa5f0fb046d9ed1d97d0e621cd5a2fd80754,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447257 13f79535-47bb-0310-9956-ffa450edef68"
e4be0059b9e08b8a1488ad124d766029e37506f2,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447258 13f79535-47bb-0310-9956-ffa450edef68"
04465bde7fa22050718fd7d71945d4845f01c602,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447262 13f79535-47bb-0310-9956-ffa450edef68"
69b86a6ab50f02f0190edd8b66cb5c961be0e2c1,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447266 13f79535-47bb-0310-9956-ffa450edef68"
0f3cb7e4bab85540c472ba2e211accf2e607fc11,"Update to new header for NOTICE files. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447493 13f79535-47bb-0310-9956-ffa450edef68"
336852dd68c83dd0baa776e17be254fbe9b762ea,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447683 13f79535-47bb-0310-9956-ffa450edef68"
5a8e3fc3836bd6534387eb99c4eaab3bdb4c882e,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447685 13f79535-47bb-0310-9956-ffa450edef68"
060a32640ad6d8024fca7f4c6d398fd537117d8f,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447686 13f79535-47bb-0310-9956-ffa450edef68"
7ee9b3f3ad9547fb4f1a34832ff1e8349b2000a8,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447687 13f79535-47bb-0310-9956-ffa450edef68"
5adc86a36a49e2a301e7f76ce42fe4b9bbf43a2a,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447688 13f79535-47bb-0310-9956-ffa450edef68"
8e5c3fe757cc04c68eded3b47273a95a46eca5f3,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447689 13f79535-47bb-0310-9956-ffa450edef68"
d34466afaffadd866830ba3cdb5d4b6af366b35d,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447690 13f79535-47bb-0310-9956-ffa450edef68"
8b5a180a0f5aca0d3756596832c166cad51da5af,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447691 13f79535-47bb-0310-9956-ffa450edef68"
21f353f321fe1d523576c0c462e9f01b3dc93967,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447693 13f79535-47bb-0310-9956-ffa450edef68"
dbcef0cfe2b1f0e799c07aef8a5772461e2c64cf,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447695 13f79535-47bb-0310-9956-ffa450edef68"
46d1b9d7babfdd8724068dd1a6a53d35b5d14ee3,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447697 13f79535-47bb-0310-9956-ffa450edef68"
c649314c167c0f8aab0f6c0be24a8447bec26b96,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447698 13f79535-47bb-0310-9956-ffa450edef68"
26f1c2549b9a79c8f6809518dd1b641f0b2da4a5,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447699 13f79535-47bb-0310-9956-ffa450edef68"
00225f70bb4d2fc275047a6189e0efe1122c135b,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447700 13f79535-47bb-0310-9956-ffa450edef68"
7aa745d6c51c5631b602cd263a516059d6e4ae56,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447701 13f79535-47bb-0310-9956-ffa450edef68"
03e67c0315c7b4079f7618e4818924a91ce32325,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447702 13f79535-47bb-0310-9956-ffa450edef68"
dd1a0e1730f1d7b58231bbd9a680ae15c46d5e45,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447703 13f79535-47bb-0310-9956-ffa450edef68"
aad615cda3ad968bce0add2dc43fd989453039ea,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447705 13f79535-47bb-0310-9956-ffa450edef68"
28f27619e33381caf52a9ebbb743e73be96cd043,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447706 13f79535-47bb-0310-9956-ffa450edef68"
bd6c51147e955a0b4da02870cef58b4c15611d35,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447709 13f79535-47bb-0310-9956-ffa450edef68"
e79794d4213a4b1c1055be304c50db62cec8a3b2,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447710 13f79535-47bb-0310-9956-ffa450edef68"
fa94314e19abe4c80743818b0483caa5b668ef1e,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447711 13f79535-47bb-0310-9956-ffa450edef68"
2e63cd95444887871fe19154ea574a6de4060497,"Apply the latest ASF license header to build.xml. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447712 13f79535-47bb-0310-9956-ffa450edef68"
e5e00e09d76ab185e53831efd7662544517ac360,"Fixing a bug Ron Gavlin reported on the j-users list. When processing schema documents
we mark the DOM nodes we've processed as ""hidden"" so that we don't revisit them. For
input from Xerces' DOM implementation we were marking the nodes directly. If the same
DOM was fed again to the schema loader the nodes were still marked as hidden and so
weren't being processed. We should never mutate a user supplied DOM. I've modified the 
code so that we always use the hidden node Hashtable if the input is anything other than 
the schema opti DOM.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@447948 13f79535-47bb-0310-9956-ffa450edef68"
a474b0fef2701207ba00439f2866b916460a2be8,"Fixing an end tag in the Javadoc.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@449104 13f79535-47bb-0310-9956-ffa450edef68"
3302ac207e40820e8eb1fbce05005f6a4f486f19,"JIRA Issue #1194
http://issues.apache.org/jira/browse/XERCESJ-1194

Various code cleanup. Patch thanks to Nathan Beyer.




git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@449313 13f79535-47bb-0310-9956-ffa450edef68"
4ddd9388f37e14070128caa2291604acabb588d7,"JIRA Issue #1195:
http://issues.apache.org/jira/browse/XERCESJ-1195

Various code cleanup. Patch thanks to Nathan Beyer.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@449317 13f79535-47bb-0310-9956-ffa450edef68"
4db60ced1998405f891ba4cd1bac807e819466f2,"Fixing @param arguments in the Javadoc.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@449320 13f79535-47bb-0310-9956-ffa450edef68"
981541617d57763c1262ef5f59fcd9d4c5e6fd60,"Various Javadoc fixes.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@449328 13f79535-47bb-0310-9956-ffa450edef68"
26d95552108df7a58f38460d05a64c0819be7560,"Various Javadoc fixes.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@449330 13f79535-47bb-0310-9956-ffa450edef68"
a12b496afa49732040ae1bf1791495c6dcbc0e7d,"Fixing JIRA Issue #1196:
http://issues.apache.org/jira/browse/XERCESJ-1196

Merging in the patch from Nathan Beyer to get Javadoc generation working on Java SE 5.0.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@449424 13f79535-47bb-0310-9956-ffa450edef68"
b74282013d243d33b7a58450dce5e385d6b91210,"Eliminate two unnecessary imports.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@449473 13f79535-47bb-0310-9956-ffa450edef68"
b000cb5f03596d385d107a79aa8cdfdfae14f81c,"Various fixes for Javadoc warnings.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@449487 13f79535-47bb-0310-9956-ffa450edef68"
32ea5d43f3b10399a882ca04e322055fcc02b130,"The XSAttributeDecls for the xsi:* attributes are always the same objects. Only look them up once.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@450169 13f79535-47bb-0310-9956-ffa450edef68"
cec8c8526beca58324d5d7475dde709a4d33ed47,"Fix Javadoc.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@450517 13f79535-47bb-0310-9956-ffa450edef68"
c079f68d2bf1b0d5bbcee234ddc2760cb7404f05,"Fixing a potential NPE.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@450930 13f79535-47bb-0310-9956-ffa450edef68"
df7c360b6396a97f8cba2b646da2e6f3f187cf17,"Moving code which creates an OutputStream from a URI to XMLEntityManager.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@450971 13f79535-47bb-0310-9956-ffa450edef68"
69eac2d6ea095206f3c2c4fdb63938d21d34d1f5,"Minor performance improvement. Avoid constructing a new string when 
creating the rawname of a namespace declaration attribute.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@450980 13f79535-47bb-0310-9956-ffa450edef68"
1be8a6fc02f146f3191d2dd17d84c5ae9c86cab9,"JIRA Issue #1200:
http://issues.apache.org/jira/browse/XERCESJ-1200

Applying a performance improvement from Jacob Kjome. In getElementById(), before 
walking the tree searching for attributes named ""id"" first try looking up the element 
with the given ID from the ""identifiers"" map.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@451609 13f79535-47bb-0310-9956-ffa450edef68"
6979f3e6b8c0c9ecdfddbc25ebf6dded3cbd4d12,"Fixing JIRA Issue #1193:
http://issues.apache.org/jira/browse/XERCESJ-1193

If the ""continue-after-fatal-error"" feature is enabled skip over invalid
enumeration values. This prevents the parser from entering an infinite
loop or throwing an NPE in a later code path.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@454439 13f79535-47bb-0310-9956-ffa450edef68"
8b3ccc26767eef3b24dcbe41e0b9249418945770,"Fixing a memory leak. In a JAXP 1.2 context the SchemaLoader will cache grammars loaded
from InputStreams and InputSources in a HashTable since in general they can only be read
once. This HashTable was never being cleared so could leak grammars which become unreachable
if the application changes the value of the schemaSource property. I've changed the table
to be a WeakHashMap. This will allow the key (InputStream or InputSource) and the grammar 
its associated with to be discarded once they become unreachable.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@454599 13f79535-47bb-0310-9956-ffa450edef68"
e3ae2832e5800375597c442cc940e7cfea8e3efb,"Fixing a bug in the processing of the JAXP 1.2 schemaSource property. If the value specified
for the property is an array and its component type is a subclass of File, InputStream or
InputSource we should accept it.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@454605 13f79535-47bb-0310-9956-ffa450edef68"
81ad37d63cb8fdccc91394eff7ccb37573c479ff,"Fixing JIRA Issue #1203:
http://issues.apache.org/jira/browse/XERCESJ-1203

Applying the fix suggested by George Cristian Bina to fix an NPE
which can occur when traversing the content spec for an element
declared to have mixed content. In such a case it's possible that 
both contentSpec.value and contentSpec.otherValue are null.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@462674 13f79535-47bb-0310-9956-ffa450edef68"
336f9ee40f004b483387a8fb264f245bc6a3ff93,"Localize schemaSource error messages.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@462861 13f79535-47bb-0310-9956-ffa450edef68"
ce2b27a17dbcba6b63a2e9842e8218d89c86eb95,"Fixing a bug in the processing of the JAXP 1.2 schemaSource property. If the value specified
for the property is an array and its component type is an interface we should accept it since
it's possible that each of the members of the array are an instance of one of the allowable types.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@462925 13f79535-47bb-0310-9956-ffa450edef68"
d5493ddac57b67d06059863093c695f70e8ce7d6,"Fixing JIRA Issue #1202:
http://issues.apache.org/jira/browse/XERCESJ-1202

If the value of the JAXP 1.2 schema language property is http://www.w3.org/2001/XMLSchema 
we're only validating against XML schema so we must disable validation on the child XInclude
pipeline.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@462944 13f79535-47bb-0310-9956-ffa450edef68"
ad88fecebac157619036ef4d7da8842a87a66ab8,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@464236 13f79535-47bb-0310-9956-ffa450edef68"
2cbf9accdd26ef5167c1d71511fd1d5da6775797,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@464237 13f79535-47bb-0310-9956-ffa450edef68"
ab7c5764acf3d4744b70f8f7fb60601bd1cd9fb8,"Adding the ASF license header to some more files. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@464240 13f79535-47bb-0310-9956-ffa450edef68"
cc16dd6b5bfd83918ce4f8b560f9887bc57d7529,"Deleting some ancient files from the root directory which are no longer relevant.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@464241 13f79535-47bb-0310-9956-ffa450edef68"
5e385937eb19642378543b93e7dfc0b8e86418cc,"JIRA Issue #1197:
http://issues.apache.org/jira/browse/XERCESJ-1197

Various code cleanup. Patch thanks to Nathan Beyer.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@464300 13f79535-47bb-0310-9956-ffa450edef68"
cfb3f3097d85124676452a829f95d78eb4d128e5,"JIRA Issue #1197:
http://issues.apache.org/jira/browse/XERCESJ-1197

Various code cleanup. Patch thanks to Nathan Beyer.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@464369 13f79535-47bb-0310-9956-ffa450edef68"
2c4e5ee3d5ed4467f41cf7c0c63823d00ae5e69c,"The ISSUES, STATUS and TODO files have been deleted.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@464993 13f79535-47bb-0310-9956-ffa450edef68"
0d330c28fc72a46aaf6d0709fc2c6cd6f90e0981,"The honour-all-schemaLocations feature is mixed case so requires special treatment.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@466912 13f79535-47bb-0310-9956-ffa450edef68"
636401f2d3403c2cdb6f763cf19141427b0827d9,"Fixing JIRA Issue #1204:
http://issues.apache.org/jira/browse/XERCESJ-1204

Allow ""http://apache.org/xml/properties/internal/entity-resolver"" and all other 
Xerces properties to be set on the DOMConfiguration. I also took the opportunity
to fixup getParameter() and canSetParameter() so that they behave correctly when
the parameter is a Xerces specific feature or property.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@466933 13f79535-47bb-0310-9956-ffa450edef68"
382cc7ce069c5b1e0eb968b5626bf19e8b7eca12,"Minor cleanup.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@467145 13f79535-47bb-0310-9956-ffa450edef68"
d3c6e8f4205122ea890bb5960035a8e3336defea,"Marking many methods in the scanner as final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@467487 13f79535-47bb-0310-9956-ffa450edef68"
38d34418f9b0f824a4fb54d81f085b376d8e266f,"Upgrade the SchemaParsingConfig so that it can read XML 1.1 documents.
We're going to need this for XML Schema 1.1 but it's also good for
XML Schema 1.0 too.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@467849 13f79535-47bb-0310-9956-ffa450edef68"
75dd1dfe7e226d4fef6c42a7410c3af602297794,"Fixing JIRA Issue #1061:
http://issues.apache.org/jira/browse/XERCESJ-1061

""$"" and ""^"" are not anchors in XML schema regular expressions.
Do not treat them as special in XML schema mode. Patch thanks
to Chris Carman.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@469061 13f79535-47bb-0310-9956-ffa450edef68"
7a964220f0f3c2bcb04ba81fbd6a71464d68d499,"Simplify BooleanDV. The fValueSpace array is unnecessary.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@469063 13f79535-47bb-0310-9956-ffa450edef68"
ffee07517c59f409b7ef9480c9a2586a63a955cc,"String.trim() removes all leading and trailing characters less
than or equal to U+0020. This is okay for XML 1.0 since all
of the valid characters in that range are white space but
in XML 1.1 control chars are allowed. When the input to the
schema loader or schema validator is an XML 1.1 document we
need to be careful that we're not treating the control 
characters as XML spaces.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@469584 13f79535-47bb-0310-9956-ffa450edef68"
e8479277e6d9318afc8d660b8eec201ff1ecea0e,"We need to be careful with StringTokenizers. One of the default delimiters
is form feed (\f or 0x0C). A reference to this character is legal in XML 1.1 
but it isn't a space character so we must exclude it from the delimiter list.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@469613 13f79535-47bb-0310-9956-ffa450edef68"
dae1682009b7edba32e6b5bf0d06c6893c1c9198,"Fixing JIRA Issue #1206:
http://issues.apache.org/jira/browse/XERCESJ-1206

XPath expressions containing child:: or attribute:: are allowed 
by the schema spec. The XPath scanner now accepts them.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@470937 13f79535-47bb-0310-9956-ffa450edef68"
d640d8edaef4c9a06e10ea07efc41c41d8814e96,"Fixing JIRA Issue #1207:
http://issues.apache.org/jira/browse/XERCESJ-1207

To match the NCName:* node test in an XPath a given QName must have the same 
namespace as the one specified by the node test. We were treating these as if 
they were unrestricted wildcards.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@471030 13f79535-47bb-0310-9956-ffa450edef68"
fb1462ce9df9ad3b690a39211fe3d7feabcbccb0,"Fixing JIRA Issue #1209:
http://issues.apache.org/jira/browse/XERCESJ-1209

""union"" and ""list"" are not allowed as the value of the block or blockDefault attributes. 
Only the following values are permitted:

block = (#all | List of (extension | restriction | substitution)) [on an element declaration]
blockDefault = (#all | List of (extension | restriction | substitution))

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@471890 13f79535-47bb-0310-9956-ffa450edef68"
fa818a79a89f74173a5c96ced85cfdd76162b1ec,"JIRA Issue #1210:
http://issues.apache.org/jira/browse/XERCESJ-1210

Xalan serializer with DOM Level 3 support built from latest source in SVN.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@472567 13f79535-47bb-0310-9956-ffa450edef68"
03a1626ed4e0c2ed37f79fd2292d60dfc625fc0a,"Update SVN properties.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@472569 13f79535-47bb-0310-9956-ffa450edef68"
1929a7a708aa581d021c687553179d4db44e2542,"LICENSE and NOTICE files for the Xalan serializer.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@472595 13f79535-47bb-0310-9956-ffa450edef68"
d0d058b39343316e4e70fe3a4ac97ac02ab695e9,"JIRA Issue #1210:
http://issues.apache.org/jira/browse/XERCESJ-1210

Adding the Xalan serializer to the build.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@473049 13f79535-47bb-0310-9956-ffa450edef68"
25c92392a3c1f9f62611dfd290240d27e35cb5fa,"JIRA Issue #1210:
http://issues.apache.org/jira/browse/XERCESJ-1210

Use the Xalan DOM L3 serializer when it's available;
fallback to the deprecated Xerces DOM L3 serializer
when it isn't.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@473122 13f79535-47bb-0310-9956-ffa450edef68"
d210aa91d711a3260159a1eebc1fd23226fa5bab,"JIRA Issue #1210:
http://issues.apache.org/jira/browse/XERCESJ-1210

Deprecate Xerces' DOM Level 3 serializer.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@473125 13f79535-47bb-0310-9956-ffa450edef68"
4a46192dcadf101bf543d93e4c16bbfc158b7c95,"getFile() returns a concatenation of getPath() and getQuery(). We really only want the file path here.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@473379 13f79535-47bb-0310-9956-ffa450edef68"
2e38da3c8e659c7b198b19eba59e28fbefa0a6ea,"JIRA Issue #1210:
http://issues.apache.org/jira/browse/XERCESJ-1210

Updated serializer built from latest source in SVN.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@475812 13f79535-47bb-0310-9956-ffa450edef68"
c48d3acb23d887378fb4c738ce1165d81d3cf5b0,"The JUnit license (which is an HTML file) isn't getting included 
in the tools distribution. Add **/*.html to the list of includes. 

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@475966 13f79535-47bb-0310-9956-ffa450edef68"
c435218b1d6c76bfc71222452af57fb0028161d8,"Minor performance improvement:

Factoring Range, NodeIterator and MutationEvent handling code into private
methods. The majority of applications do not use these features of DOM so
this code rarely gets executed. Moving the code reduces the size of the
methods which contained them, increasing the chances that they will get 
inlined at runtime.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@476034 13f79535-47bb-0310-9956-ffa450edef68"
4107a1c79b6aef6f43ac71de2b71d8620d86f740,"JIRA Issue #1210:
http://issues.apache.org/jira/browse/XERCESJ-1210

Now that we've moved a common serialization codebase with Xalan, deprecating the remainder of Xerces' serializer.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@476047 13f79535-47bb-0310-9956-ffa450edef68"
ef4f1a983a8d6e8a5ff1390d0c05ea910692670c,"JIRA Issue #1210:
http://issues.apache.org/jira/browse/XERCESJ-1210

Deprecating OutputFormat's public nested classes.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@476048 13f79535-47bb-0310-9956-ffa450edef68"
85f3be7b63f0c278640c89e2585191837df0c5c5,"JIRA Issue #1212:
http://issues.apache.org/jira/browse/XERCESJ-1212

The newly created attribute needs to be assigned an owner element before
we can assign it as an ID. This was being done in the wrong order which
caused a DOMException to be thrown. Patch thanks to Grant McDonald.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@476292 13f79535-47bb-0310-9956-ffa450edef68"
9e85e0fcc71af5b5951fa30a77302ee149c7ab3c,"Fixing / adding version tags.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@476309 13f79535-47bb-0310-9956-ffa450edef68"
fcc0e68b7ab5bf64df0948c1ceb9b5835ad1c360,"Updated xml-apis.jar for testing. Built from latest source in xml-commons SVN.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@476860 13f79535-47bb-0310-9956-ffa450edef68"
b19af62e68efa306d9d35d102e2ec2cefb303499,"Adding a comment about the deprecated serializer.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@476864 13f79535-47bb-0310-9956-ffa450edef68"
bfed3e9318228ac1c331ce6b2ff3e3bae03e4a15,"Updated xml-apis.jar and xml-commons-external-src.zip for testing. Built from latest source in xml-commons SVN.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@477046 13f79535-47bb-0310-9956-ffa450edef68"
2d518bee7e41e1f25894a4557610335de6398ce8,"Updating the DOM serialization FAQ. Xerces' native serializer is deprecated now.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@477758 13f79535-47bb-0310-9956-ffa450edef68"
20ac059b1bd2972fb99756e1c43f24459133f46d,"Prepare for Xerces-J 2.9.0.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@477761 13f79535-47bb-0310-9956-ffa450edef68"
54011ecdf1b6840097d9702ee09cf94313511fdd,"SoftReferenceSymbolTable is a SymbolTable that prevents OutOfMemoryErrors by keeping only SoftReferences to its symbols.
SoftReferenceSymbolTableParserConfiguration is based on the default parser configuration, and defaults to using a SoftReferenceSymbolTable.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@477785 13f79535-47bb-0310-9956-ffa450edef68"
b0e20d0b28b7e7d1979b1771ac16f6e9e9179ed2,"Update to the latest ASF license header. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@477797 13f79535-47bb-0310-9956-ffa450edef68"
35cb8c1ed0e908d5d4a6fd0691b293ca99be9f87,"Updating SVN properties.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@477799 13f79535-47bb-0310-9956-ffa450edef68"
b53b83fbcbad6e6e3be0596e3ba493b5a8d147e2,"Clean up DOM examples. Setting the DOMImplementationRegistry.PROPERTY system
property is usually unnecessary. The DOMImplementationRegistry will find the
META-INF entry in xercesImpl.jar and the load the right DOMImplementationSource.
The Xerces serializer example is using a FileWriter which will write using
the platform's default encoding. Since this has the potential to create a
mismatch between the actual encoding of the document and encoding specified
in the encoding declaration in the document this is often the wrong thing to
be using. Changing the example to use a FileOutputStream instead.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@477808 13f79535-47bb-0310-9956-ffa450edef68"
e0477b312459637ca129ca7fa3d13cef80358ffe,"Upgrading to the Xalan 2.7.1 serializer. Built from SVN on November 20th, 2006.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@477814 13f79535-47bb-0310-9956-ffa450edef68"
bf2b4c7cf0e6f74fa3272896f22da2af994add15,"JIRA Issue #1213:
http://issues.apache.org/jira/browse/XERCESJ-1213

Upgrade to xml-commons-resolver-1.2.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@477823 13f79535-47bb-0310-9956-ffa450edef68"
dec43ea5b0cdb0dd199481b50f859da5e5a2d155,"To fix bug 1066/1032 by applying Ignacio Hernandez-Ros's patch.
For details, see
http://issues.apache.org/jira/browse/XERCESJ-1066?page=all

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@477835 13f79535-47bb-0310-9956-ffa450edef68"
74c8b7022244bf8c3db7392bd4e681e004182d44,"Miscellaneous clean-up.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@477862 13f79535-47bb-0310-9956-ffa450edef68"
2e72294150172d427f21eb85c549a1a692556668,"JIRA Issue #1213:
http://issues.apache.org/jira/browse/XERCESJ-1213

Upgrade to xml-commons-external-1.3.04.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@477869 13f79535-47bb-0310-9956-ffa450edef68"
0e8b23caa98b6556f8b4d5822342b83048b468be,"LICENSE and NOTICE files for xml-commons-resolver-1.2.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@477924 13f79535-47bb-0310-9956-ffa450edef68"
cc57143300614a355d7819df7a3da390552ceaca,"Add the resolver NOTICE to the source and binary packages.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@477935 13f79535-47bb-0310-9956-ffa450edef68"
29f69759be3a8062e87c96b0b8096212b32a6e77,"- Fixing the djdjar target.
- Adding LICENSE and NOTICE to all of the xerces jar files
  so that they can be distributed in the Maven repository
  in compliance with ASF policy.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478022 13f79535-47bb-0310-9956-ffa450edef68"
4f3a5c9bdede7a4c57820e8e0f6941fa7b888378,"Updating installation document for Xerces 2.9.0. There are several new files.
The ISSUES, TODO and STATUS which were previously included in the source
distribution have been removed. They were horribly out of date and no longer
relevant.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478026 13f79535-47bb-0310-9956-ffa450edef68"
cadf5282521fbf37e274d58197591a590df1d80d,"Updating the serialization FAQ to reflect the recent move to the shared 
Xalan serializer and the deprecation of Xerces' native serializer.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478038 13f79535-47bb-0310-9956-ffa450edef68"
65582adbdd7770d0433754b22a5a50849fd927e9,"Documentation updates for xml-commons-resolver-1.2.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478040 13f79535-47bb-0310-9956-ffa450edef68"
b9fffd837fe002a948963fbf940a8ff5792cc8dc,"Fixing a typo.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478042 13f79535-47bb-0310-9956-ffa450edef68"
c5a3ecaaafad76f9e94fe46e573b0c865da9d5fd,"Updating links to the XInclude REC. The 2nd edition was published November 15th.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478044 13f79535-47bb-0310-9956-ffa450edef68"
0aab96edd81dd1d8b8008f293444d1198deeedd9,"Updating to the NOTICE file for the Xalan 2.7.1 serializer.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478297 13f79535-47bb-0310-9956-ffa450edef68"
eddcabcb17e48517666b84beafd2254b298747cf,"Updating to the NOTICE file for the Xalan 2.7.1 serializer.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478298 13f79535-47bb-0310-9956-ffa450edef68"
3e24ee9f7e36180d186110a5787c0d37f250d716,"Removing an extra period.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478300 13f79535-47bb-0310-9956-ffa450edef68"
7f246b90bc3f3c1262fb4d0bc407b6be179f09c5,"JIRA Issue #1204:
http://issues.apache.org/jira/browse/XERCESJ-1204

Allow an XMLEntityResolver to be set directly on a Document's DOMConfiguration.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478323 13f79535-47bb-0310-9956-ffa450edef68"
b5fe1882a9f87cca666fa342d65f412a9071deac,"Give SoftReferenceSymbolTableParserConfiguration a slightly shorter name.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478337 13f79535-47bb-0310-9956-ffa450edef68"
69c6d7646f934fe8b6dd162c9a907f2fc696d06c,"Give SoftReferenceSymbolTableParserConfiguration a slightly shorter name.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478338 13f79535-47bb-0310-9956-ffa450edef68"
2ccd3cedacf2e427c14da3f222836d53730995fb,"Add documentation on SoftReferenceSymbolTableConfiguration.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478340 13f79535-47bb-0310-9956-ffa450edef68"
118b644576762c1173de62856120605bc761341f,"Adding Javadoc.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478344 13f79535-47bb-0310-9956-ffa450edef68"
ee769812a3d8a5f934959fc2b39bed652a631418,"Updating the release doc for Xerces-J 2.9.0.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478382 13f79535-47bb-0310-9956-ffa450edef68"
8740e5f719b09704a4bd3c87f029b6f0f1c24dee,"Updating the changes section for Xerces-J 2.9.0.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478390 13f79535-47bb-0310-9956-ffa450edef68"
f6862c506b2675ff02f34d443f170e0169b3f393,"Minor change to the docs.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478391 13f79535-47bb-0310-9956-ffa450edef68"
7538952e69731711b69c0cf3866831377b88df60,"A bit of rewording.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478395 13f79535-47bb-0310-9956-ffa450edef68"
451af982e5b44d41cacf4b87bdbedbd812b4c431,"Fixing a typo.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478398 13f79535-47bb-0310-9956-ffa450edef68"
44591638d2bf69c6faee1d5554464413db6f1f2d,"More rewording.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478399 13f79535-47bb-0310-9956-ffa450edef68"
8424fba31c66985b441f96f0447449e5811ae63f,"More typo fixes.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478400 13f79535-47bb-0310-9956-ffa450edef68"
e8ed2d3c977b37fe96af1c1131af987e28bae594,"Adding a couple people I missed to the 2.9 credits.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478452 13f79535-47bb-0310-9956-ffa450edef68"
9f5322b2eb1e224c9bd3c70fb1cd0401d0441336,"Rewording a bit for clarity.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@478611 13f79535-47bb-0310-9956-ffa450edef68"
9fb53d39eca6951601c930412e34861da3568083,"Fixing JIRA Issue #1220:
http://issues.apache.org/jira/browse/XERCESJ-1220

The ""Standalone Document Declaration"" [1] validity constraint applies to markup declarations which 
occur in the external subset and/or a parameter entity (also known as external markup declarations [2]). 
Xerces was only considering declarations in the external subset.

[1] http://www.w3.org/TR/2006/REC-xml-20060816/#vc-check-rmd 
[2] http://www.w3.org/TR/2006/REC-xml-20060816/#dt-extmkpdecl

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@488820 13f79535-47bb-0310-9956-ffa450edef68"
69dda8fd3838287ef67460012af391e18d3e4f29,"Improving a couple error messages related to the ""Standalone Document Declaration"" validity constraint.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@488823 13f79535-47bb-0310-9956-ffa450edef68"
e32f62b5fd5f0e2c8f8020ea5268ec293463f967,"Updating the copyright year in the documentation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@492395 13f79535-47bb-0310-9956-ffa450edef68"
cd0abff67721071b39a23720ca3c29fb435b25d9,"Updating the copyright year in the NOTICE file.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@492396 13f79535-47bb-0310-9956-ffa450edef68"
83ef46f172c3ddbc513423317ee61676b530c6aa,"Updating the copyright year used in the API docs.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@492397 13f79535-47bb-0310-9956-ffa450edef68"
f3295eccb1eda146844895dbb7812103b1768c38,"Fixing JIRA Issue #1221:
http://issues.apache.org/jira/browse/XERCESJ-1221

E13 [1] of the XML 1.0 3rd edition errata clarifies that even internal parameter entity references 
are enough to make undeclared entities into mere validity errors rather than well-formedness errors. 
Xerces was reporting a fatal error for undeclared entities in a document containing any parameter
entities (not just internal ones). This should be fixed now.

[1] http://www.w3.org/XML/xml-V10-3e-errata#E13

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@495747 13f79535-47bb-0310-9956-ffa450edef68"
9600eff397830c8439a86ec5634dd7cc1fcfa769,"Marking a couple fields as final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@496157 13f79535-47bb-0310-9956-ffa450edef68"
02832ccc7bb8c55099825dfb40575f18bad6c8fa,"Marking a few fields as final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@496158 13f79535-47bb-0310-9956-ffa450edef68"
5314a3b04ea61a1207b005b2974b14d2958b082f,"Make RefCount a static final nested class. Mark IntVector as final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@496162 13f79535-47bb-0310-9956-ffa450edef68"
65c0ee9b4a6197bd753042ace08b04eae58e2103,"Fixing several instances of the same bug. When a namespace is unbound the URI in 
the NamespaceContext should be stored as null instead of the empty string.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@498397 13f79535-47bb-0310-9956-ffa450edef68"
b78d894336e40459ad8e5aa17f36a2c92ee5f3f9,"Updating the JAR manifest to reflect that v1.3.04 of xml-commons external is now in use.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@498415 13f79535-47bb-0310-9956-ffa450edef68"
72d28cef7c99cdd7c505e00963c24b3bfdb242d7,"Fixing JIRA Bug #1223:
http://issues.apache.org/jira/browse/XERCESJ-1223

When the type of an element is a union, the [member type definition] will not be available 
until the end of the element (the exception being if the element is empty). When building
a deferred DOM the TypeInfo [1] was being set in startElement. To get the member type it 
needs to be set in endElement. Should be fixed now.

[1] http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#TypeInfo


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@498500 13f79535-47bb-0310-9956-ffa450edef68"
472a29a238140935a65946f728e0ce0e134cb213,"Correcting a formatting problem with one of the DOM messages.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@501454 13f79535-47bb-0310-9956-ffa450edef68"
1543bbc70bee5fdf7d5abd54532f9b21e7617de5,"Fixing JIRA Bug #1224:
http://issues.apache.org/jira/browse/XERCESJ-1224

Correcting a typo in intersectRanges(). Thanks to Dave Brosius 
for catching this error and suggesting how to correct it.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@504431 13f79535-47bb-0310-9956-ffa450edef68"
126f16c74048c08ce64b11064b37fb8e9328d551,"Fixing JIRA Bug #1218:
http://issues.apache.org/jira/browse/XERCESJ-1218

If we matched an attribute we need to clear the entry in the matched array
at the end of the element. Because we were failing to do this, Xerces was
not detecting multiple matches on an attribute field.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@508975 13f79535-47bb-0310-9956-ffa450edef68"
6875f8ac98e77993cb4e2fc9aee5c1f20d9b9b7b,"Fixing the imports in a couple of the DOM examples:
org.w3c.dom.DOMImplementationRegistry -> org.w3c.dom.bootstrap.DOMImplementationRegistry

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@510635 13f79535-47bb-0310-9956-ffa450edef68"
8ff5e52a0e39ce14b62e2acf3db2ca5f3bd343c2,"Fixing JIRA Bugs #206, #380 and #773:
http://issues.apache.org/jira/browse/XERCESJ-206
http://issues.apache.org/jira/browse/XERCESJ-380
http://issues.apache.org/jira/browse/XERCESJ-773

For larger values of maxOccurs in a schema document an OutOfMemoryError may occur when Xerces builds 
the DFA representation. Similarly, large values of minOccurs with maxOccurs equal to unbounded may 
exhaust the available memory.  If enough space has been allocated on the heap the VM may not run out 
of memory but it may take several minutes before processing completes. The workaround for this limitation 
has always been for the schema author to change the value of maxOccurs to unbounded (and change minOccurs 
to 1 or some small number).

For a number of users the workaround is unnacceptable and they really do need to work with the large
maxOccurs values. The following fix eliminates this long standing limtiation for a number of common
cases. We now build a representation of large minOccurs/maxOccurs in constant time and memory (which 
uses a counter during validation) for element and wildcard particles when each model group particle 
in the content model:

* has minOccurs/maxOccurs == 1; or
* contains only one element/wildcard particle with minOccurs/maxOccurs == 1

Handling sequences, choices and nested minOccurs/maxOccurs is somewhat tricker. We might tackle those
one day with a more general solution but what I've done for now should allivate the pain for a large
number of the users who couldn't workaround the limitation.




git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@511014 13f79535-47bb-0310-9956-ffa450edef68"
d3cbda242bba946e6d34163d2b1403f06f798f71,"Fixing JIRA Bug #977:
http://issues.apache.org/jira/browse/XERCESJ-977

It was possible to get an NPE when calling setChunkIndex or setChunkValue 
if the chunk was previously deleted because its reference count dropped 
to 0. We now re-create the chunk if it got deleted. 

This will churn the garbage collector a bit. There's probably a more 
performant solution but this seemed like the safest thing to do given the 
stability of the rest of the deferred DOM implementation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@511134 13f79535-47bb-0310-9956-ffa450edef68"
886a9068e91d493d2f3e66b5d1cefe22d99157c9,"Fixing JIRA Bug #1228:
http://issues.apache.org/jira/browse/XERCESJ-1228

If the start container and/or end container is a CDATASection/Comment/ProcessingInstruction
we need to take special care when extracting/deleting/cloning contents of the Range. This
bug was causing two W3C test cases (rangeclonecontents05 and rangeextractcontents05) to fail 
with an NPE.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@515212 13f79535-47bb-0310-9956-ffa450edef68"
c322c1bece328be935984b50c13c3b06f5c12279,"Make all of RangeImpl's fields private. Removed one unused field.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@515231 13f79535-47bb-0310-9956-ffa450edef68"
203814bd9d8194dfe1fb59d47da99b06634dd3f1,"Fixing JIRA Bug #1232:
http://issues.apache.org/jira/browse/XERCESJ-1232

The canonical value we produce for dateTime and time were incorrect. We now
ensure that that the value contains no trailing zeros. If the conversion of
seconds from a double to String results in a number expressed in scientific
notation it is converted to a normal decimal value before appending it to 
the StringBuffer.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@515286 13f79535-47bb-0310-9956-ffa450edef68"
5b1eefec3babdc3dfa11399b0490f162cade1ad4,"Fixing JIRA Bug #1231:
http://issues.apache.org/jira/browse/XERCESJ-1231

Allow the XMLGrammarPool to be set to null.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@515288 13f79535-47bb-0310-9956-ffa450edef68"
9e03c14c7ce4ae1478485f7fe2c0685b033e125e,"Fixing indentation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@515290 13f79535-47bb-0310-9956-ffa450edef68"
8ce51b21049ac83135a5f7a10bf97e54ae5c4c6d,"Fixing JIRA Bug #1230:
http://issues.apache.org/jira/browse/XERCESJ-1230

An NPE would always be thrown from the normailzer during namespace fixup if the
document contained any non-namespace aware Attr nodes. This was occuring while
checking the well-formedness of the attribute's name. I've changed the code so
that it's consistent with how we check element names. If an attribute's local
name is null we'll detect that now.



git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@515293 13f79535-47bb-0310-9956-ffa450edef68"
d5bdc334936df0eb865d19dce705d0957b033f1d,"Fixing JIRA Bug #1229:
http://issues.apache.org/jira/browse/XERCESJ-1229

Ensuring that the start and end offsets of Ranges which have a CDATASection/Comment/ProcessingInstruction 
start and/or end container are updated when text is inserted, deleted or replaced. This was not working
before.



git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@515302 13f79535-47bb-0310-9956-ffa450edef68"
4bdd2b0d0a06beb8701a0cc0a5e3867c144b1d2a,"Clean up unused imports.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@515429 13f79535-47bb-0310-9956-ffa450edef68"
ffb4d4a59c5b744704e39e071e85a3d1c4ccdf29,"Fix a problem with complex type annotation support when extension is used.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@516216 13f79535-47bb-0310-9956-ffa450edef68"
3ef83ccfcf8b763db0f3be77262353fb225b375a,"Fixing JIRA Bug #1235:
http://issues.apache.org/jira/browse/XERCESJ-1235

Xerces was not correctly reevaluating the Element.schemaTypeInfo and Attr.schemaTypeInfo, 
IDness (in a DTD context) and the [element content whitespace] property of text nodes. This
should be fixed now as well as another bug where the normalizer would set the value of
attributes with no [schema normalized value] to null if the ""datatype-normalization""
parameter is set to true.



git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@516289 13f79535-47bb-0310-9956-ffa450edef68"
cfa3e2f21f610c243a1357f4f6da253084002779,"Fixing JIRA Bug #1234:
https://issues.apache.org/jira/browse/XERCESJ-1234

If DOMImplementation.createDocument() is called with a null namespaceURI 
and qualifiedName it's supposed to return an empty Document.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@516291 13f79535-47bb-0310-9956-ffa450edef68"
d757c10b66391b3371a29d9e4c42ae975cd88710,"When support for DTD validation support was added to DOMNormalizer we forgot to add 
""http://www.w3.org/TR/REC-xml"" as an allowable value for the ""schema-type"" property.
The entity resolver property wasn't included in the parameter list returned from 
getParameterNames() and was not accounted for in canSetParameter(). Both of these
minor bugs should be fixed now.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@516299 13f79535-47bb-0310-9956-ffa450edef68"
21558f23705962e381bfca7160ae245919effb4e,"Fixing an NPE. Need to take special care with DOM Level 1 Attr nodes.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@516447 13f79535-47bb-0310-9956-ffa450edef68"
a405ef4de9fb533fa64c29b010f9f0d4283a1560,"Fixing JIRA Bug #1233:
http://issues.apache.org/jira/browse/XERCESJ-1233

The canonical value we produce for duration was sometimes invalid. If the 
conversion of seconds from a double to String results in a number expressed 
in scientific notation it is converted to a normal decimal value before 
appending it to the StringBuffer.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@517284 13f79535-47bb-0310-9956-ffa450edef68"
483664a450f6fe5f39ab9ffbe45b83c5388ff878,"Fix identation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@517285 13f79535-47bb-0310-9956-ffa450edef68"
df4fad23ff88f02bbbb59805c4aa32365393ecf2,"Fixing JIRA Bug #1238:
http://issues.apache.org/jira/browse/XERCESJ-1238

If maxOccurs > 1 is specified on a references to a model group definition whose model 
group has {compositor} ""all"" an error [1] should be reported.

[1] http://www.w3.org/TR/xmlschema-1/#cos-all-limited

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@518305 13f79535-47bb-0310-9956-ffa450edef68"
59b623b20ed4d38cf2262a2d728eb829de7caffe,"Fixing JIRA Bug #1239:
http://issues.apache.org/jira/browse/XERCESJ-1239

If the union of two attribute wildcards is not expressible an error should be reported.
Note that XML Schema 1.0 2nd edition doesn't actually specify this constraint. It's a bug [1]
in the spec which will eventually be fixed. At the moment we're just guessing what the error 
code will be. If it turns out to be something else we'll need to change it.

[1] http://www.w3.org/Bugs/Public/show_bug.cgi?id=4390

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@518306 13f79535-47bb-0310-9956-ffa450edef68"
b643cf51f13146020d9ce61268ebb634d7061892,"Fixing JIRA Bug #1079 and #1237:
http://issues.apache.org/jira/browse/XERCESJ-1079
http://issues.apache.org/jira/browse/XERCESJ-1237

If a type derived from xs:integer specifies a fractionDigits facet with a value other than one
its an error. We weren't reporting one before.

""0"" was always being returned as the lexical value for the totalDigits facet of a type derived
from xs:integer. This should be the value returned for fractionDigits.

If a fractionDigits facet is specified on a type derived from xs:integer we need to take special
care that we only create one instance of XSFacet for fractionDigits.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@518311 13f79535-47bb-0310-9956-ffa450edef68"
1732706e642d264bbbddeab1b0b4bea4740cb07a,"Fixing indentation. Tabs -> 4 spaces.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@518314 13f79535-47bb-0310-9956-ffa450edef68"
8fd671001593365e8f4c36e7804efece5323dd27,"Fixing JIRA Bug #1240:
http://issues.apache.org/jira/browse/XERCESJ-1240

If one (or more) of the choices is an empty sequence the CMBuilder needs to wrap the choice 
node (i.e. XSCMBinOp) in a zero-or-one (optional) node so that the content model produced will 
allow the empty sequence. This was only working for one special case: a choice between an
empty sequence and one non-empty particle. 

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@518315 13f79535-47bb-0310-9956-ffa450edef68"
d9ba6df01e0b74acfe920251c31d8b48355462b4,"Fixing the fix made to IDC in Revision 319835. There may be several
instances of the same field that may be active at a time so we
need a mayMatch flag per active XPath. This state is now stored in
the XPathMatcher. Incidentally, this should also improve performance
a bit since we're no longer churning a HashMap.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@520039 13f79535-47bb-0310-9956-ffa450edef68"
1d314f568ea91cb881df509ec8268add00da38b4,"Fixing a bug. If the document doesn't have a DTD we weren't resetting the UnparsedEntityHandler.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@520055 13f79535-47bb-0310-9956-ffa450edef68"
2b7b650a82634c8f9d65128ff089e9b5eca0d9a6,"Clean up unused imports.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@520058 13f79535-47bb-0310-9956-ffa450edef68"
03eb4faf3f6bf1797b59616c56d72e9ff8dfed59,"Fixing JIRA Bug #1242:
http://issues.apache.org/jira/browse/XERCESJ-1242

If the type of the element being substituted is a union, the type of the substituiton
is allowed to be one of the member types or a type derived from one of the member
types of the union.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@520257 13f79535-47bb-0310-9956-ffa450edef68"
f3ca399086fc02695279c4088f1315012b4c39e1,"Clean up unused imports.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@520553 13f79535-47bb-0310-9956-ffa450edef68"
0b16c7ecc00449b28c8c97142a893647505507c9,"Clean up unused imports.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@520559 13f79535-47bb-0310-9956-ffa450edef68"
125d16f2e9922f1ed4769453476b1800799e531b,"Performance: Every time the XMLGrammarPreparser is invoked it sets several
properties on the XMLGrammarLoader. This forces components to read the whole 
config on every parse when they could otherwise break after examining the 
PARSER_SETTINGS feature. Instead of setting these properties every time, first
check if their values have changed since the last time they were applied to
the grammar loader.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@521449 13f79535-47bb-0310-9956-ffa450edef68"
5ff7c783dc67ed87c2fd1044c57ff7ade053d753,"Avoid the XMLConfigurationException thrown from the component 
manager when the XMLSchemaLoader is used an XMLGrammarLoader.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@521495 13f79535-47bb-0310-9956-ffa450edef68"
218ddc2e5429c7c021768fe7bfa7f2e95c75c171,"Fixing the dtdjar target (again).

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@522334 13f79535-47bb-0310-9956-ffa450edef68"
0ad37b54b9f4f164c7f398fb7eae40678b8325e0,"Fixing indentation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@524207 13f79535-47bb-0310-9956-ffa450edef68"
163dc12c725a4e9bc243970c82016cb18998c25c,"Fixing JIRA Bug #1243:
http://issues.apache.org/jira/browse/XERCESJ-1243

When we're building the TimeZone string if minutes < 10 we need to prepend a zero
to conform to the format expected by TimeZone.getTimeZone().


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@524223 13f79535-47bb-0310-9956-ffa450edef68"
b3081a7de0d87ef707e328f383b1ecbb89cf8e51,"Fixing JIRA Bug #1245:
http://issues.apache.org/jira/browse/XERCESJ-1245

The ""schema-location"" parameter is defined to be a whitespace separated 
list of URIs. We need to tokenize it and collect each of the values in
the list in array.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@530107 13f79535-47bb-0310-9956-ffa450edef68"
faff3c68ec6e7599b49339e1bca84c8878417a0f,"A light wrapper around an XMLLocator. Needed in order to fix XERCESJ-1247.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@533423 13f79535-47bb-0310-9956-ffa450edef68"
1415f597f6a740a1a0e223cd2aff395a5b600d35,"Fixing JIRA Bug #1247:
http://issues.apache.org/jira/browse/XERCESJ-1247

Instead of reporting the locations within the included document (or fragment) the
Locator would remain stuck at the location of the xi:include element in top-level
document. In order to report the correct location we need to update the application's 
Locator as we move between the XInclude pipelines.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@533527 13f79535-47bb-0310-9956-ffa450edef68"
2832ff5c77732e86bd3c8d3074b166e48dad1fe6,"Formatting clean-up.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@533531 13f79535-47bb-0310-9956-ffa450edef68"
b5e8b743c5e34ae5ad74390eb28e3a0aed795ff6,"Formatting clean-up.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@533533 13f79535-47bb-0310-9956-ffa450edef68"
45e14465a1da4c50ebabfbe57e7f0d4b450d322f,"Implementations of UIEvent and MouseEvent.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@533574 13f79535-47bb-0310-9956-ffa450edef68"
7cbfbdbeefa5c1bc509e7c63ce134ec888798f43,"Minor doc tweaks.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@535553 13f79535-47bb-0310-9956-ffa450edef68"
bf73d3ea7619cdf7f9a5fbacaacdf306079458bf,"Fixing a bug in the XMLVersionDetector (which was fixed a long time ago in the other scanner
components). Illegal byte sequences in UTF-8, US-ASCII and other encodings are well-formedness
errors. They should be reported to the error reporter like every other well-formedness violation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@536305 13f79535-47bb-0310-9956-ffa450edef68"
417d7065a528849b5a5e610dc8b462eb080ad0d6,"Remove an extra semi-colon.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@536446 13f79535-47bb-0310-9956-ffa450edef68"
97c22944611b019fed986aaa179ee08241ca6adf,"Minor doc fix.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@536630 13f79535-47bb-0310-9956-ffa450edef68"
423e13357d33343f2ff625564f4f5202ba285923,"JIRA Issue #1189:
http://issues.apache.org/jira/browse/XERCESJ-1189

To make it easier for applications to recognize encoding errors, wrap the
java.io.CharConversionException in the SAXException instead of dropping it
on the floor.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@539929 13f79535-47bb-0310-9956-ffa450edef68"
8af97c42a081d9a3223f056902ef96115fea5ccb,"Guard against an NPE which could occur if getMessage() is called from different threads.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@539931 13f79535-47bb-0310-9956-ffa450edef68"
ef1ee3e86af7f66413ac9c7bb1849e39cd2980a0,"Fixing JIRA Bug #1249:
http://issues.apache.org/jira/browse/XERCESJ-1249

The JAXP validator can be used with DOM implementations other than Xerces. If the nodes
in the DOM implementation are proxies they will only be comparable using isSameNode().
If the DOM implemenation supports DOM Level 3 and isn't the Xerces implementation
we now call isSameNode() to support such a scenario.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@539939 13f79535-47bb-0310-9956-ffa450edef68"
8e7daca15e44c6b175147eab8346689ee732e661,"Fixing an NPE.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@541770 13f79535-47bb-0310-9956-ffa450edef68"
bbaac4e41893e449b023102e677b14b13cb1ffe8,"Localizing a DOM error message.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@542046 13f79535-47bb-0310-9956-ffa450edef68"
e1011417989afa6ada9bd4d9d1bac49ead1b2aba,"Eliminating a couple anonymous classes. Locator2Impl has the same functionality.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@542049 13f79535-47bb-0310-9956-ffa450edef68"
e4eeb08e3b8b8fcd4ec363321ec94d2900dc1b66,"Eliminating an unused field.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@542050 13f79535-47bb-0310-9956-ffa450edef68"
ab51fb2789e6f4edf3f0b855cff9d89b414cb7ab,"Hooking in the implementations of UIEvents and MouseEvents.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@542096 13f79535-47bb-0310-9956-ffa450edef68"
96a4ef4759b2f340230d962d2ef3f11a80bd573d,"Making several field final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@542516 13f79535-47bb-0310-9956-ffa450edef68"
d7d976662b1b74fcaef88f221caff00e758bd7bc,"Making several field final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@542517 13f79535-47bb-0310-9956-ffa450edef68"
93d26680bf26b80325ebcd699f3a179830837cad,"Making several fields final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@542519 13f79535-47bb-0310-9956-ffa450edef68"
cd99c4d3212164bee05b56aee9b77f469da25c03,"Making several fields final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@542520 13f79535-47bb-0310-9956-ffa450edef68"
14060f314864c5d5e522f7dc14fd07a8d48a5e3f,"Making several fields final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@542521 13f79535-47bb-0310-9956-ffa450edef68"
7505ae240f5949b9f9c87d5c9d7077afdfac40be,"Making one field final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@542522 13f79535-47bb-0310-9956-ffa450edef68"
53db6ac406a3febbcfbd2363f29b83add7dc9eb7,"Fixing JIRA Issue #1080:
http://issues.apache.org/jira/browse/XERCESJ-1080

I fixed this once before but it got trampled by another commit. Instead of 
making the null checks (the old fix) call stringValue(). This is consistent
with the change that Sandy made long ago to XSAttributeDecl (Revision 319100).

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@545988 13f79535-47bb-0310-9956-ffa450edef68"
d2da9050855f1054b6cd041adb3efab29da5a4ea,"Minor grammar fix.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@546466 13f79535-47bb-0310-9956-ffa450edef68"
fc251680334e01b18a25515b964777b4fb61fd01,"Modernizing this sample:
- Use the DOM L2 namespace-aware createElementNS() methods instead of the non-namespace-aware DOM L1 methods
- Use the DOM L3 LSSerializer to serialize the document instead of the deprecated native Xerces serializer

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@546623 13f79535-47bb-0310-9956-ffa450edef68"
1b7d41640e89c6c6200259a4e4810181a76567c3,"Make FacetInfo static.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@548081 13f79535-47bb-0310-9956-ffa450edef68"
6b6ef9b98a3e30986df4d60fb79ca07bf3bc69a5,"Make ComplexTypeRecoverableError static.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@548082 13f79535-47bb-0310-9956-ffa450edef68"
18cd4106780a82c338bb0bf19b7c5ee71ff3505a,"Making all of the fields of FacetInfo final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@548083 13f79535-47bb-0310-9956-ffa450edef68"
e5846a9c685fe8036edd4308daf94d34670b0362,"Making LocatorProxy a static final nested class.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@548086 13f79535-47bb-0310-9956-ffa450edef68"
ad42974f0d3d96ee72caa81bf3bf460317de08e6,"Making AbortHandler a static final nested class.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@548087 13f79535-47bb-0310-9956-ffa450edef68"
a5fdf26357e6f8f6847859e1741c659664dea02a,"Making XNI2SAX a static final nested class.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@548088 13f79535-47bb-0310-9956-ffa450edef68"
e3aa891e690e210900abf113ba08b0a118be6314,"Making LocalIDKey a static final nested class.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@548089 13f79535-47bb-0310-9956-ffa450edef68"
daa4328908ba2a88b3a1b88bac5d6ede22d97dfd,"Making ValidationContextImpl a static final nested class (and its fExternal field final).

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@548093 13f79535-47bb-0310-9956-ffa450edef68"
5ae5f2616822c469818e0b7b88b8eba81a670cae,"Eliminating redundant casts and instanceof checks; XMLDTDProcessor is an XMLComponent.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@548192 13f79535-47bb-0310-9956-ffa450edef68"
82a34b5828ed9fe819d5c395b72c9301d761f181,"Fixing JIRA Issue #1257:
http://issues.apache.org/jira/browse/XERCESJ-1257

If the first byte of a four byte UTF-8 sequence lands on a buffer boundary the low surrogate 
will not fit into the char buffer. It needs to be saved for the next read. An AIOOBE was 
being thrown before because we were not checking for this edge case.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@554069 13f79535-47bb-0310-9956-ffa450edef68"
5c5d2f600c353c6f12a856d525bf6cfe29fb1c51,"Improving the performance of toXMLFormat(). If the year < 10^9 avoid calling getEonAndYear(). This
prevents a new BigInteger from being created. This change also fixes a bug in the serialization of
negative years > -1000 which was causing leading zeros to be written in front of the '-' sign.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@554123 13f79535-47bb-0310-9956-ffa450edef68"
1f5c7320fc642cc34c320f076293cbbc4f33a657,"Fixing indentation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@554264 13f79535-47bb-0310-9956-ffa450edef68"
815dfee71897f727b1589e9840b110d62514bf8f,"Fixing indentation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@554269 13f79535-47bb-0310-9956-ffa450edef68"
17bf058e7e29c511de5761eee90efe5ed3f7a021,"Improving performance of DatatypeFactory.newXMLGregorianCalendar(String). If the year < 10^9 avoid 
creating a new BigInteger which will be immediately GC'd. Also fixed a bug which allowed the year
component to be three digits if it was preceeded with a '-' sign.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@554312 13f79535-47bb-0310-9956-ffa450edef68"
a86f82ce59cca854be3af1090e579b588f5b8dd9,"DatatypeFactory.newXMLGregorianCalendar(int, int, int, int, int, int, int, int) in the base class
creates a new BigInteger for the year. Overriding the method to avoid creating this temp object.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@554378 13f79535-47bb-0310-9956-ffa450edef68"
394337a2451ac9c6c56045c06090d40ecad8e9c6,"Fixing indentation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@554381 13f79535-47bb-0310-9956-ffa450edef68"
10b9b010b1a8f0bdbb67c26e5eeab933599cd3e5,"Improving the performance of toGregorianCalendar(). If the year < 10^9 avoid calling getEonAndYear().
This prevents a new BigInteger from being created.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@554387 13f79535-47bb-0310-9956-ffa450edef68"
e50b2c31f2ed04cd6243ea04c04934c51767f6b9,"Performance: If a default is provided for the year only call getEonAndYear() if necessary.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@555146 13f79535-47bb-0310-9956-ffa450edef68"
339976fce034a4172975ae71b0e12ebeb1b83ac6,"Fixing a bug and made a few perf improvements to isValid(). It wasn't checking if the value of days is valid 
for the specified month. This was allowing bogus dates like April 31st through.

Performance:
If abs(year) < 10^9 avoid calling getEonAndYear() when checking the number of days in February for a particular 
year. We were wasting time checking for year 0 if eon != null. By definition that could never be true (i.e.
eon != null implies abs(year) > 10^9, so I eliminated this code.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@555153 13f79535-47bb-0310-9956-ffa450edef68"
7368f7449b2215c1adcee26b954424e2ba201cd5,"Allow millisecond field to be set to 1000.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@555158 13f79535-47bb-0310-9956-ffa450edef68"
f900ffca1889e66dd34fe3a4511cc3dd90923c0f,"Fixing indentation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@555159 13f79535-47bb-0310-9956-ffa450edef68"
f37ec0f21b17cf293ef7bb460d7bc15f5e260236,"Shuffling code around to allow millisecond = 1000 to be specified in the factory methods as they were before.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@555165 13f79535-47bb-0310-9956-ffa450edef68"
474d1edc0150fdb5899656363f778627e260e644,"Fixing JIRA Issue #1260:
http://issues.apache.org/jira/browse/XERCESJ-1260

Making createChildModel() a synchronized method. This is necessary to ensure that the
content model builder works correctly when a DTDGrammar is shared across threads in
an XMLGrammarPool.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@558105 13f79535-47bb-0310-9956-ffa450edef68"
1917d1b07c4060ac8e8759327d4a0dff07e42b79,"Removing ""synchronized"" from the getInstance() methods. The threading issue that they were
added to address was eliminated when we started using the ObjectFactory to create instances
of the DTDDVFactory.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@558581 13f79535-47bb-0310-9956-ffa450edef68"
d5640bc9ea5a64c5716365e8f827222581e0fbbc,"Removing ""synchronized"" from the getInstance() methods. The threading issue that they were
added to address was eliminated when we started using the ObjectFactory to create instances
of the SchemaDVFactory.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@558582 13f79535-47bb-0310-9956-ffa450edef68"
646d810efab9dd00c2e4df6de0ea73daddb881a6,"Making all methods of SecuritySupport static. There's no longer a need 
for them to be instance methods since we eliminated SecuritySupport12.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@558589 13f79535-47bb-0310-9956-ffa450edef68"
016c9e2f5876683f67a19ba85b4c8167da14e48a,"Making all methods of SecuritySupport static. There's no longer a need 
for them to be instance methods since we eliminated SecuritySupport12.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@558590 13f79535-47bb-0310-9956-ffa450edef68"
f38437d785ecb9aecbc120fb7eaed67ba88998c0,"Fixing a typo. ""... is not recognized this SchemaFactory"" -> ""... is not recognized by this SchemaFactory"".

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@559135 13f79535-47bb-0310-9956-ffa450edef68"
5ea11950b7a217ffd5452b82bca7950eb4ab2c31,"Fixing an import in the DOM serialization example:
org.w3c.dom.DOMImplementationRegistry -> org.w3c.dom.bootstrap.DOMImplementationRegistry

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@560944 13f79535-47bb-0310-9956-ffa450edef68"
029231db276ea7952a4035493dc6c0f40056c6a4,"Use valueOf() instead of directly calling the BigInteger/BigDecimal constructors.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@563736 13f79535-47bb-0310-9956-ffa450edef68"
883dc18e1cd70be3f4dc6fcaf48ddcdfe4c2a99d,"Fixing a bug. parseInt() was allowing maxDigits + 1 which caused 
XMLGregorianCalendar to accept bogus dates like ""2007-008-003"".

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@565088 13f79535-47bb-0310-9956-ffa450edef68"
ababa140279c80b7cfd65466dd5838a18e47dff8,"Use BigDecimal.valueOf(long) instead of new BigDecimal(double).

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@565110 13f79535-47bb-0310-9956-ffa450edef68"
364bd6628068ad533def0a92183db0c616287d89,"Prepare for Xerces-J 2.9.1.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@567790 13f79535-47bb-0310-9956-ffa450edef68"
78b718f59b5ec7c6e288a6358481900b3c7430a9,"JIRA Issue #1264:
http://issues.apache.org/jira/browse/XERCESJ-1264

As part of its normal control flow the XMLEntityScanner will throw an EOFException when it reaches the end of the document. For small documents, this can take up as much as 20-25% of the total execution time in the parser but could be even more than that depending on the depth of the call stack at the point where parse() is called. To eliminate most of this cost we now cache the exception and avoid filling in its stack trace (thus also saving some memory).


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@568405 13f79535-47bb-0310-9956-ffa450edef68"
54018c66866867101d5cce0623cf241e274633e2,"Eliminating a couple blank lines.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@568406 13f79535-47bb-0310-9956-ffa450edef68"
4766518c2d229e6b328a81139792da9966fbd19e,"Formatting improvements.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@568409 13f79535-47bb-0310-9956-ffa450edef68"
8ace65e49fd9095642a8586c809bcc896a84f778,"Adding a comment.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@568411 13f79535-47bb-0310-9956-ffa450edef68"
e39a53a2acda207c1f83e5bfdea2fdd4a0a9dd12,"Saving some memory. Avoid filling in the stack trace of the ABORT exception.
This is used to halt the parser but is never exposed to the calling application.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@568412 13f79535-47bb-0310-9956-ffa450edef68"
8d622d613bdf4bdc18f17a5318a5171eba3ddbae,"Fixing typos.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@570112 13f79535-47bb-0310-9956-ffa450edef68"
dc15f1af06034a3ba108ccdf5b7c37957b33f354,"Fixing typos.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@570115 13f79535-47bb-0310-9956-ffa450edef68"
f91b49929ed12decb8c4d05e7cbc7cb42b8b6f9f,"Fixing typos.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@570116 13f79535-47bb-0310-9956-ffa450edef68"
32a27c66623c07187c09271c3ed6091e85dc0936,"Fixing a typo.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@570117 13f79535-47bb-0310-9956-ffa450edef68"
8ec05a5dcade3455f4d8adb07942d27ddcb08689,"Fixing a typo.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@570118 13f79535-47bb-0310-9956-ffa450edef68"
48ddc67b8290e8cf52005ee7776683e6d3d5b0e3,"Fixing typos.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@570119 13f79535-47bb-0310-9956-ffa450edef68"
9c941ddd9d13dedf010aaea6a6fb9d1fe60295da,"Fixing a typo.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@570120 13f79535-47bb-0310-9956-ffa450edef68"
72080aebe4a03335f5571f347f2f82cf0547933c,"Fixing a typo.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@570122 13f79535-47bb-0310-9956-ffa450edef68"
02304837a4a03ccef2c0b8790acc919e36199cb6,"Fixing a typo.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@570123 13f79535-47bb-0310-9956-ffa450edef68"
724a40cb388406a5c31e7ec08692144d41206316,"Fixing a typo.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@570124 13f79535-47bb-0310-9956-ffa450edef68"
d2e4cf04023bef0cab79bd75b365d16561f091ad,"Fixing typos.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@570130 13f79535-47bb-0310-9956-ffa450edef68"
75c368c2b763b55f18907e9cdda2cfafc34a60ba,"Fixing a typo.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@570132 13f79535-47bb-0310-9956-ffa450edef68"
cdc17ed1f688d50151ea732a9ddd366ec5f876fd,"Fixing a typo.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@570134 13f79535-47bb-0310-9956-ffa450edef68"
fe8aa4e2db4b44a22c124225e252451c5899c6e2,"Fixing a typo.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@570135 13f79535-47bb-0310-9956-ffa450edef68"
67b4c322e71d83dcec0a6d47f309bc45769f1f93,"Fixing typos.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@570137 13f79535-47bb-0310-9956-ffa450edef68"
e53aadc0560c59e0a12a3a42e798c0cad2017014,"Fixing typos.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@570138 13f79535-47bb-0310-9956-ffa450edef68"
5ddb65e11c12dfb6e114f51b705cb510f25d2651,"Adding a new PGP key for myself to the KEYS file.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@571025 13f79535-47bb-0310-9956-ffa450edef68"
dc0f7a5edb8a8f2dc87d67c50e572d37443118b6,"Fixing JIRA Issue #1266:
http://issues.apache.org/jira/browse/XERCESJ-1266

Adding support for ""XMLVersion"" to hasFeature().

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@571293 13f79535-47bb-0310-9956-ffa450edef68"
ed36b464d4ae85c48fb37db99f9fdff028d1d82a,"Fix for bug http://issues.apache.org/jira/browse/XERCESJ-1265. Thanks to Ed Merks.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@571468 13f79535-47bb-0310-9956-ffa450edef68"
56eb44c073e742a0179721ac52b4bd3febfea7d4,"Updating the contributors FAQ.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@571977 13f79535-47bb-0310-9956-ffa450edef68"
564c760934c81f6b9bb49fda2682740b138ddcbf,"New source repository page. Copied from the Xerces-C and modified for Xerces-J.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@571987 13f79535-47bb-0310-9956-ffa450edef68"
9e60fa0a7076fc79e5a44d99556600603d190832,"Link to the new ""Source Repository"" page.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@571989 13f79535-47bb-0310-9956-ffa450edef68"
e0637b1ac4a9b4ccc22e80616c515b0b5d22ea60,"Marking a couple of fields final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@572037 13f79535-47bb-0310-9956-ffa450edef68"
dbe0d31c898c17ccee466ab594b83ed67628f15a,"Marking more fields final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@572040 13f79535-47bb-0310-9956-ffa450edef68"
0014b3ba5e251286b4e30b45c0b10274bc741a87,"Marking several fields final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@572045 13f79535-47bb-0310-9956-ffa450edef68"
8c53368d0522c139b881647187f5d8a7ebc50541,"Marking one field final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@572046 13f79535-47bb-0310-9956-ffa450edef68"
95c30c6b2f6ee4f9201bb8c0c8418ee3e6dfd99e,"Marking many fields final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@572055 13f79535-47bb-0310-9956-ffa450edef68"
2e2546c49fcf21145515c1f1bc6dbb76742ccd73,"Marking many fields final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@572057 13f79535-47bb-0310-9956-ffa450edef68"
646573168b741f6f732a39a81ac7a159ba1c4a4d,"Marking several fields final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@572061 13f79535-47bb-0310-9956-ffa450edef68"
a6bf9fe13d31473032f2701f4839d7a7fda61c14,"Marking a couple of fields final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@572086 13f79535-47bb-0310-9956-ffa450edef68"
0feace15b114b76644f5146cc72fdfecb7900b36,"Marking several fields final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@572095 13f79535-47bb-0310-9956-ffa450edef68"
3ba5f1a061eb8a0c3ea5157735e0b468967cfeab,"Marking several fields final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@572107 13f79535-47bb-0310-9956-ffa450edef68"
37b3d69991e2d63f81fee3543676fea82cf9ba80,"Marking several fields final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@572108 13f79535-47bb-0310-9956-ffa450edef68"
6d940563586216deca7829edf844906b1dca8009,"Marking several fields final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@572110 13f79535-47bb-0310-9956-ffa450edef68"
0f7584db6d3d3770d208fda80b0d35c9f90f9641,"Marking several fields final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@572112 13f79535-47bb-0310-9956-ffa450edef68"
a8373f8632b5eba6e54536618fc9873a7b8ef316,"For JIRA Issue 1267.  Build a smaller DFA for UPA processing by changing the min/maxOccurs values.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@573322 13f79535-47bb-0310-9956-ffa450edef68"
1fc416d779fc037cc0d380a10d67f267dd5c3cc7,"Fixing a bug. Should be passing the ""location"" parameter instead of ""fLocator"".
This was causing no location info to be reported for schema errors.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@575002 13f79535-47bb-0310-9956-ffa450edef68"
1fbea113b7a99c129653cda8322d04460aa89103,"Updating download links. The master distribution directory has changed from
www.apache.org/dist/xml/xerces-j/ to www.apache.org/dist/xerces/j/.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@575545 13f79535-47bb-0310-9956-ffa450edef68"
a014c937f59f6c69640dac9c84eb10eaeb445259,"Updating the release doc for Xerces-J 2.9.1.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@575805 13f79535-47bb-0310-9956-ffa450edef68"
11fe8eeceea19ea5ef5caff3d28ac197905c3d0b,"More updates to the release doc for Xerces-J 2.9.1.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@575813 13f79535-47bb-0310-9956-ffa450edef68"
6b70f798e74f3bf1682c28aadd9ccbc4d1b305e7,"Added a link to the UPA constraint in the XML Schema 1.0 specification.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@575814 13f79535-47bb-0310-9956-ffa450edef68"
e76ef1b33b284efc1dad2f7d8a3a3a4828102e2d,"Updating the changes section for Xerces-J 2.9.1.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@575829 13f79535-47bb-0310-9956-ffa450edef68"
87629c99d661b57d2836529e3de0f261bd04f7d3,"Commenting out an annotation test which appears to be bad.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@575830 13f79535-47bb-0310-9956-ffa450edef68"
7433dc531d6adf6b7df8f0459808e7c2e5370647,"Adding SVN properties.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@575864 13f79535-47bb-0310-9956-ffa450edef68"
432ed5820943533a1b2f9a802572f996dd4a461b,"Fixing a couple messages which were missing parentheses.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@578615 13f79535-47bb-0310-9956-ffa450edef68"
1471463ec1a3db6d4c12f0b33b326f97fe73bf57,"Performance: If not entity resolver has been registered avoid expanding the system identifier.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@578659 13f79535-47bb-0310-9956-ffa450edef68"
0591f8c0ebeaa0e44c6a51f6d9b0b915e0466a7a,"JIRA Issue #1451: http://issues.apache.org/jira/browse/XERCESJ-1451. Adding native support for UTF-16.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@581333 13f79535-47bb-0310-9956-ffa450edef68"
c8718883d213087198a08f084881691eb92d27d3,"A new UTF-16 test derived from the UTF-8 one.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@581336 13f79535-47bb-0310-9956-ffa450edef68"
0c7a38feed2755a3898f0bcbf3cca04d4b0f7afc,"Plugging the new UTF16Reader into the XInclude text reader and doing a bit of re-factoring.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@581481 13f79535-47bb-0310-9956-ffa450edef68"
5e3e244be2f7eacd1d744a9f51b90ea9157e7a70,"Plugging in the new UTF16Reader and doing quite a bit of re-factoring related to encoding handling.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@581487 13f79535-47bb-0310-9956-ffa450edef68"
fa54a1bcb70f4b962679c221c7d7c1b41b4935ec,"Need to ensure that the buffer we're passing to the UTF-16 Reader is large enough.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@581643 13f79535-47bb-0310-9956-ffa450edef68"
733fecf22c945f9a6e07e01355f2673e6fcabd98,"Adding a target for building the xjavac.jar file.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@581694 13f79535-47bb-0310-9956-ffa450edef68"
0841d7bd8e49617515e8f366ddeb8487378c97d3,"Updating XJavac task to support compilation on IBM J2SE 6.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@581707 13f79535-47bb-0310-9956-ffa450edef68"
71c2d92a1a9433e71873f7ab86da3ae81fd933ee,"Updating XJavac task to support compilation on IBM J2SE 6.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@581708 13f79535-47bb-0310-9956-ffa450edef68"
df556b4b76b572a992bf23b50e00304e2e0bbf45,"Fixing JIRA Bug #1229:
http://issues.apache.org/jira/browse/XERCESJ-1229


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@591452 13f79535-47bb-0310-9956-ffa450edef68"
660f48c44f45d77d7148684628379b7bdf949805,"Undo last commit.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@591453 13f79535-47bb-0310-9956-ffa450edef68"
488d3febc3624efc18a6718d70931c3e4565d300,"Fixing JIRA Bug #1278:
http://issues.apache.org/jira/browse/XERCESJ-1278

We were forgetting to assign an anonymous type name to the simple type definition
of a complex type derived by restriction from a complex type with simple content.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@591458 13f79535-47bb-0310-9956-ffa450edef68"
f8fff778252d05f07a75775da987ba33392b8980,"When reporting the error for the attribute call getTypeName() instead of getName().
The latter always returns null when the type is anonymous which isn't very useful
to be reporting in an error message.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@591460 13f79535-47bb-0310-9956-ffa450edef68"
5c528940fa8a8b4a7d87847de364711513cdbcea,"Fixing some obvious typos. 0xF7 (division symbol) -> 0x7F (DEL). The latter 
is actually a control character which needs to be written as a character
reference in XML 1.1.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@593274 13f79535-47bb-0310-9956-ffa450edef68"
ff27e70a869dad4629cf6d0421ad4aa00baa1088,"Fixing JIRA Bug #1280:
http://issues.apache.org/jira/browse/XERCESJ-1280

In the XPath scanner there's a large case block which is missing a ""default:"". This caused
it to loop forever on the same invalid character without ever progressing to the next one 
in the string (or breaking out of the loop if it's at the end of the string). Should be
fixed now.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@595205 13f79535-47bb-0310-9956-ffa450edef68"
7b962f44afb440df25a0e02de6cf1a933fbb8a70,"Synching up the French and Japanese translations of the regex error messages.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@595207 13f79535-47bb-0310-9956-ffa450edef68"
d5d07655115016fa4d5bf86acbb87a57d6ffe4de,"Adding the ASF license header to the message files. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@595211 13f79535-47bb-0310-9956-ffa450edef68"
6d056d80c31021691b05bb281bc206e44b1a3b75,"Adding the ASF license header to the message files. See http://www.apache.org/legal/src-headers.html.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@595212 13f79535-47bb-0310-9956-ffa450edef68"
41d9c028b89829ea38730904816c9007a5dcfbdd,"Adding SVN ""Id"" keyword.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@595214 13f79535-47bb-0310-9956-ffa450edef68"
48f90b7f63ce87a8df4c6d77d9f853e4d83876b2,"Use valueOf() instead of directly calling the BigInteger/BigDecimal constructors.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@597697 13f79535-47bb-0310-9956-ffa450edef68"
ef9964ffb6ebb1137c75d756d3638f5acf45fdf2,"testing commit

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@598399 13f79535-47bb-0310-9956-ffa450edef68"
28f0bec3b3302c2d754430e0000a97877705d94d,"Undo test commit.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@598427 13f79535-47bb-0310-9956-ffa450edef68"
8b3961946372f3c59e677d51fdeeafe5c6791b83,"Minor performance improvement. Use an (unsynchronized) 
ArrayList instead of Vector for collecting String chunks.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@603450 13f79535-47bb-0310-9956-ffa450edef68"
897b79c7ecf4a66a5d2bf3f8f94badd0628f52c1,"Minor performance improvement. Use an (unsynchronized) ArrayList
instead of Vector as the container for the nodes in the NodeList.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@603452 13f79535-47bb-0310-9956-ffa450edef68"
c915e29fc1acb040be35fba998c2dd96a0d50804,"Minor performance improvement. Use an (unsynchronized) ArrayList
instead of a Vector as the container for the strings in the DOMStringList.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@603454 13f79535-47bb-0310-9956-ffa450edef68"
6bd23efb5135a4f357040d60381dc6299fd5d090,"Fixing a possible IndexOutOfBoundsException which was introduced by the previous commit.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@603680 13f79535-47bb-0310-9956-ffa450edef68"
b7d7a82b0d7e69d95978ddd9bf2f817b363484d4,"Minor performance improvement. Use an (unsynchronized) ArrayList instead of 
a Vector as the container for the DOMImplementations in the DOMImplementationList.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@603686 13f79535-47bb-0310-9956-ffa450edef68"
69e218e42f857720e4c526f4397978e3ddb8a4fb,"Fixing JIRA Bug #1286:
http://issues.apache.org/jira/browse/XERCESJ-1286

YearDV was allowing xs:gYear values with fewer than four digits and also
lexical values with greater than four digits with a leading zero. We now
check for those conditions.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@603701 13f79535-47bb-0310-9956-ffa450edef68"
0328f80c18532c3d284a73cc11c0d43740cc6377,"Some clean-up and minor performance improvements. Replace usage of 
HashTables/Vectors with unsynchronized HashMaps/ArrayLists.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@603808 13f79535-47bb-0310-9956-ffa450edef68"
ba97e58bfff01607964f5dfe0b9e06163cef8b61,"Some clean-up and minor performance improvements. Replace 
the usage of HashTable with the unsynchronized HashMap.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@603813 13f79535-47bb-0310-9956-ffa450edef68"
c3e6e426b6fa6fc1350c0e4d003fa07d1438caa9,"Some minor performance improvements. Replace the 
usage of Hashtable with the unsynchronized HashMap.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@606480 13f79535-47bb-0310-9956-ffa450edef68"
ab875491fea2f3e3b5b203067d8fce25145b97c1,"Minor improvement to LargeContainer.toString().

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@606488 13f79535-47bb-0310-9956-ffa450edef68"
837a9d6a8f47ea8162216c4da78036204e9e9218,"Some minor performance improvements. Replace the 
usage of Vector with the unsynchronized ArrayList.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@606491 13f79535-47bb-0310-9956-ffa450edef68"
4c8b4534ca00d6df13ded77e96a02ca4430cf810,"Some minor performance improvements. Replace the usage of 
Hashtable & Vector with the unsynchronized HashMap & ArrayList.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@606513 13f79535-47bb-0310-9956-ffa450edef68"
685d161bd59464753ddbe50b81e73d9c1ca42249,"Removing a couple unused imports.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@606515 13f79535-47bb-0310-9956-ffa450edef68"
17565ac71844d4010b03bd16a1e31f073f3a2a0e,"Some minor performance improvements. Replace the 
usage of Vector with the unsynchronized ArrayList.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@606524 13f79535-47bb-0310-9956-ffa450edef68"
d9f6b57fdcff39f59bb362170bd3beb839bbdd01,"Some minor performance improvements. Replace the 
usage of Vector with the unsynchronized ArrayList.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@606543 13f79535-47bb-0310-9956-ffa450edef68"
076aa7fedd45cbf8a0a7d1e6721e0247cca6440e,"Updating the copyright year used in the API docs.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@608178 13f79535-47bb-0310-9956-ffa450edef68"
1c735482b91715a9a9ec60e4c65930a39e8654d6,"Updating the copyright year in the NOTICE file.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@608180 13f79535-47bb-0310-9956-ffa450edef68"
c17b11ea4ea4475205c46ee72b1b10b3cea25b87,"Updating the copyright year in the documentation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@608181 13f79535-47bb-0310-9956-ffa450edef68"
162bac7f51d8b1a4d2687621d298038b26e5b304,"Some minor performance improvements. Replace the 
usage of Vector with the unsynchronized ArrayList.
Note the changes for maintaining serialization
compatibility with older versions of Xerces. When 
serializing the NamedNodeMap we always write out a 
Vector. When deserializing we convert the Vector back
to an ArrayList.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@612590 13f79535-47bb-0310-9956-ffa450edef68"
7735795a662b6eb0527d2ae8d63b852202543dbf,"Cleaning up the implementation of SchemaDOMParser. We were creating two
instances of this class; one which just forwarded calls to SchemaParsingConfig
and another which did the actual work. We only create one instance now.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@614662 13f79535-47bb-0310-9956-ffa450edef68"
9b5bff06411746f229d5ef09b2aa930986417ffb,"Removing an unused field.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@614778 13f79535-47bb-0310-9956-ffa450edef68"
7bca7d07ef824f9386a53208da1ae9901002710a,"Fixing a typo. We should be setting minOccurs.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@615944 13f79535-47bb-0310-9956-ffa450edef68"
3a844b2cac8032ad5cc57be2eef8a2b22d211f56,"Fixing a potential IndexOutOfBoundsException. Need to be careful when the remaining
space left in the buffer is less than XMLEntityManager.DEFAULT_XMLDECL_BUFFER_SIZE.
Thanks to David Cargill for pointing this problem out.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@616011 13f79535-47bb-0310-9956-ffa450edef68"
dc6ff2d332171e2bd825a2f49f8538614ca1adfa,"Instead of using reflection call the methods on Locator2 
directly to retrieve the document's XML version and encoding.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@637425 13f79535-47bb-0310-9956-ffa450edef68"
19b7089e4b70ea802088e378736fd9f72eabc691,"Fixing a bug in the processing of the JAXP 1.2 ""http://java.sun.com/xml/jaxp/properties/schemaSource""
property. When the value specified is a java.io.File we need to make sure we set the system ID on the
XMLInputSource otherwise relative URIs in the schema may not resolve.

Note that the FilePathToURI code was borrowed from XML Commons.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@641940 13f79535-47bb-0310-9956-ffa450edef68"
7897d4b34bc91b8c53095b6b7bfd0dc1dd5ec498,"Fixing a bug in complex type traversal.

When the previous type T1 is derived by extension, and the next complex type T2 doesn't have restriction/extension (which should be viewed as restricting xs:anyType), then T2 is mistakenly marked as extension.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@644448 13f79535-47bb-0310-9956-ffa450edef68"
ba7898b39060234e9c88e9e06c0dd5fbed52a9fb,"Fixing a bug. We weren't reseting the NamespaceContext which can cause all sorts
of problems including the loss of some namespace decls on XSAnnotation components.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@644489 13f79535-47bb-0310-9956-ffa450edef68"
1c60c85204097007da7f5d1db957a95a0b8618a5,"If an application wants to clear a property they're out of luck unless
they use Java 5.0 or above (see System.clearProperty()). The closest
thing they can do is set the value to the empty string. Instead of
making a futile attempt to create an instance of a class named """" we
treat it as if it were null (i.e. cleared) and then move on to the
next step in the factory lookup.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@645208 13f79535-47bb-0310-9956-ffa450edef68"
15962bba4e81feef7a862d14b59f7548d8ec49d7,"If an application wants to clear a property they're out of luck unless
they use Java 5.0 or above (see System.clearProperty()). The closest
thing they can do is set the value to the empty string. Instead of
making a futile attempt to create an instance of a class named """" we
treat it as if it were null (i.e. cleared) and then move on to the
next step in the factory lookup.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@645211 13f79535-47bb-0310-9956-ffa450edef68"
1bb5667edeaf5b5dd2b8c7b4d4c567d30b3f6bb8,"Fields storing singleton instances of DOMImplementation should be final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@645327 13f79535-47bb-0310-9956-ffa450edef68"
10f2bb8c4785ec33d7b6e38f3a7d23b7a94b01e1,"Fixing the DOMImplementation class hierarchy. PSVIDocumentImpl extends DocumentImpl
so PSVIDOMImplementationImpl should extend DOMImplementationImpl. XSImplementationImpl
should extend the PSVIDOMImplementationImpl which supports all of the other DOM
features supported by Xerces-J.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@645331 13f79535-47bb-0310-9956-ffa450edef68"
c42ccb922c41d05656f508e63bbc5d93855eff4f,"Fixing JIRA Issue #1296:
http://issues.apache.org/jira/browse/XERCESJ-1296

It was possible for getBaseURI() called on namespace-aware Element nodes
to have an exponential execution time relative to the depth of the node.
This would occur when the Document node had no URI or one of the ancestors
had a a base URI which isn't valid. Thanks to Ludger Bnger for pointing
out this issue.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@645345 13f79535-47bb-0310-9956-ffa450edef68"
9ea763298991c5943f968ad6092614e0fefae753,"Performance: Reduce MalformedURIExceptions thrown while
resolving xml:base. The URI class previously only accepted
absolute URIs so at least one exception was always being
thrown for relative URIs.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@645355 13f79535-47bb-0310-9956-ffa450edef68"
264f54e5b5fe8885e3cdbff05f175579e67daef8,"Use correct terminology. character entity -> character reference.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@652131 13f79535-47bb-0310-9956-ffa450edef68"
35cebc1dc9b32fe1d2fd116404dceb564287488d,"Fixing a potential NPE.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@652698 13f79535-47bb-0310-9956-ffa450edef68"
15a922faa3789bfcaa71b9eec3bf300d8bd87b8e,"Fixing indentation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@654388 13f79535-47bb-0310-9956-ffa450edef68"
6c2b11dd6b304a1cde98460c88805d468fd34b6b,"Before returning control to the user, disconnect the validator and other
objects from the XMLReader. This keeps the user's application from mucking around
with the Validator's internal ValidatorHandler and may allow for better garbage
collection.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@654391 13f79535-47bb-0310-9956-ffa450edef68"
c93a1771ecd4dbaa606a8eb188a11effa756aa4f,"Before returning control to the user, disconnect the schema loader and other
objects from the XMLReader. This should allow for better garbage collection.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@654395 13f79535-47bb-0310-9956-ffa450edef68"
b4162085b2a4f4373c4793595c0771444c8345c4,"Before returning control to the user, disconnect the user's ContentHandler
from the SchemaGrammar's XMLReader. This should allow for better garbage 
collection.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@654399 13f79535-47bb-0310-9956-ffa450edef68"
a7f11a950560bd17b9cf2f0fcf02b526bcc1a4f1,"If the XSGrammarPool is empty or if an empty list is passed to the the XSLoader
return an XSModel which contains the built-in types instead of returning null.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@656090 13f79535-47bb-0310-9956-ffa450edef68"
79dd308b5ef6b6be61f0d81d49fcd4589ec3c912,"Added newSchema() method which allows an application to create a Schema from an XMLGrammarPool.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@656094 13f79535-47bb-0310-9956-ffa450edef68"
e5bd3e14128c8cb464709b4cf783d693992d52b3,"XSModel is immutable. Marking most of its fields final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@657719 13f79535-47bb-0310-9956-ffa450edef68"
efdfe97bea1ca09f924e3ded5247aa7854062a6f,"If the XSModel or SchemaGrammar has no annotations return 
the singleton empty list instead of creating a new one.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@657721 13f79535-47bb-0310-9956-ffa450edef68"
b90cd6a7e4ffaa17dcf04ec3d32ff5ca2a2a2bb3,"Fixing JIRA Issue #1308:
http://issues.apache.org/jira/browse/XERCESJ-1308

Somehow we forgot to implement XSObject.getNamespaceItem(). Should be complete and working now.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@658446 13f79535-47bb-0310-9956-ffa450edef68"
6c728ce421f8a3d252b51404b6344e558e889c5b,"Fixing JIRA Issue #1309:
http://issues.apache.org/jira/browse/XERCESJ-1309

For xs:anyType return an empty XSObjectList instead of null from XSComplexTypeDefinition.getAnnotations().
Also changed getAttributeUses() so that it returns a singleton instance of the XSObjectList instead of
creating a new one every time.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@658453 13f79535-47bb-0310-9956-ffa450edef68"
4960f2c0db9e084f856efba4565eec4e72f95ac3,"Making every field of this class final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@660068 13f79535-47bb-0310-9956-ffa450edef68"
50174a9c48d8129d99617c109f9f394539e9a9be,"Making every field of this class final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@660070 13f79535-47bb-0310-9956-ffa450edef68"
5244120e53fedc9701001a1bc9fe4d322038711b,"Making every field of this class private.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@660072 13f79535-47bb-0310-9956-ffa450edef68"
b241428226ff3221354d9c9a1f42abf25e8a14da,"Making the fValue field final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@660074 13f79535-47bb-0310-9956-ffa450edef68"
d161f24f159bf002ffbbfdd810251f5f0277162b,"Clean-up imports.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@660077 13f79535-47bb-0310-9956-ffa450edef68"
9cb8b1b94eda7e4917744d2c8541be4dcee69ad3,"Making the fType field final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@660079 13f79535-47bb-0310-9956-ffa450edef68"
f1b6ebe506479756568907c5608cd149da7ecc4c,"Miscellaneous code clean-up.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@660083 13f79535-47bb-0310-9956-ffa450edef68"
62b1271a4494b9ce7163b772c33e3042e2d19c3d,"Minor performance improvements. Return the same list instance each time
getNamespaces() and getNamespaceItems() is called instead of creating
a new one each time.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@660087 13f79535-47bb-0310-9956-ffa450edef68"
e1bf07399d3ae144115c77e9619338b865256bad,"Deleting a class which is no longer used by the XSModel implementation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@660089 13f79535-47bb-0310-9956-ffa450edef68"
3f2ce9b13deba160371f32dda74582092fef9932,"Reducing Xerces' static footprint. Only create the Schema4Annotations if it's needed.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@660095 13f79535-47bb-0310-9956-ffa450edef68"
7e6604e0851cc9138e9450dedbbd3c376e9131c2,"Organize imports.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@661560 13f79535-47bb-0310-9956-ffa450edef68"
c3c4d2a709b7c6f325b81be5a2c12a3ec79d9ca2,"Marking many fields final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@665968 13f79535-47bb-0310-9956-ffa450edef68"
8e69f9c5c77ce0fbfe2cdf9cf56f562a469c98d7,"Upgrade to Apache Ant 1.7.0.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@672560 13f79535-47bb-0310-9956-ffa450edef68"
2e30a4bc0d815535eeabc0a4c5043b568112dc8c,"Updating build.bat and build.sh for Ant 1.7.0.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@672594 13f79535-47bb-0310-9956-ffa450edef68"
8ce366ce9a20e7ffcb1dd37d0c4b5663d65b1f7d,"Miscellaneous code clean-up.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@674378 13f79535-47bb-0310-9956-ffa450edef68"
8d2be0af9853b99d9febd336a7c2d45ce2a605e6,"Fixing a bug in the construction of the simple type hierarchy. The base type of xs:negativeInteger is xs:nonPositiveInteger not xs:integer.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@676065 13f79535-47bb-0310-9956-ffa450edef68"
e661710368ad27d3bd5df2aab9b550a8a9970d40,"Adding .project and .classpath files for Eclipse.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@676463 13f79535-47bb-0310-9956-ffa450edef68"
69043f40d0fd01daa02511432a9b191d9d51326d,"Adding a template for new Java source files which automatically inserts the Apache license header.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@676468 13f79535-47bb-0310-9956-ffa450edef68"
105af65961bbf6dd775ac749869b55c4da518d82,"Code formatting style. Tabs should always be four spaces.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@676470 13f79535-47bb-0310-9956-ffa450edef68"
4e9daeab711ac5b8e362f5f783d059973eef7c87,"Upgrade to Apache Ant 1.7.1.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@676479 13f79535-47bb-0310-9956-ffa450edef68"
9585963258b1a4f85e5506af6d5caf1249a425fe,"Upgrading to xml-commons-external-1_4_01 (pre-release).

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@676485 13f79535-47bb-0310-9956-ffa450edef68"
b61b1d6eb775cef613b8a2b58f2dc98018d2cedc,"Marking an immutable field final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@677487 13f79535-47bb-0310-9956-ffa450edef68"
a1fde6bf0dbc9a17ec5d662cc54ebcba507af5bc,"Marking several more immutable fields as final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@677489 13f79535-47bb-0310-9956-ffa450edef68"
8238e86610c4136e4dfc02a0c3dcdfa8be22f4ac,"Fixing JIRA Issue #1323:
http://issues.apache.org/jira/browse/XERCESJ-1323

The conversion from XSDateTime to XMLGregorianCalendar was incorrect 
for fractional seconds and timezone. Should be fixed now.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@679888 13f79535-47bb-0310-9956-ffa450edef68"
ad54212dc1a43573570423bdda78de9f55335a85,"Eliminating a redundant call to String.indexOf().

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@680027 13f79535-47bb-0310-9956-ffa450edef68"
647c8a37cf31976d3d3de7fe219114b278845396,"Copying a StAX utility class on to the trunk from the stax-dev branch.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@683676 13f79535-47bb-0310-9956-ffa450edef68"
4da1e42d902b30854fe17b5a494c521e30f98052,"Copying a StAX utility class on to the trunk from the stax-dev branch.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@683678 13f79535-47bb-0310-9956-ffa450edef68"
6b22869ba6d2bc686c32186533bbb4003d41cb79,"JIRA Issue #1314:
https://issues.apache.org/jira/browse/XERCESJ-1314

For JAXP 1.4, adding support for StAXSource/StAXResult as an input/output 
to the JAXP Validator. From the perspective of the Validator component
this is just another ValidatorHelper implementation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@683688 13f79535-47bb-0310-9956-ffa450edef68"
79c24d4201b3248d4c3683a0409002dd6a98fe83,"JIRA Issue #1316:
http://issues.apache.org/jira/browse/XERCESJ-1316

JAXP 1.4 now allows applications to call getElementTypeInfo() during an endElement() 
callback. Modifying the implementation of TypeInfoProvider to allow it.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@683837 13f79535-47bb-0310-9956-ffa450edef68"
59f121b96642d49639e9d3fe229dbb9b92631441,"JIRA Issue #1315:
http://issues.apache.org/jira/browse/XERCESJ-1315

As per the JAXP 1.4 specification support StreamResult as an 
output to the JAXP Validator. Using the deprecated Xerces SAX
serializer for now.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@683849 13f79535-47bb-0310-9956-ffa450edef68"
a80e4ad133760417ef0b28c778f13de3444cb34c,"JIRA Issue #1313:
http://issues.apache.org/jira/browse/XERCESJ-1313

Adding support for construction of a Schema DOM from a StAXSource. 
Still need to hook this up to the XSDHandler.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@684021 13f79535-47bb-0310-9956-ffa450edef68"
5cad124a20feef6eda3e59a9b5b7ce06b2e0a99f,"When ID/IDREF/ENTITY rules are checked against a list value, we temporarily hijack the ValidatedInfo object for the list value and use it for individual items in the list. We then restore it back to the original state.

This doesn't work when one of the items is invalid and an exception is thrown, because the ValidatedInfo would contain information for the bad item, as opposed to the list.

Fixed by adding a try-finally block to always restore the ValidatedInfo to the ""list value"" sate.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@693264 13f79535-47bb-0310-9956-ffa450edef68"
796f0511e8bc27fd8aa0c0b0e7ce208b4af6f1f8,"Fixing a potential NPE. The Javadoc for XMLGrammarPool.retrieveInitialGrammarSet() doesn't
explicitly disallow null as a return value. It's possible that some user implementations will
return null.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@693486 13f79535-47bb-0310-9956-ffa450edef68"
ad0481a7a1fb65d57faeb324ff2f6ee6143d2186,"Fixing a potential NPE. The Javadoc for XMLGrammarPool.retrieveInitialGrammarSet() doesn't
explicitly disallow null as a return value. It's possible that some user implementations will
return null.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@693488 13f79535-47bb-0310-9956-ffa450edef68"
9b657be45a0a63bcdefe5764469dff3835ac6c8f,"JIRA Issue #1313:
http://issues.apache.org/jira/browse/XERCESJ-1313

Completed support for schema loading from a StAX source.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@693496 13f79535-47bb-0310-9956-ffa450edef68"
d03a1c0fd438caa15b3ca82cca07aac39cebc998,"Fixing a bug. When the schema loader is provided with StAX input the annotation
strings in the XSModel were all missing namespace declarations on the root of
the document fragment. Need to report the prefixes to the NamespaceContext and
return them from getAllPrefixes().

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@694381 13f79535-47bb-0310-9956-ffa450edef68"
27739cd12513156a1f118d4ee9c23ff98f731b81,"Fixing a potential NPE.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@694593 13f79535-47bb-0310-9956-ffa450edef68"
1e03fad5198adb992802518da00a22178e87fc66,"JIRA Issue #1298:
http://issues.apache.org/jira/browse/XERCESJ-1298

Store user data in a WeakHashMap to allow it and the node associated with it
to be garbage collected if no other references exist for the node. Thanks to
Ludger Bnger for the patch. I made a few modifications and added readObject(),
writeObject() methods to preserve object serialization compatibility with
previous versions of Xerces.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@695558 13f79535-47bb-0310-9956-ffa450edef68"
669bf72f33f97eca18257e1144cd396979cfd8c7,"Added a flag to StAXInputSource which when set to true instructs the
consumer to consume all of the remaining events in the stream, even
if the current position is at the root of a subtree. This allows the
application to forget about XMLStreamReaders / XMLEventReaders it never
cares to read again after the event consumer completes its task without
sacrificing any resource recycling the StAX implementation may do once
the end of the input has been reached.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@696447 13f79535-47bb-0310-9956-ffa450edef68"
413a393f0eaf740c87948928cb4c547c0552826c,"Disallow null values for the XMLStreamReader / XMLEventReader constructor parameters.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@696457 13f79535-47bb-0310-9956-ffa450edef68"
4be14a05ac38b88f608035e6e9170a6f8ed0b492,"Adding a class which allows one to extend or modify the behaviour of an existing XSSimpleType.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@696944 13f79535-47bb-0310-9956-ffa450edef68"
b94c3deb3389f60b269ef3124bae71f82604cae0,"Delegation for toString().

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@697210 13f79535-47bb-0310-9956-ffa450edef68"
d015ee9e63c5b8902eabdca6965cb6a3b15b6dc8,"Fixing a typo.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@697443 13f79535-47bb-0310-9956-ffa450edef68"
ff512d3f05afa4fd6560a04f0be0eb33ed2d34b4,"Return true for each of the JAXP Source features to indicate
to the caller of getFeature() that this SchemaFactory supports 
all of the built-in JAXP Source types.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@699688 13f79535-47bb-0310-9956-ffa450edef68"
433ea76fad702cdb60396511c500d69d49a23a2c,"Return true for each of the JAXP Source/Result features to indicate
to the caller of getFeature() that this Validator supports all of 
the built-in JAXP Source/Result types.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@699694 13f79535-47bb-0310-9956-ffa450edef68"
13e9def7173232c0d9386c3eabfe8e5267322687,"Include an error message in each of the NPEs thrown for a null feature/property name parameter.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@699701 13f79535-47bb-0310-9956-ffa450edef68"
d5ad0f70a6aebfbbc76135ee04d2fa343c87c06d,"Fixing several instances of the same bug. We were throwing a 
SAXNotRecognizedException where a SAXNotSupportedException 
should be thrown.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@699706 13f79535-47bb-0310-9956-ffa450edef68"
497ffc05f374b8c1d00f186e83c316c77b53ab17,"Marking many fields final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@699763 13f79535-47bb-0310-9956-ffa450edef68"
62960fd4168a773eb3028f933d3498ae09450086,"Reorganized / cleaned up imports using Eclipse.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@699892 13f79535-47bb-0310-9956-ffa450edef68"
724817ec396a209f69d329201152e4373ebec39b,"Reorganized / cleaned up imports using Eclipse.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@699895 13f79535-47bb-0310-9956-ffa450edef68"
c4c71b447bc3c31ace0e6d1dd7e8a0a604f3e727,"Reorganized / cleaned up imports using Eclipse.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@699896 13f79535-47bb-0310-9956-ffa450edef68"
6b1657fa3dda8aca7215ef07922f0cb5ce696277,"Allow applications to set a SecurityManager on the
DOMConfiguration to protect against DoS attacks.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@699918 13f79535-47bb-0310-9956-ffa450edef68"
aff5fcdcf3dfed3cf250042f24ef4e8cb4d83a9e,"Factored out DOMException handling to eliminate a lot of duplicate code.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@699921 13f79535-47bb-0310-9956-ffa450edef68"
78f2e07a42494bdcb6122c6bf4746eaf6ca3e741,"Factored out DOMException handling to eliminate a lot of duplicate code.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@699978 13f79535-47bb-0310-9956-ffa450edef68"
8e3c34c9881da5bd666069646a96a52780a52244,"Eliminating an unnecessary field. There's no value in caching 
the list that is used in setParameter() for collecting schema
locations. Most sensibly written applications will configure 
the parser only once, in which case this list would be used at 
most once.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@699980 13f79535-47bb-0310-9956-ffa450edef68"
cb6d240b6a714067a4f1357f37349f3aa633d842,"Marking many fields final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@699985 13f79535-47bb-0310-9956-ffa450edef68"
3ed8b215a3222e1dda9027690ae12d51388f60b6,"Eliminating a couple unused fields.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@699987 13f79535-47bb-0310-9956-ffa450edef68"
fc654f74bc424a8ba052abf0039cccc29ca123a9,"Removing ""synchronized"" from the toString() method. The threading issue that it
was added to address was eliminated years ago.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@701915 13f79535-47bb-0310-9956-ffa450edef68"
487c975517bab9a6afd856c51911fc460841b9d9,"Updating to the latest level of xml-commons-external-1.4.01.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@701919 13f79535-47bb-0310-9956-ffa450edef68"
6444ae507a0fc5cb56fbbf918137c2c302ccd841,"Fixing SVN properties.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@702311 13f79535-47bb-0310-9956-ffa450edef68"
ccfb771e942508e47dcfa44079d3db58a8acdba8,"Use a HashMap for the reversedIdentifiers table. There's no need for the synchronized Hashtable here.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@704305 13f79535-47bb-0310-9956-ffa450edef68"
5d041b44bcc6021133f3b9ddd9bf3b0c8f073d3e,"Minor performance improvement. Iterate over the entries in the map instead 
of the keys. This avoids a redundant table lookup for each value.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@704534 13f79535-47bb-0310-9956-ffa450edef68"
4990982a6448fc7300d1d6b2815ccb6063de2f3e,"Minor performance improvement. Iterate over the entries in the map instead 
of the keys. This avoids a redundant table lookup for each value.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@704542 13f79535-47bb-0310-9956-ffa450edef68"
9ae5260b67361b8358633261ae685a62cb5018aa,"Minor performance improvement. Iterate over the entries in the map instead 
of the keys. This avoids a redundant table lookup for each value.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@704573 13f79535-47bb-0310-9956-ffa450edef68"
4ecb783f29148935624a2424cc33f99a9ff7d10a,"Minor performance improvement. Iterate over the entries in the map instead 
of the keys. This avoids a redundant table lookup for each value.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@704619 13f79535-47bb-0310-9956-ffa450edef68"
456dc67c642e46312c1a4b0cb5cd2862af8af10b,"Minor performance improvement. Iterate over the entries in the map instead 
of the keys. This avoids a redundant table lookup for each value.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@704758 13f79535-47bb-0310-9956-ffa450edef68"
0c969b8597d361b7c580e1f5816967d533a36884,"Improving debug info exposed by XSDocumentInfo. toString() now returns the targetNamespace and the schemaLocation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@705370 13f79535-47bb-0310-9956-ffa450edef68"
0ad6a16ca5aea6b0277ae6be232b8589f2387ae6,"Minor enhancements to the Schema DOM implementation to make it easier to debug.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@705596 13f79535-47bb-0310-9956-ffa450edef68"
844f85d9d87e741e418fadbfc822058542b56741,"Fixing JIRA Issue #1334:
http://issues.apache.org/jira/browse/XERCESJ-1334

If the name of element in the document below the root element happens to be match the
name of the root element we were not passing this node to the acceptNode() method of
an LSParserFilter. This was occurring because we were doing the check based on the name
of the node instead of identity with the root element object. This is fixed now thanks
to the patch from Arthur De Magalhaes.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@709530 13f79535-47bb-0310-9956-ffa450edef68"
62eeb5009c6d513d514330a14417cf2f710c4ee1,"Fixing JIRA Issue #1335:
http://issues.apache.org/jira/browse/XERCESJ-1335

With an LSParserFilter, the rejection and skipping of nodes on startElement() malfunctioned 
if an element in the subtree has the same name as the filtered node. This occurred because 
the DOM parser used the name of the element to determine when it had reached the end of the 
subtree. So that recursive structures are processed correctly we now use the element's depth.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@709932 13f79535-47bb-0310-9956-ffa450edef68"
fba49d598d3d312192901708515e080fbf3679be,"Class loading improvements. Avoid loading Abort and AbortHandler unless they're actually needed.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@709940 13f79535-47bb-0310-9956-ffa450edef68"
29072f5a3c7c9ac77132662526330e182b7aa05f,"Updating the JAR manifest to reflect that v1.4.01 of xml-commons external is now in use.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@709965 13f79535-47bb-0310-9956-ffa450edef68"
ee55caf9c610907f6b30dca2aa7a99bca5cddd6e,"Protect against NPEs and other failures which could occur
if the application sets the LSParserFilter to null in the
middle of a parse.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@710002 13f79535-47bb-0310-9956-ffa450edef68"
e90021b0bd35451f27e6afb06f0790ee4b97076a,"JIRA Issue #1317:
http://issues.apache.org/jira/browse/XERCESJ-1317

Adding an option to select StAX as the input to the JAXP validator.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@710004 13f79535-47bb-0310-9956-ffa450edef68"
2411c49404fdf749b106b6e396bfefb5aabcdc0e,"Minor performance improvement. If the XMLStreamReader returns true
for the ""javax.xml.stream.isInterning"" property avoid adding strings
to the SymbolTable where possible.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@710008 13f79535-47bb-0310-9956-ffa450edef68"
8ad1e29c8ac5068bae1cba26b7e2e33f4277e907,"Enable reporting of column and line numbers in XMLStreamReaders which support it.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@710010 13f79535-47bb-0310-9956-ffa450edef68"
422a64c5ab31a1e749e761e1e25102cdb3753799,"Fixing a bug. We cannot cache the Location object from the start document event.
To get the correct line and column numbers it needs to be read at the point where
the error occurs. To handle this introduced a wrapper around the XMLStreamReader
which reads the Location from the reader on demand.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@710087 13f79535-47bb-0310-9956-ffa450edef68"
d043cbe09f221667fff833e2d64b18fda69bbae9,"Add support for QT types

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@710089 13f79535-47bb-0310-9956-ffa450edef68"
41d9f998caf761f39d883a2f65f5cc6f2c326b73,"When normalizing a String object to upper- or lower case one needs to be very careful not to rely on the default locale of the platform. This results from the fact that Turkish in particular does not map characters to their upper- or lower case equivalents in English. Now, everywhere where this could pose a problem, we force case conversion to be done according to an English locale.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@712351 13f79535-47bb-0310-9956-ffa450edef68"
7517100aff7617b4ff865dd5d396bb07684dd3ea,"JIRA Issue #1336:
http://issues.apache.org/jira/browse/XERCESJ-1336

Adding support for a property (http://apache.org/xml/properties/locale) 
for configuring the locale used for reporting errors in the parser,
schema validator and other components.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@713638 13f79535-47bb-0310-9956-ffa450edef68"
c940d2e0a67039fd4c7de9f024c03e4e9fabee14,"JIRA Issue #1337:
http://issues.apache.org/jira/browse/XERCESJ-1337

Support XSTypeDefinition as a value of the ""root-type-definition"" property.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@717982 13f79535-47bb-0310-9956-ffa450edef68"
504dd511e0773768fed67ebcf0fe068c27bc8606,"Making several classes final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@718095 13f79535-47bb-0310-9956-ffa450edef68"
fee8d1e7ac283c85becd11b50c6e18f3d80f5668,"JIRA Issue #1338:
http://issues.apache.org/jira/browse/XERCESJ-1338

Implementation of the ""root-element-declaration"" property. It allows the user to specify the element 
declaration to use for validating the validation root (not necessarily the root element of the document).
Its value must either be a javax.xml.namespace.QName or a org.apache.xerces.xs.XSElementDeclaration.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@718172 13f79535-47bb-0310-9956-ffa450edef68"
923bca30f0b431d1a323928fd3a416c037d89d42,"Fixing a bug. ItemPSVI is supposed to return ""an empty StringList if no 
errors occurred during the validation attempt"". It was returning null.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@718480 13f79535-47bb-0310-9956-ffa450edef68"
740fe9056e3264c5e4fb071c22d293ec5be109e3,"JIRA Issue #1339:
http://issues.apache.org/jira/browse/XERCESJ-1339

Added the getErrorMessages() method to ItemPSVI and completed its implementation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@718856 13f79535-47bb-0310-9956-ffa450edef68"
3bee6f5c15957ec35bd4b4fe4a72e5595bad5764,"When executing the (x)javac task explicitly specify the source and target level.
Both of these values will be equal to the java version used for invoking Ant.
Previously we were relying on default values; target was 1.1 for JDK 1.3 and
1.2 for JDK 1.4.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@719475 13f79535-47bb-0310-9956-ffa450edef68"
80a7c2d97e6b40a6d1eed0289f4cbf308af51063,"Fixing a bug. The Location must be set on the StAXLocationWrapper
before calling startDocument() otherwise the document URI on the
Schema DOM will not be set.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@719878 13f79535-47bb-0310-9956-ffa450edef68"
1a6b1dd88521c5dc1285480c96981da477084335,"Should only be trimming XML spaces off of an
attribute value. Use XMLChar.trim() instead 
of String.trim().

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@719880 13f79535-47bb-0310-9956-ffa450edef68"
f42be9cb9570155311b1d56281088c53d4023833,"Fixing JIRA Issues #1183 & #1340:
http://issues.apache.org/jira/browse/XERCESJ-1183
http://issues.apache.org/jira/browse/XERCESJ-1340

Some important code was missing from the paths taken when loading a schema
from a SAX, DOM or StAX source. I've made the behaviour consistent for all
types of sources. Also did some refactoring to reduce the amount of code
duplication. For non-stream sources the base URI should be getting set
correctly and there should no longer be any errors reported for circular 
includes/imports.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@720110 13f79535-47bb-0310-9956-ffa450edef68"
0e7ae145f7d5d7c4d3185a8ac61d23ca7366e112,"Fixing a bug in the support for the ""honour-all-schemaLocations"" feature. Before processing
additional imports for the same namespace we check if we have already loaded the schema
document pointed to by the schemaLocation. If we have we do not load it again. Unfortunately
this didn't work because we were never setting the literal system identifier on the grammar
description.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@720256 13f79535-47bb-0310-9956-ffa450edef68"
2e89fd2198ef05fb8c8ea75c746b43a6ededc5ca,"Adding a flag to control the mutability of SchemaGrammars.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@720408 13f79535-47bb-0310-9956-ffa450edef68"
3e75fdc058da5b3186fb956400b05bb59cd99362,"JIRA Issue #1343:
http://issues.apache.org/jira/browse/XERCESJ-1343

Remove unused code. Patch thanks to Dave Brosius.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@721960 13f79535-47bb-0310-9956-ffa450edef68"
bf9add43cef544cd683a75f90945d7b393df5ea3,"Adding documentation for the ""http://apache.org/xml/properties/locale"" property.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@721966 13f79535-47bb-0310-9956-ffa450edef68"
4c9ee3ea9b154b1953b97b795d8223d14915e28a,"Documentation for the ""root-element-declaration"" and ""root-type-definition"" properties.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@721978 13f79535-47bb-0310-9956-ffa450edef68"
dbe676611e8e52978db7b8bd2d34d3b4acddc0cd,"JIRA Issue #1297:
http://issues.apache.org/jira/browse/XERCESJ-1297

Updating .classpath so that Java 1.3 is automatically selected 
as the execution environment. Thanks to Ludger Bnger for the idea.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@724078 13f79535-47bb-0310-9956-ffa450edef68"
67c63b1ebfd086b3d206e6cc5b42e32d0674daa1,"Removing an unnecessary cast.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@724081 13f79535-47bb-0310-9956-ffa450edef68"
cf338446176c8b1994580fec4b12a5f12ad89fa6,"JIRA Issue #1297:
http://issues.apache.org/jira/browse/XERCESJ-1297

Updating the FAQs to reflect that we've dropped support for JDK 1.2.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@724085 13f79535-47bb-0310-9956-ffa450edef68"
f13e2920744236a56d78af70e7e86641f0c910df,"Now that we've moved to JDK 1.3 call setInstanceFollowRedirects() directly instead of through reflection.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@724088 13f79535-47bb-0310-9956-ffa450edef68"
57436791b295f23796411cd7fc6c4343fc6d2d6b,"The 'root-element-declaration' property has higher precedence 
than the 'root-type-definition' property. If both are set the
specified element declaration should be used.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@724199 13f79535-47bb-0310-9956-ffa450edef68"
1309d9c4fcc00e78a39a5cb01799b4ad0d84471a,"Report an error if the name of the root element does not match the name of the specified root element declaration.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@724223 13f79535-47bb-0310-9956-ffa450edef68"
f32de30f917c28f6cac4e3fb3ec34603979fda41,"JIRA Issue #1318:
http://issues.apache.org/jira/browse/XERCESJ-1318

Updating the documentation for JAXP 1.4.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@724245 13f79535-47bb-0310-9956-ffa450edef68"
cd7f2adaf193704f9418487dcfd42784d9e8fec9,"* Removed some commented out markup.
* Updated revalidation description. In memory validation against DTDs is supported too.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@724251 13f79535-47bb-0310-9956-ffa450edef68"
9aa17621196e1194b70e9e84a5a9ca3dca3c321c,"In anticipation of the next release bump the version in build.xml up to 2.10.0.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@724257 13f79535-47bb-0310-9956-ffa450edef68"
1f8eaeb0daf7e10dcbd04c6d71a51f2a8afa4735,"As a consequence of our choice to design XSModel in IDL instead of Java we ended
up creating many list type interfaces. If we had started this work in Java we
would have used java.util.List instead, an interface which is built into the Java
class library that has first class support in the Collections API and is used by
countless applications. When we revisit the XSModel for XML Schema 1.1 we should
retrofit java.util.List everywhere in the API where we are returning the XSModel
specific list types. In anticipation of this change I've updated each of the
list implementations so that they now implement java.util.List. This will make it
easier to update the API when the time comes.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@725840 13f79535-47bb-0310-9956-ffa450edef68"
adc159bc9dfef6dcfbe861388cf2065fdefc0fa8,"As a consequence of our choice to design XSModel in IDL instead of Java we ended
up creating many list type interfaces. If we had started this work in Java we
would have used java.util.List instead, an interface which is built into the Java
class library that has first class support in the Collections API and is used by
countless applications. When we revisit the XSModel for XML Schema 1.1 we should
retrofit java.util.List everywhere in the API where we are returning the XSModel
specific list types. In anticipation of this change I've updated each of the
list implementations so that they now implement java.util.List. This will make it
easier to update the API when the time comes.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@726308 13f79535-47bb-0310-9956-ffa450edef68"
62b96841564fcfa86efdc641161ad16dcf07f6d0,"As a consequence of our choice to design XSModel in IDL instead of Java we ended
up creating many list type interfaces. If we had started this work in Java we
would have used java.util.List instead, an interface which is built into the Java
class library that has first class support in the Collections API and is used by
countless applications. When we revisit the XSModel for XML Schema 1.1 we should
retrofit java.util.List everywhere in the API where we are returning the XSModel
specific list types. In anticipation of this change I've updated each of the
list implementations so that they now implement java.util.List. This will make it
easier to update the API when the time comes.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@726313 13f79535-47bb-0310-9956-ffa450edef68"
44f3524f364ef2497b71421612052f94bcba4dfd,"Removing an unused field and marking a few others final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@726317 13f79535-47bb-0310-9956-ffa450edef68"
c912c3d02bda218769d6d10e8f01076d455c7543,"Fixing JIRA Issue #1348:
http://issues.apache.org/jira/browse/XERCESJ-1348

itemByName() could fail with an NPE. We need to check that 
the SymbolHash returned a non-null value before checking 
whether the type categories match.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@726359 13f79535-47bb-0310-9956-ffa450edef68"
1164f31e0c0a2fd8f04ba0a25d0cd7fa3a162adb,"As a consequence of our choice to design XSModel in IDL instead of Java we ended
up creating XSNamedMap. If we had started this work in Java we would have used 
java.util.Map instead, an interface which is built into the Java class library 
that has first class support in the Collections API and is used by countless 
applications. When we revisit the XSModel for XML Schema 1.1 we should
retrofit java.util.Map everywhere into the API where we are returning XSNamedMap.
In anticipation of this change I've updated the XSNamedMap implementation so that
it now also implements java.util.Map. This will make it easier to update the API 
when the time comes.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@726362 13f79535-47bb-0310-9956-ffa450edef68"
411d9737b5513b27a1d24956f31c734f070daae1,"Created an implementation of LSInputList.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@726370 13f79535-47bb-0310-9956-ffa450edef68"
36b17f345892123537a2588de75b51e6f8093f1d,"Marking LSInputListImpl final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@726372 13f79535-47bb-0310-9956-ffa450edef68"
5fbadcf90f0ebf28fbe5de98bc156cc4fdfc9ed3,"Added utility methods for creating StringLists and LSInputLists. Hope we
can add these to the XSImplementation interface to make it easier for users
to create instances of these lists.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@726375 13f79535-47bb-0310-9956-ffa450edef68"
a688045def8cde55a45c0eb754ebca887addbb00,"Updating to the latest level of xml-commons-external-1.4.01.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@727384 13f79535-47bb-0310-9956-ffa450edef68"
fffb7f51085c4feb632ac9efc6f39ded3e71815e,"JIRA Issue #1354:
http://issues.apache.org/jira/browse/XERCESJ-1354

Use ""-Xbootclasspath/p:"" for setting up the classpath for tests. This makes it easier
to run the tests on JDK 1.4.2 and above. Patch thanks to Nathan Beyer.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@729356 13f79535-47bb-0310-9956-ffa450edef68"
29d518bcadf2519391a7aca00e801a050be1e8c0,"Fixing javadoc warnings for org.w3c.dom.views.* plus some other minor tweaks.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730046 13f79535-47bb-0310-9956-ffa450edef68"
f3cb2159125c343e90b1bf372490da4a1ad52823,"Adding org.w3c.dom.views.* to the API docs.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730049 13f79535-47bb-0310-9956-ffa450edef68"
9bd99c27580e97a35d0a20a702fb4c9c03b091c4,"JIRA Issue #1353:
http://issues.apache.org/jira/browse/XERCESJ-1353

Complete implementation of the Element Traversal specification.
Note that ElementImpl doesn't actually implement the ElementTraversal
interface yet. This still needs to be added to xml-apis.jar.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730053 13f79535-47bb-0310-9956-ffa450edef68"
8210a2f6a6bbe337ae8df9bf036f6ae46bab158f,"Creating package for StAX implementation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730057 13f79535-47bb-0310-9956-ffa450edef68"
bb9b0f253d73dc475200c6dcf1f98db4dd957ece,"Copying event implementation in from the stax-dev branch.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730058 13f79535-47bb-0310-9956-ffa450edef68"
0617cce57bef4a846c40fb71389e45053c75277b,"Copying event implementation in from the stax-dev branch.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730060 13f79535-47bb-0310-9956-ffa450edef68"
f3531818ae8e26d726e69069fc1d205840a3e20a,"Copying event implementation in from the stax-dev branch.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730061 13f79535-47bb-0310-9956-ffa450edef68"
54dcfe782a12b2210623b1b7e46a2c8cadcb8e56,"Making ElementTraversal implementation methods final plus some other minor tweaks.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730208 13f79535-47bb-0310-9956-ffa450edef68"
312623651760aa79b4acaf21949130b036be902d,"Remove schemaType field. I doubt we need this any time soon and if we ever do we can add it back.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730238 13f79535-47bb-0310-9956-ffa450edef68"
ffa910c7ff847d5bb8e1ba04b683ae2639281629,"Making many classes and methods final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730242 13f79535-47bb-0310-9956-ffa450edef68"
39f2b944df6bc3406245ae35069e78a2d084932e,"Adding org.apache.xerces.stax.* to the API docs.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730253 13f79535-47bb-0310-9956-ffa450edef68"
c8012e2cdab8dac0a21f2ac70d59af6ab0e61978,"Marking many classes as @xerces.internal.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730256 13f79535-47bb-0310-9956-ffa450edef68"
0f9124403b6d3f138dad06fa29c055b7c607c433,"Lots of work on the StAX events, including an implementation of XMLEventFactory.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730315 13f79535-47bb-0310-9956-ffa450edef68"
fa2d525e06bb8e8e752b26afc0e059b7032a2a46,"Adding SVN properties.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730316 13f79535-47bb-0310-9956-ffa450edef68"
78ea88600adafb47862de4cfbdbe566bf2bc9b9c,"Updating to the latest level of xml-commons-external-1.4.01.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730323 13f79535-47bb-0310-9956-ffa450edef68"
327662f975d946c09b24f0d27bad549a3b514830,"Copying Location implementation in from the stax-dev branch.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730444 13f79535-47bb-0310-9956-ffa450edef68"
e6213aa8f36dcd9b60f41dd674ee5adf06f05d1c,"Copying Location implementation in from the stax-dev branch.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730445 13f79535-47bb-0310-9956-ffa450edef68"
a32ac793bbdf17b53efa17449a54151eb7471467,"Copy the Location passed in if non-null and ensure that the events always return a non-null Location.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730453 13f79535-47bb-0310-9956-ffa450edef68"
1897b7d6b96f5de878a7315c152acd3b1f27b602,"Adding a toString() method for debugging purposes. Just calls writeAsEncodedUnicode().

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730458 13f79535-47bb-0310-9956-ffa450edef68"
301740e64b571ba153df5dbbdb5027b7b2231c56,"Implementation of writeAsEncodedUnicode().

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730471 13f79535-47bb-0310-9956-ffa450edef68"
f69153c238265b37dc42878e9ad412fa07c84bef,"Fixing a bug. The QName created for the default namespace was incorrect.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730474 13f79535-47bb-0310-9956-ffa450edef68"
c090122c656568e57e75ceab940c4965c83913f0,"More fixes and improvements for the Namespace event.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730477 13f79535-47bb-0310-9956-ffa450edef68"
eaad3fad23e7fc09551692050b1e5ccfc53eca95,"Copying DefaultNamespaceContext in from the stax-dev branch.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730482 13f79535-47bb-0310-9956-ffa450edef68"
251bb254a8eecd64f3eed7affd3e6e879f4c5c07,"Updating the copyright year used in the API docs.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730576 13f79535-47bb-0310-9956-ffa450edef68"
4c14f542993a1c8fe0badf60081c42dd24628a4f,"Updating the copyright year in the NOTICE file.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730578 13f79535-47bb-0310-9956-ffa450edef68"
0c892562c777e6e6a04c678d634c0fe7275ac9bb,"Updating the copyright year in the documentation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730582 13f79535-47bb-0310-9956-ffa450edef68"
eadfb0e065586f381c03d4ffa91c6c23fa96958c,"Making DefaultNamespaceContext final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730672 13f79535-47bb-0310-9956-ffa450edef68"
347b7d7c82a99e9eee1d2e0783ff8ddfda548615,"Ensure that the NamespaceContext returned from a StartElement event is never null.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730675 13f79535-47bb-0310-9956-ffa450edef68"
a357277b8e6b5ee2af77f9e2591612ed8702e8a3,"Reducing object allocation and eliminating mutation methods.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730796 13f79535-47bb-0310-9956-ffa450edef68"
1cfc8e1f87966daaa690f69396061e38a698d61c,"Adding META-INF/services/javax.xml.stream.XMLEventFactory to xercesImpl.jar.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@730812 13f79535-47bb-0310-9956-ffa450edef68"
e5ca6b83313078f412708cf2b96f360a74709fc9,"Updating the W3C Software Notice and License to the one which the DOM Level 3 bindings
(http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/java-binding.zip) are distributed
with.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@734321 13f79535-47bb-0310-9956-ffa450edef68"
5479432209e6f0b71a605dc5266eea099820a08f,"Fixing an NPE that occurs when the Locale is set to null.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@734425 13f79535-47bb-0310-9956-ffa450edef68"
97aa81a2407111e52d4734374ecca668d85e1671,"Fixing an NPE in complex type restriction involving <redefine>.

If a redefining schema document has the following group redefinition in <redefine>:

  <xsd:group name=""gp"">
    <xsd:annotation/>
  </xsd:group>

We will store ""null"" as the value of the model group in the global model group definition. When this group is checked against the one being redefined, we try to make use of this ""null"" field and get NPE.

The fix is to change the derivation checking code to check whether the field is null. If it's null, then treat it as empty.

A TODO is also added asking whether it's better to not store ""null"" in the above error situation, and store, say, an empty sequence instead.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@734519 13f79535-47bb-0310-9956-ffa450edef68"
2c9d89b9ed36c40bc51ddbda654d2ecf00a4b3a1,"Fixing a bug. '24' is a valid value for the hour field, provided that
the minute and second fields are '0'. Both the XML Schema specification
and JAXP allows this.


git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@735389 13f79535-47bb-0310-9956-ffa450edef68"
2f386b48420fa651f42dd5db2a43a3dbaf86e6d3,"Need to supply a default ValidationContext when facets are applied on simple types.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@742721 13f79535-47bb-0310-9956-ffa450edef68"
fe0b9bf413b461e22944d9299dd0704cf25e2ea3,"Updating to the latest level of xml-commons-external-1.4.01.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@744806 13f79535-47bb-0310-9956-ffa450edef68"
12bb26f539b9ad23a2cf3f5bf657fb47fbf72180,"JIRA Issue #1353:
http://issues.apache.org/jira/browse/XERCESJ-1353

ElementImpl now implements org.w3c.dom.ElementTraversal.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@744809 13f79535-47bb-0310-9956-ffa450edef68"
5609609f1cfe36351b0c024f53b76740f2c85f57,"JIRA Issue #1360:
https://issues.apache.org/jira/browse/XERCESJ-1360

XML Schema API Usability improvements. Making all of the list types extend
java.util.List and making XSNamedMap extend java.util.Map.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@744816 13f79535-47bb-0310-9956-ffa450edef68"
aaf0b5a0680c5c4fd58ddc46e267ae3008756b62,"JIRA Issue #1360:
https://issues.apache.org/jira/browse/XERCESJ-1360

XML Schema API Usability improvements. Added utility methods for 
creating StringLists and LSInputLists to XSImplementation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@744979 13f79535-47bb-0310-9956-ffa450edef68"
62901357e1f9a83cc1334d2341dbefed75e66afd,"Improve error processing in schema loading. We should not be 
swallowing parse exceptions thrown by the SAX or StAX parser.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@747101 13f79535-47bb-0310-9956-ffa450edef68"
8f5051612a79184c87055d6b012d50cc006e2be6,"Adding basic tests for the DOM Element Traversal API.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@748962 13f79535-47bb-0310-9956-ffa450edef68"
7fde21c0744db0e868f31d1623915daed2c56c89,"Adding dom.traversal tests to the ""test"" target.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@748964 13f79535-47bb-0310-9956-ffa450edef68"
15511cf004eca2d1c78fd5d96641ebba64664eb9,"Fixing a couple bugs. When searching for the next or previous element
sibling we must retrieve the next or previous logical sibling before
entering the main while loop.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@751497 13f79535-47bb-0310-9956-ffa450edef68"
96bc66c7d8ed125c19c6f016614625e949a1795b,"Additional tests for the Element Traversal API with documents containing entity references.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@751506 13f79535-47bb-0310-9956-ffa450edef68"
4ce71aa9289f5a448cc7bca96f0aca7c338e90c5,"Fixing JIRA Issue #1361:
http://issues.apache.org/jira/browse/XERCESJ-1361

When skipping an element node on start element we need to reset fFirstChunk
to true so that we don't lose the content of an existing text node (if it was
the last node).

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@751800 13f79535-47bb-0310-9956-ffa450edef68"
1c8f38c08c40c6a954b330632bbbd8a64822beb5,"Use lexical form for Java serialization to reduce compatibility concerns which may arise
from making changes to the internal representation of Duration and XMLGregorianCalendar.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@756261 13f79535-47bb-0310-9956-ffa450edef68"
2449fa23033bd327b5e2cbb098110260b9996c35,"Minor performance improvement. If the given object is ""this"" object return true immediately.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@759809 13f79535-47bb-0310-9956-ffa450edef68"
535af27f4d486dc8d97dd842bb5f941bd876d74b,"Fixing JIRA Issue #1371:
http://issues.apache.org/jira/browse/XERCESJ-1371

Fixing bugs in the processing of defaulted attributes during DOM construction. 
We need to take special care of how we process 'xmlns' and need to ensure that 
all 'xmlns', 'xmlns:*' and 'xml:*' attributes have a namespace when the parser
is namespace-aware.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@765972 13f79535-47bb-0310-9956-ffa450edef68"
2e3f27cf5b79c7c2d3ae868622d80418b5c4f0ca,"JIRA Issue #1124:
http://issues.apache.org/jira/browse/XERCESJ-1124

If an IOException was thrown from an attempt to read a schema document
pass this exception on to the error reporter. Previously we were swallowing
this exception and only reporting a vague error message. Applications can
now get more information by querying SAXException.getException().

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@766480 13f79535-47bb-0310-9956-ffa450edef68"
6ecd5d834b0b1c54f62e9bd59be9d516eca43c22,"Pass the IOException from a resource error to the error reporter.
This should help applications in determining the actual source of
the error.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@766488 13f79535-47bb-0310-9956-ffa450edef68"
09936d82e037b660c3ded49fcd90b837fdbb0dcb,"JIRA Issue #1368:
http://issues.apache.org/jira/browse/XERCESJ-1368

Adding support for exception chaining to XNIException. In a JDK 1.4+ 
environment printStackTrace() will show the chained exceptions.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@766579 13f79535-47bb-0310-9956-ffa450edef68"
f56bad0a5f0f802492f53c2c7dbfc9aeb203194f,"Replacing recursion in getElementAncestor() with a loop.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@768867 13f79535-47bb-0310-9956-ffa450edef68"
02eeef2514c7f814bf2ae7927fa0bdf37078cd9e,"Ensure the same constructor is invoked in both places we create an XSModel.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@770963 13f79535-47bb-0310-9956-ffa450edef68"
74e6a4c8bc8e045b483b1884bace99f6986743e9,"Updating to the latest level of xml-commons-external-1.4.01.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@774777 13f79535-47bb-0310-9956-ffa450edef68"
9b2c27258620d62096533b9a4730f2c06d2ade40,"Changes for Xerces JIRA issue 1372: https://issues.apache.org/jira/browse/XERCESJ-1372. I will soon add details of my changes to the bug report.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@774786 13f79535-47bb-0310-9956-ffa450edef68"
e8c11b15591a11eb9c30149a1744ee24ef33238f,"One more change for https://issues.apache.org/jira/browse/XERCESJ-1372

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@774792 13f79535-47bb-0310-9956-ffa450edef68"
0ba9066e4ae2129b138092af15982b74692986fb,"Should use addXSObject() for adding enumeration annotations. add() isn't implemented on XSObjectListImpl.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@774933 13f79535-47bb-0310-9956-ffa450edef68"
4af64d286f5c186832cdb74323988da9303af64e,"Renaming clear() to clearXSObjectList() on XSObjectListImpl to avoid a collision with a method of the same name on java.util.Collection. XSModel is still read-only. We don't want applications clearing XSObjectLists through the Collection API (at least not today).

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@775838 13f79535-47bb-0310-9956-ffa450edef68"
71cea70cb33ad24660ea6ffe60ae79ef9f5cb201,"Adding a native implementation of Iterator for the XSNamespaceItemList.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@776058 13f79535-47bb-0310-9956-ffa450edef68"
e7f4adb9c3849aa9095a0517f19d5ccb9df23bc3,"Adding native implementations of toArray() and toArray(Object[]).

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@776079 13f79535-47bb-0310-9956-ffa450edef68"
b9ae3a438143ddd1343e94b99350e56cf58260c8,"Adding native implementations of toArray() and toArray(Object[]).

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@776326 13f79535-47bb-0310-9956-ffa450edef68"
f95214138de42ffb47fe63ddceb4d79130673c3d,"Minor performance improvement. String.length() == 0 tends to be slightly faster than String.equals("""").

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@778245 13f79535-47bb-0310-9956-ffa450edef68"
cd249d7c69d217cfc59664f007c36b81da2be633,"Minor performance improvement. String.length() == 0 tends to be slightly faster than String.equals("""").

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@778248 13f79535-47bb-0310-9956-ffa450edef68"
2b8c309733cdc61f894fa9f3c40dab1c78d5b64b,"Minor performance improvement. String.length() == 0 tends to be slightly faster than String.equals("""").

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@778250 13f79535-47bb-0310-9956-ffa450edef68"
34e97bc060e792a07638fcc1b0bd23a69a9c2f22,"Another change for https://issues.apache.org/jira/browse/XERCESJ-1372. Need to check substitution group (and possibly remove it) before adding the element declaration to the global element list.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@778430 13f79535-47bb-0310-9956-ffa450edef68"
f51115b93f01820075798f028bd53182900970bd,"Fixing reset(). We weren't re-initializing all of the fields.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@778432 13f79535-47bb-0310-9956-ffa450edef68"
96ef4962369a7534f113277a5ba86698a03a8933,"Be consistent with the rest of the XML Schema API by returning an empty list instead of null.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@778435 13f79535-47bb-0310-9956-ffa450edef68"
dac45445b2e6c79c94702d2ef9fd3f0afa3f9e81,"Fixing a bug. We weren't assigning an anonymous type name to the list type of xsi:schemaLocation. This string would be returned from DOM TypeInfo.getTypeName() and shouldn't be null.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@778924 13f79535-47bb-0310-9956-ffa450edef68"
9ae541706a3d269ad88fbf77834731d951327929,"Fixing JIRA Issue #1375: https://issues.apache.org/jira/browse/XERCESJ-1375. Fixing an NPE when a namespace is undeclared. Same issue that was addressed in SVN rev 694593. Patch thanks to Arthur De Magalhaes.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@778956 13f79535-47bb-0310-9956-ffa450edef68"
572e87947ffb763e5e6cc9faa5c2c222e14b1020,"Fixing JIRA Issue #1374: http://issues.apache.org/jira/browse/XERCESJ-1374. Fixing potential NPEs when comparing namespace URIs in the Schema DOM. Patch thanks to Arthur De Magalhaes.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@779171 13f79535-47bb-0310-9956-ffa450edef68"
6535eef84a302608273f86524f5973d5819b6876,"Allow for namespace growth

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@779298 13f79535-47bb-0310-9956-ffa450edef68"
05f68ba3c8fc5517e658033b4fd0cc09abfa71bc,"Allow for namespace growth - for now we use the same grammar instance and we do not override any global declarations

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@779777 13f79535-47bb-0310-9956-ffa450edef68"
36f061f36134c6929c995d0dfd1f268dd5e8557d,"Fixing a typo. The qualified name should be ""xml:base"".

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@782187 13f79535-47bb-0310-9956-ffa450edef68"
298b3ac5223ec83ef270f22424b260f315b2df84,"Fixing JIRA Issue #1377: http://issues.apache.org/jira/browse/XERCESJ-1377. Synchronize all mutations made to Context.inuse.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@782191 13f79535-47bb-0310-9956-ffa450edef68"
e4355c541fa602204ab4fc0b5fe53d6d9551c9a0,"Allow schema documents to be removed from the SchemaGrammar. This will be useful when we get around to fixing XERCESJ-1130.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@782697 13f79535-47bb-0310-9956-ffa450edef68"
fc10004b27b3427aa8d106efbca43d44deac638b,"Fix for time comparison (only hours, minutes and seconds) should be used

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@784913 13f79535-47bb-0310-9956-ffa450edef68"
77e51a8d0d855bd38c055fc801dcd7d7ed6f083b,"[Internal] Tolerate duplicate global declarations (in different schema documents)

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@784915 13f79535-47bb-0310-9956-ffa450edef68"
e3be649d7c21279462e70cf5cfb9f6578dca1792,"Fixing JIRA Issue #1378: http://issues.apache.org/jira/browse/XERCESJ-1378. The computation of [validation attempted] was not taking attributes into account. Patch thanks to Arthur De Magalhaes.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@785294 13f79535-47bb-0310-9956-ffa450edef68"
36c56dace502c6c182c6bd89471b07d336fa9a79,"Note that Xerces does not support leap seconds in date/time values.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@787055 13f79535-47bb-0310-9956-ffa450edef68"
00a1cb9257dd1806467cf7c8a5a95161298b34ed,"Mention the JAXP secure processing feature as an alternative solution to the maxOccurs OutOfMemoryError for applications that cannot modify their schema.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@787058 13f79535-47bb-0310-9956-ffa450edef68"
0bdf77af1d4fd26ec2e630fb6d12e2dfa77bc12b,"Fixing JIRA Issue #1412: https://issues.apache.org/jira/browse/XERCESJ-1412. Resolves CVE-2009-2625 and a few other issues. We were missing checks for surrogates and well-formedness when scanning system identifiers.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@787352 13f79535-47bb-0310-9956-ffa450edef68"
88b6ca9d7c744dcdc00ab3248f8377128a2c6a2e,"[Internal] Allow for component sharing

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@789785 13f79535-47bb-0310-9956-ffa450edef68"
6c013a3d50539c2173017bafdbe175df8c5612c2,"Create English language message bundles from the default ones as part of the build process.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@790986 13f79535-47bb-0310-9956-ffa450edef68"
8cbaee70a633d38af6d7c211ff22bd51f7972544,"Fixing a bug in the creation of an OutputStream from a file:/// URI. We need to ensure that the directory structure underneath the file exists or create it if necessary. Previously this would fail with an IOException if the directories didn't already exist.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@791563 13f79535-47bb-0310-9956-ffa450edef68"
c2fa5201d9fac9bca47762308eb4a1ebd0e1efe8,"Minor tweak to the previous commit.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@791567 13f79535-47bb-0310-9956-ffa450edef68"
274db3dde72935a397da5baef7934a24f8b92e92,"Fix a potential NPE where the target namespace of the grammar could be null.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@799167 13f79535-47bb-0310-9956-ffa450edef68"
558a6d357e1428f5b51b82ef36155f6d166aa5fd,"JIRA Issue #1388: https://issues.apache.org/jira/browse/XERCESJ-1388. Allow back references with multiple digits.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@799450 13f79535-47bb-0310-9956-ffa450edef68"
fe1368124fb8f6e7700c14d3259f62bffeb90364,"When parsing a schema, return the grammar object when the schema root is null (it's null by default, but could be non-null in the case of namespace growth)

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@805527 13f79535-47bb-0310-9956-ffa450edef68"
bb777e9873b2e08df750bea25fbe9f2421f30f57,"Allow substitution of the schema dv factory, which is responsible for creating new simple type definitions.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@805582 13f79535-47bb-0310-9956-ffa450edef68"
3ffc7c8210a41dade37b80b4db82f6960c2d333b,"Clean-up unused imports.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@806119 13f79535-47bb-0310-9956-ffa450edef68"
476b179cbbfd03abb46a09732bb83b4cc820c2af,"Fixing dtdjar target that was broken by recent changes.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@806133 13f79535-47bb-0310-9956-ffa450edef68"
21fe6763d44195525a7ddddd86c7add21ce06799,"JIRA Issue #XERCESJ-1452: http://issues.apache.org/jira/browse/XERCESJ-1452. Produce more helpful error messages when minOccurs/maxOccurs constraints are violated. We're able to do this in cases where we are using a counting DFA.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@806363 13f79535-47bb-0310-9956-ffa450edef68"
6094de8701b47a42c17947b4f918652662bc848a,"JIRA Issue #1383: http://issues.apache.org/jira/browse/XERCESJ-1383. New dependency on ICU4J for supporting Unicode normalization. Binaries prepared by Richard Kelly as part of his GSoC project.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@807060 13f79535-47bb-0310-9956-ffa450edef68"
b6cddda698fe963399538f2f9c78ea7752fe4585,"Adding ICU4J to the .classpath.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@807062 13f79535-47bb-0310-9956-ffa450edef68"
0df4eb31946d7c01fd70a012127a80eccc27cc9a,"JIRA Issue #1383: http://issues.apache.org/jira/browse/XERCESJ-1383. Adding ICU4J to the binary and tools packages. Patch thanks to Richard Kelly.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@807068 13f79535-47bb-0310-9956-ffa450edef68"
00b1b83456d9099139c88c842b3620f17a198dd2,"Fix typo. Wrong variable name was used.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@807392 13f79535-47bb-0310-9956-ffa450edef68"
e322103005d386b7d44690525c9da81437c27397,"LICENSE file for ICU4J 1.8.1.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@808864 13f79535-47bb-0310-9956-ffa450edef68"
b23212edd3e85affd46968caa41b5dc8a8faf7aa,"Adding ICU4J license to the source and binary packages.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@808873 13f79535-47bb-0310-9956-ffa450edef68"
38db4443cd885bb63921b05db1f9a08f705d2053,"Fixing a bug where we were sometimes ignoring a null setting for the locale. Miscellaneous clean-up in the message formatters.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@809242 13f79535-47bb-0310-9956-ffa450edef68"
0986062e3008458adc81ba562557fc58ef87feda,"Reduce code duplication. The only difference in all of the overriden createDocument() methods was the Document node class we create. That is all we need to override. The rest of the code can live in the base class.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@809736 13f79535-47bb-0310-9956-ffa450edef68"
a425ceac818dbcd646fb0f50a9482405d0db0584,"During schema loading, the declaration pool was designed to reuse objects for schema components. Seems it's now used more often than it should be. We should only reuse these objects when they are not exposed or cached. ... Also when reusing simple type objects, we need to clear the ""anonymous"" bit.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@810237 13f79535-47bb-0310-9956-ffa450edef68"
2052b710a6c5a523882168bacd8410f9ea044ac9,"It turned out that even when psvi is off and there is no grammar pool, the schema can still be exposed, making it unsafe to reuse objects in the declaration pool. Disabling the decl pool for now until we are clear about when it can be safely used. (It never worked anyway.)

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@810536 13f79535-47bb-0310-9956-ffa450edef68"
83d512a4014180c1710ffbd54b02c01a3fa1e424,"When resetting XSElementDecl, we need to clear the ""scope"" field.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@812754 13f79535-47bb-0310-9956-ffa450edef68"
5360f1baa3eb819d59ed7bbe7d791b3c6b06f59f,"Fixing a bug. If the default locale is changed in many cases we weren't picking up the new one. This also simplifies the logic in many of the message formatters.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@813087 13f79535-47bb-0310-9956-ffa450edef68"
d8acd13c1f7b21bc48969cb95c920cf18c88b653,"Fixing JIRA Issue #1394: https://issues.apache.org/jira/browse/XERCESJ-1394. If a prefix has been undeclared we must return null from Node.lookupNamespaceURI() instead of an empty string.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@814769 13f79535-47bb-0310-9956-ffa450edef68"
bfc533301c269ac761da09014723f88e1762e872,"Reduce the cost of reset(). If we end up having to read from the component manager more than once make sure that we use a cached default value for the SchemaDVFactory if one was not explicitly provided. This eliminates repeated calls to SchemaDVFactory.getInstance() which can be very expensive.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@817494 13f79535-47bb-0310-9956-ffa450edef68"
15384f9a46a060f2e3987c81d50cf5d102abf111,"Fixing a bug: we didn't report an error when the ""value"" attribute is missing on facet elements in schema documents. Recover by ignoring such facet elements.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@818156 13f79535-47bb-0310-9956-ffa450edef68"
504207ba22aacf621728e5767aa6c11559555f90,"Fix for potential NPEs when processing substitution groups

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@819653 13f79535-47bb-0310-9956-ffa450edef68"
8664e94a1a6cee503f77d927310e7709b10e4472,"Fix for error when processing redefined schemas that redefine others

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@821796 13f79535-47bb-0310-9956-ffa450edef68"
a8f3a33c25e318bb118c7879dd9b09fe88db4f28,"Fix typo

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@821797 13f79535-47bb-0310-9956-ffa450edef68"
36db27669040883006020017d11ab1a99edce589,"Remember the type name when it can't be resolved to a type definition.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@821931 13f79535-47bb-0310-9956-ffa450edef68"
02a70293e401132ecbd8045a52cacace1373ea5d,"Updating links to the performance articles.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@822125 13f79535-47bb-0310-9956-ffa450edef68"
7470ba9fd31d856e8812edeff60985501750359f,"Removing an AccessController.doPrivileged() which could allow an untrusted application to write to a file that it should not be able to.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@822684 13f79535-47bb-0310-9956-ffa450edef68"
45ff913e63e54128658f363aa2552d0f8dfb56f0,"Adding support for ""ElementTraversal"" to hasFeature().

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@826681 13f79535-47bb-0310-9956-ffa450edef68"
086119d9b3c0e7d807ee82a8994cd93341baa583,"Adding an assertion for hasFeature(""ElementTraversal"", ""1.0"").

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@826683 13f79535-47bb-0310-9956-ffa450edef68"
c08116e59d73beba99136a5c0d0b920e74a6c891,"Fix a problem with range tokens where lower case characters where not added (in a case insensitive mode)

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@827769 13f79535-47bb-0310-9956-ffa450edef68"
f86aa512bdeead044bd60d029dfc2a7735bce792,"A free spacing mode has no effect inside a character class (i.e. whitespace are included)

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@828015 13f79535-47bb-0310-9956-ffa450edef68"
907713243e06c4966aca4d4c0950ac1638c0d8cc,"Fixing JIRA Issue #1389: http://issues.apache.org/jira/browse/XERCESJ-1389. Regex fix for case insensitive matching.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@831926 13f79535-47bb-0310-9956-ffa450edef68"
8c012139ccadd9b0e0282cc6b6bd9e2fcc303a03,"A better error recovery approach when a complex type extension tries to define duplicate attribute uses. Instead of throwing away everything and derive from xs:anyType, just ignore the new duplicate attribute.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@833574 13f79535-47bb-0310-9956-ffa450edef68"
9087b722cd541bf72dcf7a99d121523671babf8a,"A better error recovery approach when a complex type extension tries to define duplicate attribute uses. Instead of throwing away everything and derive from xs:anyType, just ignore the new duplicate attribute.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@834253 13f79535-47bb-0310-9956-ffa450edef68"
71b14cea4ef4d31ef77b1bcb424e5e3b98e308ba,"A further fix for JIRA Issue #1389: http://issues.apache.org/jira/browse/XERCESJ-1389. [Case insensitive matching]

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@834487 13f79535-47bb-0310-9956-ffa450edef68"
af847434ae5a2c3408cae3c4b738622800c93e4f,"Fixing compilation errors on Java SE 1.4 and below. Character.toLowerCase(int) and Character.toUpperCase(int) didn't exist until Java SE 5.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@834593 13f79535-47bb-0310-9956-ffa450edef68"
5ab0b6b5096c2e6ac7bbe83b7be0e19c4b8aff00,"Minor performance improvement. Build map during class initialization to avoid synchronization on every get().

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@834650 13f79535-47bb-0310-9956-ffa450edef68"
84e920570ba93272c171b7ff866a3c9ecaa8a2e3,"Reduce visibility to prevent applications from inadvertently acquiring a dependency on this internal class. 

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@834653 13f79535-47bb-0310-9956-ffa450edef68"
369ad32d5a781883771dfff06341b61fdbab3074,"Allow character class subtraction in the normal mode

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@835407 13f79535-47bb-0310-9956-ffa450edef68"
44823b855907e9e4d0679e8aed7a0de7c8dec384,"JIRA Issue #1406: https://issues.apache.org/jira/browse/XERCESJ-1406. Eliminate redundant and unnecessary calls to findSchemaGrammar(). If namespace growth has been enabled only attempt to load more components if the triggering component was not already loaded.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@883581 13f79535-47bb-0310-9956-ffa450edef68"
8f2dd9fd7ed39a03c143893a89135ab917c2efd0,"If the value of ""use-grammar-pool-only"" is true do not allow any mutations to the existing grammars or any new grammars to be loaded, even if the ""namespace-growth"" feature has been enabled. This is the behaviour required by JAXP when an application loads the schemas up front from a SchemaFactory.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@883990 13f79535-47bb-0310-9956-ffa450edef68"
a301cd944cb095f4de12a1daf414c3b0d076d186,"Fixing JIRA Issue #1403: http://issues.apache.org/jira/browse/XERCESJ-1403. Should be throwing the RuntimeException we create if there's some failure in class loading. Thanks to Ludger Bnger for discovering this issue.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@885927 13f79535-47bb-0310-9956-ffa450edef68"
8eb9d6415b893d06a0f633074e295568dfd33744,"Updating to the release candidate level of xml-commons-external-1.4.01.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@888921 13f79535-47bb-0310-9956-ffa450edef68"
66db3ba97cc9b21cfd6d922f47ffa16d0f63c68f,"Adding a new PGP key for myself to the KEYS file.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@889511 13f79535-47bb-0310-9956-ffa450edef68"
a33e8d893aa9e52e0ccbc2bf22eb6d5a679905f3,"Fixing JIRA Issue #1410: http://issues.apache.org/jira/browse/XERCESJ-1410. Report a more appropriate error message when white space is missing between the '%' and the entity name in a parameter entity declaration.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@889939 13f79535-47bb-0310-9956-ffa450edef68"
e1e7a872a191aab680740503285c86eb54d1f585,"JIRA Issue #1299: https://issues.apache.org/jira/browse/XERCESJ-1299. Use weak references for storing the NodeIterators so that they can be garbage collected if the application no longer has any references to them. Inspired by the patch by Ludger Bnger except that I used a LinkedList instead of a WeakHashMap due its good memory management when items are removed (and also good for bulk removals through its iterator).

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@890145 13f79535-47bb-0310-9956-ffa450edef68"
2ce5c7f9c9eab0ab50322c5df052edccb17761ec,"Fixing JIRA Issue #1356: http://issues.apache.org/jira/browse/XERCESJ-1356. Nodes may be pinned down by the map used by compareDocumentPosition() which would be otherwise garbage collectible. Now storing the nodes in a WeakHashMap to eliminate this memory leak. Patch thanks to Ludger Bnger.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@890172 13f79535-47bb-0310-9956-ffa450edef68"
6c3e940830144ba826e91218385a437b3077b4f1,"Fixing JIRA Issue #1385: http://issues.apache.org/jira/browse/XERCESJ-1385. Should be checking whether ""nohref"" is present in getNoHref().

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@890177 13f79535-47bb-0310-9956-ffa450edef68"
c8d3e1e73a2b8dc77ffca3eb0d70eb91bf64a521,"JIRA Issue #1386: http://issues.apache.org/jira/browse/XERCESJ-1386. By request, making HTMLCollectionImpl implement java.io.Serializable so that the HTML DOM can be serialized to an ObjectOutputStream when the nodes contain instances of this class.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@890182 13f79535-47bb-0310-9956-ffa450edef68"
4a6bae5ffb00c70ffd339a6703a5d160c219d08c,"JIRA Issue #1380: http://issues.apache.org/jira/browse/XERCESJ-1380. Eliminate redundant implementations of getData() and setData() from ProcessingInstructionImpl which are identical to the implementation of those methods in the parent class (CharacterDataImpl). Patch for removing getData() thanks to Ludger Bnger. I added the removal of setData().

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@890194 13f79535-47bb-0310-9956-ffa450edef68"
49b56961fafde9c2ae976f04e2ab58a204655f90,"Fixing JIRA Issue #1407: http://issues.apache.org/jira/browse/XERCESJ-1407. In several cases Document.renameNode() was creating the wrong Node implementations for the PSVI, HTML and WML DOMs. Patch thanks to Ludger Bnger.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@890457 13f79535-47bb-0310-9956-ffa450edef68"
77ff9da65ac70fa1db240312a48eca5b5dd5b29c,"JIRA Issue #1407: http://issues.apache.org/jira/browse/XERCESJ-1407. Some additional improvements thanks to the patch by Ludger Bnger. Use Document factory methods instead of directly calling constructors in HTMLBuilder.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@890459 13f79535-47bb-0310-9956-ffa450edef68"
9379c9972935ff86481d1acf2b810e3da890467d,"JIRA Issue #1300: https://issues.apache.org/jira/browse/XERCESJ-1300. Use weak references for storing the Ranges so that they can be garbage collected if the application no longer has any references to them. Inspired by the patch by Ludger Bnger except that I used a LinkedList instead of a WeakHashMap due its good memory management when items are removed (and also good for bulk removals through its iterator).

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@890667 13f79535-47bb-0310-9956-ffa450edef68"
4d45945dae250edeb9cd8b5b08115d36cdfa11f4,"Updating the copyright year used in the API docs.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@895545 13f79535-47bb-0310-9956-ffa450edef68"
7abec5d702a03c3217ec8f134835e5e7578e4549,"Updating the copyright year in the NOTICE file.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@895547 13f79535-47bb-0310-9956-ffa450edef68"
c7b5dac2485d2627d5bb6e1619d2fc76befea63b,"Updating the copyright year in the documentation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@895549 13f79535-47bb-0310-9956-ffa450edef68"
562e56dd7ac6896f29e515aa1f51dd13acbcd467,"Commenting out a couple of setProperty() calls which are always unnecessary with Xerces.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@902707 13f79535-47bb-0310-9956-ffa450edef68"
95f0bb5ffc73a85bc7069f775b69e8da77303cc7,"Fixing JIRA Bug #1413: http://issues.apache.org/jira/browse/XERCESJ-1413. Allow Xerces to be built with the FreeBSD JDK.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@902904 13f79535-47bb-0310-9956-ffa450edef68"
40540ef067d20a5fcfd3560374220048810e3024,"Fixing JIRA Bug #1413: http://issues.apache.org/jira/browse/XERCESJ-1413. Allow Xerces to be built with the FreeBSD JDK.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@903079 13f79535-47bb-0310-9956-ffa450edef68"
dcd40a452ce9b90472845ba71385c7a3e3fc0279,"Minor performance improvement. If the component manager is the loader config don't bother querying it since it doesn't recognize the PARSER_SETTINGS feature. Prevents an XMLConfigurationException from being thrown.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@906117 13f79535-47bb-0310-9956-ffa450edef68"
d8d7d8daa53cd31f0765edeb62da2606090bc5c3,"Fixing JIRA Bug #1417: http://issues.apache.org/jira/browse/XERCESJ-1417. A link to the Xalan documentation was broken.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@906789 13f79535-47bb-0310-9956-ffa450edef68"
0df32768beedf6778651639c24d234d5b70f3b6e,"Fixing JIRA Bug #1416: http://issues.apache.org/jira/browse/XERCESJ-1416. An NPE could occur when the value of the duration is invalid. Check for this condition and throw the correct exception.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@906803 13f79535-47bb-0310-9956-ffa450edef68"
59311a5fc063a8dfd457520c108d5a2d200da3e8,"Make the download link point to the Xerces TLP download page. This page looks nicer than the Stylebook based one and addresses the concerns raised in XERCESJ-1291 and XERCESJ-1294.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@907268 13f79535-47bb-0310-9956-ffa450edef68"
7d3b80349762233a5dd6306e181ff25835c81964,"Fixing JIRA Issue #1085: http://issues.apache.org/jira/browse/XERCESJ-1085. If an IOException was thrown from an attempt to read a schema document pass this exception on to the error reporter. Previously we were swallowing this exception and only reporting a vague error message. Applications can now get more information by querying SAXException.getException().

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@907433 13f79535-47bb-0310-9956-ffa450edef68"
2190ea375bf9e95fc0317287f49a21965e74af5c,"Fix problem in Regex, in normal mode with multi-line option, when last character is a new line and we are matching a '^'. The match should fail.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@909133 13f79535-47bb-0310-9956-ffa450edef68"
f7c63d224f982654c9a783dd9208846ec82c004f,"Performance: Replacing Vectors with unsynchronized ArrayLists and HashTables with unsynchronized HashMaps. Should give a small boost to IDC processing.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@911694 13f79535-47bb-0310-9956-ffa450edef68"
557dfea5dd09570799c079d3e27cc8b924d47844,"Reduce the cost of resetting the XMLSchemaValidator. The CMNodeFactory only needs to read properties from the XMLComponentManager if its configuration has changed since the last time it was read.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@911823 13f79535-47bb-0310-9956-ffa450edef68"
7db88d34d2cc9f59294a84439f83a54f75fb7be9,"applying the fix for JIRA issue, XERCESJ-1422 to trunk as well

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@912140 13f79535-47bb-0310-9956-ffa450edef68"
ea6f64d4e6bb51dbd1a3d05fed47dcfddef1c555,"Use the constant for maxOccurs=""unbounded"". If the value changes in the future we won't have to update this code.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@912153 13f79535-47bb-0310-9956-ffa450edef68"
8ee81a90e652983639fd40da7ae15dc7c64f4408,"Adding a method for copying schema information fields from one ElementPSVImpl to another. Useful to avoid materializing the XSModel if it's never read by the application.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@912230 13f79535-47bb-0310-9956-ffa450edef68"
17e968bd12be5ca225ace35b7e092726b91e0890,"Fixing a ClassCastException introduced by a previous commit.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@915059 13f79535-47bb-0310-9956-ffa450edef68"
b47802455302269b076bcf0d46df1561f2883dc7,"Adding an internal feature called: ""http://apache.org/xml/features/internal/strings-interned"". This makes it possible for applications to notify a ValidatorHandler that they are providing it with interned strings, allowing the ValidatorHandler to avoid passing strings for XML names through the SymbolTable.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@915483 13f79535-47bb-0310-9956-ffa450edef68"
c33372d0b240060daaeec0df01be7805be84c6b5,"Adding an internal feature called: ""http://apache.org/xml/features/internal/strings-interned"". This makes it possible for applications to notify a ValidatorHandler that they are providing it with interned strings, allowing the ValidatorHandler to avoid passing strings for XML names through the SymbolTable.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@915488 13f79535-47bb-0310-9956-ffa450edef68"
ab425b611173e1578e52a5e569549cf26e6725de,"Once the LSSerializer (or XMLSerializer) has completed serializing the DOM drop internal references to the nodes from the Document. If the application is pooling serializers this will allow the garbage collector to reclaim the Document and all of its nodes if the application no longer has any references to it.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@923974 13f79535-47bb-0310-9956-ffa450edef68"
7203695516ce016a42c08ce671d4664ec248c5c1,"Fixing JIRA Issue #1248: https://issues.apache.org/jira/browse/XERCESJ-1248. Eliminating a static field which was holding on to a text node for mutation notifications. This was not thread-safe and could lead to a memory leak. Fixed thanks to the patch by Ludger Bnger (which I modified slightly; setting the value field on TextImpl directly instead of calling setNodeValueInternal()).

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@924245 13f79535-47bb-0310-9956-ffa450edef68"
4530be8ed31cd5a3a61272c4e0ccb7c188b8ade0,"Fixing JIRA Issue #1423: http://issues.apache.org/jira/browse/XERCESJ-1423. On rehash() we need to clear the ""prev"" pointer when we add an entry at the head of a bucket. Our failure to do this could lead to an infinite loop later. Patch thanks to Anli Shundi (ashundi@tibco.com).

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@924298 13f79535-47bb-0310-9956-ffa450edef68"
e6727f145b737ba6858df160870e4d3b1eec5047,"Allow the debug flag in ObjectFactory to be configured with a system property (called xerces.debug) to make it easier for applications to troubleshoot the discovery and loading of XMLParserConfigurations.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@924307 13f79535-47bb-0310-9956-ffa450edef68"
014a28ba49a435b4ab90b3785e6c0aa210f74fe6,"Allow the debug flag in ObjectFactory to be configured with a system property (called xerces.debug) to make it easier for applications to troubleshoot the discovery and loading of XMLParserConfigurations.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@924308 13f79535-47bb-0310-9956-ffa450edef68"
d47478b0e5305d15db67dae10400f5f929cf1aa2,"Fixing a potential NPE in a debug method.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@928735 13f79535-47bb-0310-9956-ffa450edef68"
9d70ac953569f3ee4155f1b24b571d5d5b479421,"Fixing an NPE.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@929493 13f79535-47bb-0310-9956-ffa450edef68"
bfb3925717fa35d09ac5345b4908d57fbc62c543,"Adding an accessor method which returns the wrapped XSSimpleType.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@930933 13f79535-47bb-0310-9956-ffa450edef68"
7cc5ab02507fd0a7a1c6a6baefdb960496ebb6e8,"Fixing a ClassCastException. We were casting to the wrong SecurityManager class. The cast was unnecessary anyway since the object is just passed through to the SAX parser we just created.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@932646 13f79535-47bb-0310-9956-ffa450edef68"
862db02aeefde5e39c8af33f0f8b69011088c9e4,"Secure processing: If we created the XMLReader make sure we configure it with a SecurityManager if one was set on the SchemaFactory.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@933095 13f79535-47bb-0310-9956-ffa450edef68"
a495ac53223263cd47dc8b92677914710ef9f1a4,"Secure processing: If a SecurityManager was set on the Validator we need to propagate it to the parser which handles the StreamSources.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@933582 13f79535-47bb-0310-9956-ffa450edef68"
3d8dbf25e3ae6ee02265a88c064e322768d11b5b,"Fixing JIRA Issue #1446: http://issues.apache.org/jira/browse/XERCESJ-1446. When the value passed in is a StringBuffer we normalize the value in place. This is problematic for unions because it corrupts the initial value seen by the subsequent type validators. If there is more than one member type convert the initial value to a string before passing it on to the member type validators.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@937739 13f79535-47bb-0310-9956-ffa450edef68"
a6fdd0a0e1a9fa6b6695bf57b9fb0153e128d5d2,"Xerces' DatatypeFactory is thread-safe and stateless. Making the factory field static. We only need one for all the date/time/duration DVs.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@937741 13f79535-47bb-0310-9956-ffa450edef68"
f2c3d5aeff56c12720428209f58bb1c922a4de8b,"Eliminating code in XMLAttributeImpl for storing whether an attribute has a schema ID type. Should save a bit of memory and also time in the schema validator. Nothing ever used this mechanism. The schema IDness of an attribute is retrieved from the PSVI.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@937816 13f79535-47bb-0310-9956-ffa450edef68"
cffac2dc1a5b22c70017f850e389216b6f738633,"Block extension / instantiation of FilePathToURI.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@937826 13f79535-47bb-0310-9956-ffa450edef68"
ad7bc2ae64470d043f6ebe70eac77c6c7d359c38,"@xerces.internal and @version were missing.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@937829 13f79535-47bb-0310-9956-ffa450edef68"
ab08d4bb7875ef1b1fae16c8b88a1ba5ba929ef2,"JIRA Issue #1424: http://issues.apache.org/jira/browse/XERCESJ-1424. Eliminate redundant URI validation in getBaseURI(). If the parent node returned a non-null value it means one of the ancestors already verified that the string is a valid URI. Patch thanks to Ludger Bnger.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@938635 13f79535-47bb-0310-9956-ffa450edef68"
f17b0f8ecdfd265e5c8c2c07f0a3a1bda7208096,"there is a possible null pointer dereference at, ex.getSystemId(). this commit solves this, issue.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@944773 13f79535-47bb-0310-9956-ffa450edef68"
01410d32509339d232e63b05b3aa22b70f4ae8ca,"null check of, variable 'lexicalRepresentation' looks like at a wrong place (this could lead to a null pointer dereference at, s.length()). this commit solves this issue.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@944783 13f79535-47bb-0310-9956-ffa450edef68"
2fe4c2e3e1f58251ed9ec2c60b3352afe7d39173,"there's a repeated conditional test. this was harmless, but still it was appropriate to fix this.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@944789 13f79535-47bb-0310-9956-ffa450edef68"
b8c292b7ab5a410ef7f6fbeaa59d531f11f2e9b1,"JIRA Issue #1398: https://issues.apache.org/jira/browse/XERCESJ-1398. Fixing a usually slow growing memory leak. When a UTF-8, UTF-16, UCS-2 or UCS-4 byte sequence crosses a buffer boundary we call the read() method on the RewindableInputStream. This was always buffering the value returned from the underlying InputStream in the data array even when it will never be read again. For a well behaved InputStream if this occurred on every buffer of a 2 GB document we'd grow the data array to over 1 MB. A pathological InputStream which always returns only a few bytes at time could have caused the memory to be burned much quicker.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@944964 13f79535-47bb-0310-9956-ffa450edef68"
6929e734520c3a614ee91bd6df4b2705bc32f109,"Fix for Regex problems reported in the following Jira bugs:
- Jira 589 (https://issues.apache.org/jira/browse/XERCESJ-589)
- Jira 1326 (https://issues.apache.org/jira/browse/XERCESJ-1326)
- Jira 1357 (https://issues.apache.org/jira/browse/XERCESJ-1357)

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@946257 13f79535-47bb-0310-9956-ffa450edef68"
4b437e5250a6c70fdf05cd3c42a15e6d9d7a9f19,"Upgrading the version of Xerces-J used by Ant to v2.9.1.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@948530 13f79535-47bb-0310-9956-ffa450edef68"
b8493699de557b08ecb4a2ddfcdb3c010b3320cb,"Upgrading the version of Xalan used by Ant / Stylebook to v2.7.1.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@948549 13f79535-47bb-0310-9956-ffa450edef68"
3d97763d1a17ec0976f0a666ed0732ba968eaa3d,"Only the Apache License Version 2.0 license applies to xalan.jar.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@948553 13f79535-47bb-0310-9956-ffa450edef68"
8495f8f192d2e339461d1f89916b79e861085cb1,"JIRA Issue #1290: https://issues.apache.org/jira/browse/XERCESJ-1290. Adding documentation on the contents of the tools package.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@948594 13f79535-47bb-0310-9956-ffa450edef68"
423081171b1cdfb809b847e6127c2fb788b95342,"Minor improvement to hopefully make it clear that the ""tools"" package contains build tools for building Xerces-J.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@948661 13f79535-47bb-0310-9956-ffa450edef68"
3ac348c6044d8ab33d0ce0215610670e95b4033b,"Fixing JIRA Issue #1142: http://issues.apache.org/jira/browse/XERCESJ-1142. Some features were not recognized by the component manager, causing XMLConfigurationExceptions to be thrown and silently caught during reset. This should not occur anymore.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@948952 13f79535-47bb-0310-9956-ffa450edef68"
285554ad914faa29a91aaf59541d6f6499e3c3f1,"Update release information in preparation for Xerces-J 2.10.0

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@948954 13f79535-47bb-0310-9956-ffa450edef68"
8e4af7a085158b0031e1e4bc25b30fcffd956fbc,"Backing out changes made for ICU4J. We're not quite ready to ship this jar yet.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@948974 13f79535-47bb-0310-9956-ffa450edef68"
e348cba4335e5a54ec53c1a06426e56202094dae,"Update FAQ to explain how validate against XML Schema 1.1

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@949005 13f79535-47bb-0310-9956-ffa450edef68"
d54cb5f8cd91ba7dda1dd355289063e0c814ee33,"Exclude ICU4J from the tools distribution for now. We're not quite ready to ship it yet.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@949169 13f79535-47bb-0310-9956-ffa450edef68"
59ac1a1e5acc07273f4bba79b8131be6aed2ec0f,"When namespace growth is enabled and a null location is provided we cannot tell whether we've loaded this schema document before so we must assume that we haven't.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@949234 13f79535-47bb-0310-9956-ffa450edef68"
fd60da5a646c9783029747b8e21b62b643e03876,"Updating readme for Xerces 2.10.0.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@949293 13f79535-47bb-0310-9956-ffa450edef68"
e8cd253e7cad5cb36d2735d585f9ac00090de90e,"Fixing broken links to the JAXP specification.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@949296 13f79535-47bb-0310-9956-ffa450edef68"
89ca250fecc301b7640075b397455c6d32a9d1e8,"adding faq information, for XPath 2.0 support in Xerces-J 2.10.0 release

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@949479 13f79535-47bb-0310-9956-ffa450edef68"
4d51fbd854b301c58b8266463cdf400658a5682b,"doing some slight modifications to XPath 2.0 support faqs

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@949481 13f79535-47bb-0310-9956-ffa450edef68"
618cf05a11d2986006a9184a9cf48874c3b8db11,"doing slight correction to english punctuation, in FAQ description

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@949532 13f79535-47bb-0310-9956-ffa450edef68"
b9adb887f0326148c1e06d50a864e9886cf5c9ac,"Applying Khaled's update (SVN rev 949753) to the trunk.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@949758 13f79535-47bb-0310-9956-ffa450edef68"
c31a024ba2f39b5d4b843f8fe89ad80f353be63e,"Our examples shouldn't encourage folks to use system properties for selecting the factory. The META-INF/services file located in xercesImpl.jar should be sufficient for finding the XML Schema 1.1 factory.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@949760 13f79535-47bb-0310-9956-ffa450edef68"
102d69d22774f79614c44e8d6201d2064cba76df,"Some wording improvements to the new XML Schema 1.1 / XPath 2.0 FAQ.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@949857 13f79535-47bb-0310-9956-ffa450edef68"
9afb453f6e492f9207f95752f1942035f50d2a73,"Adding a section which describes how to create an XML Schema 1.1 SchemaFactory.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@949863 13f79535-47bb-0310-9956-ffa450edef68"
66ca64649f71b48e76455a1ffc8cd8f4d34fca94,"Improvements to the XML Schema 1.1 usage example.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@949902 13f79535-47bb-0310-9956-ffa450edef68"
2bce8d0ba7a2c0a3adc7f0e006752770ba69acf1,"Adding a sample which demonstrates usage of the org.w3c.dom.ElementTraversal API.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@950348 13f79535-47bb-0310-9956-ffa450edef68"
3c148f100829f5bb4f1780d56ea970a3d5ca2abd,"Giving a local variable a more accurate name.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@950350 13f79535-47bb-0310-9956-ffa450edef68"
3472165462127a6c4e4be4d81d5f5f838ee0e1f3,"Adding @author tag.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@950353 13f79535-47bb-0310-9956-ffa450edef68"
f451cdd1f141dc722bbce20363cc20ff78f7fb5b,"Adding @version tags to some classes that were missing them.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@950355 13f79535-47bb-0310-9956-ffa450edef68"
1ebbb804c2b31b2acc348a8a226a4f8763c3afbc,"Adding @version tags to some classes that were missing them.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@950361 13f79535-47bb-0310-9956-ffa450edef68"
84d80e359c2672e86dc1fbc82ea342e87efb504f,"Added documentation from the dom.ElementPrinter sample.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@950365 13f79535-47bb-0310-9956-ffa450edef68"
69d5c71a83bf0546344b1e80792733ff00737470,"Fixing JIRA Issue #1450: http://issues.apache.org/jira/browse/XERCESJ-1450. Whenever we adopt a node from a deferred DOM we must ensure that the node and the entire tree beneath it has been fully materialized before transferring it to its new owner document.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@950601 13f79535-47bb-0310-9956-ffa450edef68"
2ddff33f8e11ab3c5a2457c1c2af90c6353454a2,"Adding documentation on the current support for XML Schema 1.1.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@952091 13f79535-47bb-0310-9956-ffa450edef68"
fb95cffa8201ba69dc66ace3dc55e4800c521949,"Improving the description of Xerces-J 2.10.0.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@952819 13f79535-47bb-0310-9956-ffa450edef68"
51265ad9ef27fc426f2837ffbc94d44fe99185b1,"Restoring previous version.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@953822 13f79535-47bb-0310-9956-ffa450edef68"
1768fd41d7f69224675c9612fe8ea22eaa440c36,"More updates to the Xerces-J 2.10.0 release notes.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@954592 13f79535-47bb-0310-9956-ffa450edef68"
ca47e35c27abf05dff9c97bc16373a4ea631d0bc,"Fix for Jira issue https://issues.apache.org/jira/browse/XERCESJ-809. The fix is very similar to the patch Gareth submitted, to expand the location strings when they are stored in the hashtable.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@955053 13f79535-47bb-0310-9956-ffa450edef68"
844f055f71d0954b78e6456c5a9a9a45ad332cdf,"Xerces-J requires JDK 1.3 or higher to compile.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@955392 13f79535-47bb-0310-9956-ffa450edef68"
c5b3566ca364ff762615f34b37984af667249802,"Updating download page link.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@955978 13f79535-47bb-0310-9956-ffa450edef68"
dceb25b3286a2ade4cf0ed276127ee51597e3304,"Reducing visibility of a couple classes which don't need to be public.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@956312 13f79535-47bb-0310-9956-ffa450edef68"
4a9812e0d5b4619c0babc80e49c7242d16789fde,"Fix for Jira bug 1456 (https://issues.apache.org/jira/browse/XERCESJ-1456)

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@961928 13f79535-47bb-0310-9956-ffa450edef68"
761633b39d6571ce1a71c8312117a7c94da4579d,"Eliminate unnecessary creation of XMLStrings and char arrays in the construction of synthetic annotations.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@963245 13f79535-47bb-0310-9956-ffa450edef68"
84e111c4dd0537f7ff268c1027956b02cbcbada1,"Eliminate unnecessary creation of XNI QNames in the construction of synthetic annotations.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@963267 13f79535-47bb-0310-9956-ffa450edef68"
4115a62f73b7da2e3f854c9576c384260416e1e0,"Fixing an NPE. The application may have set the ContentHandler / DocumentHandler to null within setDocumentLocator() so we need to check for null again before calling startDocument().

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@965245 13f79535-47bb-0310-9956-ffa450edef68"
023d5a963e5ee21431e5c33b2e8e220915f8229c,"Minor improvement. Use StringBuffer.append(char) for one char length strings.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@965250 13f79535-47bb-0310-9956-ffa450edef68"
dbfa03c450cbebbc7749a35e15eec762192ad9fd,"Making XSNamedMapEntry static. Should reduce memory usage slightly.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@965315 13f79535-47bb-0310-9956-ffa450edef68"
0a864e2a8c89b498033faa6c7abf54c7f59b96c8,"Fixing JIRA Issue #1461: http://issues.apache.org/jira/browse/XERCESJ-1461. A couple averaging computations in binary search and divide and conquer methods could overflow for large values. Corrected by using ""x >>> 1"" instead of ""x / 2"".

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@965320 13f79535-47bb-0310-9956-ffa450edef68"
617f3cf5e0e6b903aa8608ef10820e6952f1603c,"Fixing JIRA Issue #1458: http://issues.apache.org/jira/browse/XERCESJ-1458. xs:anySimpleType or xs:anyAtomicType do not have any facets, however the schema validator was normalizing white space for these types using the collapse rules. There's still an issue with the XSModel (returning a whitespace facet for xs:anySimpleType / xs:anyAtomicType) but at least the validator has the correct behaviour now.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@965631 13f79535-47bb-0310-9956-ffa450edef68"
22350037923203f800cdfccec62395b4de3c5d31,"Fixing JIRA Issue #1459: https://issues.apache.org/jira/browse/XERCESJ-1459. xs:anySimpleType and xs:anyAtomicType have no facets but we were reporting that they had a whitespace facet.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@966406 13f79535-47bb-0310-9956-ffa450edef68"
d0bd9aeef12d2aad43857f00d7b74c086814c594,"Fixing JIRA Issue #1463: http://issues.apache.org/jira/browse/XERCESJ-1463. A call to findSchemaGrammar() was missing for substitution groups. This could lead to an error reported for the substitution element if its declaration has not been loaded yet.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@982466 13f79535-47bb-0310-9956-ffa450edef68"
8e943f59352a29d0af8a077b6f8fb881c1ce518a,"Minor enhancements to the Schema DOM to allow nodes from it to be imported into Xerces' other DOM implementations. I expect this will be useful in the work that Udayanga has been doing for xs:override.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@982713 13f79535-47bb-0310-9956-ffa450edef68"
bd0a1b94ea5a04fd234288331900eb0e10adde3e,"@xerces.internal was missing.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@982727 13f79535-47bb-0310-9956-ffa450edef68"
935938a1d7636088811d4a33f57049b6235150a4,"Fixing JIRA Issue #1464: http://issues.apache.org/jira/browse/XERCESJ-1464. Use 31 bits in computing the hash instead of 27. Should improve the distribution of symbols in a very large table. Thanks to Roland Illig for spotting this issue.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@985518 13f79535-47bb-0310-9956-ffa450edef68"
3b8e5f22726251aea5ba6adf0c4425ec4469bf6e,"Fixing some Javadoc text.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@987475 13f79535-47bb-0310-9956-ffa450edef68"
36ab8d826b6d8c69d4322d6afb4381799d139db5,"In anticipation of the next release bump the version in build.xml up to 2.11.0.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@998481 13f79535-47bb-0310-9956-ffa450edef68"
3343d4d5cd4966674d47db7885d60fef846aefdc,"Setting the default debuglevel to be ""lines,source"" when debug has been enabled.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1000923 13f79535-47bb-0310-9956-ffa450edef68"
3701f6a121634ea976ed4dd2d4e816b59062e9ee,"For Jira issue https://issues.apache.org/jira/browse/XERCESJ-1469. Update XSModel interfaces to a) expose an interface for values, and b) expose Identity Constraint definitions as top-level components.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1024038 13f79535-47bb-0310-9956-ffa450edef68"
f6982555d962339bb5f7dbf4f092459964407bf6,"For Jira issue https://issues.apache.org/jira/browse/XERCESJ-1469. Update XSModel interfaces to a) expose an interface for values, and b) expose Identity Constraint definitions as top-level components.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1024041 13f79535-47bb-0310-9956-ffa450edef68"
64fff1d30301a40473465d9dd5be6fd6a7d155c4,"Setting SVN properties for new files.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1024043 13f79535-47bb-0310-9956-ffa450edef68"
3c6d39e1d97cff181e4c6ac605d754f38b69ac9a,"When evaluating list values, need to set the ""actualType"" after the list is processed, otherwise the ""actualType"" would have the item type, because same ValidatedInfo is used to process both the list and the items. And when copying an XSValue, need to be careful to only ask for the memberTypes if the type is a list of union.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1026362 13f79535-47bb-0310-9956-ffa450edef68"
c5920a30de4a3b5a8fae7b281e38cbed871f49ab,"Reducing the number of array accesses in newSchema(Source[]).

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1027335 13f79535-47bb-0310-9956-ffa450edef68"
33998917bf57b4306dc5641c6a41c9af58f9d4f3,"Fixing a bug on the error handling path for StAX input. XMLStreamReaders cannot directly throw an IOException, so we need to check before re-throwing the exception whether it wraps an IOException and if it does possibly only report a warning.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1027805 13f79535-47bb-0310-9956-ffa450edef68"
d40a4b3d6a8e4dca2ab47fd224368dac77063ad4,"Fix up SVN properties.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1029415 13f79535-47bb-0310-9956-ffa450edef68"
5f91c8d7f7765a800f5fa8504e4d0e3695a4e840,"Fix for Backreference processing in RegEx.
Jira Bug: https://issues.apache.org/jira/browse/XERCESJ-1473

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1033661 13f79535-47bb-0310-9956-ffa450edef68"
d9e9ba52829bb591861932feb3592fff0766534f,"Fixing JIRA Issue #1411: http://issues.apache.org/jira/browse/XERCESJ-1411. Some minor Javadoc typos have been corrected. Patch thanks to Johannes Koch.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1035042 13f79535-47bb-0310-9956-ffa450edef68"
1597481071545d913a27d8b9edd6b3617ece6f9b,"Updating the documentation on the current support for XML Schema 1.1.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1038337 13f79535-47bb-0310-9956-ffa450edef68"
7f0e8db31d5dd72eb5f8a81db8f4a732a8b8c3b9,"Reducing visibility of a class which isn't accessed outside of this package.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1038740 13f79535-47bb-0310-9956-ffa450edef68"
e2e92202cfe9f9a44bdc28be5b105187eb80ab8a,"Updating readme for Xerces 2.11.0.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1039491 13f79535-47bb-0310-9956-ffa450edef68"
12755cb90c6471dc4eba55b96eddca6307cfbe0a,"Synch up with the FAQ update (rev 1039244) made to the XML Schema 1.1 branch.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1039495 13f79535-47bb-0310-9956-ffa450edef68"
5a654d65856002dab762ebcf62550df4e2839168,"Updating the release doc for Xerces-J 2.11.0.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1039518 13f79535-47bb-0310-9956-ffa450edef68"
62e65976178292d84bf37c311db019fb0366ef2a,"Synch up with the FAQ update (rev 1039532) made to the XML Schema 1.1 branch.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1039533 13f79535-47bb-0310-9956-ffa450edef68"
9625132bad3ef88dc237de7f13fed03d9706d496,"committing changes for JIRA issue XERCESJ-1486 to trunk.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1040377 13f79535-47bb-0310-9956-ffa450edef68"
fabaf9190c4252584230444ab2752143cf5516fe,"Some minor improvements for performance and to also make it easier for applications which use object identity for comparing schema components... Only create the XSParticle and XSWildcard once for xs:anyType. Return the empty list singleton instead of creating a new one when there are no attribute uses.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1051303 13f79535-47bb-0310-9956-ffa450edef68"
b348c94732e6ce18a739a15a00b7b2acecd864af,"Use the singleton empty list instead of creating new ones.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1051350 13f79535-47bb-0310-9956-ffa450edef68"
cf954fbe3f34230ce45d663d70c704c4c5a1ab68,"Updating the copyright year used in the API docs.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1054440 13f79535-47bb-0310-9956-ffa450edef68"
6af72c578f06a0b5c040369b45c71409f4b4b2bd,"Updating the copyright year in the NOTICE file.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1054442 13f79535-47bb-0310-9956-ffa450edef68"
57861bcf234a68cebff7584061f398a2ff8cf662,"Updating the copyright year in the documentation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1054446 13f79535-47bb-0310-9956-ffa450edef68"
5a56ab6f5f41587f57c618966b7a2945b8cb08b2,"Marking a static field (containing a singleton) final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1057476 13f79535-47bb-0310-9956-ffa450edef68"
ed5031950767c7167468c53fdf5b3a07bc9d0672,"Use ArrayList instead of Vector.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1062637 13f79535-47bb-0310-9956-ffa450edef68"
05b31d3b2334ed4c64bf1b7e6e61eefec207bb50,"Avoid calling methods that were deprecated in Xerces-J 2.11.0.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1062643 13f79535-47bb-0310-9956-ffa450edef68"
1ed9d0463c70fa5581b605f17da791cfea334e96,"Making ElementState static. It does not need access to the enclosing class.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1062646 13f79535-47bb-0310-9956-ffa450edef68"
c8870d729dbd441cb7ab6bbc153501011c0df3c7,"JIRA Issue #1494: http://issues.apache.org/jira/browse/XERCESJ-1494. Adding isConstant() and constant() methods to ItemPSVI to make it easier for users to persist PSVI information that they receive from a PSVIProvider or PSVI annotated DOM.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1065753 13f79535-47bb-0310-9956-ffa450edef68"
2013ca1fd193afe2454aebcb3a08e26d86a306c2,"Removing an unused import.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1072012 13f79535-47bb-0310-9956-ffa450edef68"
f890ce20b623f2bea736d096229677c8b99556ad,"JIRA Issue #1499: http://issues.apache.org/jira/browse/XERCESJ-1499. Reducing the initial footprint of SymbolHash buckets within a SchemaGrammar from 1,515 to 177 (about 12% of the default size). Implemented a rehash() method on SymbolHash to grow the maps if they actually become filled.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1082175 13f79535-47bb-0310-9956-ffa450edef68"
5a87040f707561b3b0b649f4ae6b25c779ad95bc,"Fix for JIRA bug https://issues.apache.org/jira/browse/XERCESJ-1500

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1082533 13f79535-47bb-0310-9956-ffa450edef68"
2d9741194438536d45037f769844e777224c8d99,"Fixing JIRA Issue #1501: http://issues.apache.org/jira/browse/XERCESJ-1501. Namespace declarations may have been added by namespace fix-up. If the ""namespace-declarations"" parameter has been set to false we need to fetch the AttributeMap again if it contained no attributes prior to namespace fix-up.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1085512 13f79535-47bb-0310-9956-ffa450edef68"
ad11356d4af7429a1c19ef3a594e20c3605b68f6,"removing an unnecessary return statement

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1087608 13f79535-47bb-0310-9956-ffa450edef68"
1593a8f1ba6eae904cdb6e87ea2a1717c80bb0b0,"Sometimes grammar objects in a schema get out of sync. We end up having multiple objects for the same namespace.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1089519 13f79535-47bb-0310-9956-ffa450edef68"
0af83cf3d3f3c61bbc7802f5a93b32da610b040a,"Given the following XML document,

<X>
   <a/>
   <b/>
   <c/>
   <d/>
   <e/>
</X>

and this schema fragment used to validate element ""X"",

<xs:element name=""X"">
   <xs:complexType>
      <xs:sequence>
         <xs:any processContents=""skip"" maxOccurs=""3""/>			  
      </xs:sequence>
   </xs:complexType>
</xs:element>

currently we get following error message, upon validation failure,

cvc-complex-type.2.4.f: 'd' can occur a maximum of '3' times in the current sequence. This limit was exceeded. No child element is expected at this point.

This is slightly confusing, since a wildcard validated the element instances.

I'm committing a slight improvement for this case, and we now get an error message as following for the above use case,

cvc-complex-type.2.4.f: 'WC[##any]' can occur a maximum of '3' times in the current sequence. This limit was exceeded. No child element is expected at this point.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1094489 13f79535-47bb-0310-9956-ffa450edef68"
88afc7d61a44c250cd3fd7c44583229554eaf128,"Fixing a Javadoc typo.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1103152 13f79535-47bb-0310-9956-ffa450edef68"
1c77d0b29bf0b947e88310aadf0c036e93c3f3bd,"Fixing JIRA Issue #1421: http://issues.apache.org/jira/browse/XERCESJ-1421. We were calling previousSibling() when the node was in an inconsistent state, which would return the last child instead of null when the first child is being removed. We were just lucky to get the correct result from checkNormalizationAfterRemove(). Now it works by design and should be slightly faster when we're removing the first child. Patch thanks to Ludger Bnger. Also thanks to Thiwanka Somasiri for helping to investigate this issue and evaluating Ludger's patch.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1103164 13f79535-47bb-0310-9956-ffa450edef68"
9c1a2512e10ef80b70dbb45c0c0f681332b59b42,"Fixing Jira bug XERCESJ-1513 (https://issues.apache.org/jira/browse/XERCESJ-1513), by adding missing ranges to ""Nd"" category. Because the character code points may be bigger than 0xffff, the ranges need to be represented as an int array and not a String.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1129304 13f79535-47bb-0310-9956-ffa450edef68"
bf01f3979fbf5f12ce1e885263599ea45cbc26fe,"Fixing Jira bug XERCESJ-1511 (https://issues.apache.org/jira/browse/XERCESJ-1511), by making sure that when a pattern is fully parsed, the last token is EOF. That is, it's an error if the last token is a closing parenthesis.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1129306 13f79535-47bb-0310-9956-ffa450edef68"
6b4a70136c326a059d6ca22ee49085deda47edb7,"Fixing Jira bug XERCESJ-1512 (https://issues.apache.org/jira/browse/XERCESJ-1512), by capturing pattern facet when only the empty string is specified as the pattern value.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1129307 13f79535-47bb-0310-9956-ffa450edef68"
4c27d0a02f3c6c748e378a875f2fb387a8d87632,"Fixing Jira bug XERCESJ-1514 (https://issues.apache.org/jira/browse/XERCESJ-1514).

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1129316 13f79535-47bb-0310-9956-ffa450edef68"
42e44fcafc4956cb7cdac9089a881b4f8a747ece,"Fixing Jira bug XERCESJ-1515 (https://issues.apache.org/jira/browse/XERCESJ-1515), to only look for a key when the keyref has complete field values.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1129328 13f79535-47bb-0310-9956-ffa450edef68"
742a231849843b9c8344963ad4520944656301eb,"Reducing the initial footprint of the declared attrs SymbolHash (25% of the default size).

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1135017 13f79535-47bb-0310-9956-ffa450edef68"
4accc65f70fb00684708b04b9b9f84e77347863f,"The static field XSDHandler.ATTRIBUTE_TYPE should be accessed in a static way.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1135022 13f79535-47bb-0310-9956-ffa450edef68"
d7d748d02510b1e6d88e06f359b5a61da99c1b97,"Clean-up unused imports.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1135024 13f79535-47bb-0310-9956-ffa450edef68"
04353636a842b23608721b7cb2bea5f6120e392c,"Marking another immutable field final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1147663 13f79535-47bb-0310-9956-ffa450edef68"
831aff8843ff9e5685cca41fc2c25de570304afa,"committing fix for the JIRA issue XERCESJ-1518

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1148437 13f79535-47bb-0310-9956-ffa450edef68"
78d814b51a6adef640b35016f2ab8954eb57a4a0,"Memory usage improvement. The fBuckets field in the base class isn't used so make the array as small as possible.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1155066 13f79535-47bb-0310-9956-ffa450edef68"
02a0338d35c296af0e5b63df875aec15dcdd1b52,"Fixing JIRA Issue #1520: http://issues.apache.org/jira/browse/XERCESJ-1520. Corrects several problems with rehash() and removeEntry(), in particular a case where we were double counting cleared SoftReferences which could lead to fCount becoming negative.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1155192 13f79535-47bb-0310-9956-ffa450edef68"
51c3e1286d7923eb2ecbc97aade9d2cf5faa22b7,"JIRA Issue #1521: http://issues.apache.org/jira/browse/XERCESJ-1521. Compact the SoftReferenceSymbolTable if after cleaning out cleared SoftReferences the number of symbols drops below 25% of the table's load factor threshold.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1155386 13f79535-47bb-0310-9956-ffa450edef68"
cef6c8f8b1df5b562b4919537c6f56f9f4d94241,"JIRA Issue #1522: http://issues.apache.org/jira/browse/XERCESJ-1522. Removing trailing spaces from error messages.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1157205 13f79535-47bb-0310-9956-ffa450edef68"
0923792e3564e3fcb4555e13e3ff33baabea88be,"JIRA Issue #1522: http://issues.apache.org/jira/browse/XERCESJ-1522. Removing trailing spaces from error messages. Thanks to Jesse Glick for locating these occurrences.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1157452 13f79535-47bb-0310-9956-ffa450edef68"
c348dc6e7fc960db845b1fb1675febc12fdf84ce,"Fixing JIRA Issue #1523: http://issues.apache.org/jira/browse/XERCESJ-1523. Allow Xerces to be built with Java SE 7.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1157564 13f79535-47bb-0310-9956-ffa450edef68"
00a17a3b262a12dd95af7bfbdb1409ce690e0b04,"Fixing a bug. When the schema type is DTD: ""http://www.w3.org/TR/REC-xml"" we were only allowing XML 1.0 documents. DOM L3 requires XML 1.1 support.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1175661 13f79535-47bb-0310-9956-ffa450edef68"
5d5f24f5c535e872d6163f171fabe127734b7142,"Updating download links to Oracle and IBM JDKs.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1178051 13f79535-47bb-0310-9956-ffa450edef68"
c5befa0866bd59444da451fcdde9921037830711,"Fixing links to documentation on the Endorsed Standards Override Mechanism.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1178055 13f79535-47bb-0310-9956-ffa450edef68"
8637d5189145f5f1afcbed092e7baa2038861000,"Fixing JIRA Issue #1545: http://issues.apache.org/jira/browse/XERCESJ-1545. Allow docs to be built on Mac OS X and other Unix environments by running in AWT headless mode. Solution thanks to Joshua Root, slightly different than his suggested patch but does the same thing.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1212858 13f79535-47bb-0310-9956-ffa450edef68"
dfcafa6d026566a537d3690817d7ffb6b98fcb4f,"Update JDK 1.3 preferences.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1225423 13f79535-47bb-0310-9956-ffa450edef68"
dd1663e628dd731011960a540f1fe5cb4a76a846,"Minor performance improvement. Use String.lastIndexOf(int) instead of String.lastIndexOf(String).

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1225566 13f79535-47bb-0310-9956-ffa450edef68"
ae18c98a8342733312b8804b7efd6aa59621b79b,"Minor performance improvement. Use String.lastIndexOf(int) instead of String.lastIndexOf(String).

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1225567 13f79535-47bb-0310-9956-ffa450edef68"
4a7ee9a7af8cfc9ceabd66287a1b8244c48a1f77,"Updating the copyright year used in the API docs.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1226272 13f79535-47bb-0310-9956-ffa450edef68"
fe22b94ec914c23bbe6f5a6c38abcd5e54f74681,"Updating the copyright year in the NOTICE file.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1226274 13f79535-47bb-0310-9956-ffa450edef68"
1f0e880235695cf6edbfa2a3e8b48c153ea9c43f,"Updating the copyright year in the documentation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1226276 13f79535-47bb-0310-9956-ffa450edef68"
cd67c2343b4bb49c5fcfe3d3c410b6e761cfe01e,"Remove unused DEBUG flag.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1226507 13f79535-47bb-0310-9956-ffa450edef68"
1482eec34a65ed1032907ccf014238623c7949bf,"Mention that the jaxp.SourceValidator sample also accepts StAX input.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1240595 13f79535-47bb-0310-9956-ffa450edef68"
d3fd804eee90420e66c7b1f023f6ab7590ada7f4,"An additional fix for JIRA Issue #1523: http://issues.apache.org/jira/browse/XERCESJ-1523. Allow Xerces to be built with IBM Java 7 on AIX.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1244198 13f79535-47bb-0310-9956-ffa450edef68"
cdbc0f102a57737747afd14e2c72e0d2e845ee4b,"Fixing a typo in the Javadoc.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1299965 13f79535-47bb-0310-9956-ffa450edef68"
bd8cfdd4dcbad24d733e5e6be34af1435a24b604,"committing the same fix on trunk, for the commit that was made a moment ago on the schema-dev-1.1 branch.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1328735 13f79535-47bb-0310-9956-ffa450edef68"
ae712596cf50f70080e7c8d6d68c10f52bcab856,"reversing previous changes, as per new comments for jira issue XERCESJ-1559

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1333217 13f79535-47bb-0310-9956-ffa450edef68"
c341aafca21cac19859d7fcb4af1f7fdd42c697e,"Making several fields final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1335920 13f79535-47bb-0310-9956-ffa450edef68"
25c396026295cbe1c0b585684faf2c060d9ed8c9,"Making a field final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1335922 13f79535-47bb-0310-9956-ffa450edef68"
aed06f91561e4912298c5e548c8ae334fe00716f,"Fixing XERCESJ-1564: to intern the namespace name of QNames (using the symbol table) before using it.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1343961 13f79535-47bb-0310-9956-ffa450edef68"
992b5d9c24102ad20330d36c0a71162753a37449,"Enhancements to the hashing algorithms used in internal data structures within Xerces to make them more resistant to collisions. To improve the distribution a new hash function is randomly selected each time the number of items in a bucket exceeds a threshold.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1357381 13f79535-47bb-0310-9956-ffa450edef68"
c2b71821ee905b9ebf1299ab10bc76dba222289a,"Adding some Javadoc.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1357390 13f79535-47bb-0310-9956-ffa450edef68"
7a8446579857f923aa8583f3ff0dade32a65e1c1,"Refactor addSymbol() methods into smaller methods. May help the JIT with inlining.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1358350 13f79535-47bb-0310-9956-ffa450edef68"
2e1eeba2081d622b45fd43346c31c60e0720469a,"Use SAX2 APIs in samples. SAX1 is deprecated.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1358665 13f79535-47bb-0310-9956-ffa450edef68"
e3b6a2f255b023159213c76654d41aa1ce9821eb,"Clean-up. Removing unused and irrelevant fields from the sample.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1358668 13f79535-47bb-0310-9956-ffa450edef68"
979f96fd776c312c0020a2f0e6d1b57bb5951c9a,"When normalizing a String object to upper- or lower case one needs to be very careful not to rely on the default locale of the platform. This results from the fact that Turkish in particular does not map characters to their upper- or lower case equivalents in English. Where this could pose a problem, we force case conversion to be done according to an English locale.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1358670 13f79535-47bb-0310-9956-ffa450edef68"
900260bc88a25c1607b0e1d59d80a842e5b28eae,"Making a static field final.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1358672 13f79535-47bb-0310-9956-ffa450edef68"
88c9bad5ab8cdbbbc412b09b93444d6a011ebce0,"Fixing an NPE.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1358676 13f79535-47bb-0310-9956-ffa450edef68"
f8085af5645180945cef533549cda42423597885,"Fixing JIRA Issue #1574: http://issues.apache.org/jira/browse/XERCESJ-1574. Restoring behaviour from previous releases where UTF-16BE and UTF-16LE were returned as auto-detected encodings.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1363647 13f79535-47bb-0310-9956-ffa450edef68"
59e1887b7f61d04eac57a2a4d9bbb5e0c3dbd405,"Fixing a typo in the Javadoc.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1368777 13f79535-47bb-0310-9956-ffa450edef68"
cfde037c44ccf44991ddfd458701bce3124b6b1a,"Fixing potential NPE. Target namespace of a schema component could be null.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1371253 13f79535-47bb-0310-9956-ffa450edef68"
99bbee7e5aec4cb54e2552548de9a258e665e8c8,"Reducing visibility of some constants.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1375056 13f79535-47bb-0310-9956-ffa450edef68"
f586775cd04149031d8fbbf635f261afaa9ec080,"Fix Javadoc typo.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1375061 13f79535-47bb-0310-9956-ffa450edef68"
d642111bf47a18994abd2fcc4fc079fc1c5d3190,"Introducing a system property for controlling how string length is computed by the schema validator. When org.apache.xerces.impl.dv.xs.useCodePointCountForStringLength=true, the length of an xs:string or xs:anyURI value is calculated by counting the number of Unicode code points in the string. The value of the system property is false by default, preserving the long standing behaviour of computing length in Java chars (i.e. String.length()).

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1375610 13f79535-47bb-0310-9956-ffa450edef68"
fbda56a5cd03720862324d5b8ea7461c08a9cbe8,"Adding tests for the org.apache.xerces.impl.dv.xs.useCodePointCountForStringLength system property.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1375616 13f79535-47bb-0310-9956-ffa450edef68"
7a45a472bbe2ffe0335f9525dd44e74de4073cba,"Refer to the ElementPSVI interface instead of its implementation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1375622 13f79535-47bb-0310-9956-ffa450edef68"
df04bfcf0d890007007b7b745a60d419603568c0,"JIRA Issue #1581: https://issues.apache.org/jira/browse/XERCESJ-1581. Report multiple IDREF errors during DTD and XML Schema validation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1380445 13f79535-47bb-0310-9956-ffa450edef68"
76faee19ed5cafbea33b44a2ea748c4bc06c04f7,"JIRA Issue #1582: https://issues.apache.org/jira/browse/XERCESJ-1582. Fixing NPEs which could occur in each of the Node prefix / namespace query methods if the document element is null.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1380453 13f79535-47bb-0310-9956-ffa450edef68"
240ae5bf39f3311f46357b6bd61e33081fc51646,"Fixing a typo in a comment.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1391587 13f79535-47bb-0310-9956-ffa450edef68"
aa7dad3a815b1787cfe53f9337815887ceae4756,"Fixing a typo in a comment.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1391588 13f79535-47bb-0310-9956-ffa450edef68"
950ccae9c2d107593590bb8f597192a833ecd0be,"Fixing a typo in a comment.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1399511 13f79535-47bb-0310-9956-ffa450edef68"
32f57141697c3497a39fb1b9e1b7380c0f43434e,"Return true if the XML Schema 1.0 language identifier is passed to (the XML Schema 1.0 version of) SchemaFactory.isSchemaLanguageSupported(). This was already implemented on the XML Schema 1.1 development branch.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1400688 13f79535-47bb-0310-9956-ffa450edef68"
413e4e1824a030cd4800f7a0ae894d4907befc33,"Updating the copyright year used in the API docs.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1427810 13f79535-47bb-0310-9956-ffa450edef68"
b891a31316a893b8765f9f0c886b574e12c203a1,"Updating the copyright year in the NOTICE file.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1427812 13f79535-47bb-0310-9956-ffa450edef68"
fb0b1f85120d9967ad6018a2891ff4bf485fb42c,"Updating the copyright year in the documentation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1427817 13f79535-47bb-0310-9956-ffa450edef68"
13e845f95740e579f77a69ef457acd317435b9d2,"schema 1.0 commit: committing a minor fix to produce non null strings for XSD type names in error messages, when xsi:type attribute is used.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1428379 13f79535-47bb-0310-9956-ffa450edef68"
24d7c5308d0c7749f351cb0a2d64c34e1230ce7a,"Fixing JIRA Issue #1607: https://issues.apache.org/jira/browse/XERCESJ-1607. Specify the package name instead of the ""Version"" class to make information about the Xerces implementation available programmatically through the Java Package API.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1478124 13f79535-47bb-0310-9956-ffa450edef68"
f4fe82e7ef5c7608b771db9fe2f4ea8a955ff5f0,"Fixing JIRA Issue #1611: https://issues.apache.org/jira/browse/XERCESJ-1611. Adding a null check to guard against an NPE that can occur when the content-type returned from the URLconnection is null.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1478179 13f79535-47bb-0310-9956-ffa450edef68"
266e837852e0f0e3c8c1ad572b6fc4dbb4ded17b,"The only legal names in XML 1.0/1.1 documents are 'version', 'encoding' and 'standalone'. Replacing the generic call to the scanner with a specialized method which only allows these legal XML pseudo attribute names. This improves the performance of the XML scanner when it is processing the XML declaration.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1499506 13f79535-47bb-0310-9956-ffa450edef68"
62f930aed72aa7b03727c3987814a592c52724a5,"JIRA Issue #1617: https://issues.apache.org/jira/browse/XERCESJ-1617. Minor optimization to NodeImpl.lookupNamespaceURI(String). Patch thanks to Chris Simmons.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1502573 13f79535-47bb-0310-9956-ffa450edef68"
ea81a523aeb5b27d0b4670b4add4b6861dff0190,"Minor optimization to lookupNamespacePrefix().

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1502575 13f79535-47bb-0310-9956-ffa450edef68"
bb66eb10b3e0dd660bb283503a6470eab7a9631d,"Performance: Use array doubling in append(char[],int,int) for resizing the array. This was already being done in the other append() methods.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1507079 13f79535-47bb-0310-9956-ffa450edef68"
1b0c34a8131480ab1a09b9072b3c8b3d446c5e19,"Improving code formatting.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1507081 13f79535-47bb-0310-9956-ffa450edef68"
9f11a901c2046701babebc3324b75ac25f805125,"Improve the way in which Xerces counts parameter entity expansions so that it scales better towards the entity expansion limit like it does for general entities.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1513559 13f79535-47bb-0310-9956-ffa450edef68"
d57a952afedf50ccaad6e8b743cd355680dc8a69,"Javadoc improvements for the startPE() and scanEntityValue() methods.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1514806 13f79535-47bb-0310-9956-ffa450edef68"
bde4cc6b3dd3963088f9a7c7a3af04c3479420d1,"Updating the copyright year used in the API docs.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1555984 13f79535-47bb-0310-9956-ffa450edef68"
5c19e675b27050514d6de5de6588ee5329d35dd0,"Updating the copyright year in the NOTICE file.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1555987 13f79535-47bb-0310-9956-ffa450edef68"
eb9b417061b11a867af987ec5e4cbfc2bca9820f,"Updating the copyright year in the documentation.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1555990 13f79535-47bb-0310-9956-ffa450edef68"
cf739a37ddef17e7b8f1143d06382b39a3886684,"Create a new XML parser configuration with enhancements for the JAXP secure processing feature.

This new configuration supports the following properties that were defined for the JDK:

jdk.xml.entityExpansionLimit
jdk.xml.maxOccur
jdk.xml.totalEntitySizeLimit
jdk.xml.maxGeneralEntitySizeLimit
jdk.xml.maxParameterEntitySizeLimit

For now support will be limited to system properties and jaxp.properties.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1556006 13f79535-47bb-0310-9956-ffa450edef68"
cc0b8e6928964d7f69b1d6b9ede48372db030062,"Adding JUnit tests for org.apache.xerces.parsers.SecureProcessingConfiguration.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1556029 13f79535-47bb-0310-9956-ffa450edef68"
559ff6b7efe1e462c63b650162506a5344ce927e,"Adding a property 'jdk.xml.resolveExternalEntities' that can be used to globally disable the resolution of external general/parameters entities and the external DTD.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1564073 13f79535-47bb-0310-9956-ffa450edef68"
461babc36200f1ee286732e4a000021ab421a960,"Adding tests for the jdk.xml.resolveExternalEntities property.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1564510 13f79535-47bb-0310-9956-ffa450edef68"
fe82df6a4f9e644344308e82b904b49203dbcf72,"The EntityResolver should be invoked when jdk.xml.resolveExternalEntities is set to true and should not be invoked when the property has been set to false. Enhancing the tests to check for this expected behaviour.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1564517 13f79535-47bb-0310-9956-ffa450edef68"
219f15bf956c06e5939d5e6032188fac44270701,"Adding an @version tag.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1564913 13f79535-47bb-0310-9956-ffa450edef68"
e01076812d966bffe47346825fbc2f01776e2ebd,"JIRA Issue #1637: https://issues.apache.org/jira/browse/XERCESJ-1637. Removing dead code. Patch thanks to Elliotte Rusty Harold.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1612914 13f79535-47bb-0310-9956-ffa450edef68"
897d603510959d0f7d777058d13468362b4cf727,"committing fix for jira issue XERCESJ-1646 on trunk

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1631026 13f79535-47bb-0310-9956-ffa450edef68"
5c10e4f07a0e9de533f79b2f1320b49a20f9376e,"Fixing JIRA Issue #1651: https://issues.apache.org/jira/browse/XERCESJ-1651. \w should be processed as [#x0000-#x10FFFF]-[\p{P}\p{Z}\p{C}] as per the XML Schema specification.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1638344 13f79535-47bb-0310-9956-ffa450edef68"
e440b0ecd93a5fe74028bd6933eae204207a97e6,"Updating the copyright year used in the API docs.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1650978 13f79535-47bb-0310-9956-ffa450edef68"
06f1ec533256bf99aa96b71c448fd5741aa9cd18,"Updating the copyright year in the NOTICE file.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1650980 13f79535-47bb-0310-9956-ffa450edef68"
3f6f281914e07ae5502302b55e375dbeef78f2f5,"Some XMLStreamReader implementations throw an exception instead of returning null for properties they do not recognize. Tolerate an exception and assume that the XMLStreamReader does not provide interned strings. 

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1667114 13f79535-47bb-0310-9956-ffa450edef68"
3e90a47168a54d6608a95248aec3a96c24a186b1,"JIRA Issue #1659: https://issues.apache.org/jira/browse/XERCESJ-1659. Need to ensure that the test uses an English locale so that the number formatting matches in the exception messages. Fix thanks to Matthias Krueger.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1685662 13f79535-47bb-0310-9956-ffa450edef68"
d616d81f7899101eb21df6301d6e0fb008d11109,"Reducing code duplication. Factoring out buffer resizing into its own method.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1707341 13f79535-47bb-0310-9956-ffa450edef68"
aca16b894fa7a0085e0c93c29492d15c588db1b2,"Added a description to the resizeBuffer() method.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1707344 13f79535-47bb-0310-9956-ffa450edef68"
7f45da319ffc43c79403fbe86d0b5e474b39bf30,"Fixing typo in comment.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1707346 13f79535-47bb-0310-9956-ffa450edef68"
1cc69e831aabd77be7bb647b455ef9a2b7f765ee,"Fixing JIRA Issue #1667: https://issues.apache.org/jira/browse/XERCESJ-1667. Avoid filling in the stack trace of the ABORT exception. This can help prevent a ClassLoader memory leak.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1710695 13f79535-47bb-0310-9956-ffa450edef68"
bec2bcf7fbffa9a92fde743b660b43e1024330dd,"Fixing a defect. If the parser is reading an XML 1.1 document, the InternalEntityMonitor was not getting wired into the XML 1.1 pipeline.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1718451 13f79535-47bb-0310-9956-ffa450edef68"
1d747fe896bbfd8b301934642aa7a2f7e8e9e684,"Adding several tests for XML 1.1 documents.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1718477 13f79535-47bb-0310-9956-ffa450edef68"
2bbf5bb7400a9091b9b89d6df6862e81535ad949,"I am reverting a change I did long time ago to this file. I am restoring the logic in this file, that was in the original revision 906803. I think, the original code that I had changed in this file is not really wrong. I started looking at the code in this file, while studying the bug report XERCESJ-1669.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1747631 13f79535-47bb-0310-9956-ffa450edef68"
f01205b9883e94610a0ca0af7b2f9e4a0c02f9c3,"making a minor fix. This declaration private final JAXPNamespaceContextWrapper fNamespaceContext = new JAXPNamespaceContextWrapper(fSymbolTable); had an uninitialized fSymbolTable passed to the constructor 

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1785425 13f79535-47bb-0310-9956-ffa450edef68"
a3a260fed2714fb992fbac072fb841554e50ec5f,"as per discussion on the jira issue XERCESJ-1687, updating the XML Schema documentation

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1821882 13f79535-47bb-0310-9956-ffa450edef68"
3b3ea059a82b221818f6f7b08eef3d1285d9af03,"doing a minor correction to documentation

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1823129 13f79535-47bb-0310-9956-ffa450edef68"
d0825dc827aadb7595ae3ecd3d365c57c147fad0,"minor change to documentation

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1824739 13f79535-47bb-0310-9956-ffa450edef68"
53fffe65104fc15a9f1b4ac1e1e957799e0bb00d,"some changes to XML Schema 1.1 documentation

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1826537 13f79535-47bb-0310-9956-ffa450edef68"
0fa036a7b355fdbac558640e6cfb33e9b5056aca,"minor changes to documentation

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1826706 13f79535-47bb-0310-9956-ffa450edef68"
6ed8b9a261df630f43cb696370d08676a7e1a47a,"doing minor reordering of FAQ entries, reflecting the relative importance

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1829235 13f79535-47bb-0310-9956-ffa450edef68"
216cc1f1cd4efbea1b41bb69de1b2f8020864825,"mentioning 2.12.0 version number in build.xml file

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1829239 13f79535-47bb-0310-9956-ffa450edef68"
ddea409d2b4ec2d7231ec0df7840bebcf21c49b0,"updating Release Info page meta-data for 2.12.0 release

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1829248 13f79535-47bb-0310-9956-ffa450edef68"
b4bdc151f8156a6369b7df531372b79de318e38d,"minor changes to release info page

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1829329 13f79535-47bb-0310-9956-ffa450edef68"
a05269043f0054003007d9cb9d898b1f13166abc,"doing some edits in the documentation

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1829332 13f79535-47bb-0310-9956-ffa450edef68"
6a5578ae1447de32e7995a291a7ccc367d028ee9,"appending my code signing key to KEYS file

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1829346 13f79535-47bb-0310-9956-ffa450edef68"
536324a42f1e6b12dd309f1227f14b349e66a23f,"minor changes to documentation

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1829497 13f79535-47bb-0310-9956-ffa450edef68"
6cf5acdd7f1dc430d6004a19b9fa253db318de6b,"modifying copyright year in the NOTICE file & footer of all the docs pages

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1829622 13f79535-47bb-0310-9956-ffa450edef68"
a17872779c0574afd41b4767be57496b486f2483,"mentioning contributions of Octavian Nadolu & Radu Coravu

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1829634 13f79535-47bb-0310-9956-ffa450edef68"
c69f5fd6f1202cdf93287ebc1801be5e81ddf2d6,"committing fix as per discussion here, https://markmail.org/message/x5e5nreyj7eruyly on j-dev list

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1829683 13f79535-47bb-0310-9956-ffa450edef68"
8969dc14b4d25c471c1c20ab4e94dc2131dd40b7,"minor changes to release info meta-data for 2.12.0 release

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1831536 13f79535-47bb-0310-9956-ffa450edef68"
e5a239b96fd2cff6566a29e7a4a3a4a2bbf9b0d4,"writing few Xerces-J XSD 1.1 feature details, that were developed for 2.12.0 release

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1831752 13f79535-47bb-0310-9956-ffa450edef68"
012c27e7118aa9aa35042acdf48af350a50e501f,"making few changes to API documentation HTML information. Committing the meta-data, and HTML for the site.

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1834650 13f79535-47bb-0310-9956-ffa450edef68"
a7d3db1d0bdf40368e3d8a4770ea821546c07eea,"fixing a minor typo during previous commit

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1834699 13f79535-47bb-0310-9956-ffa450edef68"
2549ca605261ec6d506baaf03e6c22437703a65c,"committing minor change to documentation

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1837573 13f79535-47bb-0310-9956-ffa450edef68"
b2e1e13aca333995d30e2277ba545dc9b95ec005,"minor and trivial source code formatting improvement

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1838308 13f79535-47bb-0310-9956-ffa450edef68"
fa002acae8b44e482ba4f63c72783997ed203c5c,"minor changes to release notes, for XercesJ2 2.12.0 release

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1842774 13f79535-47bb-0310-9956-ffa450edef68"
23e9b761c62ef41694a0836da765fd367d23d644,"minor textual changes to Xerces docs

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1856526 13f79535-47bb-0310-9956-ffa450edef68"
cf0c517a41b31b0242b96ab1af9627a3ab07fcd2,"minor improvements to Xerces docs

git-svn-id: https://svn.apache.org/repos/asf/xerces/java/trunk@1857045 13f79535-47bb-0310-9956-ffa450edef68"
